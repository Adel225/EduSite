/*! For license information please see main.d639a1aa.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var i=n(853),r=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function u(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=u(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var j=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var T=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case m:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case C:return"Suspense";case _:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var N=Array.isArray,$=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},I=[],F=-1;function R(e){return{current:e}}function B(e){0>F||(e.current=I[F],I[F]=null,F--)}function W(e,t){F++,I[F]=e.current,e.current=t}var z=R(null),H=R(null),U=R(null),G=R(null);function V(e,t){switch(W(U,t),W(H,e),W(z,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ru(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=su(t=ru(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(z),W(z,e)}function q(){B(z),B(H),B(U)}function X(e){null!==e.memoizedState&&W(G,e);var t=z.current,n=su(t,e.type);t!==n&&(W(H,e),W(z,n))}function Y(e){H.current===e&&(B(z),B(H)),G.current===e&&(B(G),Xu._currentValue=L)}var K=Object.prototype.hasOwnProperty,Q=i.unstable_scheduleCallback,J=i.unstable_cancelCallback,Z=i.unstable_shouldYield,ee=i.unstable_requestPaint,te=i.unstable_now,ne=i.unstable_getCurrentPriorityLevel,ie=i.unstable_ImmediatePriority,re=i.unstable_UserBlockingPriority,se=i.unstable_NormalPriority,ae=i.unstable_LowPriority,oe=i.unstable_IdlePriority,le=i.log,ce=i.unstable_setDisableYieldValue,de=null,ue=null;function he(e){if("function"===typeof le&&ce(e),ue&&"function"===typeof ue.setStrictMode)try{ue.setStrictMode(de,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/ge|0)|0},pe=Math.log,ge=Math.LN2;var me=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var i=e.pendingLanes;if(0===i)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&i;return 0!==o?0!==(i=o&~s)?r=ye(i):0!==(a&=o)?r=ye(a):n||0!==(n=o&~e)&&(r=ye(n)):0!==(o=i&~s)?r=ye(o):0!==a?r=ye(a):n||0!==(n=i&~e)&&(r=ye(n)),0===r?0:0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:r}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=me;return 0===(4194048&(me<<=1))&&(me=256),e}function Ce(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-fe(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-fe(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function je(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Oe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Me=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Me,Ne="__reactProps$"+Me,$e="__reactContainer$"+Me,De="__reactEvents$"+Me,Le="__reactListeners$"+Me,Ie="__reactHandles$"+Me,Fe="__reactResources$"+Me,Re="__reactMarker$"+Me;function Be(e){delete e[Pe],delete e[Ne],delete e[De],delete e[Le],delete e[Ie]}function We(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[$e]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bu(e);null!==e;){if(n=e[Pe])return n;e=bu(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[Pe]||e[$e]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ue(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Re]=!0}var Ve=new Set,qe={};function Xe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(qe[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Ke,Qe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(r=t,K.call(et,r)||!K.call(Ze,r)&&(Je.test(r)?et[r]=!0:(Ze[r]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var r}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function it(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function rt(e){if(void 0===Ke)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ke=t&&t[1]||"",Qe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ke+e+Qe}var st=!1;function at(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(r){var i=r}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){i=s}e.call(n.prototype)}}else{try{throw Error()}catch(a){i=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&i&&"string"===typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(r=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;if(i===l.length||r===c.length)for(i=l.length-1,r=c.length-1;1<=i&&0<=r&&l[i]!==c[r];)r--;for(;1<=i&&0<=r;i--,r--)if(l[i]!==c[r]){if(1!==i||1!==r)do{if(i--,0>--r||l[i]!==c[r]){var d="\n"+l[i].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}}while(1<=i&&0<=r);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return rt("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=dt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=dt(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function gt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,i,r,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,ct(t)):null!=n?yt(e,a,ct(n)):null!=i&&e.removeAttribute("value"),null==r&&null!=s&&(e.defaultChecked=!!s),null!=r&&(e.checked=r&&"function"!==typeof r&&"symbol"!==typeof r),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function vt(e,t,n,i,r,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:r)&&"symbol"!==typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(a(92));if(N(i)){if(1<i.length)throw Error(a(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&_t(e,r,i)}else for(var s in t)t.hasOwnProperty(s)&&_t(e,s,t[s])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),jt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tt(e){return jt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ot=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Nt=null;function $t(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[Ne]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[Ne]||null;if(!r)throw Error(a(90));mt(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&ht(i)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Lt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==Pt||null!==Nt)&&(Wc(),Pt&&(t=Pt,e=Nt,Nt=Pt=null,$t(t),e)))for(t=0;t<e.length;t++)$t(e[t])}}function It(e,t){var n=e.stateNode;if(null===n)return null;var i=n[Ne]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Rt=!1;if(Ft)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(Nh){Rt=!1}var Wt=null,zt=null,Ht=null;function Ut(){if(Ht)return Ht;var e,t,n=zt,i=n.length,r="value"in Wt?Wt.value:Wt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return Ht=r.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Vt(){return!0}function qt(){return!1}function Xt(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Vt:qt,this.isPropagationStopped=qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),t}var Yt,Kt,Qt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Xt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Xt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qt&&(Qt&&"mousemove"===e.type?(Yt=e.screenX-Qt.screenX,Kt=e.screenY-Qt.screenY):Kt=Yt=0,Qt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Kt}}),rn=Xt(nn),sn=Xt(h({},nn,{dataTransfer:0})),an=Xt(h({},en,{relatedTarget:0})),on=Xt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Xt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Xt(h({},Jt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var gn=Xt(h({},en,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Xt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Xt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Xt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Xt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Xt(h({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],Sn=Ft&&"CompositionEvent"in window,Cn=null;Ft&&"documentMode"in document&&(Cn=document.documentMode);var _n=Ft&&"TextEvent"in window&&!Cn,kn=Ft&&(!Sn||Cn&&8<Cn&&11>=Cn),An=String.fromCharCode(32),En=!1;function jn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var Mn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Mn[e.type]:"textarea"===t}function Nn(e,t,n,i){Pt?Nt?Nt.push(i):Nt=[i]:Pt=i,0<(t=Ud(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var $n=null,Dn=null;function Ln(e){Ld(e,0)}function In(e){if(ht(He(e)))return e}function Fn(e,t){if("change"===e)return t}var Rn=!1;if(Ft){var Bn;if(Ft){var Wn="oninput"in document;if(!Wn){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),Wn="function"===typeof zn.oninput}Bn=Wn}else Bn=!1;Rn=Bn&&(!document.documentMode||9<document.documentMode)}function Hn(){$n&&($n.detachEvent("onpropertychange",Un),Dn=$n=null)}function Un(e){if("value"===e.propertyName&&In(Dn)){var t=[];Nn(t,Dn,e,Mt(e)),Lt(Ln,t)}}function Gn(e,t,n){"focusin"===e?(Hn(),Dn=n,($n=t).attachEvent("onpropertychange",Un)):"focusout"===e&&Hn()}function Vn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return In(Dn)}function qn(e,t){if("click"===e)return In(t)}function Xn(e,t){if("input"===e||"change"===e)return In(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Kn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!K.call(t,r)||!Yn(e[r],t[r]))return!1}return!0}function Qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,i=Qn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Qn(i)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ei(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function ti(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ni=Ft&&"documentMode"in document&&11>=document.documentMode,ii=null,ri=null,si=null,ai=!1;function oi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ai||null==ii||ii!==ft(i)||("selectionStart"in(i=ii)&&ti(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},si&&Kn(si,i)||(si=i,0<(i=Ud(ri,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},di={},ui={};function hi(e){if(di[e])return di[e];if(!ci[e])return e;var t,n=ci[e];for(t in n)if(n.hasOwnProperty(t)&&t in ui)return di[e]=n[t];return e}Ft&&(ui=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);var fi=hi("animationend"),pi=hi("animationiteration"),gi=hi("animationstart"),mi=hi("transitionrun"),vi=hi("transitionstart"),yi=hi("transitioncancel"),bi=hi("transitionend"),xi=new Map,wi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(e,t){xi.set(e,t),Xe(t,[e])}wi.push("scrollEnd");var Ci=new WeakMap;function _i(e,t){if("object"===typeof e&&null!==e){var n=Ci.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Ci.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var ki=[],Ai=0,Ei=0;function ji(){for(var e=Ai,t=Ei=Ai=0;t<e;){var n=ki[t];ki[t++]=null;var i=ki[t];ki[t++]=null;var r=ki[t];ki[t++]=null;var s=ki[t];if(ki[t++]=null,null!==i&&null!==r){var a=i.pending;null===a?r.next=r:(r.next=a.next,a.next=r),i.pending=r}0!==s&&Pi(n,r,s)}}function Ti(e,t,n,i){ki[Ai++]=e,ki[Ai++]=t,ki[Ai++]=n,ki[Ai++]=i,Ei|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Oi(e,t,n,i){return Ti(e,t,n,i),Ni(e)}function Mi(e,t){return Ti(e,null,null,t),Ni(e)}function Pi(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var r=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(i=s.alternate)&&(i.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(r=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,r&&null!==t&&(r=31-fe(n),null===(i=(e=s.hiddenUpdates)[r])?e[r]=[t]:i.push(t),t.lane=536870912|n),s):null}function Ni(e){if(50<Pc)throw Pc=0,Nc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var $i={};function Di(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(e,t,n,i){return new Di(e,t,n,i)}function Ii(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fi(e,t){var n=e.alternate;return null===n?((n=Li(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ri(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Bi(e,t,n,i,r,s){var o=0;if(i=e,"function"===typeof e)Ii(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,z.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Li(31,n,t,r)).elementType=E,e.lanes=s,e;case m:return Wi(n.children,r,s,t);case v:o=8,r|=24;break;case y:return(e=Li(12,n,t,2|r)).elementType=y,e.lanes=s,e;case C:return(e=Li(13,n,t,r)).elementType=C,e.lanes=s,e;case _:return(e=Li(19,n,t,r)).elementType=_,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case w:o=10;break e;case x:o=9;break e;case S:o=11;break e;case k:o=14;break e;case A:o=16,i=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),i=null}return(t=Li(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Wi(e,t,n,i){return(e=Li(7,e,i,t)).lanes=n,e}function zi(e,t,n){return(e=Li(6,e,null,t)).lanes=n,e}function Hi(e,t,n){return(t=Li(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ui=[],Gi=0,Vi=null,qi=0,Xi=[],Yi=0,Ki=null,Qi=1,Ji="";function Zi(e,t){Ui[Gi++]=qi,Ui[Gi++]=Vi,Vi=e,qi=t}function er(e,t,n){Xi[Yi++]=Qi,Xi[Yi++]=Ji,Xi[Yi++]=Ki,Ki=e;var i=Qi;e=Ji;var r=32-fe(i)-1;i&=~(1<<r),n+=1;var s=32-fe(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Qi=1<<32-fe(t)+r|n<<r|i,Ji=s+e}else Qi=1<<s|n<<r|i,Ji=e}function tr(e){null!==e.return&&(Zi(e,1),er(e,1,0))}function nr(e){for(;e===Vi;)Vi=Ui[--Gi],Ui[Gi]=null,qi=Ui[--Gi],Ui[Gi]=null;for(;e===Ki;)Ki=Xi[--Yi],Xi[Yi]=null,Ji=Xi[--Yi],Xi[Yi]=null,Qi=Xi[--Yi],Xi[Yi]=null}var ir=null,rr=null,sr=!1,ar=null,or=!1,lr=Error(a(519));function cr(e){throw gr(_i(Error(a(418,"")),e)),lr}function dr(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Pe]=e,t[Ne]=i,n){case"dialog":Id("cancel",t),Id("close",t);break;case"iframe":case"object":case"embed":Id("load",t);break;case"video":case"audio":for(n=0;n<$d.length;n++)Id($d[n],t);break;case"source":Id("error",t);break;case"img":case"image":case"link":Id("error",t),Id("load",t);break;case"details":Id("toggle",t);break;case"input":Id("invalid",t),vt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ut(t);break;case"select":Id("invalid",t);break;case"textarea":Id("invalid",t),wt(t,i.value,i.defaultValue,i.children),ut(t)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Kd(t.textContent,n)?(null!=i.popover&&(Id("beforetoggle",t),Id("toggle",t)),null!=i.onScroll&&Id("scroll",t),null!=i.onScrollEnd&&Id("scrollend",t),null!=i.onClick&&(t.onclick=Qd),t=!0):t=!1,t||cr(e)}function ur(e){for(ir=e.return;ir;)switch(ir.tag){case 5:case 13:return void(or=!1);case 27:case 3:return void(or=!0);default:ir=ir.return}}function hr(e){if(e!==ir)return!1;if(!sr)return ur(e),sr=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||au(e.type,e.memoizedProps)),t=!t),t&&rr&&cr(e),ur(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){rr=vu(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}rr=null}}else 27===n?(n=rr,fu(e.type)?(e=yu,yu=null,rr=e):rr=n):rr=ir?vu(e.stateNode.nextSibling):null;return!0}function fr(){rr=ir=null,sr=!1}function pr(){var e=ar;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),ar=null),e}function gr(e){null===ar?ar=[e]:ar.push(e)}var mr=R(null),vr=null,yr=null;function br(e,t,n){W(mr,t._currentValue),t._currentValue=n}function xr(e){e._currentValue=mr.current,B(mr)}function wr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Sr(e,t,n,i){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var s=r.dependencies;if(null!==s){var o=r.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=r;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wr(s.return,n,e),i||(o=null);break e}s=l.next}}else if(18===r.tag){if(null===(o=r.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),wr(o,n,e),o=null}else o=r.child;if(null!==o)o.return=r;else for(o=r;null!==o;){if(o===e){o=null;break}if(null!==(r=o.sibling)){r.return=o.return,o=r;break}o=o.return}r=o}}function Cr(e,t,n,i){e=null;for(var r=t,s=!1;null!==r;){if(!s)if(0!==(524288&r.flags))s=!0;else if(0!==(262144&r.flags))break;if(10===r.tag){var o=r.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=r.type;Yn(r.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(r===G.current){if(null===(o=r.alternate))throw Error(a(387));o.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(null!==e?e.push(Xu):e=[Xu])}r=r.return}null!==e&&Sr(t,e,n,i),t.flags|=262144}function _r(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function kr(e){vr=e,yr=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ar(e){return jr(vr,e)}function Er(e,t){return null===vr&&kr(e),jr(e,t)}function jr(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yr){if(null===e)throw Error(a(308));yr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yr=yr.next=t;return n}var Tr="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Or=i.unstable_scheduleCallback,Mr=i.unstable_NormalPriority,Pr={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nr(){return{controller:new Tr,data:new Map,refCount:0}}function $r(e){e.refCount--,0===e.refCount&&Or(Mr,function(){e.controller.abort()})}var Dr=null,Lr=0,Ir=0,Fr=null;function Rr(){if(0===--Lr&&null!==Dr){null!==Fr&&(Fr.status="fulfilled");var e=Dr;Dr=null,Ir=0,Fr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Br=$.S;$.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Dr){var n=Dr=[];Lr=0,Ir=Td(),Fr={status:"pending",value:void 0,then:function(e){n.push(e)}}}Lr++,t.then(Rr,Rr)}(0,t),null!==Br&&Br(e,t)};var Wr=R(null);function zr(){var e=Wr.current;return null!==e?e:ic.pooledCache}function Hr(e,t){W(Wr,null===t?Wr.current:t.pool)}function Ur(){var e=zr();return null===e?null:{parent:Pr._currentValue,pool:e}}var Gr=Error(a(460)),Vr=Error(a(474)),qr=Error(a(542)),Xr={then:function(){}};function Yr(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Kr(){}function Qr(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Kr,Kr),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Kr,Kr);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Jr=t,Gr}}var Jr=null;function Zr(){if(null===Jr)throw Error(a(459));var e=Jr;return Jr=null,e}function es(e){if(e===Gr||e===qr)throw Error(a(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function rs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&nc)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Ni(e),Pi(e,null,n),t}return Ti(e,i,t,n),Ni(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function os(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==Fr)throw Fr}}function ds(e,t,n,i){ls=!1;var r=e.updateQueue;ts=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(a=0,d=c=l=null,o=s;;){var f=-536870913&o.lane,p=f!==o.lane;if(p?(sc&f)===f:(i&f)===f){0!==f&&f===Ir&&(ls=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var g=e,m=o;f=t;var v=n;switch(m.tag){case 1:if("function"===typeof(g=m.payload)){u=g.call(v,u,f);break e}u=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(f="function"===typeof(g=m.payload)?g.call(v,u,f):g)||void 0===f)break e;u=h({},u,f);break e;case 2:ts=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=r.callbacks)?r.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=f;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(p=o).next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null===s&&(r.shared.lanes=0),fc|=a,e.lanes=a,e.memoizedState=u}}function us(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)us(n[e],t)}var fs=R(null),ps=R(0);function gs(e,t){W(ps,e=uc),W(fs,t),uc=e|t.baseLanes}function ms(){W(ps,uc),W(fs,fs.current)}function vs(){uc=ps.current,B(fs),B(ps)}var ys=0,bs=null,xs=null,ws=null,Ss=!1,Cs=!1,_s=!1,ks=0,As=0,Es=null,js=0;function Ts(){throw Error(a(321))}function Os(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Ms(e,t,n,i,r,s){return ys=s,bs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=null===e||null===e.memoizedState?Ga:Va,_s=!1,s=n(i,r),_s=!1,Cs&&(s=Ns(t,n,i,r)),Ps(e),s}function Ps(e){$.H=Ua;var t=null!==xs&&null!==xs.next;if(ys=0,ws=xs=bs=null,Ss=!1,As=0,Es=null,t)throw Error(a(300));null===e||Eo||null!==(e=e.dependencies)&&_r(e)&&(Eo=!0)}function Ns(e,t,n,i){bs=e;var r=0;do{if(Cs&&(Es=null),As=0,Cs=!1,25<=r)throw Error(a(301));if(r+=1,ws=xs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}$.H=qa,s=t(n,i)}while(Cs);return s}function $s(){var e=$.H,t=e.useState()[0];return t="function"===typeof t.then?Bs(t):t,e=e.useState()[0],(null!==xs?xs.memoizedState:null)!==e&&(bs.flags|=1024),t}function Ds(){var e=0!==ks;return ks=0,e}function Ls(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Is(e){if(Ss){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ss=!1}ys=0,ws=xs=bs=null,Cs=!1,As=ks=0,Es=null}function Fs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?bs.memoizedState=ws=e:ws=ws.next=e,ws}function Rs(){if(null===xs){var e=bs.alternate;e=null!==e?e.memoizedState:null}else e=xs.next;var t=null===ws?bs.memoizedState:ws.next;if(null!==t)ws=t,xs=e;else{if(null===e){if(null===bs.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(xs=e).memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},null===ws?bs.memoizedState=ws=e:ws=ws.next=e}return ws}function Bs(e){var t=As;return As+=1,null===Es&&(Es=[]),e=Qr(Es,e,t),t=bs,null===(null===ws?t.memoizedState:ws.next)&&(t=t.alternate,$.H=null===t||null===t.memoizedState?Ga:Va),e}function Ws(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Bs(e);if(e.$$typeof===w)return Ar(e)}throw Error(a(438,String(e)))}function zs(e){var t=null,n=bs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=bs.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=j;return t.index++,n}function Hs(e,t){return"function"===typeof t?t(e):t}function Us(e){return Gs(Rs(),xs,e)}function Gs(e,t,n){var i=e.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=n;var r=e.baseQueue,s=i.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}t.baseQueue=r=s,i.pending=null}if(s=e.baseState,null===r)e.memoizedState=s;else{var l=o=null,c=null,d=t=r.next,u=!1;do{var h=-536870913&d.lane;if(h!==d.lane?(sc&h)===h:(ys&h)===h){var f=d.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),h===Ir&&(u=!0);else{if((ys&f)===f){d=d.next,f===Ir&&(u=!0);continue}h={lane:0,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=h,o=s):c=c.next=h,bs.lanes|=f,fc|=f}h=d.action,_s&&n(s,h),s=d.hasEagerState?d.eagerState:n(s,h)}else f={lane:h,revertLane:d.revertLane,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,bs.lanes|=h,fc|=h;d=d.next}while(null!==d&&d!==t);if(null===c?o=s:c.next=l,!Yn(s,e.memoizedState)&&(Eo=!0,u&&null!==(n=Fr)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,i.lastRenderedState=s}return null===r&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Vs(e){var t=Rs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);Yn(s,t.memoizedState)||(Eo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function qs(e,t,n){var i=bs,r=Rs(),s=sr;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((xs||r).memoizedState,n);if(o&&(r.memoizedState=n,Eo=!0),r=r.queue,ma(2048,8,Ks.bind(null,i,r,e),[e]),r.getSnapshot!==t||o||null!==ws&&1&ws.memoizedState.tag){if(i.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Ys.bind(null,i,r,n,t),null),null===ic)throw Error(a(349));s||0!==(124&ys)||Xs(i,t,n)}return n}function Xs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ys(e,t,n,i){t.value=n,t.getSnapshot=i,Qs(t)&&Js(e)}function Ks(e,t,n){return n(function(){Qs(t)&&Js(e)})}function Qs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(i){return!0}}function Js(e){var t=Mi(e,2);null!==t&&Lc(t,e,2)}function Zs(e){var t=Fs();if("function"===typeof e){var n=e;if(e=n(),_s){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function ea(e,t,n,i){return e.baseState=n,Gs(e,xs,"function"===typeof i?i:Hs)}function ta(e,t,n,i,r){if(Wa(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==$.T?n(!0):s.isTransition=!1,i(s),null===(n=t.pending)?(s.next=t.pending=s,na(t,s)):(s.next=n.next,t.pending=n.next=s)}}function na(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var s=$.T,a={};$.T=a;try{var o=n(r,i),l=$.S;null!==l&&l(a,o),ia(e,t,o)}catch(c){sa(e,t,c)}finally{$.T=s}}else try{ia(e,t,s=n(r,i))}catch(d){sa(e,t,d)}}function ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ra(e,t,n)},function(n){return sa(e,t,n)}):ra(e,t,n)}function ra(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function sa(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==i)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function oa(e,t){return t}function la(e,t){if(sr){var n=ic.formState;if(null!==n){e:{var i=bs;if(sr){if(rr){t:{for(var r=rr,s=or;8!==r.nodeType;){if(!s){r=null;break t}if(null===(r=vu(r.nextSibling))){r=null;break t}}r="F!"===(s=r.data)||"F"===s?r:null}if(r){rr=vu(r.nextSibling),i="F!"===r.data;break e}}cr(i)}i=!1}i&&(t=n[0])}}return(n=Fs()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},n.queue=i,n=Fa.bind(null,bs,i),i.dispatch=n,i=Zs(!1),s=Ba.bind(null,bs,!1,i.queue),r={state:t,dispatch:null,action:e,pending:null},(i=Fs()).queue=r,n=ta.bind(null,bs,r,s,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function ca(e){return da(Rs(),xs,e)}function da(e,t,n){if(t=Gs(e,t,oa)[0],e=Us(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var i=Bs(t)}catch(a){if(a===Gr)throw qr;throw a}else i=t;var r=(t=Rs()).queue,s=r.dispatch;return n!==t.memoizedState&&(bs.flags|=2048,fa(9,{destroy:void 0,resource:void 0},ua.bind(null,r,n),null)),[i,s,e]}function ua(e,t){e.action=t}function ha(e){var t=Rs(),n=xs;if(null!==n)return da(t,n,e);Rs(),t=t.memoizedState;var i=(n=Rs()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function fa(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},null===(t=bs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function pa(){return Rs().memoizedState}function ga(e,t,n,i){var r=Fs();i=void 0===i?null:i,bs.flags|=e,r.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},n,i)}function ma(e,t,n,i){var r=Rs();i=void 0===i?null:i;var s=r.memoizedState.inst;null!==xs&&null!==i&&Os(i,xs.memoizedState.deps)?r.memoizedState=fa(t,s,n,i):(bs.flags|=e,r.memoizedState=fa(1|t,s,n,i))}function va(e,t){ga(8390656,8,e,t)}function ya(e,t){ma(2048,8,e,t)}function ba(e,t){return ma(4,2,e,t)}function xa(e,t){return ma(4,4,e,t)}function wa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Sa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ma(4,4,wa.bind(null,t,e),n)}function Ca(){}function _a(e,t){var n=Rs();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&Os(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=Rs();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&Os(t,i[1]))return i[0];if(i=e(),_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[i,t],i}function Aa(e,t,n){return void 0===n||0!==(1073741824&ys)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),bs.lanes|=e,fc|=e,n)}function Ea(e,t,n,i){return Yn(n,t)?n:null!==fs.current?(e=Aa(e,n,i),Yn(e,t)||(Eo=!0),e):0===(42&ys)?(Eo=!0,e.memoizedState=n):(e=Dc(),bs.lanes|=e,fc|=e,t)}function ja(e,t,n,i,r){var s=D.p;D.p=0!==s&&8>s?s:8;var a=$.T,o={};$.T=o,Ba(e,!1,t,n);try{var l=r(),c=$.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ra(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),i}(l,i),$c());else Ra(e,t,i,$c())}catch(d){Ra(e,t,{then:function(){},status:"rejected",reason:d},$c())}finally{D.p=s,$.T=a}}function Ta(){}function Oa(e,t,n,i){if(5!==e.tag)throw Error(a(476));var r=Ma(e).queue;ja(e,r,t,L,null===n?Ta:function(){return Pa(e),n(i)})}function Ma(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Pa(e){Ra(e,Ma(e).next.queue,{},$c())}function Na(){return Ar(Xu)}function $a(){return Rs().memoizedState}function Da(){return Rs().memoizedState}function La(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=$c(),i=ss(t,e=rs(n),n);return null!==i&&(Lc(i,t,n),as(i,t,n)),t={cache:Nr()},void(e.payload=t)}t=t.return}}function Ia(e,t,n){var i=$c();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Wa(e)?za(t,n):null!==(n=Oi(e,t,n,i))&&(Lc(n,e,i),Ha(n,t,i))}function Fa(e,t,n){Ra(e,t,n,$c())}function Ra(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wa(e))za(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Yn(o,a))return Ti(e,t,r,0),null===ic&&ji(),!1}catch(l){}if(null!==(n=Oi(e,t,r,i)))return Lc(n,e,i),Ha(n,t,i),!0}return!1}function Ba(e,t,n,i){if(i={lane:2,revertLane:Td(),action:i,hasEagerState:!1,eagerState:null,next:null},Wa(e)){if(t)throw Error(a(479))}else null!==(t=Oi(e,n,i,2))&&Lc(t,e,2)}function Wa(e){var t=e.alternate;return e===bs||null!==t&&t===bs}function za(e,t){Cs=Ss=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ua={readContext:Ar,use:Ws,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useLayoutEffect:Ts,useInsertionEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useSyncExternalStore:Ts,useId:Ts,useHostTransitionStatus:Ts,useFormState:Ts,useActionState:Ts,useOptimistic:Ts,useMemoCache:Ts,useCacheRefresh:Ts},Ga={readContext:Ar,use:Ws,useCallback:function(e,t){return Fs().memoizedState=[e,void 0===t?null:t],e},useContext:Ar,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Fs();t=void 0===t?null:t;var i=e();if(_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Fs();if(void 0!==n){var r=n(t);if(_s){he(!0);try{n(t)}finally{he(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=Ia.bind(null,bs,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Fs().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Fa.bind(null,bs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ca,useDeferredValue:function(e,t){return Aa(Fs(),e,t)},useTransition:function(){var e=Zs(!1);return e=ja.bind(null,bs,e.queue,!0,!1),Fs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=bs,r=Fs();if(sr){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===ic)throw Error(a(349));0!==(124&sc)||Xs(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,va(Ks.bind(null,i,s,e),[e]),i.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Ys.bind(null,i,s,n,t),null),n},useId:function(){var e=Fs(),t=ic.identifierPrefix;if(sr){var n=Ji;t="\xab"+t+"R"+(n=(Qi&~(1<<32-fe(Qi)-1)).toString(32)+n),0<(n=ks++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=js++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Na,useFormState:la,useActionState:la,useOptimistic:function(e){var t=Fs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ba.bind(null,bs,!0,n),n.dispatch=t,[e,t]},useMemoCache:zs,useCacheRefresh:function(){return Fs().memoizedState=La.bind(null,bs)}},Va={readContext:Ar,use:Ws,useCallback:_a,useContext:Ar,useEffect:ya,useImperativeHandle:Sa,useInsertionEffect:ba,useLayoutEffect:xa,useMemo:ka,useReducer:Us,useRef:pa,useState:function(){return Us(Hs)},useDebugValue:Ca,useDeferredValue:function(e,t){return Ea(Rs(),xs.memoizedState,e,t)},useTransition:function(){var e=Us(Hs)[0],t=Rs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:qs,useId:$a,useHostTransitionStatus:Na,useFormState:ca,useActionState:ca,useOptimistic:function(e,t){return ea(Rs(),0,e,t)},useMemoCache:zs,useCacheRefresh:Da},qa={readContext:Ar,use:Ws,useCallback:_a,useContext:Ar,useEffect:ya,useImperativeHandle:Sa,useInsertionEffect:ba,useLayoutEffect:xa,useMemo:ka,useReducer:Vs,useRef:pa,useState:function(){return Vs(Hs)},useDebugValue:Ca,useDeferredValue:function(e,t){var n=Rs();return null===xs?Aa(n,e,t):Ea(n,xs.memoizedState,e,t)},useTransition:function(){var e=Vs(Hs)[0],t=Rs().memoizedState;return["boolean"===typeof e?e:Bs(e),t]},useSyncExternalStore:qs,useId:$a,useHostTransitionStatus:Na,useFormState:ha,useActionState:ha,useOptimistic:function(e,t){var n=Rs();return null!==xs?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:zs,useCacheRefresh:Da},Xa=null,Ya=0;function Ka(e){var t=Ya;return Ya+=1,null===Xa&&(Xa=[]),Qr(Xa,e,t)}function Qa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ja(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Za(e){return(0,e._init)(e._payload)}function eo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(e,t){return(e=Fi(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=67108866,n):i:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=zi(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===m?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&Za(s)===t.type)?(Qa(t=r(t,n.props),n),t.return=e,t):(Qa(t=Bi(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hi(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,s){return null===t||7!==t.tag?((t=Wi(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=zi(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Qa(n=Bi(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Hi(t,e.mode,n)).return=e,t;case A:return h(e,t=(0,t._init)(t._payload),n)}if(N(t)||O(t))return(t=Wi(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ka(t),n);if(t.$$typeof===w)return h(e,Er(e,t),n);Ja(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===r?c(e,t,n,i):null;case g:return n.key===r?d(e,t,n,i):null;case A:return f(e,t,n=(r=n._init)(n._payload),i)}if(N(n)||O(n))return null!==r?null:u(e,t,n,i,null);if("function"===typeof n.then)return f(e,t,Ka(n),i);if(n.$$typeof===w)return f(e,t,Er(e,n),i);Ja(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case p:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case g:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case A:return v(e,t,n,i=(0,i._init)(i._payload),r)}if(N(i)||O(i))return u(t,e=e.get(n)||null,i,r,null);if("function"===typeof i.then)return v(e,t,n,Ka(i),r);if(i.$$typeof===w)return v(e,t,n,Er(t,i),r);Ja(t,i)}return null}function y(l,c,d,u){if("object"===typeof d&&null!==d&&d.type===m&&null===d.key&&(d=d.props.children),"object"===typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===m){if(7===c.tag){n(l,c.sibling),(u=r(c,d.props.children)).return=l,l=u;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===A&&Za(b)===c.type){n(l,c.sibling),Qa(u=r(c,d.props),d),u.return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}d.type===m?((u=Wi(d.props.children,l.mode,u,d.key)).return=l,l=u):(Qa(u=Bi(d.type,d.key,d.props,null,l.mode,u),d),u.return=l,l=u)}return o(l);case g:e:{for(b=d.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(l,c.sibling),(u=r(c,d.children||[])).return=l,l=u;break e}n(l,c);break}t(l,c),c=c.sibling}(u=Hi(d,l.mode,u)).return=l,l=u}return o(l);case A:return y(l,c,d=(b=d._init)(d._payload),u)}if(N(d))return function(r,a,o,l){for(var c=null,d=null,u=a,p=a=0,g=null;null!==u&&p<o.length;p++){u.index>p?(g=u,u=null):g=u.sibling;var m=f(r,u,o[p],l);if(null===m){null===u&&(u=g);break}e&&u&&null===m.alternate&&t(r,u),a=s(m,a,p),null===d?c=m:d.sibling=m,d=m,u=g}if(p===o.length)return n(r,u),sr&&Zi(r,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(r,o[p],l))&&(a=s(u,a,p),null===d?c=u:d.sibling=u,d=u);return sr&&Zi(r,p),c}for(u=i(u);p<o.length;p++)null!==(g=v(u,r,p,o[p],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?p:g.key),a=s(g,a,p),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(r,e)}),sr&&Zi(r,p),c}(l,c,d,u);if(O(d)){if("function"!==typeof(b=O(d)))throw Error(a(150));return function(r,o,l,c){if(null==l)throw Error(a(151));for(var d=null,u=null,p=o,g=o=0,m=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(m=p,p=null):m=p.sibling;var b=f(r,p,y.value,c);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(r,p),o=s(b,o,g),null===u?d=b:u.sibling=b,u=b,p=m}if(y.done)return n(r,p),sr&&Zi(r,g),d;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(r,y.value,c))&&(o=s(y,o,g),null===u?d=y:u.sibling=y,u=y);return sr&&Zi(r,g),d}for(p=i(p);!y.done;g++,y=l.next())null!==(y=v(p,r,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=s(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&p.forEach(function(e){return t(r,e)}),sr&&Zi(r,g),d}(l,c,d=b.call(d),u)}if("function"===typeof d.then)return y(l,c,Ka(d),u);if(d.$$typeof===w)return y(l,c,Er(l,d),u);Ja(l,d)}return"string"===typeof d&&""!==d||"number"===typeof d||"bigint"===typeof d?(d=""+d,null!==c&&6===c.tag?(n(l,c.sibling),(u=r(c,d)).return=l,l=u):(n(l,c),(u=zi(d,l.mode,u)).return=l,l=u),o(l)):n(l,c)}return function(e,t,n,i){try{Ya=0;var r=y(e,t,n,i);return Xa=null,r}catch(a){if(a===Gr||a===qr)throw a;var s=Li(29,a,null,e.mode);return s.lanes=i,s.return=e,s}}}var to=eo(!0),no=eo(!1),io=R(null),ro=null;function so(e){var t=e.alternate;W(co,1&co.current),W(io,e),null===ro&&(null===t||null!==fs.current||null!==t.memoizedState)&&(ro=e)}function ao(e){if(22===e.tag){if(W(co,co.current),W(io,e),null===ro){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ro=e)}}else oo()}function oo(){W(co,co.current),W(io,io.current)}function lo(e){B(io),ro===e&&(ro=null),B(co)}var co=R(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||mu(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ho(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fo={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=$c(),r=rs(i);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ss(e,r,i))&&(Lc(t,e,i),as(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=$c(),r=rs(i);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=ss(e,r,i))&&(Lc(t,e,i),as(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$c(),i=rs(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=ss(e,i,n))&&(Lc(t,e,n),as(t,e,n))}};function po(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Kn(n,i)||!Kn(r,s))}function go(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&fo.enqueueReplaceState(t,t.state,null)}function mo(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var r in n===t&&(n=h({},n)),e)void 0===n[r]&&(n[r]=e[r]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yo(e){vo(e)}function bo(e){console.error(e)}function xo(e){vo(e)}function wo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Co(e,t,n){return(n=rs(n)).tag=3,n.payload={element:null},n.callback=function(){wo(e,t)},n}function _o(e){return(e=rs(e)).tag=3,e}function ko(e,t,n,i){var r=n.type.getDerivedStateFromError;if("function"===typeof r){var s=i.value;e.payload=function(){return r(s)},e.callback=function(){So(t,n,i)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){So(t,n,i),"function"!==typeof r&&(null===_c?_c=new Set([this]):_c.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Ao=Error(a(461)),Eo=!1;function jo(e,t,n,i){t.child=null===e?no(t,null,n,i):to(t,e.child,n,i)}function To(e,t,n,i,r){n=n.render;var s=t.ref;if("ref"in i){var a={};for(var o in i)"ref"!==o&&(a[o]=i[o])}else a=i;return kr(t),i=Ms(e,t,n,a,s,r),o=Ds(),null===e||Eo?(sr&&o&&tr(t),t.flags|=1,jo(e,t,i,r),t.child):(Ls(e,t,r),Yo(e,t,r))}function Oo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Ii(s)||void 0!==s.defaultProps||null!==n.compare?((e=Bi(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Mo(e,t,s,i,r))}if(s=e.child,!Ko(e,r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Kn)(a,i)&&e.ref===t.ref)return Yo(e,t,r)}return t.flags|=1,(e=Fi(s,i)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(Kn(s,i)&&e.ref===t.ref){if(Eo=!1,t.pendingProps=i=s,!Ko(e,r))return t.lanes=e.lanes,Yo(e,t,r);0!==(131072&e.flags)&&(Eo=!0)}}return Do(e,t,n,i,r)}function Po(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode){if(0!==(128&t.flags)){if(i=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;t.childLanes=s&~i}else t.childLanes=0,t.child=null;return No(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,No(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hr(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ms(),ao(t)}else null!==s?(Hr(0,s.cachePool),gs(t,s),oo(),t.memoizedState=null):(null!==e&&Hr(0,null),ms(),oo());return jo(e,t,r,n),t.child}function No(e,t,n,i){var r=zr();return r=null===r?null:{parent:Pr._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Hr(0,null),ms(),ao(t),null!==e&&Cr(e,t,i,!0),null}function $o(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Do(e,t,n,i,r){return kr(t),n=Ms(e,t,n,i,void 0,r),i=Ds(),null===e||Eo?(sr&&i&&tr(t),t.flags|=1,jo(e,t,n,r),t.child):(Ls(e,t,r),Yo(e,t,r))}function Lo(e,t,n,i,r,s){return kr(t),t.updateQueue=null,n=Ns(t,i,n,r),Ps(e),i=Ds(),null===e||Eo?(sr&&i&&tr(t),t.flags|=1,jo(e,t,n,s),t.child):(Ls(e,t,s),Yo(e,t,s))}function Io(e,t,n,i,r){if(kr(t),null===t.stateNode){var s=$i,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ar(a)),s=new n(i,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=i,s.state=t.memoizedState,s.refs={},ns(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ar(a):$i,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(ho(t,n,a,i),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&fo.enqueueReplaceState(s,s.state,null),ds(t,i,s,r),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=mo(n,o);s.props=l;var c=s.context,d=n.contextType;a=$i,"object"===typeof d&&null!==d&&(a=Ar(d));var u=n.getDerivedStateFromProps;d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&go(t,s,i,a),ts=!1;var h=t.memoizedState;s.state=h,ds(t,i,s,r),cs(),c=t.memoizedState,o||h!==c||ts?("function"===typeof u&&(ho(t,n,u,i),c=t.memoizedState),(l=ts||po(t,n,l,i,h,c,a))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=a,i=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,is(e,t),d=mo(n,a=t.memoizedProps),s.props=d,u=t.pendingProps,h=s.context,c=n.contextType,l=$i,"object"===typeof c&&null!==c&&(l=Ar(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==u||h!==l)&&go(t,s,i,l),ts=!1,h=t.memoizedState,s.state=h,ds(t,i,s,r),cs();var f=t.memoizedState;a!==u||h!==f||ts||null!==e&&null!==e.dependencies&&_r(e.dependencies)?("function"===typeof o&&(ho(t,n,o,i),f=t.memoizedState),(d=ts||po(t,n,d,i,h,f,l)||null!==e&&null!==e.dependencies&&_r(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=d):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return s=i,$o(e,t),i=0!==(128&t.flags),s||i?(s=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&i?(t.child=to(t,e.child,null,r),t.child=to(t,null,n,r)):jo(e,t,n,r),t.memoizedState=s.state,e=t.child):e=Yo(e,t,r),e}function Fo(e,t,n,i){return fr(),t.flags|=256,jo(e,t,n,i),t.child}var Ro={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bo(e){return{baseLanes:e,cachePool:Ur()}}function Wo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mc),e}function zo(e,t,n){var i,r=t.pendingProps,s=!1,o=0!==(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&0!==(2&co.current)),i&&(s=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if(sr){if(s?so(t):oo(),sr){var l,c=rr;if(l=c){e:{for(l=c,c=or;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vu(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Ki?{id:Qi,overflow:Ji}:null,retryLane:536870912,hydrationErrors:null},(l=Li(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ir=t,rr=null,l=!0):l=!1}l||cr(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return mu(c)?t.lanes=32:t.lanes=536870912,null;lo(t)}return c=r.children,r=r.fallback,s?(oo(),c=Uo({mode:"hidden",children:c},s=t.mode),r=Wi(r,s,n,null),c.return=t,r.return=t,c.sibling=r,t.child=c,(s=t.child).memoizedState=Bo(n),s.childLanes=Wo(e,i,n),t.memoizedState=Ro,r):(so(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(so(t),t.flags&=-257,t=Go(e,t,n)):null!==t.memoizedState?(oo(),t.child=e.child,t.flags|=128,t=null):(oo(),s=r.fallback,c=t.mode,r=Uo({mode:"visible",children:r.children},c),(s=Wi(s,c,n,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,to(t,e.child,null,n),(r=t.child).memoizedState=Bo(n),r.childLanes=Wo(e,i,n),t.memoizedState=Ro,t=s);else if(so(t),mu(c)){if(i=c.nextSibling&&c.nextSibling.dataset)var d=i.dgst;i=d,(r=Error(a(419))).stack="",r.digest=i,gr({value:r,source:null,stack:null}),t=Go(e,t,n)}else if(Eo||Cr(e,t,n,!1),i=0!==(n&e.childLanes),Eo||i){if(null!==(i=ic)&&(0!==(r=0!==((r=0!==(42&(r=n&-n))?1:je(r))&(i.suspendedLanes|n))?0:r)&&r!==l.retryLane))throw l.retryLane=r,Mi(e,r),Lc(i,e,r),Ao;"$?"===c.data||qc(),t=Go(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,rr=vu(c.nextSibling),ir=t,sr=!0,ar=null,or=!1,null!==e&&(Xi[Yi++]=Qi,Xi[Yi++]=Ji,Xi[Yi++]=Ki,Qi=e.id,Ji=e.overflow,Ki=t),(t=Ho(t,r.children)).flags|=4096);return t}return s?(oo(),s=r.fallback,c=t.mode,d=(l=e.child).sibling,(r=Fi(l,{mode:"hidden",children:r.children})).subtreeFlags=65011712&l.subtreeFlags,null!==d?s=Fi(d,s):(s=Wi(s,c,n,null)).flags|=2,s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,null===(c=e.child.memoizedState)?c=Bo(n):(null!==(l=c.cachePool)?(d=Pr._currentValue,l=l.parent!==d?{parent:d,pool:d}:l):l=Ur(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Wo(e,i,n),t.memoizedState=Ro,r):(so(t),e=(n=e.child).sibling,(n=Fi(n,{mode:"visible",children:r.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Uo({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Uo(e,t){return(e=Li(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Go(e,t,n){return to(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),wr(e.return,t,n)}function qo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Xo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(jo(e,t,i.children,n),0!==(2&(i=co.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vo(e,n,t);else if(19===e.tag)Vo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(W(co,i),r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===uo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qo(t,!0,n,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Cr(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fi(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fi(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_r(e))}function Qo(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Eo=!0;else{if(!Ko(e,n)&&0===(128&t.flags))return Eo=!1,function(e,t,n){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),br(0,Pr,e.memoizedState.cache),fr();break;case 27:case 5:X(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:br(0,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(so(t),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(so(t),null!==(e=Yo(e,t,n))?e.sibling:null);so(t);break;case 19:var r=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(Cr(e,t,n,!1),i=0!==(n&t.childLanes)),r){if(i)return Xo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),W(co,co.current),i)break;return null;case 22:case 23:return t.lanes=0,Po(e,t,n);case 24:br(0,Pr,e.memoizedState.cache)}return Yo(e,t,n)}(e,t,n);Eo=0!==(131072&e.flags)}else Eo=!1,sr&&0!==(1048576&t.flags)&&er(t,qi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((r=i.$$typeof)===S){t.tag=11,t=To(null,t,i,e,n);break e}if(r===k){t.tag=14,t=Oo(null,t,i,e,n);break e}}throw t=P(i)||i,Error(a(306,t,""))}Ii(i)?(e=mo(i,e),t.tag=1,t=Io(null,t,i,e,n)):(t.tag=0,t=Do(null,t,i,e,n))}return t;case 0:return Do(e,t,t.type,t.pendingProps,n);case 1:return Io(e,t,i=t.type,r=mo(i,t.pendingProps),n);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(a(387));i=t.pendingProps;var s=t.memoizedState;r=s.element,is(e,t),ds(t,i,null,n);var o=t.memoizedState;if(i=o.cache,br(0,Pr,i),i!==s.cache&&Sr(t,[Pr],n,!0),cs(),i=o.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Fo(e,t,i,n);break e}if(i!==r){gr(r=_i(Error(a(424)),t)),t=Fo(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(rr=vu(e.firstChild),ir=t,sr=!0,ar=null,or=!0,n=no(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fr(),i===r){t=Yo(e,t,n);break e}jo(e,t,i,n)}t=t.child}return t;case 26:return $o(e,t),null===e?(n=ju(t.type,null,t.pendingProps,null))?t.memoizedState=n:sr||(n=t.type,e=t.pendingProps,(i=iu(U.current).createElement(n))[Pe]=t,i[Ne]=e,eu(i,n,e),Ge(i),t.stateNode=i):t.memoizedState=ju(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&sr&&(i=t.stateNode=xu(t.type,t.pendingProps,U.current),ir=t,or=!0,r=rr,fu(t.type)?(yu=r,rr=vu(i.firstChild)):rr=r),jo(e,t,t.pendingProps.children,n),$o(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&sr&&((r=i=rr)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[Re])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===s)return e}if(null===(e=vu(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,or))?(t.stateNode=i,ir=t,rr=vu(i.firstChild),or=!1,r=!0):r=!1),r||cr(t)),X(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,i=s.children,au(r,s)?i=null:null!==o&&au(r,o)&&(t.flags|=32),null!==t.memoizedState&&(r=Ms(e,t,$s,null,null,n),Xu._currentValue=r),$o(e,t),jo(e,t,i,n),t.child;case 6:return null===e&&sr&&((e=n=rr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vu(e.nextSibling)))return null}return e}(n,t.pendingProps,or))?(t.stateNode=n,ir=t,rr=null,e=!0):e=!1),e||cr(t)),null;case 13:return zo(e,t,n);case 4:return V(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=to(t,null,i,n):jo(e,t,i,n),t.child;case 11:return To(e,t,t.type,t.pendingProps,n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,br(0,t.type,i.value),jo(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,kr(t),i=i(r=Ar(r)),t.flags|=1,jo(e,t,i,n),t.child;case 14:return Oo(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return Xo(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=Uo(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fi(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Po(e,t,n);case 24:return kr(t),i=Ar(Pr),null===e?(null===(r=zr())&&(r=ic,s=Nr(),r.pooledCache=s,s.refCount++,null!==s&&(r.pooledCacheLanes|=n),r=s),t.memoizedState={parent:i,cache:r},ns(t),br(0,Pr,r)):(0!==(e.lanes&n)&&(is(e,t),ds(t,null,null,n),cs()),r=e.memoizedState,s=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=r),br(0,Pr,i)):(i=s.cache,br(0,Pr,i),i!==r.cache&&Sr(t,[Pr],n,!0))),jo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Jo(e){e.flags|=4}function Zo(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Wu(t)){if(null!==(t=io.current)&&((4194048&sc)===sc?null!==ro:(62914560&sc)!==sc&&0===(536870912&sc)||t!==ro))throw Jr=Xr,Vr;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ce():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=65011712&r.subtreeFlags,i|=65011712&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function il(e,t,n){var i=t.pendingProps;switch(nr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),xr(Pr),q(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hr(t)?Jo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pr())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Jo(t),null!==n?(nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Jo(t),nl(t),Zo(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==i&&Jo(t),nl(t),t.flags&=-16777217),null;case 27:Y(t),n=U.current;var r=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Jo(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return nl(t),null}e=z.current,hr(t)?dr(t):(e=xu(r,i,n),t.stateNode=e,Jo(t))}return nl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Jo(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return nl(t),null}if(e=z.current,hr(t))dr(t);else{switch(r=iu(U.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=r.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof i.is?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"===typeof i.is?r.createElement(n,{is:i.is}):r.createElement(n)}}e[Pe]=t,e[Ne]=i;e:for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&27!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;null===r.sibling;){if(null===r.return||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(eu(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Jo(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&Jo(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=U.current,hr(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(r=ir))switch(r.tag){case 27:case 5:i=r.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Kd(e.nodeValue,n)))||cr(t)}else(e=iu(e).createTextNode(i))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(r=hr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[Pe]=t}else fr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),r=!1}else r=pr(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return 256&t.flags?(lo(t),t):(lo(t),null)}if(lo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){r=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return q(),null===e&&Bd(t.stateNode.containerInfo),nl(t),null;case 10:return xr(t.type),nl(t),null;case 19:if(B(co),null===(r=t.memoizedState))return nl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)tl(r,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=uo(e))){for(t.flags|=128,tl(r,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ri(n,e),n=n.sibling;return W(co,1&co.current|2),t.child}e=e.sibling}null!==r.tail&&te()>Sc&&(t.flags|=128,i=!0,tl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=uo(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!sr)return nl(t),null}else 2*te()-r.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,i=!0,tl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=te(),t.sibling=null,e=co.current,W(co,i?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return lo(t),vs(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&B(Wr),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xr(Pr),nl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function rl(e,t){switch(nr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xr(Pr),q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(lo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(co),null;case 4:return q(),null;case 10:return xr(t.type),null;case 22:case 23:return lo(t),vs(),null!==e&&B(Wr),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xr(Pr),null;default:return null}}function sl(e,t){switch(nr(t),t.tag){case 3:xr(Pr),q();break;case 26:case 27:case 5:Y(t);break;case 4:q();break;case 13:lo(t);break;case 19:B(co);break;case 10:xr(t.type);break;case 22:case 23:lo(t),vs(),null!==e&&B(Wr);break;case 24:xr(Pr)}}function al(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(o){dd(t,t.return,o)}}function ol(e,t,n){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var s=r.next;i=s;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,r=t;var l=n,c=o;try{c()}catch(d){dd(r,l,d)}}}i=i.next}while(i!==s)}}catch(d){dd(t,t.return,d)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(i){dd(e,e.return,i)}}}function cl(e,t,n){n.props=mo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){dd(e,t,i)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;default:i=e.stateNode}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(r){dd(e,t,r)}}function ul(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(r){dd(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){dd(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){dd(e,e.return,r)}}function fl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,o=null,l=null,c=null,d=null,u=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:i.hasOwnProperty(p)||Jd(e,t,p,null,i,h)}}for(var f in i){var p=i[f];if(h=n[f],i.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":r=p;break;case"checked":d=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==h&&Jd(e,t,f,p,i,h)}}return void mt(e,o,l,c,d,u,s,r);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(s)||Jd(e,t,s,null,i,c)}for(r in i)if(s=i[r],c=n[r],i.hasOwnProperty(r)&&(null!=s||null!=c))switch(r){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&Jd(e,t,r,s,i,c)}return t=l,n=o,i=p,void(null!=f?bt(e,!!n,f,!1):!!i!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(r=n[l],n.hasOwnProperty(l)&&null!=r&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Jd(e,t,l,null,i,r)}for(o in i)if(r=i[o],s=n[o],i.hasOwnProperty(o)&&(null!=r||null!=s))switch(o){case"value":f=r;break;case"defaultValue":p=r;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=r)throw Error(a(91));break;default:r!==s&&Jd(e,t,o,r,i,s)}return void xt(e,f,p);case"option":for(var g in n)if(f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Jd(e,t,g,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Jd(e,t,c,f,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m)&&Jd(e,t,m,null,i,f);for(d in i)if(f=i[d],p=n[d],i.hasOwnProperty(d)&&f!==p&&(null!=f||null!=p))switch(d){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Jd(e,t,d,f,i,p)}return;default:if(At(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!i.hasOwnProperty(v)&&Zd(e,t,v,void 0,i,f);for(u in i)f=i[u],p=n[u],!i.hasOwnProperty(u)||f===p||void 0===f&&void 0===p||Zd(e,t,u,f,i,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!i.hasOwnProperty(y)&&Jd(e,t,y,null,i,f);for(h in i)f=i[h],p=n[h],!i.hasOwnProperty(h)||f===p||null==f&&null==p||Jd(e,t,h,f,i,p)}(i,e.type,n,t),i[Ne]=t}catch(r){dd(e,e.return,r)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fu(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fu(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qd));else if(4!==i&&(27===i&&fu(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function vl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&(27===i&&fu(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);eu(t,i,n),t[Pe]=e,t[Ne]=n}catch(s){dd(e,e.return,s)}}var bl=!1,xl=!1,wl=!1,Sl="function"===typeof WeakSet?WeakSet:Set,Cl=null;function _l(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Il(e,n),4&i&&al(5,n);break;case 1:if(Il(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){dd(n,n.return,a)}else{var r=mo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){dd(n,n.return,o)}}64&i&&ll(n),512&i&&dl(n,n.return);break;case 3:if(Il(e,n),64&i&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(a){dd(n,n.return,a)}}break;case 27:null===t&&4&i&&yl(n);case 26:case 5:Il(e,n),null===t&&4&i&&hl(n),512&i&&dl(n,n.return);break;case 12:Il(e,n);break;case 13:Il(e,n),4&i&&Ol(e,n),64&i&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}(e,n=pd.bind(null,n))));break;case 22:if(!(i=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||xl,r=bl;var s=xl;bl=i,(xl=t)&&!s?Rl(e,n,0!==(8772&n.subtreeFlags)):Il(e,n),bl=r,xl=s}break;case 30:break;default:Il(e,n)}}function kl(e){var t=e.alternate;null!==t&&(e.alternate=null,kl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Al=null,El=!1;function jl(e,t,n){for(n=n.child;null!==n;)Tl(e,t,n),n=n.sibling}function Tl(e,t,n){if(ue&&"function"===typeof ue.onCommitFiberUnmount)try{ue.onCommitFiberUnmount(de,n)}catch(s){}switch(n.tag){case 26:xl||ul(n,t),jl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||ul(n,t);var i=Al,r=El;fu(n.type)&&(Al=n.stateNode,El=!1),jl(e,t,n),wu(n.stateNode),Al=i,El=r;break;case 5:xl||ul(n,t);case 6:if(i=Al,r=El,Al=null,jl(e,t,n),El=r,null!==(Al=i))if(El)try{(9===Al.nodeType?Al.body:"HTML"===Al.nodeName?Al.ownerDocument.body:Al).removeChild(n.stateNode)}catch(a){dd(n,t,a)}else try{Al.removeChild(n.stateNode)}catch(a){dd(n,t,a)}break;case 18:null!==Al&&(El?(pu(9===(e=Al).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Eh(e)):pu(Al,n.stateNode));break;case 4:i=Al,r=El,Al=n.stateNode.containerInfo,El=!0,jl(e,t,n),Al=i,El=r;break;case 0:case 11:case 14:case 15:xl||ol(2,n,t),xl||ol(4,n,t),jl(e,t,n);break;case 1:xl||(ul(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&cl(n,t,i)),jl(e,t,n);break;case 21:jl(e,t,n);break;case 22:xl=(i=xl)||null!==n.memoizedState,jl(e,t,n),xl=i;break;default:jl(e,t,n)}}function Ol(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Eh(e)}catch(n){dd(t,t.return,n)}}function Ml(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var i=gd.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(fu(l.type)){Al=l.stateNode,El=!1;break e}break;case 5:Al=l.stateNode,El=!1;break e;case 3:case 4:Al=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Al)throw Error(a(160));Tl(s,o,r),Al=null,El=!1,null!==(s=r.alternate)&&(s.return=null),r.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)$l(t,e),t=t.sibling}var Nl=null;function $l(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Dl(e),4&i&&(ol(3,e,e.return),al(3,e),ol(5,e,e.return));break;case 1:Pl(t,e),Dl(e),512&i&&(xl||null===n||ul(n,n.return)),64&i&&bl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var r=Nl;if(Pl(t,e),Dl(e),512&i&&(xl||null===n||ul(n,n.return)),4&i){var s=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":(!(s=r.getElementsByTagName("title")[0])||s[Re]||s[Pe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),eu(s,i,n),s[Pe]=e,Ge(s),i=s;break e;case"link":var o=Ru("link","href",r).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}eu(s=r.createElement(i),i,n),r.head.appendChild(s);break;case"meta":if(o=Ru("meta","content",r).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}eu(s=r.createElement(i),i,n),r.head.appendChild(s);break;default:throw Error(a(468,i))}s[Pe]=e,Ge(s),i=s}e.stateNode=i}else Bu(r,e.type,e.stateNode);else e.stateNode=$u(r,i,e.memoizedProps);else s!==i?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===i?Bu(r,e.type,e.stateNode):$u(r,i,e.memoizedProps)):null===i&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Dl(e),512&i&&(xl||null===n||ul(n,n.return)),null!==n&&4&i&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Dl(e),512&i&&(xl||null===n||ul(n,n.return)),32&e.flags){r=e.stateNode;try{St(r,"")}catch(p){dd(e,e.return,p)}}4&i&&null!=e.stateNode&&fl(e,r=e.memoizedProps,null!==n?n.memoizedProps:r),1024&i&&(wl=!0);break;case 6:if(Pl(t,e),Dl(e),4&i){if(null===e.stateNode)throw Error(a(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(p){dd(e,e.return,p)}}break;case 3:if(Fu=null,r=Nl,Nl=_u(t.containerInfo),Pl(t,e),Nl=r,Dl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Eh(t.containerInfo)}catch(p){dd(e,e.return,p)}wl&&(wl=!1,Ll(e));break;case 4:i=Nl,Nl=_u(e.stateNode.containerInfo),Pl(t,e),Dl(e),Nl=i;break;case 12:default:Pl(t,e),Dl(e);break;case 13:Pl(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ml(e,i)));break;case 22:r=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,d=bl,u=xl;if(bl=d||r,xl=u||c,Pl(t,e),xl=u,bl=d,Dl(e),8192&i)e:for(t=e.stateNode,t._visibility=r?-2&t._visibility:1|t._visibility,r&&(null===n||c||bl||xl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,r)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){dd(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=r?"":c.memoizedProps}catch(p){dd(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Ml(e,n))));break;case 19:Pl(t,e),Dl(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ml(e,i)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(pl(i)){n=i;break}i=i.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var r=n.stateNode;vl(e,gl(e),r);break;case 5:var s=n.stateNode;32&n.flags&&(St(s,""),n.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;ml(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){dd(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Il(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_l(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ol(4,t,t.return),Fl(t);break;case 1:ul(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:wu(t.stateNode);case 26:case 5:ul(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Rl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,r=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Rl(r,s,n),al(4,s);break;case 1:if(Rl(r,s,n),"function"===typeof(r=(i=s).stateNode).componentDidMount)try{r.componentDidMount()}catch(c){dd(i,i.return,c)}if(null!==(r=(i=s).updateQueue)){var o=i.stateNode;try{var l=r.shared.hiddenCallbacks;if(null!==l)for(r.shared.hiddenCallbacks=null,r=0;r<l.length;r++)us(l[r],o)}catch(c){dd(i,i.return,c)}}n&&64&a&&ll(s),dl(s,s.return);break;case 27:yl(s);case 26:case 5:Rl(r,s,n),n&&null===i&&4&a&&hl(s),dl(s,s.return);break;case 12:Rl(r,s,n);break;case 13:Rl(r,s,n),n&&4&a&&Ol(r,s);break;case 22:null===s.memoizedState&&Rl(r,s,n),dl(s,s.return);break;case 30:break;default:Rl(r,s,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&$r(n))}function Wl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&$r(e))}function zl(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,i),t=t.sibling}function Hl(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,n,i),2048&r&&al(9,t);break;case 1:case 13:default:zl(e,t,n,i);break;case 3:zl(e,t,n,i),2048&r&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&$r(e)));break;case 12:if(2048&r){zl(e,t,n,i),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){dd(t,t.return,l)}}else zl(e,t,n,i);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?zl(e,t,n,i):Gl(e,t):2&s._visibility?zl(e,t,n,i):(s._visibility|=2,Ul(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&r&&Bl(a,t);break;case 24:zl(e,t,n,i),2048&r&&Wl(t.alternate,t)}}function Ul(e,t,n,i,r){for(r=r&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,a=t,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:Ul(s,a,o,l,r),al(8,a);break;case 23:break;case 22:var d=a.stateNode;null!==a.memoizedState?2&d._visibility?Ul(s,a,o,l,r):Gl(s,a):(d._visibility|=2,Ul(s,a,o,l,r)),r&&2048&c&&Bl(a.alternate,a);break;case 24:Ul(s,a,o,l,r),r&&2048&c&&Wl(a.alternate,a);break;default:Ul(s,a,o,l,r)}t=t.sibling}}function Gl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Gl(n,i),2048&r&&Bl(i.alternate,i);break;case 24:Gl(n,i),2048&r&&Wl(i.alternate,i);break;default:Gl(n,i)}t=t.sibling}}var Vl=8192;function ql(e){if(e.subtreeFlags&Vl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:ql(e),e.flags&Vl&&null!==e.memoizedState&&function(e,t,n){if(null===zu)throw Error(a(475));var i=zu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var r=Tu(n.href),s=e.querySelector(Ou(r));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(i.count++,i=Uu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=s,void Ge(s);s=e.ownerDocument||e,n=Mu(n),(r=Su.get(r))&&Lu(n,r),Ge(s=s.createElement("link"));var o=s;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(s,"link",n),t.instance=s}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(i.count++,t=Uu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Nl,e.memoizedState,e.memoizedProps);break;case 5:default:ql(e);break;case 3:case 4:var t=Nl;Nl=_u(e.stateNode.containerInfo),ql(e),Nl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Vl,Vl=16777216,ql(e),Vl=t):ql(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Kl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Cl=i,Zl(i,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ql(e),e=e.sibling}function Ql(e){switch(e.tag){case 0:case 11:case 15:Kl(e),2048&e.flags&&ol(9,e,e.return);break;case 3:case 12:default:Kl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Kl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];Cl=i,Zl(i,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ol(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Cl;){var n=Cl;switch(n.tag){case 0:case 11:case 15:ol(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:$r(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,Cl=i;else e:for(n=e;null!==Cl;){var r=(i=Cl).sibling,s=i.return;if(kl(i),i===n){Cl=null;break e}if(null!==r){r.return=s,Cl=r;break e}Cl=s}}}var ec={getCacheForType:function(e){var t=Ar(Pr),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,ic=null,rc=null,sc=0,ac=0,oc=null,lc=!1,cc=!1,dc=!1,uc=0,hc=0,fc=0,pc=0,gc=0,mc=0,vc=0,yc=null,bc=null,xc=!1,wc=0,Sc=1/0,Cc=null,_c=null,kc=0,Ac=null,Ec=null,jc=0,Tc=0,Oc=null,Mc=null,Pc=0,Nc=null;function $c(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==$.T){return 0!==Ir?Ir:Td()}return Oe()}function Dc(){0===mc&&(mc=0===(536870912&sc)||sr?Se():536870912);var e=io.current;return null!==e&&(e.flags|=32),mc}function Lc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Bc(e,sc,mc,!1)),ke(e,n),0!==(2&nc)&&e===ic||(e===ic&&(0===(2&nc)&&(pc|=n),4===hc&&Bc(e,sc,mc,!1)),Sd(e))}function Ic(e,t,n){if(0!==(6&nc))throw Error(a(327));for(var i=!n&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),r=i?function(e,t){var n=nc;nc|=2;var i=Gc(),r=Vc();ic!==e||sc!==t?(Cc=null,Sc=te()+500,Hc(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==ac&&null!==rc){t=rc;var s=oc;t:switch(ac){case 1:ac=0,oc=null,Zc(e,t,s,1);break;case 2:case 9:if(Yr(s)){ac=0,oc=null,Jc(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),Sd(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Yr(s)?(ac=0,oc=null,Jc(t)):(ac=0,oc=null,Zc(e,t,s,7));break;case 5:var o=null;switch(rc.tag){case 26:o=rc.memoizedState;case 5:case 27:var l=rc;if(!o||Wu(o)){ac=0,oc=null;var c=l.sibling;if(null!==c)rc=c;else{var d=l.return;null!==d?(rc=d,ed(d)):rc=null}break t}}ac=0,oc=null,Zc(e,t,s,5);break;case 6:ac=0,oc=null,Zc(e,t,s,6);break;case 8:zc(),hc=6;break e;default:throw Error(a(462))}}Kc();break}catch(u){Uc(e,u)}return yr=vr=null,$.H=i,$.A=r,nc=n,null!==rc?0:(ic=null,sc=0,ji(),hc)}(e,t):Xc(e,t,!0),s=i;;){if(0===r){cc&&!i&&Bc(e,t,0,!1);break}if(n=e.current.alternate,!s||Rc(n)){if(2===r){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;r=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Xc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,r=4;break e}s=bc,bc=r,null!==s&&(null===bc?bc=s:bc.push.apply(bc,s))}r=o}if(s=!1,2!==r)continue}}if(1===r){Hc(e,0),Bc(e,t,0,!0);break}e:{switch(i=e,s=r){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Bc(i,t,mc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(r=wc+300-te())){if(Bc(i,t,mc,!lc),0!==be(i,0,!0))break e;i.timeoutHandle=lu(Fc.bind(null,i,n,bc,Cc,xc,t,mc,pc,vc,lc,s,2,-0,0),r)}else Fc(i,n,bc,Cc,xc,t,mc,pc,vc,lc,s,0,-0,0)}break}r=Xc(e,t,!1),s=!1}Sd(e)}function Fc(e,t,n,i,r,s,o,l,c,d,u,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(zu={stylesheets:null,count:0,unsuspend:Hu},Xl(t),null!==(h=function(){if(null===zu)throw Error(a(475));var e=zu;return e.stylesheets&&0===e.count&&Vu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Vu(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nd.bind(null,e,t,s,n,i,r,o,l,c,u,1,f,p)),void Bc(e,s,o,!d);nd(e,t,s,n,i,r,o,l,c)}function Rc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Yn(s(),r))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,n,i){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var s=31-fe(r),a=1<<s;i[s]=-1,r&=~a}0!==n&&Ae(e,n,t)}function Wc(){return 0!==(6&nc)||(Cd(0,!1),!1)}function zc(){if(null!==rc){if(0===ac)var e=rc.return;else yr=vr=null,Is(e=rc),Xa=null,Ya=0,e=rc;for(;null!==e;)sl(e.alternate,e),e=e.return;rc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zc(),ic=e,rc=n=Fi(e.current,null),sc=t,ac=0,oc=null,lc=!1,cc=xe(e,t),dc=!1,vc=mc=gc=pc=fc=hc=0,bc=yc=null,xc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var r=31-fe(i),s=1<<r;t|=e[r],i&=~s}return uc=t,ji(),n}function Uc(e,t){bs=null,$.H=Ua,t===Gr||t===qr?(t=Zr(),ac=3):t===Vr?(t=Zr(),ac=4):ac=t===Ao?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,oc=t,null===rc&&(hc=1,wo(e,_i(t,e.current)))}function Gc(){var e=$.H;return $.H=Ua,null===e?Ua:e}function Vc(){var e=$.A;return $.A=ec,e}function qc(){hc=4,lc||(4194048&sc)!==sc&&null!==io.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===ic||Bc(ic,sc,mc,!1)}function Xc(e,t,n){var i=nc;nc|=2;var r=Gc(),s=Vc();ic===e&&sc===t||(Cc=null,Hc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==ac&&null!==rc){var o=rc,l=oc;switch(ac){case 8:zc(),a=6;break e;case 3:case 2:case 9:case 6:null===io.current&&(t=!0);var c=ac;if(ac=0,oc=null,Zc(e,o,l,c),n&&cc){a=0;break e}break;default:c=ac,ac=0,oc=null,Zc(e,o,l,c)}}Yc(),a=hc;break}catch(d){Uc(e,d)}return t&&e.shellSuspendCounter++,yr=vr=null,nc=i,$.H=r,$.A=s,null===rc&&(ic=null,sc=0,ji()),a}function Yc(){for(;null!==rc;)Qc(rc)}function Kc(){for(;null!==rc&&!Z();)Qc(rc)}function Qc(e){var t=Qo(e.alternate,e,uc);e.memoizedProps=e.pendingProps,null===t?ed(e):rc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Lo(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Lo(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Is(t);default:sl(n,t),t=Qo(n,t=rc=Ri(t,uc),uc)}e.memoizedProps=e.pendingProps,null===t?ed(e):rc=t}function Zc(e,t,n,i){yr=vr=null,Is(t),Xa=null,Ya=0;var r=t.return;try{if(function(e,t,n,i,r){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&Cr(t,n,r,!0),null!==(n=io.current)){switch(n.tag){case 13:return null===ro?qc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===Xr?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),ud(e,i,r)),!1;case 22:return n.flags|=65536,i===Xr?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),ud(e,i,r)),!1}throw Error(a(435,n.tag))}return ud(e,i,r),qc(),!1}if(sr)return null!==(t=io.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==lr&&gr(_i(e=Error(a(422),{cause:i}),n))):(i!==lr&&gr(_i(t=Error(a(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,r&=-r,e.lanes|=r,i=_i(i,n),os(e,r=Co(e.stateNode,i,r)),4!==hc&&(hc=2)),!1;var s=Error(a(520),{cause:i});if(s=_i(s,n),null===yc?yc=[s]:yc.push(s),4!==hc&&(hc=2),null===t)return!0;i=_i(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,os(n,e=Co(n.stateNode,i,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===_c||!_c.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,ko(r=_o(r),e,n,i),os(n,r),!1}n=n.return}while(null!==n);return!1}(e,r,t,n,sc))return hc=1,wo(e,_i(n,e.current)),void(rc=null)}catch(s){if(null!==r)throw rc=r,s;return hc=1,wo(e,_i(n,e.current)),void(rc=null)}32768&t.flags?(sr||1===i?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=io.current)&&13===i.tag&&(i.flags|=16384))),td(t,e)):ed(t)}function ed(e){var t=e;do{if(0!==(32768&t.flags))return void td(t,lc);e=t.return;var n=il(t.alternate,t,uc);if(null!==n)return void(rc=n);if(null!==(t=t.sibling))return void(rc=t);rc=t=e}while(null!==t);0===hc&&(hc=5)}function td(e,t){do{var n=rl(e.alternate,e);if(null!==n)return n.flags&=32767,void(rc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(rc=e);rc=e=n}while(null!==e);hc=6,rc=null}function nd(e,t,n,i,r,s,o,l,c){e.cancelPendingCommit=null;do{od()}while(0!==kc);if(0!==(6&nc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,i,r,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var d=31-fe(n),u=1<<d;o[d]=0,l[d]=-1;var h=c[d];if(null!==h)for(c[d]=null,d=0;d<h.length;d++){var f=h[d];null!==f&&(f.lane&=-536870913)}n&=~u}0!==i&&Ae(e,i,0),0!==s&&0===r&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Ei,o,l,c),e===ic&&(rc=ic=null,sc=0),Ec=t,Ac=e,jc=n,Tc=s,Oc=r,Mc=i,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Q(se,function(){return ld(),null})):(e.callbackNode=null,e.callbackPriority=0),i=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||i){i=$.T,$.T=null,r=D.p,D.p=2,o=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,tu=nh,ti(e=ei(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(m){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==s||0!==i&&3!==h.nodeType||(c=o+i),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===r&&(l=o),f===s&&++u===i&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nu={focusedElem:e,selectionRange:n},nh=!1,Cl=t;null!==Cl;)if(e=(t=Cl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Cl=e;else for(;null!==Cl;){switch(s=(t=Cl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var g=mo(n.type,r,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(g,s),i.__reactInternalSnapshotBeforeUpdate=e}catch(v){dd(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gu(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gu(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Cl=e;break}Cl=t.return}}(e,t)}finally{nc=o,D.p=r,$.T=i}}kc=1,id(),rd(),sd()}}function id(){if(1===kc){kc=0;var e=Ac,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=$.T,$.T=null;var i=D.p;D.p=2;var r=nc;nc|=4;try{$l(t,e);var s=nu,a=ei(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&ti(o)){var c=l.start,d=l.end;if(void 0===d&&(d=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(d,o.value.length);else{var u=o.ownerDocument||document,h=u&&u.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,g=Math.min(l.start,p),m=void 0===l.end?g:Math.min(l.end,p);!f.extend&&g>m&&(a=m,m=g,g=a);var v=Jn(o,g),y=Jn(o,m);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var b=u.createRange();b.setStart(v.node,v.offset),f.removeAllRanges(),g>m?(f.addRange(b),f.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),f.addRange(b))}}}}for(u=[],f=o;f=f.parentNode;)1===f.nodeType&&u.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<u.length;o++){var x=u[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}nh=!!tu,nu=tu=null}finally{nc=r,D.p=i,$.T=n}}e.current=t,kc=2}}function rd(){if(2===kc){kc=0;var e=Ac,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=$.T,$.T=null;var i=D.p;D.p=2;var r=nc;nc|=4;try{_l(e,t.alternate,t)}finally{nc=r,D.p=i,$.T=n}}kc=3}}function sd(){if(4===kc||3===kc){kc=0,ee();var e=Ac,t=Ec,n=jc,i=Mc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?kc=5:(kc=0,Ec=Ac=null,ad(e,e.pendingLanes));var r=e.pendingLanes;if(0===r&&(_c=null),Te(n),t=t.stateNode,ue&&"function"===typeof ue.onCommitFiberRoot)try{ue.onCommitFiberRoot(de,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==i){t=$.T,r=D.p,D.p=2,$.T=null;try{for(var s=e.onRecoverableError,a=0;a<i.length;a++){var o=i[a];s(o.value,{componentStack:o.stack})}}finally{$.T=t,D.p=r}}0!==(3&jc)&&od(),Sd(e),r=e.pendingLanes,0!==(4194090&n)&&0!==(42&r)?e===Nc?Pc++:(Pc=0,Nc=e):Pc=0,Cd(0,!1)}}function ad(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,$r(t)))}function od(e){return id(),rd(),sd(),ld()}function ld(){if(5!==kc)return!1;var e=Ac,t=Tc;Tc=0;var n=Te(jc),i=$.T,r=D.p;try{D.p=32>n?32:n,$.T=null,n=Oc,Oc=null;var s=Ac,o=jc;if(kc=0,Ec=Ac=null,jc=0,0!==(6&nc))throw Error(a(331));var l=nc;if(nc|=4,Ql(s.current),Hl(s,s.current,o,n),nc=l,Cd(0,!1),ue&&"function"===typeof ue.onPostCommitFiberRoot)try{ue.onPostCommitFiberRoot(de,s)}catch(c){}return!0}finally{D.p=r,$.T=i,ad(e,t)}}function cd(e,t,n){t=_i(n,t),null!==(e=ss(e,t=Co(e.stateNode,t,2),2))&&(ke(e,2),Sd(e))}function dd(e,t,n){if(3===e.tag)cd(e,e,n);else for(;null!==t;){if(3===t.tag){cd(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===_c||!_c.has(i))){e=_i(n,e),null!==(i=ss(t,n=_o(2),2))&&(ko(n,i,t,e),ke(i,2),Sd(i));break}}t=t.return}}function ud(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new tc;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(dc=!0,r.add(n),e=hd.bind(null,e,t,n),t.then(e,e))}function hd(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(sc&n)===n&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-wc?0===(2&nc)&&Hc(e,0):gc|=n,vc===sc&&(vc=0)),Sd(e)}function fd(e,t){0===t&&(t=Ce()),null!==(e=Mi(e,t))&&(ke(e,t),Sd(e))}function pd(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fd(e,n)}function gd(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==i&&i.delete(t),fd(e,n)}var md=null,vd=null,yd=!1,bd=!1,xd=!1,wd=0;function Sd(e){e!==vd&&null===e.next&&(null===vd?md=vd=e:vd=vd.next=e),bd=!0,yd||(yd=!0,uu(function(){0!==(6&nc)?Q(ie,_d):kd()}))}function Cd(e,t){if(!xd&&bd){xd=!0;do{for(var n=!1,i=md;null!==i;){if(!t)if(0!==e){var r=i.pendingLanes;if(0===r)var s=0;else{var a=i.suspendedLanes,o=i.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=r&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,jd(i,s))}else s=sc,0===(3&(s=be(i,i===ic?s:0,null!==i.cancelPendingCommit||-1!==i.timeoutHandle)))||xe(i,s)||(n=!0,jd(i,s));i=i.next}}while(n);xd=!1}}function _d(){kd()}function kd(){bd=yd=!1;var e=0;0!==wd&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ou&&(ou=e,!0);return ou=null,!1}()&&(e=wd),wd=0);for(var t=te(),n=null,i=md;null!==i;){var r=i.next,s=Ad(i,t);0===s?(i.next=null,null===n?md=r:n.next=r,null===r&&(vd=n)):(n=i,(0!==e||0!==(3&s))&&(bd=!0)),i=r}Cd(e,!1)}function Ad(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-fe(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=we(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=sc,n=be(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),i=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&J(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&J(i),Te(n)){case 2:case 8:n=re;break;case 32:default:n=se;break;case 268435456:n=oe}return i=Ed.bind(null,e),n=Q(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&J(i),e.callbackPriority=2,e.callbackNode=null,2}function Ed(e,t){if(0!==kc&&5!==kc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(od()&&e.callbackNode!==n)return null;var i=sc;return 0===(i=be(e,e===ic?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ic(e,i,t),Ad(e,te()),null!=e.callbackNode&&e.callbackNode===n?Ed.bind(null,e):null)}function jd(e,t){if(od())return null;Ic(e,t,!0)}function Td(){return 0===wd&&(wd=Se()),wd}function Od(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Tt(""+e)}function Md(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pd=0;Pd<wi.length;Pd++){var Nd=wi[Pd];Si(Nd.toLowerCase(),"on"+(Nd[0].toUpperCase()+Nd.slice(1)))}Si(fi,"onAnimationEnd"),Si(pi,"onAnimationIteration"),Si(gi,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(mi,"onTransitionRun"),Si(vi,"onTransitionStart"),Si(yi,"onTransitionCancel"),Si(bi,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($d));function Ld(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(d){vo(d)}r.currentTarget=null,s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;s=o,r.currentTarget=c;try{s(r)}catch(d){vo(d)}r.currentTarget=null,s=l}}}}function Id(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var i=e+"__bubble";n.has(i)||(Wd(t,e,2,!1),n.add(i))}function Fd(e,t,n){var i=0;t&&(i|=4),Wd(n,e,i,t)}var Rd="_reactListening"+Math.random().toString(36).slice(2);function Bd(e){if(!e[Rd]){e[Rd]=!0,Ve.forEach(function(t){"selectionchange"!==t&&(Dd.has(t)||Fd(t,!1,e),Fd(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Rd]||(t[Rd]=!0,Fd("selectionchange",!1,t))}}function Wd(e,t,n,i){switch(ch(t)){case 2:var r=ih;break;case 8:r=rh;break;default:r=sh}n=r.bind(null,t,n,e),r=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function zd(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r)break;if(4===a)for(a=i.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===r)return;a=a.return}for(;null!==o;){if(null===(a=We(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){i=s=a;continue e}o=o.parentNode}}i=i.return}Lt(function(){var i=s,r=Mt(n),a=[];e:{var o=xi.get(e);if(void 0!==o){var c=Zt,d=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":d="focus",c=an;break;case"focusout":d="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fi:case pi:case gi:c=on;break;case bi:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mn;break;case"toggle":case"beforetoggle":c=xn}var u=0!==(4&t),h=!u&&("scroll"===e||"scrollend"===e),f=u?null!==o?o+"Capture":null:o;u=[];for(var p,g=i;null!==g;){var m=g;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===f||null!=(m=It(g,f))&&u.push(Hd(g,m,p)),h)break;g=g.return}0<u.length&&(o=new c(o,d,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Ot||!(d=n.relatedTarget||n.fromElement)||!We(d)&&!d[$e])&&(c||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(d=(d=n.relatedTarget||n.toElement)?We(d):null)&&(h=l(d),u=d.tag,d!==h||5!==u&&27!==u&&6!==u)&&(d=null)):(c=null,d=i),c!==d)){if(u=rn,m="onMouseLeave",f="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=mn,m="onPointerLeave",f="onPointerEnter",g="pointer"),h=null==c?o:He(c),p=null==d?o:He(d),(o=new u(m,g+"leave",c,n,r)).target=h,o.relatedTarget=p,m=null,We(r)===i&&((u=new u(f,g+"enter",d,n,r)).target=p,u.relatedTarget=h,m=u),h=m,c&&d)e:{for(f=d,g=0,p=u=c;p;p=Gd(p))g++;for(p=0,m=f;m;m=Gd(m))p++;for(;0<g-p;)u=Gd(u),g--;for(;0<p-g;)f=Gd(f),p--;for(;g--;){if(u===f||null!==f&&u===f.alternate)break e;u=Gd(u),f=Gd(f)}u=null}else u=null;null!==c&&Vd(a,o,c,u,!1),null!==d&&null!==h&&Vd(a,h,d,u,!0)}if("select"===(c=(o=i?He(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Fn;else if(Pn(o))if(Rn)v=Xn;else{v=Vn;var y=Gn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&At(i.elementType)&&(v=Fn):v=qn;switch(v&&(v=v(e,i))?Nn(a,v,n,r):(y&&y(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&yt(o,"number",o.value)),y=i?He(i):window,e){case"focusin":(Pn(y)||"true"===y.contentEditable)&&(ii=y,ri=i,si=null);break;case"focusout":si=ri=ii=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,oi(a,n,r);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":oi(a,n,r)}var b;if(Sn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else On?jn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(kn&&"ko"!==n.locale&&(On||"onCompositionStart"!==x?"onCompositionEnd"===x&&On&&(b=Ut()):(zt="value"in(Wt=r)?Wt.value:Wt.textContent,On=!0)),0<(y=Ud(i,x)).length&&(x=new cn(x,e,null,n,r),a.push({event:x,listeners:y}),b?x.data=b:null!==(b=Tn(n))&&(x.data=b))),(b=_n?function(e,t){switch(e){case"compositionend":return Tn(t);case"keypress":return 32!==t.which?null:(En=!0,An);case"textInput":return(e=t.data)===An&&En?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Sn&&jn(e,t)?(e=Ut(),Ht=zt=Wt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=Ud(i,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,r),a.push({event:y,listeners:x}),y.data=b)),function(e,t,n,i,r){if("submit"===t&&n&&n.stateNode===r){var s=Od((r[Ne]||null).action),a=i.submitter;a&&null!==(t=(t=a[Ne]||null)?Od(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new Zt("action","action",null,i,r);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==wd){var e=a?Md(r,a):new FormData(r);Oa(n,{pending:!0,data:e,method:r.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Md(r,a):new FormData(r),Oa(n,{pending:!0,data:e,method:r.method,action:s},s,e))},currentTarget:r}]})}}(a,e,i,n,r)}Ld(a,t)})}function Hd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ud(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;if(5!==(r=r.tag)&&26!==r&&27!==r||null===s||(null!=(r=It(e,n))&&i.unshift(Hd(e,r,s)),null!=(r=It(e,t))&&i.push(Hd(e,r,s))),3===e.tag)return i;e=e.return}return[]}function Gd(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Vd(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,r?null!=(c=It(n,s))&&a.unshift(Hd(n,c,l)):r||null!=(c=It(n,s))&&a.push(Hd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var qd=/\r\n?/g,Xd=/\u0000|\uFFFD/g;function Yd(e){return("string"===typeof e?e:""+e).replace(qd,"\n").replace(Xd,"")}function Kd(e,t){return t=Yd(t),Yd(e)===t}function Qd(){}function Jd(e,t,n,i,r,s){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||St(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&St(e,""+i);break;case"className":nt(e,"class",i);break;case"tabIndex":nt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,i);break;case"style":kt(e,i,s);break;case"data":if("object"!==t){nt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Tt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Jd(e,t,"name",r.name,r,null),Jd(e,t,"formEncType",r.formEncType,r,null),Jd(e,t,"formMethod",r.formMethod,r,null),Jd(e,t,"formTarget",r.formTarget,r,null)):(Jd(e,t,"encType",r.encType,r,null),Jd(e,t,"method",r.method,r,null),Jd(e,t,"target",r.target,r,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Tt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Qd);break;case"onScroll":null!=i&&Id("scroll",e);break;case"onScrollEnd":null!=i&&Id("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=Tt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Id("beforetoggle",e),Id("toggle",e),tt(e,"popover",i);break;case"xlinkActuate":it(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":it(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":it(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":it(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":it(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":it(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":it(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":it(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":it(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":tt(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,i)}}function Zd(e,t,n,i,r,s){switch(n){case"style":kt(e,i,s);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=r.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof i?St(e,i):("number"===typeof i||"bigint"===typeof i)&&St(e,""+i);break;case"onScroll":null!=i&&Id("scroll",e);break;case"onScrollEnd":null!=i&&Id("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Qd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qe.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ne]||null)?s[n]:null)&&e.removeEventListener(t,s,r),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):tt(e,n,i):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r)))}}function eu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Id("error",e),Id("load",e);var i,r=!1,s=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":r=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Jd(e,t,i,o,n,null)}}return s&&Jd(e,t,"srcSet",n.srcSet,n,null),void(r&&Jd(e,t,"src",n.src,n,null));case"input":Id("invalid",e);var l=i=o=s=null,c=null,d=null;for(r in n)if(n.hasOwnProperty(r)){var u=n[r];if(null!=u)switch(r){case"name":s=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":d=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(a(137,t));break;default:Jd(e,t,r,u,n,null)}}return vt(e,i,l,c,d,o,s,!1),void ut(e);case"select":for(s in Id("invalid",e),r=o=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":r=l;default:Jd(e,t,s,l,n,null)}return t=i,n=o,e.multiple=!!r,void(null!=t?bt(e,!!r,t,!1):null!=n&&bt(e,!!r,n,!0));case"textarea":for(o in Id("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Jd(e,t,o,l,n,null)}return wt(e,r,s,i),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(r=n[c]))if("selected"===c)e.selected=r&&"function"!==typeof r&&"symbol"!==typeof r;else Jd(e,t,c,r,n,null);return;case"dialog":Id("beforetoggle",e),Id("toggle",e),Id("cancel",e),Id("close",e);break;case"iframe":case"object":Id("load",e);break;case"video":case"audio":for(r=0;r<$d.length;r++)Id($d[r],e);break;case"image":Id("error",e),Id("load",e);break;case"details":Id("toggle",e);break;case"embed":case"source":case"link":Id("error",e),Id("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&null!=(r=n[d]))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Jd(e,t,d,r,n,null)}return;default:if(At(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(r=n[u])&&Zd(e,t,u,r,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(r=n[l])&&Jd(e,t,l,r,n,null))}var tu=null,nu=null;function iu(e){return 9===e.nodeType?e:e.ownerDocument}function ru(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function su(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function au(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ou=null;var lu="function"===typeof setTimeout?setTimeout:void 0,cu="function"===typeof clearTimeout?clearTimeout:void 0,du="function"===typeof Promise?Promise:void 0,uu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof du?function(e){return du.resolve(null).then(e).catch(hu)}:lu;function hu(e){setTimeout(function(){throw e})}function fu(e){return"head"===e}function pu(e,t){var n=t,i=0,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<i&&8>i){n=i;var a=e.ownerDocument;if(1&n&&wu(a.documentElement),2&n&&wu(a.body),4&n)for(wu(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Re]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===r)return e.removeChild(s),void Eh(t);r--}else"$"===n||"$?"===n||"$!"===n?r++:i=n.charCodeAt(0)-48;else i=0;n=s}while(n);Eh(t)}function gu(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gu(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function mu(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yu=null;function bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xu(e,t,n){switch(t=iu(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function wu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var Su=new Map,Cu=new Set;function _u(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var ku=D.d;D.d={f:function(){var e=ku.f(),t=Wc();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Pa(t):ku.r(e)},D:function(e){ku.D(e),Eu("dns-prefetch",e,null)},C:function(e,t){ku.C(e,t),Eu("preconnect",e,t)},L:function(e,t,n){ku.L(e,t,n);var i=Au;if(i&&e&&t){var r='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(r+='[imagesrcset="'+gt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(r+='[imagesizes="'+gt(n.imageSizes)+'"]')):r+='[href="'+gt(e)+'"]';var s=r;switch(t){case"style":s=Tu(e);break;case"script":s=Pu(e)}Su.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Su.set(s,e),null!==i.querySelector(r)||"style"===t&&i.querySelector(Ou(s))||"script"===t&&i.querySelector(Nu(s))||(eu(t=i.createElement("link"),"link",e),Ge(t),i.head.appendChild(t)))}},m:function(e,t){ku.m(e,t);var n=Au;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",r='link[rel="modulepreload"][as="'+gt(i)+'"][href="'+gt(e)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Pu(e)}if(!Su.has(s)&&(e=h({rel:"modulepreload",href:e},t),Su.set(s,e),null===n.querySelector(r))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Nu(s)))return}eu(i=n.createElement("link"),"link",e),Ge(i),n.head.appendChild(i)}}},X:function(e,t){ku.X(e,t);var n=Au;if(n&&e){var i=Ue(n).hoistableScripts,r=Pu(e),s=i.get(r);s||((s=n.querySelector(Nu(r)))||(e=h({src:e,async:!0},t),(t=Su.get(r))&&Iu(e,t),Ge(s=n.createElement("script")),eu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}},S:function(e,t,n){ku.S(e,t,n);var i=Au;if(i&&e){var r=Ue(i).hoistableStyles,s=Tu(e);t=t||"default";var a=r.get(s);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(Ou(s)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Su.get(s))&&Lu(e,n);var l=a=i.createElement("link");Ge(l),eu(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Du(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},r.set(s,a)}}},M:function(e,t){ku.M(e,t);var n=Au;if(n&&e){var i=Ue(n).hoistableScripts,r=Pu(e),s=i.get(r);s||((s=n.querySelector(Nu(r)))||(e=h({src:e,async:!0,type:"module"},t),(t=Su.get(r))&&Iu(e,t),Ge(s=n.createElement("script")),eu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}};var Au="undefined"===typeof document?null:document;function Eu(e,t,n){var i=Au;if(i&&"string"===typeof t&&t){var r=gt(t);r='link[rel="'+e+'"][href="'+r+'"]',"string"===typeof n&&(r+='[crossorigin="'+n+'"]'),Cu.has(r)||(Cu.add(r),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(r)&&(eu(t=i.createElement("link"),"link",e),Ge(t),i.head.appendChild(t)))}}function ju(e,t,n,i){var r,s,o,l,c=(c=U.current)?_u(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Tu(n.href),(i=(n=Ue(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Tu(n.href);var d=Ue(c).hoistableStyles,u=d.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,u),(d=c.querySelector(Ou(e)))&&!d._p&&(u.instance=d,u.state.loading=5),Su.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Su.set(e,n),d||(r=c,s=e,o=n,l=u.state,r.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=r.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eu(s,"link",o),Ge(s),r.head.appendChild(s))))),t&&null===i)throw Error(a(528,""));return u}if(t&&null!==i)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pu(n),(i=(n=Ue(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Tu(e){return'href="'+gt(e)+'"'}function Ou(e){return'link[rel="stylesheet"]['+e+"]"}function Mu(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pu(e){return'[src="'+gt(e)+'"]'}function Nu(e){return"script[async]"+e}function $u(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+gt(n.href)+'"]');if(i)return t.instance=i,Ge(i),i;var r=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(i=(e.ownerDocument||e).createElement("style")),eu(i,"style",r),Du(i,n.precedence,e),t.instance=i;case"stylesheet":r=Tu(n.href);var s=e.querySelector(Ou(r));if(s)return t.state.loading|=4,t.instance=s,Ge(s),s;i=Mu(n),(r=Su.get(r))&&Lu(i,r),Ge(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),eu(s,"link",i),t.state.loading|=4,Du(s,n.precedence,e),t.instance=s;case"script":return s=Pu(n.src),(r=e.querySelector(Nu(s)))?(t.instance=r,Ge(r),r):(i=n,(r=Su.get(s))&&Iu(i=h({},n),r),Ge(r=(e=e.ownerDocument||e).createElement("script")),eu(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Du(i,n.precedence,e));return t.instance}function Du(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)s=o;else if(s!==r)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Lu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Iu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fu=null;function Ru(e,t,n){if(null===Fu){var i=new Map,r=Fu=new Map;r.set(n,i)}else(i=(r=Fu).get(n))||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var s=n[r];if(!(s[Re]||s[Pe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(s):i.set(a,[s])}}return i}function Bu(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Wu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var zu=null;function Hu(){}function Uu(){if(this.count--,0===this.count)if(this.stylesheets)Vu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Gu=null;function Vu(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Gu=new Map,t.forEach(qu,e),Gu=null,Uu.call(e))}function qu(e,t){if(!(4&t.state.loading)){var n=Gu.get(e);if(n)var i=n.get(null);else{n=new Map,Gu.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(r=t.instance).getAttribute("data-precedence"),(s=n.get(a)||i)===i&&n.set(null,r),n.set(a,r),this.count++,i=Uu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(r,e.firstChild),t.state.loading|=4}}var Xu={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Yu(e,t,n,i,r,s,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Ku(e,t,n,i,r,s,a,o,l,c,d,u){return e=new Yu(e,t,n,a,o,l,c,u),t=1,!0===s&&(t|=24),s=Li(3,null,null,t),e.current=s,s.stateNode=e,(t=Nr()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:t},ns(s),e}function Qu(e){return e?e=$i:$i}function Ju(e,t,n,i,r,s){r=Qu(r),null===i.context?i.context=r:i.pendingContext=r,(i=rs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(i.callback=s),null!==(n=ss(e,i,t))&&(Lc(n,0,t),as(n,e,t))}function Zu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zu(e,t),(e=e.alternate)&&Zu(e,t)}function th(e){if(13===e.tag){var t=Mi(e,67108864);null!==t&&Lc(t,0,67108864),eh(e,67108864)}}var nh=!0;function ih(e,t,n,i){var r=$.T;$.T=null;var s=D.p;try{D.p=2,sh(e,t,n,i)}finally{D.p=s,$.T=r}}function rh(e,t,n,i){var r=$.T;$.T=null;var s=D.p;try{D.p=8,sh(e,t,n,i)}finally{D.p=s,$.T=r}}function sh(e,t,n,i){if(nh){var r=ah(i);if(null===r)zd(e,t,i,oh,n),yh(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return uh=bh(uh,e,t,n,i,r),!0;case"dragenter":return hh=bh(hh,e,t,n,i,r),!0;case"mouseover":return fh=bh(fh,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return ph.set(s,bh(ph.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,gh.set(s,bh(gh.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(yh(e,i),4&t&&-1<vh.indexOf(e)){for(;null!==r;){var s=ze(r);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=ye(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}Sd(s),0===(6&nc)&&(Sc=te()+500,Cd(0,!1))}}break;case 13:null!==(o=Mi(s,2))&&Lc(o,0,2),Wc(),eh(s,2)}if(null===(s=ah(i))&&zd(e,t,i,oh,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else zd(e,t,i,null,n)}}function ah(e){return lh(e=Mt(e))}var oh=null;function lh(e){if(oh=null,null!==(e=We(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return oh=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case ie:return 2;case re:return 8;case se:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,uh=null,hh=null,fh=null,ph=new Map,gh=new Map,mh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function bh(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=ze(t))&&th(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function xh(e){var t=We(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=$c();e=je(e);var t=Mi(n,e);null!==t&&Lc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&th(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Ot=i,n.target.dispatchEvent(i),Ot=null,t.shift()}return!0}function Sh(e,t,n){wh(e)&&n.delete(t)}function Ch(){dh=!1,null!==uh&&wh(uh)&&(uh=null),null!==hh&&wh(hh)&&(hh=null),null!==fh&&wh(fh)&&(fh=null),ph.forEach(Sh),gh.forEach(Sh)}function _h(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ch)))}var kh=null;function Ah(e){kh!==e&&(kh=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){kh===e&&(kh=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if("function"!==typeof i){if(null===lh(i||n))continue;break}var s=ze(n);null!==s&&(e.splice(t,3),t-=3,Oa(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Eh(e){function t(t){return _h(t,e)}null!==uh&&_h(uh,e),null!==hh&&_h(hh,e),null!==fh&&_h(fh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<mh.length;n++){var i=mh[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<mh.length&&null===(n=mh[0]).blockedOn;)xh(n),null===n.blockedOn&&mh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[Ne]||null;if("function"===typeof s)a||Ah(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[Ne]||null)o=a.formAction;else if(null!==lh(r))continue}else o=a.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),Ah(n)}}}function jh(e){this._internalRoot=e}function Th(e){this._internalRoot=e}Th.prototype.render=jh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Ju(t.current,$c(),e,t,null,null)},Th.prototype.unmount=jh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Ju(e.current,2,null,e,null,null),Wc(),t[$e]=null}},Th.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<mh.length&&0!==t&&t<mh[n].priority;n++);mh.splice(n,0,e),0===n&&xh(e)}};var Oh=r.version;if("19.1.0"!==Oh)throw Error(a(527,Oh,"19.1.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return d(r),e;if(s===i)return d(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,c=r.child;c;){if(c===n){o=!0,n=r,i=s;break}if(c===i){o=!0,i=r,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,i=r;break}if(c===i){o=!0,i=s,n=r;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?u(e):null)?null:e.stateNode};var Mh={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{de=Ph.inject(Mh),ue=Ph}catch($h){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,i="",r=yo,s=bo,l=xo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(r=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Ku(e,1,!1,null,0,n,i,r,s,l,0,null),e[$e]=t.current,Bd(e),new jh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var i=!1,r="",s=yo,l=bo,c=xo,d=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(d=n.formState)),(t=Ku(e,1,!0,t,0,i,r,s,l,c,0,d)).context=Qu(null),n=t.current,(r=rs(i=je(i=$c()))).callback=null,ss(n,r,i),n=i,t.current.lanes=n,ke(t,n),Sd(t),e[$e]=t.current,Bd(e),new Th(t)},t.version="19.1.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},62:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[a,o],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}a=o=null,l=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(l.length);for(var e=[a,o],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var i,r=n(959),s=(i=r)&&i.__esModule?i:{default:i};var a=void 0,o=void 0,l=[];function c(){0!==l.length&&l[l.length-1].focusContent()}s.default.subscribe(function(e,t){a||o||((a=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),a.style.position="absolute",a.style.opacity="0",a.setAttribute("tabindex","0"),a.addEventListener("focus",c),(o=a.cloneNode()).addEventListener("focus",c)),(l=t).length>0?(document.body.firstChild!==a&&document.body.insertBefore(a,document.body.firstChild),document.body.lastChild!==o&&document.body.appendChild(o)):(a.parentElement&&a.parentElement.removeChild(a),o.parentElement&&o.parentElement.removeChild(o))})},139:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()},173:(e,t,n)=>{e.exports=n(497)()},175:(e,t)=>{"use strict";const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,i=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function c(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function d(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,s.default)(e);if(!n.length)return void t.preventDefault();var i=void 0,r=t.shiftKey,o=n[0],l=n[n.length-1],c=a();if(e===c){if(!r)return;i=l}l!==c||r||(i=o);o===c&&r&&(i=l);if(i)return t.preventDefault(),void i.focus();var d=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==d||"Chrome"==d[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var u=n.indexOf(c);u>-1&&(u+=r?-1:1);if("undefined"===typeof(i=n[u]))return t.preventDefault(),void(i=r?l:o).focus();t.preventDefault(),i.focus()};var i,r=n(682),s=(i=r)&&i.__esModule?i:{default:i};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?a(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,g(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function _(e,t,i,r,s,a){return i=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:a}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function j(){}function T(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,d=!1;if(null===e)d=!0;else switch(o){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case n:case i:d=!0;break;case h:return T((d=e._init)(e._payload),t,r,s,a)}}if(d)return a=a(e),d=""===s?"."+E(e,0):s,w(a)?(r="",null!=d&&(r=d.replace(A,"$&/")+"/"),T(a,t,r,"",function(e){return e})):null!=a&&(k(a)&&(l=a,c=r+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+d,a=_(l.type,c,void 0,0,0,l.props)),t.push(a)),1;d=0;var u,p=""===s?".":s+":";if(w(e))for(var g=0;g<e.length;g++)d+=T(s=e[g],t,r,o=p+E(s,g),a);else if("function"===typeof(g=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(e=g.call(e),g=0;!(s=e.next()).done;)d+=T(s=s.value,t,r,o=p+E(s,g++),a);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(j,j):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,r,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return d}function O(e,t,n){if(null==e)return e;var i=[],r=0;return T(e,i,"","",function(e){return t.call(n,e,r++)}),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function N(){}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=d,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=g({},e.props),r=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(r=""+t.key),t)!C.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(i[s]=t[s]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];i.children=a}return _(e.type,r,void 0,0,0,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var i,r={},s=null;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)C.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(r[i]=t[i]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];r.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===r[i]&&(r[i]=a[i]);return _(e,s,void 0,0,0,r)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var i=e(),r=S.S;null!==r&&r(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(N,P)}catch(s){P(s)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var i=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.0"},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},396:(e,t,n)=>{var i;!function(){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),s={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()},439:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(43),o=m(n(173)),l=g(n(774)),c=m(n(206)),d=g(n(619)),u=g(n(841)),h=n(821),f=m(h),p=m(n(959));function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}n(62);var v={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=0,b=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,i=e.ariaHideApp,r=e.htmlOpenClassName,s=e.bodyOpenClassName,a=e.parentSelector,o=a&&a().ownerDocument||document;s&&u.remove(o.body,s),r&&u.remove(o.getElementsByTagName("html")[0],r),i&&y>0&&0===(y-=1)&&d.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(l.returnFocus(n.props.preventScroll),l.teardownScopedFocus()):l.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),p.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(l.setupScopedFocus(n.node),l.markForFocusLater()),n.setState({isOpen:!0},function(){n.openAnimationFrame=requestAnimationFrame(function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})})}))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())})},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){(function(e){return"Tab"===e.code||9===e.keyCode})(e)&&(0,c.default)(n.content,e),n.props.shouldCloseOnEsc&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var i="object"===("undefined"===typeof t?"undefined":r(t))?t:{base:v[e],afterOpen:v[e]+"--after-open",beforeClose:v[e]+"--before-close"},s=i.base;return n.state.afterOpen&&(s=s+" "+i.afterOpen),n.state.beforeClose&&(s=s+" "+i.beforeClose),"string"===typeof t&&t?s+" "+t:s},n.attributesFromObject=function(e,t){return Object.keys(t).reduce(function(n,i){return n[e+"-"+i]=t[i],n},{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,i=e.htmlOpenClassName,r=e.bodyOpenClassName,s=e.parentSelector,a=s&&s().ownerDocument||document;r&&u.add(a.body,r),i&&u.add(a.getElementsByTagName("html")[0],i),n&&(y+=1,d.hide(t)),p.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,r=e.overlayClassName,s=e.defaultStyles,a=e.children,o=n?{}:s.content,l=r?{}:s.overlay;if(this.shouldBeClosed())return null;var c={ref:this.setOverlayRef,className:this.buildClassName("overlay",r),style:i({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},d=i({id:t,ref:this.setContentRef,style:i({},o,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",i({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),u=this.props.contentElement(d,a);return this.props.overlayElement(c,u)}}]),t}(a.Component);b.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},b.propTypes={isOpen:o.default.bool.isRequired,defaultStyles:o.default.shape({content:o.default.object,overlay:o.default.object}),style:o.default.shape({content:o.default.object,overlay:o.default.object}),className:o.default.oneOfType([o.default.string,o.default.object]),overlayClassName:o.default.oneOfType([o.default.string,o.default.object]),parentSelector:o.default.func,bodyOpenClassName:o.default.string,htmlOpenClassName:o.default.string,ariaHideApp:o.default.bool,appElement:o.default.oneOfType([o.default.instanceOf(f.default),o.default.instanceOf(h.SafeHTMLCollection),o.default.instanceOf(h.SafeNodeList),o.default.arrayOf(o.default.instanceOf(f.default))]),onAfterOpen:o.default.func,onAfterClose:o.default.func,onRequestClose:o.default.func,closeTimeoutMS:o.default.number,shouldFocusAfterRender:o.default.bool,shouldCloseOnOverlayClick:o.default.bool,shouldReturnFocusAfterClose:o.default.bool,preventScroll:o.default.bool,role:o.default.string,contentLabel:o.default.string,aria:o.default.object,data:o.default.object,children:o.default.node,shouldCloseOnEsc:o.default.bool,overlayRef:o.default.func,contentRef:o.default.func,id:o.default.string,overlayElement:o.default.func,contentElement:o.default.func,testId:o.default.string},t.default=b,e.exports=t.default},440:e=>{"use strict";var t=function(){};e.exports=t},484:(e,t,n)=>{"use strict";function i(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function r(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function s(e,t){try{var n=this.props,i=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}function a(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,a=null,o=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?a="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(a="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?o="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==a||null!==o){var l=e.displayName||e.name,c="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==a?"\n  "+a:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=i,t.componentWillReceiveProps=r),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=s;var d=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var i=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;d.call(this,e,t,i)}}return e}n.r(t),n.d(t,{polyfill:()=>a}),i.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,s.__suppressDeprecationWarning=!0},497:(e,t,n)=>{"use strict";var i=n(218);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,a){if(a!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},579:(e,t,n)=>{"use strict";e.exports=n(799)},619:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){o&&(o.removeAttribute?o.removeAttribute("aria-hidden"):null!=o.length?o.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(o).forEach(function(e){return e.removeAttribute("aria-hidden")}));o=null},t.log=function(){0},t.assertNodeList=l,t.setElement=function(e){var t=e;if("string"===typeof t&&a.canUseDOM){var n=document.querySelectorAll(t);l(n,t),t=n}return o=t||o},t.validateElement=c,t.hide=function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=c(e)[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){r.value.setAttribute("aria-hidden","true")}}catch(a){n=!0,i=a}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}},t.show=function(e){var t=!0,n=!1,i=void 0;try{for(var r,s=c(e)[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){r.value.removeAttribute("aria-hidden")}}catch(a){n=!0,i=a}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}},t.documentNotReadyOrSSRTesting=function(){o=null};var i,r=n(440),s=(i=r)&&i.__esModule?i:{default:i},a=n(821);var o=null;function l(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){var t=e||o;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,s.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},672:(e,t,n)=>{"use strict";var i=n(43);function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(r(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),r="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},682:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce(function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])},[]);return n.filter(o)};var n="none",i="contents",r=/^(input|select|textarea|button|object|iframe)$/;function s(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var r=window.getComputedStyle(e),s=r.getPropertyValue("display");return t?s!==i&&function(e,t){return"visible"!==t.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0}(e,r):s===n}catch(a){return console.warn("Failed to inspect element style"),!1}}function a(e,t){var n=e.nodeName.toLowerCase();return(r.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),s(t))return!1;t=t.parentNode}return!0}(e)}function o(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&a(e,!n)}e.exports=t.default},765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(43),a=p(s),o=p(n(950)),l=p(n(173)),c=p(n(439)),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(619)),u=n(821),h=p(u),f=n(484);function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var m=t.portalClassName="ReactModalPortal",v=t.bodyOpenClassName="ReactModal__Body--open",y=u.canUseDOM&&void 0!==o.default.createPortal,b=function(e){return document.createElement(e)},x=function(){return y?o.default.createPortal:o.default.unstable_renderSubtreeIntoContainer};function w(e){return e()}var S=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=Array(s),d=0;d<s;d++)l[d]=arguments[d];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.removePortal=function(){!y&&o.default.unmountComponentAtNode(r.node);var e=w(r.props.parentSelector);e&&e.contains(r.node)?e.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(e){r.portal=e},r.renderPortal=function(e){var n=x()(r,a.default.createElement(c.default,i({defaultStyles:t.defaultStyles},e)),r.node);r.portalRef(n)},g(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){u.canUseDOM&&(y||(this.node=b("div")),this.node.className=this.props.portalClassName,w(this.props.parentSelector).appendChild(this.node),!y&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:w(e.parentSelector),nextParent:w(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(u.canUseDOM){var i=this.props,r=i.isOpen,s=i.portalClassName;e.portalClassName!==s&&(this.node.className=s);var a=n.prevParent,o=n.nextParent;o!==a&&(a.removeChild(this.node),o.appendChild(this.node)),(e.isOpen||r)&&!y&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(u.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return u.canUseDOM&&y?(!this.node&&y&&(this.node=b("div")),x()(a.default.createElement(c.default,i({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){d.setElement(e)}}]),t}(s.Component);S.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.oneOfType([l.default.instanceOf(h.default),l.default.instanceOf(u.SafeHTMLCollection),l.default.instanceOf(u.SafeNodeList),l.default.arrayOf(l.default.instanceOf(h.default))]),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func},S.defaultProps={isOpen:!1,portalClassName:m,bodyOpenClassName:v,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return a.default.createElement("div",e,t)},contentElement:function(e,t){return a.default.createElement("div",e,t)}},S.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,f.polyfill)(S),t.default=S},774:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){a=[]},t.log=function(){0},t.handleBlur=c,t.handleFocus=d,t.markForFocusLater=function(){a.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==a.length&&(t=a.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){a.length>0&&a.pop()},t.setupScopedFocus=function(e){o=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",d,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",d))},t.teardownScopedFocus=function(){o=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",d)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",d))};var i,r=n(682),s=(i=r)&&i.__esModule?i:{default:i};var a=[],o=null,l=!1;function c(){l=!0}function d(){if(l){if(l=!1,!o)return;setTimeout(function(){o.contains(document.activeElement)||((0,s.default)(o)[0]||o).focus()},0)}}},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function r(e,t,i){var r=null;if(void 0!==i&&(r=""+i),void 0!==t.key&&(r=""+t.key),"key"in t)for(var s in i={},t)"key"!==s&&(i[s]=t[s]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:r,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=r,t.jsxs=r},821:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var i,r=n(396);var s=((i=r)&&i.__esModule?i:{default:i}).default,a=s.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=s.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=s.canUseDOM?window.NodeList:{},t.canUseDOM=s.canUseDOM;t.default=a},841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)r(e,n[t]);var s=document.body;for(var a in i)r(s,i[a]);n={},i={}},t.log=function(){0};var n={},i={};function r(e,t){e.classList.remove(t)}t.add=function(e,t){return r=e.classList,s="html"==e.nodeName.toLowerCase()?n:i,void t.split(" ").forEach(function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(s,e),r.add(e)});var r,s},t.remove=function(e,t){return r=e.classList,s="html"==e.nodeName.toLowerCase()?n:i,void t.split(" ").forEach(function(e){!function(e,t){e[t]&&(e[t]-=1)}(s,e),0===s[e]&&r.remove(e)});var r,s}},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[i]=d,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(d,n)))break e;e[i]=d,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,g=!1,m=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=i(d)}}function S(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,_||(_=!0,C());else{var t=i(d);null!==t&&P(S,t.startTime-e)}}var C,_=!1,k=-1,A=5,E=-1;function j(){return!!v||!(t.unstable_now()-E<A)}function T(){if(v=!1,_){var e=t.unstable_now();E=e;var n=!0;try{e:{g=!1,m&&(m=!1,b(k),k=-1),p=!0;var s=f;try{t:{for(w(e),h=i(c);null!==h&&!(h.expirationTime>e&&j());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===i(c)&&r(c),w(e)}else r(c);h=i(c)}if(null!==h)n=!0;else{var l=i(d);null!==l&&P(S,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?C():_=!1}}}if("function"===typeof x)C=function(){x(T)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,M=O.port2;O.port1.onmessage=T,C=function(){M.postMessage(null)}}else C=function(){y(T,0)};function P(e,n){k=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(d,e),null===i(c)&&e===i(d)&&(m?(b(k),k=-1):m=!0,P(S,s-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,_||(_=!0,C()))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(i.openInstances.length),i.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")},t.resetState=function(){i=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach(function(n){return n(e,t.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},i=new n;t.default=i},963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(765),s=(i=r)&&i.__esModule?i:{default:i};t.default=s.default,e.exports=t.default}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".dff87da4.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="website:";n.l=(i,r,s,a)=>{if(e[i])e[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=i),e[i]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/EduSite/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(i);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkwebsite=self.webpackChunkwebsite||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{dU:()=>Pv,ng:()=>Nv,EA:()=>$v,Tm:()=>Dv,D6:()=>Lv,YE:()=>Iv});var t=n(43),i=n(391);function r(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n(175);const d=["sri"],u=["page"],h=["page","matches"],f=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var m="popstate";function v(){return _(function(e,t){let{pathname:n="/",search:i="",hash:r=""}=C(e.location.hash.substring(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),w("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),i="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");i=-1===n?t:t.slice(0,n)}return i+"#"+("string"===typeof t?t:S(t))},function(e,t){b("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(zy){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function S(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function C(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function _(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,d=u();function u(){return(a.state||{idx:null}).idx}function h(){o="POP";let e=u(),t=null==e?null:e-d;d=e,l&&l({action:o,location:p.location,delta:t})}function f(e){return k(e)}null==d&&(d=0,a.replaceState(c(c({},a.state),{},{idx:d}),""));let p={get action(){return o},get location(){return e(r,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(m,h),l=e,()=>{r.removeEventListener(m,h),l=null}},createHref:e=>t(r,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let i=w(p.location,e,t);n&&n(i,e),d=u()+1;let c=x(i,d),h=p.createHref(i);try{a.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(h)}s&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let i=w(p.location,e,t);n&&n(i,e),d=u();let r=x(i,d),c=p.createHref(i);a.replaceState(r,"",c),s&&l&&l({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}function k(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),y(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:S(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function A(e,t){return E(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function E(e,t,n,i){let r=z(("string"===typeof t?C(t):t).pathname||"/",n);if(null==r)return null;let s=j(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=W(r);a=F(s[o],e,i)}return a}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=(e,r,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(y(a.relativePath.startsWith(i),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(i.length));let o=q([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(o,'".')),j(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:I(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of T(e.path))r(e,t,i);else r(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let a=T(i.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),r&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var O=/^:[\w-]+$/,M=3,P=2,N=1,$=10,D=-2,L=e=>"*"===e;function I(e,t){let n=e.split("/"),i=n.length;return n.some(L)&&(i+=D),t&&(i+=P),n.filter(e=>!L(e)).reduce((e,t)=>e+(O.test(t)?M:""===t?N:$),i)}function F(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,r={},s="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===s?t:t.slice(s.length)||"/",d=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!i[i.length-1].route.index&&(d=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),a.push({params:r,pathname:q([s,d.pathname]),pathnameBase:X(q([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=q([s,d.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=B(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function B(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function W(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function H(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function G(e){let t=U(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function V(e,t,n){let i,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=C(e):(i=c({},e),y(!i.pathname||!i.pathname.includes("?"),H("?","pathname","search",i)),y(!i.pathname||!i.pathname.includes("#"),H("#","pathname","hash",i)),y(!i.search||!i.search.includes("#"),H("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:i="",hash:r=""}="string"===typeof e?C(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Y(i),hash:K(r)}}(i,s),d=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!u||(l.pathname+="/"),l}var q=e=>e.join("/").replace(/\/\/+/g,"/"),X=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Y=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var J=["POST","PUT","PATCH","DELETE"],Z=(new Set(J),["GET",...J]);new Set(Z),Symbol("ResetLoaderData");var ee=t.createContext(null);ee.displayName="DataRouter";var te=t.createContext(null);te.displayName="DataRouterState";var ne=t.createContext({isTransitioning:!1});ne.displayName="ViewTransition";var ie=t.createContext(new Map);ie.displayName="Fetchers";var re=t.createContext(null);re.displayName="Await";var se=t.createContext(null);se.displayName="Navigation";var ae=t.createContext(null);ae.displayName="Location";var oe=t.createContext({outlet:null,matches:[],isDataRoute:!1});oe.displayName="Route";var le=t.createContext(null);le.displayName="RouteError";function ce(){return null!=t.useContext(ae)}function de(){return y(ce(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(ae).location}var ue="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function he(e){t.useContext(se).static||t.useLayoutEffect(e)}function fe(){let{isDataRoute:e}=t.useContext(oe);return e?function(){let{router:e}=Ce("useNavigate"),n=ke("useNavigate"),i=t.useRef(!1);he(()=>{i.current=!0});let r=t.useCallback(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(i.current,ue),i.current&&("number"===typeof t?e.navigate(t):await e.navigate(t,c({fromRouteId:n},r)))},[e,n]);return r}():function(){y(ce(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ee),{basename:n,navigator:i}=t.useContext(se),{matches:r}=t.useContext(oe),{pathname:s}=de(),a=JSON.stringify(G(r)),o=t.useRef(!1);he(()=>{o.current=!0});let l=t.useCallback(function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(o.current,ue),!o.current)return;if("number"===typeof t)return void i.go(t);let l=V(t,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:q([n,l.pathname])),(r.replace?i.replace:i.push)(l,r.state,r)},[n,i,a,s,e]);return l}()}t.createContext(null);function pe(){let{matches:e}=t.useContext(oe),n=e[e.length-1];return n?n.params:{}}function ge(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(oe),{pathname:r}=de(),s=JSON.stringify(G(i));return t.useMemo(()=>V(e,JSON.parse(s),r,"path"===n),[e,s,r,n])}function me(e,n,i,r){y(ce(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=t.useContext(se),{matches:a}=t.useContext(oe),o=a[a.length-1],l=o?o.params:{},d=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let e=h&&h.path||"";je(d,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let f,p=de();if(n){var g;let e="string"===typeof n?C(n):n;y("/"===u||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(u)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(u,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),f=e}else f=p;let m=f.pathname||"/",v=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=A(e,{pathname:v});b(h||null!=x,'No routes matched location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" ')),b(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,'Matched leaf route at location "'.concat(f.pathname).concat(f.search).concat(f.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=we(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:q([u,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:q([u,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,i,r);return n&&w?t.createElement(ae.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:"POP"}},w):w}function ve(){let e=Ae(),n=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:s},i):null,o)}var ye=t.createElement(ve,null),be=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(oe.Provider,{value:this.props.routeContext},t.createElement(le.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:n,match:i,children:r}=e,s=t.useContext(ee);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(oe.Provider,{value:n},r)}function we(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let r=e,s=null===i||void 0===i?void 0:i.errors;if(null!=s){let e=r.findIndex(e=>e.route.id&&void 0!==(null===s||void 0===s?void 0:s[e.route.id]));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(s).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let a=!1,o=-1;if(i)for(let t=0;t<r.length;t++){let e=r[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=t),e.route.id){let{loaderData:t,errors:n}=i,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){a=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}return r.reduceRight((e,l,c)=>{let d,u=!1,h=null,f=null;i&&(d=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||ye,a&&(o<0&&0===c?(je("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),u=!0,f=null):o===c&&(u=!0,f=l.route.hydrateFallbackElement||null)));let p=n.concat(r.slice(0,c+1)),g=()=>{let n;return n=d?h:u?f:l.route.Component?t.createElement(l.route.Component,null):l.route.element?l.route.element:e,t.createElement(xe,{match:l,routeContext:{outlet:e,matches:p,isDataRoute:null!=i},children:n})};return i&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?t.createElement(be,{location:i.location,revalidation:i.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let n=t.useContext(ee);return y(n,Se(e)),n}function _e(e){let n=t.useContext(te);return y(n,Se(e)),n}function ke(e){let n=function(e){let n=t.useContext(oe);return y(n,Se(e)),n}(e),i=n.matches[n.matches.length-1];return y(i.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),i.route.id}function Ae(){var e;let n=t.useContext(le),i=_e("useRouteError"),r=ke("useRouteError");return void 0!==n?n:null===(e=i.errors)||void 0===e?void 0:e[r]}var Ee={};function je(e,t,n){t||Ee[e]||(Ee[e]=!0,b(!1,n))}t.memo(function(e){let{routes:t,future:n,state:i}=e;return me(t,void 0,i,n)});function Te(e){let{to:n,replace:i,state:r,relative:s}=e;y(ce(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=t.useContext(se);b(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=t.useContext(oe),{pathname:l}=de(),c=fe(),d=V(n,G(o),l,"path"===s),u=JSON.stringify(d);return t.useEffect(()=>{c(JSON.parse(u),{replace:i,state:r,relative:s})},[c,u,s,i,r]),null}function Oe(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Me(e){let{basename:n="/",children:i=null,location:r,navigationType:s="POP",navigator:a,static:o=!1}=e;y(!ce(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=t.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof r&&(r=C(r));let{pathname:d="/",search:u="",hash:h="",state:f=null,key:p="default"}=r,g=t.useMemo(()=>{let e=z(d,l);return null==e?null:{location:{pathname:e,search:u,hash:h,state:f,key:p},navigationType:s}},[l,d,u,h,f,p,s]);return b(null!=g,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(d).concat(u).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:t.createElement(se.Provider,{value:c},t.createElement(ae.Provider,{children:i,value:g}))}function Pe(e){let{children:t,location:n}=e;return me(Ne(t),n)}t.Component;function Ne(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let s=[...n,r];if(e.type===t.Fragment)return void i.push.apply(i,Ne(e.props.children,s));y(e.type===Oe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ne(e.props.children,s)),i.push(a)}),i}var $e="get",De="application/x-www-form-urlencoded";function Le(e){return null!=e&&"string"===typeof e.tagName}var Ie=null;var Fe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Re(e){return null==e||Fe.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(De,'"')),null)}function Be(e,t){let n,i,r,s,a;if(Le(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");i=a?z(a,t):null,n=e.getAttribute("method")||$e,r=Re(e.getAttribute("enctype"))||De,s=new FormData(e)}else if(function(e){return Le(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Le(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(i=o?z(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||$e,r=Re(e.getAttribute("formenctype"))||Re(a.getAttribute("enctype"))||De,s=new FormData(a,e),!function(){if(null===Ie)try{new FormData(document.createElement("form"),0),Ie=!1}catch(zy){Ie=!0}return Ie}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,i)}}else{if(Le(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$e,i=null,r=De,a=e}var o;return s&&"text/plain"===r&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}function We(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function ze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function He(e){return null!=e&&"string"===typeof e.page}function Ue(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ge(e,t,n,i,r,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0}):[]}function Ve(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map(e=>{let i=t.routes[e.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1),[...new Set(i)];var i}function qe(e,t){let n=new Set,i=new Set(t);return e.reduce((e,r)=>{if(t&&!He(r)&&"script"===r.as&&r.href&&i.has(r.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(r));return n.has(s)||(n.add(s),e.push({key:s,link:r})),e},[])}function Xe(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var Ye=new Set([100,101,204,205]);function Ke(e,t){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.data":t&&"/"===z(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):n.pathname="".concat(n.pathname.replace(/\/$/,""),".data"),n}t.Component;function Qe(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let r,s=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(n))return t.createElement(Je,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),s);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(Je,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function Je(e){var n;let{title:i,renderScripts:r,isOutsideRemixApp:s,children:a}=e,{routeModules:o}=it();return null!==o.root&&void 0!==n&&n.Layout&&!s?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,i)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,r?t.createElement(dt,null):null)))}function Ze(e,t){return"lazy"===e.mode&&!0===t}function et(){let e=t.useContext(ee);return We(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tt(){let e=t.useContext(te);return We(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var nt=t.createContext(void 0);function it(){let e=t.useContext(nt);return We(e,"You must render this element inside a <HydratedRouter> element"),e}function rt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function st(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}function at(e){let{page:n}=e,i=r(e,u),{router:s}=et(),a=t.useMemo(()=>A(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?t.createElement(lt,c({page:n,matches:a},i)):null}function ot(e){let{manifest:n,routeModules:i}=it(),[r,s]=t.useState([]);return t.useEffect(()=>{let t=!1;return async function(e,t,n){return qe((await Promise.all(e.map(async e=>{let i=t.routes[e.route.id];if(i){let e=await ze(i,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ue).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,n,i).then(e=>{t||s(e)}),()=>{t=!0}},[e,n,i]),r}function lt(e){let{page:n,matches:i}=e,s=r(e,h),a=de(),{manifest:o,routeModules:l}=it(),{basename:d}=et(),{loaderData:u,matches:f}=tt(),p=t.useMemo(()=>Ge(n,i,f,o,a,"data"),[n,i,f,o,a]),g=t.useMemo(()=>Ge(n,i,f,o,a,"assets"),[n,i,f,o,a]),m=t.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(i.forEach(n=>{var i;let r=o.routes[n.route.id];r&&r.hasLoader&&(!p.some(e=>e.route.id===n.route.id)&&n.route.id in u&&null!==(i=l[n.route.id])&&void 0!==i&&i.shouldRevalidate||r.hasClientLoader?t=!0:e.add(n.route.id))}),0===e.size)return[];let r=Ke(n,d);return t&&e.size>0&&r.searchParams.set("_routes",i.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[d,u,a,o,p,i,n,l]),v=t.useMemo(()=>Ve(g,o),[g,o]),y=ot(g);return t.createElement(t.Fragment,null,m.map(e=>t.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},s))),v.map(e=>t.createElement("link",c({key:e,rel:"modulepreload",href:e},s))),y.map(e=>{let{key:n,link:i}=e;return t.createElement("link",c({key:n},i))}))}nt.displayName="FrameworkContext";var ct=!1;function dt(e){let{manifest:n,serverHandoffString:i,isSpaMode:s,renderMeta:a,routeDiscovery:o,ssr:l}=it(),{router:u,static:h,staticContext:f}=et(),{matches:p}=tt(),g=Ze(o,l);a&&(a.didRenderScripts=!0);let m=st(p,null,s);t.useEffect(()=>{0},[]);let v=t.useMemo(()=>{var s;let a=f?"window.__reactRouterContext = ".concat(i,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=h?"".concat(null!==n.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(m.map((e,t)=>{let i="route".concat(t),r=n.routes[e.route.id];We(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=r,d=[...s?[{module:s,varName:"".concat(i,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===d.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[d.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(i," = {").concat(d.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=r(e,d),s=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach(e=>{let n=A(t.routes,e,t.basename);n&&n.forEach(e=>s.add(e.route.id))});let l=[...s].reduce((e,t)=>Object.assign(e,{[t]:i.routes[t]}),{});return c(c({},i),{},{routes:l,sri:!!n||void 0})}(n,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(m.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Xe(a),type:void 0})),t.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Xe(o),type:"module",async:!0})))},[]),y=ct?[]:(n.entry.imports.concat(Ve(m,n,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let x="object"===typeof n.sri?n.sri:{};return ct?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:x[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:x[n.entry.module],suppressHydrationWarning:!0}),y.map(n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:x[n],suppressHydrationWarning:!0})),v)}function ut(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var ht="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ht&&(window.__reactRouterVersion="7.6.2")}catch(zy){}function ft(e){let{basename:n,children:i,window:r}=e,s=t.useRef();null==s.current&&(s.current=v({window:r,v5Compat:!0}));let a=s.current,[o,l]=t.useState({action:a.action,location:a.location}),c=t.useCallback(e=>{t.startTransition(()=>l(e))},[l]);return t.useLayoutEffect(()=>a.listen(c),[a,c]),t.createElement(Me,{basename:n,children:i,location:o.location,navigationType:o.action,navigator:a})}var pt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=t.forwardRef(function(e,n){let i,{onClick:s,discover:a="render",prefetch:o="none",relative:l,reloadDocument:d,replace:u,state:h,target:p,to:g,preventScrollReset:m,viewTransition:v}=e,x=r(e,f),{basename:w}=t.useContext(se),C="string"===typeof g&&pt.test(g),_=!1;if("string"===typeof g&&C&&(i=g,ht))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=z(t.pathname,w);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:_=!0}catch(zy){b(!1,'<Link to="'.concat(g,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let k=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ce(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:r}=t.useContext(se),{hash:s,pathname:a,search:o}=ge(e,{relative:n}),l=a;return"/"!==i&&(l="/"===a?i:q([i,a])),r.createHref({pathname:l,search:o,hash:s})}(g,{relative:l}),[A,E,j]=function(e,n){let i=t.useContext(nt),[r,s]=t.useState(!1),[a,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=n,f=t.useRef(null);t.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),t.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{s(!0)},g=()=>{s(!1),o(!1)};return i?"intent"!==e?[a,f,{}]:[a,f,{onFocus:rt(l,p),onBlur:rt(c,g),onMouseEnter:rt(d,p),onMouseLeave:rt(u,g),onTouchStart:rt(h,p)}]:[!1,f,{}]}(o,x),T=function(e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=fe(),c=de(),d=ge(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:S(c)===S(d);l(e,{replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,d,i,r,n,e,s,a,o])}(g,{replace:u,state:h,target:p,preventScrollReset:m,relative:l,viewTransition:v});let O=t.createElement("a",c(c(c({},x),j),{},{href:i||k,onClick:_||d?s:function(e){s&&s(e),e.defaultPrevented||T(e)},ref:ut(n,E),target:p,"data-discover":C||"render"!==a?void 0:"true"}));return A&&!C?t.createElement(t.Fragment,null,O,t.createElement(at,{page:k})):O});gt.displayName="Link";var mt=t.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:d,viewTransition:u,children:h}=e,f=r(e,p),g=ge(d,{relative:f.relative}),m=de(),v=t.useContext(te),{navigator:b,basename:x}=t.useContext(se),w=null!=v&&function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(ne);y(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bt("useViewTransitionState"),s=ge(e,{relative:n.relative});if(!i.isTransitioning)return!1;let a=z(i.currentLocation.pathname,r)||i.currentLocation.pathname,o=z(i.nextLocation.pathname,r)||i.nextLocation.pathname;return null!=R(s.pathname,o)||null!=R(s.pathname,a)}(g)&&!0===u,S=b.encodeLocation?b.encodeLocation(g).pathname:g.pathname,C=m.pathname,_=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(C=C.toLowerCase(),_=_?_.toLowerCase():null,S=S.toLowerCase()),_&&x&&(_=z(_,x)||_);const k="/"!==S&&S.endsWith("/")?S.length-1:S.length;let A,E=C===S||!o&&C.startsWith(S)&&"/"===C.charAt(k),j=null!=_&&(_===S||!o&&_.startsWith(S)&&"/"===_.charAt(S.length)),T={isActive:E,isPending:j,isTransitioning:w},O=E?i:void 0;A="function"===typeof a?a(T):[a,E?"active":null,j?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let M="function"===typeof l?l(T):l;return t.createElement(gt,c(c({},f),{},{"aria-current":O,className:A,ref:n,style:M,to:d,viewTransition:u}),"function"===typeof h?h(T):h)});mt.displayName="NavLink";var vt=t.forwardRef((e,n)=>{let{discover:i="render",fetcherKey:s,navigate:a,reloadDocument:o,replace:l,state:d,method:u=$e,action:h,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:v}=e,b=r(e,g),x=St(),w=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(se),r=t.useContext(oe);y(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a=c({},ge(e||".",{relative:n})),o=de();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index"),n=t.some(e=>""===e);if(n){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(a.pathname="/"===a.pathname?i:q([i,a.pathname]));return S(a)}(h,{relative:p}),C="get"===u.toLowerCase()?"get":"post",_="string"===typeof h&&pt.test(h);return t.createElement("form",c(c({ref:n,method:C,action:w,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;x(t||e.currentTarget,{fetcherKey:s,method:n,navigate:a,replace:l,state:d,relative:p,preventScrollReset:m,viewTransition:v})}},b),{},{"data-discover":_||"render"!==i?void 0:"true"}))});function yt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function bt(e){let n=t.useContext(ee);return y(n,yt(e)),n}vt.displayName="Form";var xt=0,wt=()=>"__".concat(String(++xt),"__");function St(){let{router:e}=bt("useSubmit"),{basename:n}=t.useContext(se),i=ke("useRouteId");return t.useCallback(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Be(t,n);if(!1===r.navigate){let t=r.fetcherKey||wt();await e.fetch(t,i,r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,flushSync:r.flushSync})}else await e.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:l,body:c,formMethod:r.method||a,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:i,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,n,i])}const Ct=()=>{const{pathname:e}=de();return(0,t.useEffect)(()=>{document.documentElement.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null};var _t=n(579);const kt="https://backend-edu-site-5cnm.vercel.app",At=(0,t.createContext)(null),Et=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(null),[s,a]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token")||sessionStorage.getItem("token");if(e)try{const t=await fetch("".concat(kt,"/student/profile"),{headers:{Authorization:"MonaEdu ".concat(e)}});if(t.ok){const e=await t.json();r(e.data)}else localStorage.removeItem("token"),sessionStorage.removeItem("token"),r(null)}catch(t){console.error("Initial auth verification failed:",t),r(null)}finally{a(!1)}else a(!1)})()},[]);const o={user:i,isLoading:s,login:async(e,t)=>{t?localStorage.setItem("token",e):sessionStorage.setItem("token",e);try{const t=await fetch("".concat(kt,"/student/profile"),{headers:{Authorization:"MonaEdu ".concat(e)}});if(!t.ok)throw new Error("The provided token was invalid.");const n=await t.json();return r(n.data),n.data}catch(n){throw localStorage.removeItem("token"),sessionStorage.removeItem("token"),r(null),n}},logout:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("token"),r(null)}};return(0,_t.jsx)(At.Provider,{value:o,children:!s&&n})},jt=()=>(0,t.useContext)(At),Tt=()=>(0,_t.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,_t.jsx)("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"#333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ot=e=>{let{onToggleSidebar:t,isMobile:n}=e;const i=fe(),{logout:r}=jt();return(0,_t.jsxs)("div",{className:"header",children:[n&&(0,_t.jsx)("button",{className:"hamburger-button",onClick:t,children:(0,_t.jsx)(Tt,{})}),(0,_t.jsx)(gt,{to:"/",className:"header-brand-link",children:(0,_t.jsx)("h1",{className:"header-name",children:"MathSphere"})}),(0,_t.jsx)("button",{className:"logout-button",onClick:()=>{r(),i("/login")},children:"Logout"})]})},Mt=e=>{let{SidebarComponent:n,children:i}=e;const[r,s]=(0,t.useState)(!1),[a,o]=(0,t.useState)(window.innerWidth<768),l=()=>{a&&s(!r)};return(0,t.useEffect)(()=>{const e=()=>{const e=window.innerWidth<768;o(e),e||s(!1)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,_t.jsxs)("div",{className:"layout-wrapper",children:[" ",(0,_t.jsx)(Ot,{onToggleSidebar:l,isMobile:a})," ",(0,_t.jsxs)("div",{className:"app",children:[" ",(0,_t.jsx)(n,{isOpen:r,onNavLinkClick:()=>{a&&r&&s(!1)},isMobile:a}),a&&r&&(0,_t.jsx)("div",{className:"overlay",onClick:l}),(0,_t.jsxs)("main",{className:"main-content",children:[" ",i]})]})]})};const Pt=n.p+"static/media/exams.36f59b78fb11a79fc30e3e80247279d0.svg";const Nt=n.p+"static/media/assignment.b22e777e1b3d978faa73fd563c5cee62.svg";const $t=n.p+"static/media/materials.026eb556e178f44026648518f62bdafe.svg";n.p;const Dt=n.p+"static/media/boxBlack.6aaf4e706c8b390da4f5c7918bb6ff92.svg";const Lt=n.p+"static/media/lesson.7d166296c7b9cd446c37007162bd865e.svg";const It=n.p+"static/media/session.dd6535fb6ce40079a53ce6dcc78e3bac.svg";const Ft=n.p+"static/media/user.d95b55e9fe63eedb62df1a35029c9120.svg";const Rt=n.p+"static/media/bell.d06a98db68d9c8faccaa6a4dcc0a212f.svg",Bt=e=>{let{isOpen:t,onNavLinkClick:n,isMobile:i}=e;const r="sidebar ".concat(i?t?"open":"closed":"desktop-visible");return(0,_t.jsxs)("div",{className:r,children:[" ",(0,_t.jsx)("div",{className:"menu",children:"Menu"}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/dashboard/courses",onClick:n,children:[(0,_t.jsx)("img",{src:Lt,alt:"Courses"})," Courses"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/dashboard/assistants",onClick:n,children:[(0,_t.jsx)("img",{src:Ft,alt:"Assistants"})," Assistants"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/dashboard/courses-requests-managment",onClick:n,children:[(0,_t.jsx)("img",{src:Rt,alt:"courses requests"})," Courses requests"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/dashboard/archived-courses",onClick:n,children:[(0,_t.jsx)("img",{src:Dt,alt:"Archived Courses"})," Archived Courses"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{})]})]})},Wt=e=>{let{isOpen:t,onNavLinkClick:n,isMobile:i}=e;const r="sidebar ".concat(i?t?"open":"closed":"desktop-visible");return(0,_t.jsxs)("div",{className:r,children:[(0,_t.jsx)("div",{className:"menu",children:"Assistant Menu"}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/dashboard/courses",onClick:n,children:[(0,_t.jsx)("img",{src:It,alt:"Courses"})," Courses"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{})]})]})},zt=e=>{let{children:t}=e;const{user:n,isLoading:i}=jt();if(i)return(0,_t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading User..."});const r="assistant"===(null===n||void 0===n?void 0:n.role)?Wt:Bt;return(0,_t.jsx)(Mt,{SidebarComponent:r,children:t})};var Ht=n(963),Ut=n.n(Ht);const Gt=e=>{const n=(0,t.useRef)(null);return(0,t.useEffect)(()=>{const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("visible"),t.unobserve(e.target))})},e),i=n.current;if(i){Array.from(i.children).forEach(e=>t.observe(e))}return()=>{if(i){Array.from(i.children).forEach(e=>t.unobserve(e))}}},[e]),n},Vt=()=>{const[e,n]=(0,t.useState)(!1),i=fe(),r=()=>n(!1),s=()=>{const e=localStorage.getItem("token")||sessionStorage.getItem("token");i(e?"/redirecting":"/login")};return(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"top-bar",children:(0,_t.jsxs)("div",{className:"top-bar-content",children:[(0,_t.jsxs)("div",{className:"social-links",children:[(0,_t.jsxs)("a",{href:"https://www.facebook.com/profile.php?id=61550633945227",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)("img",{src:"https://img.icons8.com/?size=100&id=118467&format=png&color=FFFFFF",width:"24",height:"24"})," Facebook"]}),(0,_t.jsxs)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)("img",{src:"https://img.icons8.com/?size=100&id=59813&format=png&color=FFFFFF",width:"24",height:"24"})," Instagram"]})]}),(0,_t.jsx)("div",{className:"contact-info",children:(0,_t.jsxs)("a",{href:"https://wa.me/971508162674",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)("img",{src:"https://img.icons8.com/?size=100&id=Funux8t3F8Ig&format=png&color=FFFFFF",width:"24",height:"24"}),"+971 50 816 2674"]})})]})}),(0,_t.jsx)("header",{className:"welcome-header",children:(0,_t.jsxs)("nav",{className:"welcome-nav",children:[(0,_t.jsx)(gt,{to:"/",className:"nav-brand",children:"MathSphere"}),(0,_t.jsxs)("div",{className:"nav-links desktop-only",children:[(0,_t.jsx)(mt,{to:"/",children:"Home"}),(0,_t.jsx)(mt,{to:"/courses",children:"Courses"}),(0,_t.jsx)(mt,{to:"/testimonials",children:"Student Testimonials"}),(0,_t.jsx)(mt,{to:"/about",children:"About Us"}),(0,_t.jsx)(mt,{to:"/faqs",children:"FAQs"}),(0,_t.jsx)(mt,{to:"/contact",children:"Contact Us"}),(0,_t.jsx)("button",{onClick:s,className:"nav-button login",children:"Login"}),(0,_t.jsx)(gt,{to:"/signup",className:"nav-button signup",children:"Sign Up"})]}),(0,_t.jsx)("div",{className:"hamburger mobile-only",onClick:()=>n(!0),children:"\u2630"})]})}),(0,_t.jsx)("div",{className:"mobile-sidebar ".concat(e?"open":""),onClick:r,children:(0,_t.jsxs)("div",{className:"sidebar-content",onClick:e=>e.stopPropagation(),children:[(0,_t.jsx)("div",{className:"close-btn",onClick:r,children:"\xd7"}),(0,_t.jsx)(mt,{to:"/",onClick:r,children:"Home"}),(0,_t.jsx)(mt,{to:"/courses",onClick:r,children:"Courses"}),(0,_t.jsx)(mt,{to:"/testimonials",onClick:r,children:"Student Testimonials"}),(0,_t.jsx)(mt,{to:"/about",onClick:r,children:"About Us"}),(0,_t.jsx)(mt,{to:"/faqs",onClick:r,children:"FAQs"}),(0,_t.jsx)(mt,{to:"/contact",onClick:r,children:"Contact Us"}),(0,_t.jsx)("button",{onClick:()=>{s(),r()},className:"nav-button login",children:"Login"}),(0,_t.jsx)(gt,{to:"/signup",onClick:r,className:"nav-button signup",children:"Sign Up"})]})})]})},qt=()=>(0,_t.jsx)("footer",{className:"welcome-footer",children:(0,_t.jsxs)("div",{className:"container",children:[(0,_t.jsxs)("div",{className:"footer-grid",children:[(0,_t.jsxs)("div",{className:"footer-col",children:[(0,_t.jsx)("h4",{children:"Quick Links"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"/about",children:"About us"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"/courses",children:"Courses"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"/testimonials",children:"Testimonials"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"/contact",children:"Contact Us"})})]})]}),(0,_t.jsxs)("div",{className:"footer-col",children:[(0,_t.jsx)("h4",{children:"Our Courses"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"#",children:"Course A"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"#",children:"Course B"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"#",children:"Course A"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"#",children:"Course B"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"#",children:"Course A"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)(gt,{to:"#",children:"Course B"})})]})]}),(0,_t.jsxs)("div",{className:"footer-col",children:[(0,_t.jsx)("h4",{children:"Stay Connected"}),(0,_t.jsxs)("ul",{children:[(0,_t.jsx)("li",{children:(0,_t.jsx)("a",{href:"https://www.facebook.com/profile.php?id=61550633945227",children:"Facebook"})}),(0,_t.jsx)("li",{children:(0,_t.jsx)("a",{href:"#",children:"Instagram"})})]})]}),(0,_t.jsxs)("div",{className:"footer-col",children:[(0,_t.jsx)("h4",{children:"Contact Us"})," ",(0,_t.jsxs)("a",{href:"https://wa.me/971508162674",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)("img",{src:"https://img.icons8.com/?size=100&id=Funux8t3F8Ig&format=png&color=FFFFFF",width:"20",height:"20"})," +971 50 816 2674"]})," "]})]}),(0,_t.jsx)("div",{className:"footer-bottom",children:(0,_t.jsx)("p",{children:"\xa9 2025 Mona Abouelazm. All Rights Reserved."})})]})}),Xt=()=>{const[e,n]=(0,t.useState)(null);return(0,_t.jsxs)("div",{className:"faqs-page-container",children:[(0,_t.jsx)("section",{className:"faqs-hero-section",style:{backgroundImage:"url('".concat("https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143777/EduSite/toolxox.com-mEkl9_v9dg7e.jpg","')")},children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsx)("h1",{children:"Frequently Asked Questions"})})}),(0,_t.jsx)("div",{className:"faqs-main-content",children:(0,_t.jsx)("div",{className:"container faqs-container",children:[{id:1,question:"Q: How will your lessons help me improve my maths grades?",answer:"My lessons are designed to break down complex IGCSE maths concepts into simple, easy-to-follow steps. You\u2019ll receive targeted practice, clear explanations, and strategies for tackling tricky exam questions so you can boost both your confidence and your marks."},{id:2,question:"Q: What makes your teaching style different?",answer:"I focus on building a solid foundation first \u2014 strengthening core skills before moving to advanced problem-solving. Lessons are interactive, personalised, and adapted to your pace, ensuring no topic is left unclear."},{id:3,question:"Q: Have your students achieved top results before?",answer:"Yes \u2014 many of my students have moved from struggling with maths to achieving A* grades. Their progress comes from consistent practice, focused feedback, and learning how to approach exam questions effectively."},{id:4,question:"Q: What exactly will I get when I join your course?",answer:"You\u2019ll get structured lesson plans, concise revision notes, topic-by-topic worksheets, exam-style questions, and live support. Every resource is aligned with the Cambridge and Edexcel IGCSE syllabus to keep you exam-ready."},{id:5,question:"Q: How can I be sure I\u2019ll see results?",answer:"If you attend lessons regularly, complete the homework, and apply the techniques we cover, you\u2019ll see steady improvement \u2014 and if you put in consistent effort, top grades are\xa0within\xa0reach."}].map(t=>(0,_t.jsxs)("div",{className:"faq-item ".concat(e===t.id?"active":""),children:[(0,_t.jsxs)("div",{className:"faq-question",onClick:()=>{return i=t.id,void n(e===i?null:i);var i},children:[(0,_t.jsx)("span",{children:t.question}),(0,_t.jsx)("span",{className:"faq-icon",children:e===t.id?"\xd7":"+"})]}),(0,_t.jsx)("div",{className:"faq-answer",children:(0,_t.jsx)("p",{children:t.answer})})]},t.id))})})]})},Yt="https://backend-edu-site-5cnm.vercel.app",Kt=()=>(0,_t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_t.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,_t.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Qt=()=>(0,_t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_t.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,_t.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),Jt=()=>(0,_t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_t.jsx)("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),(0,_t.jsx)("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),(0,_t.jsx)("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]}),Zt=()=>{fe();const[e,n]=(0,t.useState)(null),[i,r]=(0,t.useState)(!1),[s,a]=(0,t.useState)({rate:0,description:""}),[o,l]=(0,t.useState)({message:"",type:""}),[d,u]=(0,t.useState)(0),h=Gt({threshold:.3}),f=Gt({threshold:.2}),p=Gt({threshold:.3}),g=Gt({threshold:.3}),m=Gt({threshold:.3}),v=Gt({threshold:.3}),y=[{imageUrl:"https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143782/EduSite/toolxox.com-Ei3cN_1_mprt2u.jpg",subtitle:"Turning complex problems into clear, confident solutions for\xa0IGCSE\xa0success"},{imageUrl:"https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143777/EduSite/toolxox.com-mEkl9_v9dg7e.jpg",subtitle:"Comprehensive curriculum mastery for Cambridge, Edexcel, and Oxford IGCSE\xa0Mathematics"}],[b,x]=(0,t.useState)(0);(0,t.useEffect)(()=>{const e=setInterval(()=>{x(e=>(e+1)%y.length)},1e4);return()=>clearInterval(e)},[y.length]);const w=[{id:1,studentName:"Adel sameh",rating:5,message:'"Placeholder: Amazing teacher! My grades went up significantly. Highly recommend!"'},{id:2,studentName:"Ahmed Salah",rating:4,message:'"Placeholder: The concepts are explained so clearly. I finally understand topics I struggled with for years."'},{id:3,studentName:"3amo maged",rating:3,message:'"Placeholder: The best tutor I\'ve ever had. The sessions are engaging and fun."'},{id:4,studentName:"It is me",rating:1,message:'"Placeholder: A wonderful and supportive learning environment. Thank you!"'}],[S,C]=(0,t.useState)({name:"",email:"",phone:"",grade:"",message:""}),[_,k]=(0,t.useState)({message:"",type:""}),A=e=>{const{name:t,value:n}=e.target;C(e=>c(c({},e),{},{[t]:n}))};return(0,_t.jsxs)("div",{className:"welcome-page",children:[(0,_t.jsx)(Vt,{}),(0,_t.jsxs)("main",{children:[(0,_t.jsxs)("section",{className:"hero-section",children:[(0,_t.jsxs)("div",{className:"hero-slider-track",style:{transform:"translateX(-".concat(50*b,"%)")},children:[(0,_t.jsx)("div",{className:"hero-slide",style:{backgroundImage:"url('".concat(y[0].imageUrl,"')")}}),(0,_t.jsx)("div",{className:"hero-slide",style:{backgroundImage:"url('".concat(y[1].imageUrl,"')")}})]}),(0,_t.jsxs)("div",{className:"hero-content",children:[(0,_t.jsxs)("h1",{className:"hero-title",children:["Mathematics, Mastered with ",(0,_t.jsx)("br",{})," Mrs. Mona Abouelazm"]}),(0,_t.jsx)("div",{className:"hero-subtitle-container",children:(0,_t.jsx)("p",{className:"hero-subtitle",children:y[b].subtitle},b)}),(0,_t.jsx)(gt,{to:"/signup",className:"hero-button",children:"Get Started"})]})]}),(0,_t.jsx)("section",{id:"about",className:"welcome-section animated-section",ref:h,children:(0,_t.jsxs)("div",{className:"container about-container",children:[(0,_t.jsxs)("div",{className:"about-text",children:[(0,_t.jsx)("h2",{className:"section-title",children:"About Mrs. Mona Abouelazm"}),(0,_t.jsx)("p",{className:"bold-p",children:"Over 20 years of experience teaching Mathematics, with expertise in the Cambridge, Edexcel, and Oxford curricula across international schools."}),(0,_t.jsx)("p",{children:"My extensive experience ensures a holistic approach that builds critical thinking and problem-solving skills, making mathematics accessible and engaging for every student."}),(0,_t.jsx)("p",{children:"Discover how my approach to mathematics goes beyond formulas, equipping your child with the critical thinking skills to succeed."}),(0,_t.jsx)(gt,{to:"/about",className:"content-button",children:"Read More"})]}),(0,_t.jsx)("div",{className:"about-image",children:(0,_t.jsx)("img",{src:"https://res.cloudinary.com/dwcy6vc23/image/upload/v1755290433/EduSite/about_me_uelwkb.svg",width:"500",height:"500",alt:"Mrs. Mona Abouelazm"})})]})}),(0,_t.jsx)("section",{id:"experience",className:"welcome-section animated-section",ref:f,style:{backgroundColor:"#f8f9fa"},children:(0,_t.jsxs)("div",{className:"container",children:[(0,_t.jsx)("h2",{className:"section-title",children:"Master Math, One Step at a Time"}),(0,_t.jsx)("p",{className:"content-subtext",children:"Math isn't just about numbers \u2014 it's about understanding, confidence, and problem-solving. Here, you'll have a guide who turns tricky concepts into clear steps, helping you transform confusion into achievement and making every lesson an exciting part of your journey."}),(0,_t.jsxs)("div",{className:"content-layout",style:{marginBottom:"4rem"},children:[(0,_t.jsx)("div",{className:"content-image",children:(0,_t.jsx)("img",{src:"https://res.cloudinary.com/dwcy6vc23/image/upload/v1755290426/EduSite/A_Fresh_Perspective_baccia.svg",width:"500",height:"500",alt:"A Unique Approach"})}),(0,_t.jsxs)("div",{className:"content-text",children:[(0,_t.jsx)("h3",{children:"A Fresh Perspective"}),(0,_t.jsx)("p",{className:"content-subtext",children:"Our approach isn\u2019t just about memorizing formulas \u2014 it\u2019s about understanding concepts deeply and seeing problems in new ways by breaking complex ideas into clear, manageable steps, we help students build strong foundations, boost confidence, and develop lifelong problem-solving skills."}),(0,_t.jsx)("p",{className:"content-subtext",children:"With this fresh perspective, challenges become opportunities, and learning math transforms from a chore into an exciting journey toward success in exams, college, and everyday life."})]})]}),(0,_t.jsxs)("div",{className:"content-layout reverse",children:[(0,_t.jsx)("div",{className:"content-image",children:(0,_t.jsx)("img",{src:"https://res.cloudinary.com/dwcy6vc23/image/upload/v1755290418/EduSite/Experts_by_Your_Side_nn9prd.svg",width:"500",height:"500",alt:"Supporting Team"})}),(0,_t.jsxs)("div",{className:"content-text",children:[(0,_t.jsx)("h3",{children:"Experts by Your Side"}),(0,_t.jsx)("p",{className:"content-subtext",children:"Behind every great learning experience is a team that truly cares. Our supporting team is here to answer questions, clarify doubts, and provide encouragement, ensuring that no student feels stuck or left behind."}),(0,_t.jsx)("p",{className:"content-subtext",children:"With dedicated guidance, timely feedback, and a focus on each student\u2019s unique needs, our team helps transform challenges into confidence-building milestones, making your journey through mathematics smoother, more effective,\xa0and\xa0rewarding."})]})]})]})}),(0,_t.jsxs)("section",{id:"testimonials",className:"welcome-section testimonials-section",ref:p,children:[(0,_t.jsxs)("div",{className:"container",children:[(0,_t.jsx)("h2",{className:"section-title",children:"What My Students Say"}),(0,_t.jsx)("div",{className:"testimonial-grid mobile-only",children:w.slice(0,3).map(e=>(0,_t.jsxs)("div",{className:"testimonial-card",children:[(0,_t.jsx)("p",{children:e.message}),(0,_t.jsxs)("div",{className:"testimonial-stars",children:["\u2605".repeat(e.rating),"\u2606".repeat(5-e.rating)]}),(0,_t.jsxs)("strong",{children:["- ",e.studentName]})]},e.id))})]}),(0,_t.jsx)("div",{className:"testimonial-marquee desktop-only",children:(0,_t.jsxs)("div",{className:"testimonial-track",children:[w.map(e=>(0,_t.jsxs)("div",{className:"testimonial-card",children:[(0,_t.jsx)("p",{children:e.message}),(0,_t.jsxs)("div",{className:"testimonial-stars",children:["\u2605".repeat(e.rating),"\u2606".repeat(5-e.rating)]}),(0,_t.jsxs)("strong",{children:["- ",e.studentName]})]},e.id)),w.map(e=>(0,_t.jsxs)("div",{className:"testimonial-card","aria-hidden":"true",children:[(0,_t.jsx)("p",{children:e.message}),(0,_t.jsxs)("div",{className:"testimonial-stars",children:["\u2605".repeat(e.rating),"\u2606".repeat(5-e.rating)]}),(0,_t.jsxs)("strong",{children:["- ",e.studentName]})]},"duplicate-".concat(e.id)))]})}),(0,_t.jsxs)("div",{className:"view-all-container",children:[(0,_t.jsx)("button",{className:"content-button secondary",onClick:()=>r(!0),children:"Add a review"}),(0,_t.jsx)(gt,{to:"/testimonials",className:"content-button",children:"View All Testimonials"})]})]}),(0,_t.jsx)("section",{id:"why-choose-us",className:"welcome-section animated-section",ref:g,style:{backgroundColor:"#f8f9fa"},children:(0,_t.jsxs)("div",{className:"container",children:[(0,_t.jsx)("h2",{className:"section-title",children:"Why Choose Us"}),(0,_t.jsx)("p",{className:"why-choose-us-p",children:"For a solid foundation in IGCSE Mathematics and a passion for problem-solving"}),(0,_t.jsxs)("div",{className:"features-grid",children:[(0,_t.jsxs)("div",{className:"feature-card",children:[(0,_t.jsx)("div",{className:"feature-icon",children:(0,_t.jsx)(Kt,{})}),(0,_t.jsx)("h3",{children:"Personalized Learning Journey"}),(0,_t.jsx)("p",{children:"We offer a tailored learning experience that focuses on individual strengths and areas for improvement."}),(0,_t.jsx)("p",{children:"Our dedicated support and targeted practice help students master complex concepts and build confidence."})]}),(0,_t.jsxs)("div",{className:"feature-card",children:[(0,_t.jsx)("div",{className:"feature-icon",children:(0,_t.jsx)(Qt,{})}),(0,_t.jsx)("h3",{children:"Continuous Performance Monitoring"}),(0,_t.jsx)("p",{children:"We provide consistent, detailed feedback through regular assessments."}),(0,_t.jsx)("p",{children:"This proactive monitoring keeps students on track toward their goals and ensures parents are well-informed."})]}),(0,_t.jsxs)("div",{className:"feature-card",children:[(0,_t.jsx)("div",{className:"feature-icon",children:(0,_t.jsx)(Jt,{})}),(0,_t.jsx)("h3",{children:"Building a Future-Ready Skillset"}),(0,_t.jsx)("p",{children:"Our curriculum is designed to cultivate the analytical and logical reasoning skills vital for higher education and future careers."}),(0,_t.jsx)("p",{children:"We equip students with the tools to confidently tackle real-world\xa0problems."})]})]})]})}),(0,_t.jsx)("div",{className:"faqs-page-container",ref:m,children:(0,_t.jsxs)("div",{className:"faqs-main-content",children:[(0,_t.jsx)("h2",{className:"section-title",children:"Frequently Asked Questions"}),(0,_t.jsx)("div",{className:"container faqs-container",children:[{id:1,question:"Q: How will your lessons help me improve my maths grades?",answer:"My lessons are designed to break down complex IGCSE maths concepts into simple, easy-to-follow steps. You\u2019ll receive targeted practice, clear explanations, and strategies for tackling tricky exam questions so you can boost both your confidence and your marks."},{id:2,question:"Q: What makes your teaching style different?",answer:"I focus on building a solid foundation first \u2014 strengthening core skills before moving to advanced problem-solving. Lessons are interactive, personalised, and adapted to your pace, ensuring no topic is left unclear."},{id:3,question:"Q: Have your students achieved top results before?",answer:"Yes \u2014 many of my students have moved from struggling with maths to achieving A* grades. Their progress comes from consistent practice, focused feedback, and learning how to approach exam questions effectively."},{id:4,question:"Q: What exactly will I get when I join your course?",answer:"You\u2019ll get structured lesson plans, concise revision notes, topic-by-topic worksheets, exam-style questions, and live support. Every resource is aligned with the Cambridge and Edexcel IGCSE syllabus to keep you exam-ready."},{id:5,question:"Q: How can I be sure I\u2019ll see results?",answer:"If you attend lessons regularly, complete the homework, and apply the techniques we cover, you\u2019ll see steady improvement \u2014 and if you put in consistent effort, top grades are\xa0within\xa0reach."}].map(t=>(0,_t.jsxs)("div",{className:"faq-item ".concat(e===t.id?"active":""),children:[(0,_t.jsxs)("div",{className:"faq-question",onClick:()=>{return i=t.id,void n(e===i?null:i);var i},children:[(0,_t.jsx)("span",{children:t.question}),(0,_t.jsx)("span",{className:"faq-icon",children:e===t.id?"\xd7":"+"})]}),(0,_t.jsx)("div",{className:"faq-answer",children:(0,_t.jsx)("p",{children:t.answer})})]},t.id))})]})}),(0,_t.jsx)("section",{id:"contact",className:"welcome-section contact-section animated-section",ref:v,children:(0,_t.jsxs)("div",{className:"container",children:[(0,_t.jsx)("h2",{className:"section-title",children:"Get In Touch"}),(0,_t.jsx)("p",{className:"section-subtitle",children:"Have a Feedback or a suggestion? I'd love to hear from you."}),(0,_t.jsxs)("form",{className:"feedback-form",onSubmit:async e=>{e.preventDefault(),k({message:"Sending...",type:"loading"});try{const e=await fetch("".concat(Yt,"/feedback/send"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!e.ok){const t=await e.json().catch(()=>null);throw new Error((null===t||void 0===t?void 0:t.message)||"Something went wrong. Please try again.")}k({message:"Thank you for your feedback!",type:"success"}),C({name:"",email:"",phone:"",grade:"",message:""})}catch(t){k({message:t.message,type:"error"})}},children:[(0,_t.jsxs)("div",{className:"form-grid",children:[(0,_t.jsx)("input",{type:"text",name:"name",placeholder:"Your Name",value:S.name,onChange:A,required:!0}),(0,_t.jsx)("input",{type:"email",name:"email",placeholder:"Your Email",value:S.email,onChange:A,required:!0}),(0,_t.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone Number",value:S.phone,onChange:A}),(0,_t.jsxs)("select",{name:"grade",value:S.grade,onChange:A,required:!0,children:[(0,_t.jsx)("option",{value:"",disabled:!0,children:"Select Grade Level"}),(0,_t.jsx)("option",{value:"9",children:"Grade 6"}),(0,_t.jsx)("option",{value:"9",children:"Grade 7"}),(0,_t.jsx)("option",{value:"9",children:"Grade 8"}),(0,_t.jsx)("option",{value:"9",children:"Grade 9"}),(0,_t.jsx)("option",{value:"10",children:"Grade 10"}),(0,_t.jsx)("option",{value:"11",children:"Grade 11"}),(0,_t.jsx)("option",{value:"12",children:"Grade 12"})]})]}),(0,_t.jsx)("textarea",{name:"message",placeholder:"Your Message",value:S.message,onChange:A,required:!0}),(0,_t.jsx)("button",{type:"submit",className:"submit-button",disabled:"loading"===_.type,children:"loading"===_.type?"Sending...":"Send Message"}),_.message&&(0,_t.jsx)("p",{className:"submit-message ".concat(_.type),children:_.message})]})]})})]}),(0,_t.jsx)(qt,{}),(0,_t.jsxs)(Ut(),{isOpen:i,onRequestClose:()=>r(!1),contentLabel:"Add a Review",className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Share Your Experience"}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),0!==s.rate){l({message:"Submitting...",type:"loading"});try{const e=localStorage.getItem("token")||sessionStorage.getItem("token");if(!e)throw new Error("You must be logged in to leave a review.");const t=await fetch("".concat(Yt,"/reviews"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"MonaEdu ".concat(e)},body:JSON.stringify(s)}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to submit review.");l({message:"Review submitted for approval. Thank you!",type:"success"}),setTimeout(()=>{r(!1),a({rate:0,description:""}),l({message:"",type:""})},2e3)}catch(t){l({message:t.message,type:"error"})}}else l({message:"Please select a star rating.",type:"error"})},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Your Rating *"}),(0,_t.jsx)("div",{className:"star-rating",children:[1,2,3,4,5].map(e=>(0,_t.jsx)("span",{className:"star ".concat(d>=e||s.rate>=e?"active":""),onClick:()=>a(c(c({},s),{},{rate:e})),onMouseEnter:()=>u(e),onMouseLeave:()=>u(0),children:"\u2605"},e))})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Your Review *"}),(0,_t.jsx)("textarea",{name:"description",placeholder:"Tell us about your experience...",value:s.description,onChange:e=>{const{name:t,value:n}=e.target;a(e=>c(c({},e),{},{[t]:n}))},required:!0})]}),o.message&&(0,_t.jsx)("p",{className:"submit-message ".concat(o.type),children:o.message}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>r(!1),children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",className:"submit-button",disabled:"loading"===o.type,children:"loading"===o.type?"Submitting...":"Submit Review"})]})]})]})]})},en=()=>{const[e,n]=(0,t.useState)({name:"",email:"",phone:"",grade:"",message:""}),[i,r]=(0,t.useState)({message:"",type:""});return{feedback:e,submitStatus:i,handleFeedbackChange:e=>{const{name:t,value:i}=e.target;n(e=>c(c({},e),{},{[t]:i}))},handleFeedbackSubmit:async t=>{t.preventDefault(),r({message:"Sending...",type:"loading"});try{const t=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/feedback/send"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json().catch(()=>null);throw new Error((null===e||void 0===e?void 0:e.message)||"Something went wrong. Please try again.")}r({message:"Thank you for your feedback!",type:"success"}),n({name:"",email:"",phone:"",grade:"",message:""})}catch(i){r({message:i.message,type:"error"})}}}},tn=()=>(0,_t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,_t.jsx)("path",{d:"M22 10v6M2 10v6M12 2v20M20.39 18.39A5 5 0 0 0 17 12A5 5 0 0 0 7 12a5 5 0 0 0 3.39 4.61"})}),nn=()=>(0,_t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_t.jsx)("polygon",{points:"14 2 18 6 7 17 3 17 3 13 14 2"}),(0,_t.jsx)("line",{x1:"3",y1:"22",x2:"21",y2:"22"})]}),rn=()=>{const{feedback:e,submitStatus:n,handleFeedbackChange:i,handleFeedbackSubmit:r}=en(),[s,a]=(0,t.useState)(!1);return(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"courses-page-container",children:[(0,_t.jsx)("section",{className:"courses-hero-section",style:{backgroundImage:"url('".concat("https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143777/EduSite/toolxox.com-mEkl9_v9dg7e.jpg","')")},children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsx)("h1",{children:"Our Courses"})})}),(0,_t.jsx)("div",{className:"courses-main-content",children:(0,_t.jsxs)("div",{className:"courses-grid",children:[[{id:1,name:"IGCSE Mathematics",slug:"igcse-mathematics",description:"Comprehensive curriculum mastery for Cambridge, Edexcel, and Oxford."},{id:2,name:"A-Level Mathematics",slug:"a-level-mathematics",description:"Advanced topics in pure mathematics, statistics, and mechanics."},{id:3,name:"SAT Math Prep",slug:"sat-math-prep",description:"Targeted strategies and practice for the SAT mathematics sections."},{id:4,name:"IGCSE Mathematics",slug:"igcse-mathematics",description:"Comprehensive curriculum mastery for Cambridge, Edexcel, and Oxford."},{id:5,name:"A-Level Mathematics",slug:"a-level-mathematics",description:"Advanced topics in pure mathematics, statistics, and mechanics."},{id:6,name:"SAT Math Prep",slug:"sat-math-prep",description:"Targeted strategies and practice for the SAT mathematics sections."}].map(e=>(0,_t.jsxs)("div",{className:"course-card",children:[(0,_t.jsx)("div",{className:"course-icon",children:(0,_t.jsx)(tn,{})}),(0,_t.jsx)("h3",{children:e.name}),(0,_t.jsx)("p",{children:e.description}),(0,_t.jsx)(gt,{to:"/courses/".concat(e.slug),className:"content-button",children:"View Details"})]},e.id)),(0,_t.jsxs)("div",{className:"course-card custom",children:[(0,_t.jsx)("div",{className:"course-icon",children:(0,_t.jsx)(nn,{})}),(0,_t.jsx)("h3",{children:"Need Something Different?"}),(0,_t.jsx)("p",{children:"We can create a personalized curriculum tailored to your specific needs and learning goals."}),(0,_t.jsx)("button",{className:"content-button",onClick:()=>a(!0),children:"Request a Custom Course"})]})]})})]}),(0,_t.jsxs)(Ut(),{isOpen:s,onRequestClose:()=>a(!1),contentLabel:"Custom Course Request",className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Custom Course Inquiry"}),(0,_t.jsxs)("form",{onSubmit:r,children:[(0,_t.jsxs)("div",{className:"form-grid",children:[(0,_t.jsx)("input",{type:"text",name:"name",placeholder:"Your Name *",value:e.name,onChange:i,required:!0}),(0,_t.jsx)("input",{type:"email",name:"email",placeholder:"Your Email *",value:e.email,onChange:i,required:!0}),(0,_t.jsx)("input",{type:"tel",name:"phone",placeholder:"Phone Number *",value:e.phone,onChange:i,required:!0}),(0,_t.jsxs)("select",{name:"grade",value:e.grade,onChange:i,required:!0,children:[(0,_t.jsx)("option",{value:"",disabled:!0,children:"Select Grade Level *"}),(0,_t.jsx)("option",{value:"6",children:"Grade 6"}),(0,_t.jsx)("option",{value:"7",children:"Grade 7"}),(0,_t.jsx)("option",{value:"8",children:"Grade 8"}),(0,_t.jsx)("option",{value:"9",children:"Grade 9"}),(0,_t.jsx)("option",{value:"10",children:"Grade 10"}),(0,_t.jsx)("option",{value:"11",children:"Grade 11"}),(0,_t.jsx)("option",{value:"12",children:"Grade 12"})]})]}),(0,_t.jsx)("textarea",{name:"message",placeholder:"Please describe the topics you need help with... *",value:e.message,onChange:i,required:!0}),(0,_t.jsx)("button",{type:"submit",className:"submit-button",disabled:"loading"===n.type,children:"loading"===n.type?"Sending...":"Send Request"}),n.message&&(0,_t.jsx)("p",{className:"submit-message ".concat(n.type),children:n.message})]})]})]})},sn={"igcse-mathematics":{name:"IGCSE Mathematics",longDescription:"Our IGCSE Mathematics course provides a comprehensive mastery of the Cambridge, Edexcel, and Oxford curricula. We focus on building a strong foundation in core mathematical principles to ensure students are prepared for success in their examinations and beyond.",learningOutcomes:["Master algebra, geometry, and trigonometry concepts.","Develop strong problem-solving and analytical skills.","Gain confidence in handling complex exam-style questions.","Prepare thoroughly for all components of the IGCSE exams."],courseFormat:"Weekly online sessions, 24/7 material access, and personalized assignment feedback."},"a-level-mathematics":{name:"A-Level Mathematics",longDescription:"This course covers advanced topics in pure mathematics, statistics, and mechanics, designed to challenge students and prepare them for university-level studies.",learningOutcomes:["Calculus Mastery","Advanced Statistics","Mechanics Principles"],courseFormat:"Bi-weekly intensive sessions, advanced problem sets."},"sat-math-prep":{name:"SAT Math Prep",longDescription:"This course covers advanced topics in pure mathematics, statistics, and mechanics, designed to challenge students and prepare them for university-level studies.",learningOutcomes:["Calculus Mastery","Advanced Statistics","Mechanics Principles"],courseFormat:"Bi-weekly intensive sessions, advanced problem sets."}},an=()=>(0,_t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,_t.jsx)("polyline",{points:"20 6 9 17 4 12"})}),on=()=>{const{courseName:e}=pe(),[n,i]=(0,t.useState)(null),[r,s]=(0,t.useState)(!1),[a,o]=(0,t.useState)({name:"",email:"",phone:"",grade:""}),[l,d]=(0,t.useState)({message:"",type:""});(0,t.useEffect)(()=>{i(sn[e])},[e]);return n?(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"course-details-page",children:[(0,_t.jsx)("section",{className:"course-details-hero",style:{backgroundImage:"url('https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143777/EduSite/toolxox.com-mEkl9_v9dg7e.jpg')"},children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsx)("h1",{children:n.name})})}),(0,_t.jsx)("div",{className:"container",children:(0,_t.jsxs)("div",{className:"details-grid",children:[(0,_t.jsxs)("div",{className:"course-main-details",children:[(0,_t.jsx)("h2",{children:"Detailed Description"}),(0,_t.jsx)("p",{children:n.longDescription}),(0,_t.jsx)("h2",{children:"What You'll Learn"}),(0,_t.jsx)("ul",{className:"learning-outcomes-list",children:n.learningOutcomes.map((e,t)=>(0,_t.jsxs)("li",{children:[(0,_t.jsx)(an,{})," ",e]},t))})]}),(0,_t.jsxs)("div",{className:"course-sidebar",children:[(0,_t.jsxs)("div",{className:"course-sidebar-item",children:[(0,_t.jsx)("h4",{children:"Course Format"}),(0,_t.jsx)("p",{children:n.courseFormat})]}),(0,_t.jsx)("div",{className:"course-sidebar-item",children:(0,_t.jsx)("button",{className:"content-button enroll-now-btn",onClick:()=>s(!0),children:"Enroll Now"})})]})]})})]}),(0,_t.jsxs)(Ut(),{isOpen:r,onRequestClose:()=>s(!1),contentLabel:"Enroll Now",className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsxs)("h2",{children:["Enroll in: ",n.name]}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.grade){d({message:"Sending...",type:"loading"});try{const e={name:a.name,email:a.email,phone:a.phone,grade:a.grade,courseName:n.name},t=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/courses/create"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await t.json();if(!t.ok)throw new Error(i.message||"Failed to send enrollment request.");d({message:"Enrollment request sent successfully!",type:"success"}),setTimeout(()=>{s(!1),o({name:"",email:"",phone:"",grade:""}),d({message:"",type:""})},2e3)}catch(t){d({message:t.message,type:"error"})}}else d({message:"Please select your grade level.",type:"error"})},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Your Name *"}),(0,_t.jsx)("input",{type:"text",value:a.name,onChange:e=>o(c(c({},a),{},{name:e.target.value})),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Your Email *"}),(0,_t.jsx)("input",{type:"email",value:a.email,onChange:e=>o(c(c({},a),{},{email:e.target.value})),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Phone Number *"}),(0,_t.jsx)("input",{type:"tel",value:a.phone,onChange:e=>o(c(c({},a),{},{phone:e.target.value})),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Your Grade Level *"}),(0,_t.jsxs)("select",{name:"grade",value:a.grade,onChange:e=>o(c(c({},a),{},{grade:e.target.value})),required:!0,children:[(0,_t.jsx)("option",{value:"",disabled:!0,children:"Select your grade..."}),(0,_t.jsx)("option",{value:"6",children:"Grade 6"}),(0,_t.jsx)("option",{value:"7",children:"Grade 7"}),(0,_t.jsx)("option",{value:"8",children:"Grade 8"}),(0,_t.jsx)("option",{value:"9",children:"Grade 9"}),(0,_t.jsx)("option",{value:"10",children:"Grade 10"}),(0,_t.jsx)("option",{value:"11",children:"Grade 11"}),(0,_t.jsx)("option",{value:"12",children:"Grade 12"})]})]}),(0,_t.jsx)("button",{type:"submit",className:"submit-button",disabled:"loading"===l.type,children:"loading"===l.type?"Sending...":"Enroll Now"}),l.message&&(0,_t.jsx)("p",{className:"submit-message ".concat(l.type),children:l.message})]})]})]}):(0,_t.jsxs)("div",{style:{padding:"5rem 2rem",textAlign:"center"},children:[(0,_t.jsx)("h1",{children:"Course Not Found"}),(0,_t.jsx)("p",{children:"The course you are looking for does not exist."}),(0,_t.jsx)(gt,{to:"/courses",className:"content-button",children:"\u2190 View All Courses"})]})},ln=()=>(0,_t.jsxs)("div",{className:"testimonials-page-container",children:[(0,_t.jsx)("section",{className:"testimonials-hero-section",style:{backgroundImage:"url('".concat("https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143777/EduSite/toolxox.com-mEkl9_v9dg7e.jpg","')")},children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsx)("h1",{children:"Testimonials"})})}),(0,_t.jsx)("div",{className:"testimonials-main-content",children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsx)("div",{className:"testimonials-grid",children:[{id:1,studentName:"Adel",rating:5,message:'"Amazing teacher! My grades went up significantly. Highly recommend!"'},{id:2,studentName:"Sameh",rating:5,message:'"The concepts are explained so clearly. I finally understand topics I struggled with for years."'},{id:3,studentName:"Yousef",rating:5,message:'"The best tutor I\'ve ever had. The sessions are engaging and fun."'},{id:4,studentName:"Adam",rating:4,message:'"A wonderful and supportive learning environment. Thank you!"'},{id:5,studentName:"Ahmed",rating:5,message:'"The personalized feedback on assignments was incredibly helpful for my progress."'},{id:6,studentName:"Salah",rating:4,message:'"Dr. Mona makes complex topics feel simple and approachable. Couldn\'t have passed without her."'}].map(e=>(0,_t.jsxs)("div",{className:"testimonial-card-full",children:[(0,_t.jsx)("p",{children:e.message}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)("div",{className:"testimonial-stars",children:["\u2605".repeat(e.rating),"\u2606".repeat(5-e.rating)]}),(0,_t.jsxs)("strong",{children:["- ",e.studentName]})]})]},e.id))})})})]}),cn=()=>(0,_t.jsxs)("div",{className:"about-page-container",children:[(0,_t.jsx)("section",{className:"about-hero-section",style:{backgroundImage:"url('".concat("https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143782/EduSite/toolxox.com-Ei3cN_1_mprt2u.jpg","')")},children:(0,_t.jsxs)("div",{className:"container",children:[(0,_t.jsx)("h1",{children:"About Dr. Mona AboElazm"}),(0,_t.jsx)("p",{children:"Know the how and why behind everything."})]})}),(0,_t.jsx)("div",{className:"about-main-content",children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsxs)("div",{className:"content-layout",children:[(0,_t.jsxs)("div",{className:"content-text about-detailed-text",children:[(0,_t.jsx)("h2",{children:"Education is an Activity Directed at Achieving Aims"}),(0,_t.jsx)("p",{className:"bold-p",children:"Over 20 years of experience teaching Mathematics, with expertise in the Cambridge, Edexcel, and Oxford curricula across international schools."}),(0,_t.jsx)("p",{children:"My extensive experience ensures a holistic approach that builds critical thinking and problem-solving skills, making mathematics accessible and engaging for every student."}),(0,_t.jsx)("p",{children:"Discover how my approach to mathematics goes beyond formulas, equipping your child with the critical thinking skills to succeed."})]}),(0,_t.jsx)("div",{className:"content-image",children:(0,_t.jsx)("div",{className:"content-image-wrapper ",children:(0,_t.jsx)("img",{src:"https://res.cloudinary.com/dwcy6vc23/image/upload/v1755290433/EduSite/about_me_uelwkb.svg",alt:"Mrs. Mona AbouElazm"})})})]})})})]}),dn=()=>(0,_t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 50 50",children:(0,_t.jsx)("path",{d:"M25,3C12.85,3,3,12.85,3,25c0,11.03,8.125,20.137,18.712,21.728V30.831h-5.443v-5.783h5.443v-3.848 c0-6.371,3.104-9.168,8.399-9.168c2.536,0,3.877,0.188,4.512,0.274v5.048h-3.612c-2.248,0-3.033,2.131-3.033,4.533v3.161h6.588 l-0.894,5.783h-5.694v15.944C38.716,45.318,47,36.137,47,25C47,12.85,37.15,3,25,3z"})}),un=()=>(0,_t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,_t.jsx)("path",{d:"M 8 3 C 5.243 3 3 5.243 3 8 L 3 16 C 3 18.757 5.243 21 8 21 L 16 21 C 18.757 21 21 18.757 21 16 L 21 8 C 21 5.243 18.757 3 16 3 L 8 3 z M 8 5 L 16 5 C 17.654 5 19 6.346 19 8 L 19 16 C 19 17.654 17.654 19 16 19 L 8 19 C 6.346 19 5 17.654 5 16 L 5 8 C 5 6.346 6.346 5 8 5 z M 17 6 A 1 1 0 0 0 16 7 A 1 1 0 0 0 17 8 A 1 1 0 0 0 18 7 A 1 1 0 0 0 17 6 z M 12 7 C 9.243 7 7 9.243 7 12 C 7 14.757 9.243 17 12 17 C 14.757 17 17 14.757 17 12 C 17 9.243 14.757 7 12 7 z M 12 9 C 13.654 9 15 10.346 15 12 C 15 13.654 13.654 15 12 15 C 10.346 15 9 13.654 9 12 C 9 10.346 10.346 9 12 9 z"})}),hn=()=>(0,_t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 50 50",children:(0,_t.jsx)("path",{d:"M 25 2 C 12.309534 2 2 12.309534 2 25 C 2 29.079097 3.1186875 32.88588 4.984375 36.208984 L 2.0371094 46.730469 A 1.0001 1.0001 0 0 0 3.2402344 47.970703 L 14.210938 45.251953 C 17.434629 46.972929 21.092591 48 25 48 C 37.690466 48 48 37.690466 48 25 C 48 12.309534 37.690466 2 25 2 z M 25 4 C 36.609534 4 46 13.390466 46 25 C 46 36.609534 36.609534 46 25 46 C 21.278025 46 17.792121 45.029635 14.761719 43.333984 A 1.0001 1.0001 0 0 0 14.033203 43.236328 L 4.4257812 45.617188 L 7.0019531 36.425781 A 1.0001 1.0001 0 0 0 6.9023438 35.646484 C 5.0606869 32.523592 4 28.890107 4 25 C 4 13.390466 13.390466 4 25 4 z M 16.642578 13 C 16.001539 13 15.086045 13.23849 14.333984 14.048828 C 13.882268 14.535548 12 16.369511 12 19.59375 C 12 22.955271 14.331391 25.855848 14.613281 26.228516 L 14.615234 26.228516 L 14.615234 26.230469 C 14.588494 26.195329 14.973031 26.752191 15.486328 27.419922 C 15.999626 28.087653 16.717405 28.96464 17.619141 29.914062 C 19.422612 31.812909 21.958282 34.007419 25.105469 35.349609 C 26.554789 35.966779 27.698179 36.339417 28.564453 36.611328 C 30.169845 37.115426 31.632073 37.038799 32.730469 36.876953 C 33.55263 36.755876 34.456878 36.361114 35.351562 35.794922 C 36.246248 35.22873 37.12309 34.524722 37.509766 33.455078 C 37.786772 32.688244 37.927591 31.979598 37.978516 31.396484 C 38.003976 31.104927 38.007211 30.847602 37.988281 30.609375 C 37.969311 30.371148 37.989581 30.188664 37.767578 29.824219 C 37.302009 29.059804 36.774753 29.039853 36.224609 28.767578 C 35.918939 28.616297 35.048661 28.191329 34.175781 27.775391 C 33.303883 27.35992 32.54892 26.991953 32.083984 26.826172 C 31.790239 26.720488 31.431556 26.568352 30.914062 26.626953 C 30.396569 26.685553 29.88546 27.058933 29.587891 27.5 C 29.305837 27.918069 28.170387 29.258349 27.824219 29.652344 C 27.819619 29.649544 27.849659 29.663383 27.712891 29.595703 C 27.284761 29.383815 26.761157 29.203652 25.986328 28.794922 C 25.2115 28.386192 24.242255 27.782635 23.181641 26.847656 L 23.181641 26.845703 C 21.603029 25.455949 20.497272 23.711106 20.148438 23.125 C 20.171937 23.09704 20.145643 23.130901 20.195312 23.082031 L 20.197266 23.080078 C 20.553781 22.728924 20.869739 22.309521 21.136719 22.001953 C 21.515257 21.565866 21.68231 21.181437 21.863281 20.822266 C 22.223954 20.10644 22.02313 19.318742 21.814453 18.904297 L 21.814453 18.902344 C 21.828863 18.931014 21.701572 18.650157 21.564453 18.326172 C 21.426943 18.001263 21.251663 17.580039 21.064453 17.130859 C 20.690033 16.232501 20.272027 15.224912 20.023438 14.634766 L 20.023438 14.632812 C 19.730591 13.937684 19.334395 13.436908 18.816406 13.195312 C 18.298417 12.953717 17.840778 13.022402 17.822266 13.021484 L 17.820312 13.021484 C 17.450668 13.004432 17.045038 13 16.642578 13 z M 16.642578 15 C 17.028118 15 17.408214 15.004701 17.726562 15.019531 C 18.054056 15.035851 18.033687 15.037192 17.970703 15.007812 C 17.906713 14.977972 17.993533 14.968282 18.179688 15.410156 C 18.423098 15.98801 18.84317 16.999249 19.21875 17.900391 C 19.40654 18.350961 19.582292 18.773816 19.722656 19.105469 C 19.863021 19.437122 19.939077 19.622295 20.027344 19.798828 L 20.027344 19.800781 L 20.029297 19.802734 C 20.115837 19.973483 20.108185 19.864164 20.078125 19.923828 C 19.867096 20.342656 19.838461 20.445493 19.625 20.691406 C 19.29998 21.065838 18.968453 21.483404 18.792969 21.65625 C 18.639439 21.80707 18.36242 22.042032 18.189453 22.501953 C 18.016221 22.962578 18.097073 23.59457 18.375 24.066406 C 18.745032 24.6946 19.964406 26.679307 21.859375 28.347656 C 23.05276 29.399678 24.164563 30.095933 25.052734 30.564453 C 25.940906 31.032973 26.664301 31.306607 26.826172 31.386719 C 27.210549 31.576953 27.630655 31.72467 28.119141 31.666016 C 28.607627 31.607366 29.02878 31.310979 29.296875 31.007812 L 29.298828 31.005859 C 29.655629 30.601347 30.715848 29.390728 31.224609 28.644531 C 31.246169 28.652131 31.239109 28.646231 31.408203 28.707031 L 31.408203 28.708984 L 31.410156 28.708984 C 31.487356 28.736474 32.454286 29.169267 33.316406 29.580078 C 34.178526 29.990889 35.053561 30.417875 35.337891 30.558594 C 35.748225 30.761674 35.942113 30.893881 35.992188 30.894531 C 35.995572 30.982516 35.998992 31.07786 35.986328 31.222656 C 35.951258 31.624292 35.8439 32.180225 35.628906 32.775391 C 35.523582 33.066746 34.975018 33.667661 34.283203 34.105469 C 33.591388 34.543277 32.749338 34.852514 32.4375 34.898438 C 31.499896 35.036591 30.386672 35.087027 29.164062 34.703125 C 28.316336 34.437036 27.259305 34.092596 25.890625 33.509766 C 23.114812 32.325956 20.755591 30.311513 19.070312 28.537109 C 18.227674 27.649908 17.552562 26.824019 17.072266 26.199219 C 16.592866 25.575584 16.383528 25.251054 16.208984 25.021484 L 16.207031 25.019531 C 15.897202 24.609805 14 21.970851 14 19.59375 C 14 17.077989 15.168497 16.091436 15.800781 15.410156 C 16.132721 15.052495 16.495617 15 16.642578 15 z"})}),fn=()=>{const{feedback:e,submitStatus:t,handleFeedbackChange:n,handleFeedbackSubmit:i}=en();return(0,_t.jsxs)("div",{className:"contact-page-container",children:[(0,_t.jsx)("section",{className:"contact-hero-section",style:{backgroundImage:"url('".concat("https://res.cloudinary.com/dwcy6vc23/image/upload/v1755143777/EduSite/toolxox.com-mEkl9_v9dg7e.jpg","')")},children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsx)("h1",{children:"Contact Us"})})}),(0,_t.jsx)("div",{className:"contact-main-content",children:(0,_t.jsx)("div",{className:"container",children:(0,_t.jsxs)("div",{className:"contact-content-grid",children:[(0,_t.jsxs)("div",{className:"contact-form-container",children:[(0,_t.jsx)("h2",{children:"Online Inquiry Form"}),(0,_t.jsxs)("form",{className:"feedback-form",onSubmit:i,children:[(0,_t.jsxs)("div",{className:"form-grid",children:[(0,_t.jsx)("input",{type:"text",name:"name",placeholder:"Name *",value:e.name,onChange:n,required:!0}),(0,_t.jsx)("input",{type:"email",name:"email",placeholder:"Email *",value:e.email,onChange:n,required:!0}),(0,_t.jsx)("input",{type:"tel",name:"phone",placeholder:"Mobile Number *",value:e.phone,onChange:n,required:!0}),(0,_t.jsxs)("select",{name:"grade",value:e.grade,onChange:n,required:!0,children:[(0,_t.jsx)("option",{value:"",disabled:!0,children:"Subject *"}),(0,_t.jsx)("option",{value:"9",children:"Grade 6"}),(0,_t.jsx)("option",{value:"9",children:"Grade 7"}),(0,_t.jsx)("option",{value:"9",children:"Grade 8"}),(0,_t.jsx)("option",{value:"9",children:"Grade 9"}),(0,_t.jsx)("option",{value:"10",children:"Grade 10"}),(0,_t.jsx)("option",{value:"11",children:"Grade 11"}),(0,_t.jsx)("option",{value:"12",children:"Grade 12"}),(0,_t.jsx)("option",{value:"General Inquiry",children:"General Inquiry"})]})]}),(0,_t.jsx)("textarea",{name:"message",placeholder:"Message *",value:e.message,onChange:n,required:!0}),(0,_t.jsx)("button",{type:"submit",className:"submit-button",disabled:"loading"===t.type,children:"loading"===t.type?"Sending...":"Send Message"}),t.message&&(0,_t.jsx)("p",{className:"submit-message ".concat(t.type),children:t.message})]})]}),(0,_t.jsxs)("div",{className:"contact-details",children:[(0,_t.jsx)("h3",{children:"CONTACT INFO"}),(0,_t.jsx)("div",{className:"contact-info space",children:(0,_t.jsxs)("a",{href:"https://wa.me/971508162674",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)(hn,{})," Whatsapp"]})}),(0,_t.jsx)("div",{className:"social-links space",children:(0,_t.jsxs)("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)(dn,{})," Facebook"]})}),(0,_t.jsx)("div",{className:"social-links space",children:(0,_t.jsxs)("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",children:[(0,_t.jsx)(un,{})," Instagram"]})})]})]})})})]})},pn=()=>(0,_t.jsxs)("div",{style:{padding:"5rem 2rem",textAlign:"center"},children:[(0,_t.jsx)("h1",{children:"Demo class"}),(0,_t.jsx)("p",{children:"The detailed demo structure will be built here soon."})]}),gn=e=>{let{children:t}=e;return(0,_t.jsxs)("div",{className:"page-wrapper",children:[(0,_t.jsx)(Vt,{}),(0,_t.jsx)("main",{children:t}),(0,_t.jsx)(qt,{})]})};const mn=n.p+"static/media/dashboard.06eec19f95e6ee4874aedb8b888f00ac.svg";const vn=n.p+"static/media/profile.ad8d1a0632ad482edcb916941eaa4474.svg",yn=e=>{let{isOpen:t,onNavLinkClick:n,isMobile:i}=e;const r="sidebar student-sidebar ".concat(i?t?"open":"closed":"desktop-visible");return(0,_t.jsxs)("div",{className:r,children:[(0,_t.jsx)("div",{className:"menu",children:"Student Menu"}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)("div",{children:[(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/student/dashboard",onClick:n,children:[(0,_t.jsx)("img",{src:mn,alt:"Sessions"})," Dashboard"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/student/sessions",onClick:n,children:[(0,_t.jsx)("img",{src:$t,alt:"Sessions"})," Sessions"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/student/assignments",onClick:n,children:[(0,_t.jsx)("img",{src:Nt,alt:"Assignments"})," Assignments"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/student/exams",onClick:n,children:[(0,_t.jsx)("img",{src:Pt,alt:"Exams"})," Exams"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/student/materials",onClick:n,children:[(0,_t.jsx)("img",{src:It,alt:"Materials"})," Materials"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{}),(0,_t.jsxs)(mt,{className:e=>{let{isActive:t}=e;return t?"active-link":"li"},to:"/student/profile",onClick:n,children:[(0,_t.jsx)("img",{src:vn,alt:"Profile"})," Profile"]}),(0,_t.jsx)("br",{}),(0,_t.jsx)("br",{})]})]})};function bn(e,t,n){t||(t=[]);var i=t.length++;return Object.defineProperty({},"_",{set:function(r){t[i]=r,e.apply(n,t)}})}function xn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wn(e,t){xn(e,t),t.add(e)}function Sn(e,t,n){xn(e,t),t.set(e,n)}function Cn(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function _n(e,t,n){return n(Cn(e,t))}function kn(e,t){return e.get(Cn(e,t))}function An(e,t,n){return e.set(Cn(e,t),n),n}var En,jn,Tn,On,Mn,Pn,Nn,$n,Dn,Ln,In,Fn,Rn={d:(e,t)=>{for(var n in t)Rn.o(t,n)&&!Rn.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},Bn=globalThis.pdfjsLib={};Rn.d(Bn,{AbortException:()=>Ji,AnnotationEditorLayer:()=>mv,AnnotationEditorParamsType:()=>ti,AnnotationEditorType:()=>ei,AnnotationEditorUIManager:()=>ga,AnnotationLayer:()=>kf,AnnotationMode:()=>Zn,ColorPicker:()=>tg,DOMSVGFactory:()=>Yu,DrawLayer:()=>jv,FeatureTest:()=>nr,GlobalWorkerOptions:()=>cc,ImageKind:()=>ci,InvalidPDFException:()=>Xi,MissingPDFException:()=>Yi,OPS:()=>$i,OutputScale:()=>Br,PDFDataRangeTransport:()=>ou,PDFDateString:()=>Nr,PDFWorker:()=>bu,PasswordResponses:()=>Di,PermissionFlag:()=>ni,PixelsPerInch:()=>wr,RenderingCancelledException:()=>_r,TextLayer:()=>Fd,UnexpectedResponseException:()=>Ki,Util:()=>rr,VerbosityLevel:()=>Ni,XfaLayer:()=>Ku,build:()=>Uu,createValidAbsoluteUrl:()=>Hi,fetchData:()=>Sr,getDocument:()=>iu,getFilenameFromUrl:()=>Er,getPdfFilenameFromUrl:()=>jr,getXfaPageViewport:()=>Dr,isDataScheme:()=>kr,isPdfFile:()=>Ar,noContextMenu:()=>Mr,normalizeUnicode:()=>cr,setLayerDimensions:()=>Rr,shadow:()=>Ui,version:()=>Hu});const Wn="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),zn=[1,0,0,1,0,0],Hn=[.001,0,0,.001,0,0],Un=1.35,Gn=1,Vn=2,qn=4,Xn=16,Yn=32,Kn=64,Qn=128,Jn=256,Zn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ei={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ti={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},ni={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ii=0,ri=1,si=2,ai=3,oi=3,li=4,ci={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},di=1,ui=2,hi=3,fi=4,pi=5,gi=6,mi=7,vi=8,yi=9,bi=10,xi=11,wi=12,Si=13,Ci=14,_i=15,ki=16,Ai=17,Ei=20,ji=1,Ti=2,Oi=3,Mi=4,Pi=5,Ni={ERRORS:0,WARNINGS:1,INFOS:5},$i={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},Di={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Li=Ni.WARNINGS;function Ii(e){Number.isInteger(e)&&(Li=e)}function Fi(){return Li}function Ri(e){Li>=Ni.INFOS&&console.log("Info: ".concat(e))}function Bi(e){Li>=Ni.WARNINGS&&console.log("Warning: ".concat(e))}function Wi(e){throw new Error(e)}function zi(e,t){e||Wi(t)}function Hi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(i){}}const r=t?new URL(e,t):new URL(e);if(function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch(r){}return null}function Ui(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Gi=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class Vi extends Gi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class qi extends Gi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Xi extends Gi{constructor(e){super(e,"InvalidPDFException")}}class Yi extends Gi{constructor(e){super(e,"MissingPDFException")}}class Ki extends Gi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Qi extends Gi{constructor(e){super(e,"FormatError")}}class Ji extends Gi{constructor(e){super(e,"AbortException")}}function Zi(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||Wi("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const i=[];for(let r=0;r<t;r+=n){const s=Math.min(r+n,t),a=e.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function er(e){"string"!==typeof e&&Wi("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let i=0;i<t;++i)n[i]=255&e.charCodeAt(i);return n}function tr(e){const t=Object.create(null);for(const[n,i]of e)t[n]=i;return t}class nr{static get isLittleEndian(){return Ui(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return Ui(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return Ui(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get platform(){var e,t;return"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.platform)?Ui(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:"string"===typeof(null===(t=navigator)||void 0===t?void 0:t.userAgent)&&navigator.userAgent.includes("Firefox")}):Ui(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Ui(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ir=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class rr{static makeHexColor(e,t,n){return"#".concat(ir[e]).concat(ir[t]).concat(ir[n])}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),i=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),s=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],i[0],r[0],s[0]),Math.min(n[1],i[1],r[1],s[1]),Math.max(n[0],i[0],r[0],s[0]),Math.max(n[1],i[1],r[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],a=(n+s)/2,o=Math.sqrt((n+s)**2-4*(n*s-r*i))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[n,r,i,s]}static bezierBoundingBox(e,t,n,i,r,s,a,o,l){return l?(l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o)):l=[Math.min(e,a),Math.min(t,o),Math.max(e,a),Math.max(t,o)],Cn(rr,this,ar).call(this,e,n,r,a,t,i,s,o,3*(3*(n-r)-e+a),6*(e-2*n+r),3*(n-e),l),Cn(rr,this,ar).call(this,e,n,r,a,t,i,s,o,3*(3*(i-s)-t+o),6*(t-2*i+s),3*(i-t),l),l}}function sr(e,t,n,i,r,s,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,f=d*(d*(d*e+3*l*t)+3*u*n)+h*i,p=d*(d*(d*r+3*l*s)+3*u*a)+h*o;c[0]=Math.min(c[0],f),c[1]=Math.min(c[1],p),c[2]=Math.max(c[2],f),c[3]=Math.max(c[3],p)}function ar(e,t,n,i,r,s,a,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&Cn(En,this,sr).call(this,e,t,n,i,r,s,a,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const f=Math.sqrt(h),p=2*l;Cn(En,this,sr).call(this,e,t,n,i,r,s,a,o,(-c+f)/p,u),Cn(En,this,sr).call(this,e,t,n,i,r,s,a,o,(-c-f)/p,u)}En=rr;let or=null,lr=null;function cr(e){return or||(or=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,lr=new Map([["\ufb05","\u017ft"]])),e.replaceAll(or,(e,t,n)=>t?t.normalize("NFKC"):lr.get(n))}const dr="pdfjs_internal_id_",ur=0,hr=1,fr=2,pr=3,gr=4,mr=5,vr=6,yr=7,br=8;const xr="http://www.w3.org/2000/svg";class wr{}async function Sr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Or(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE)if(200!==r.status&&0!==r.status)i(new Error(r.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(r.response)}n(r.responseText)}},r.send(null)})}jn=wr,o(wr,"CSS",96),o(wr,"PDF",72),o(wr,"PDF_TO_CSS_UNITS",jn.CSS/jn.PDF);class Cr{constructor(e){let{viewBox:t,scale:n,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}=e;this.viewBox=t,this.scale=n,this.rotation=i,this.offsetX=r,this.offsetY=s;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,u,h,f,p,g,m;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,d=0,u=0,h=1;break;case 90:c=0,d=1,u=1,h=0;break;case 270:c=0,d=-1,u=-1,h=0;break;case 0:c=1,d=0,u=0,h=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,h=-h),0===c?(f=Math.abs(l-t[1])*n+r,p=Math.abs(o-t[0])*n+s,g=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(f=Math.abs(o-t[0])*n+r,p=Math.abs(l-t[1])*n+s,g=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[c*n,d*n,u*n,h*n,f-c*n*o-u*n*l,p-d*n*o-h*n*l],this.width=g,this.height=m}get rawDims(){const{viewBox:e}=this;return Ui(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Cr({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(e,t){return rr.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=rr.applyTransform([e[0],e[1]],this.transform),n=rr.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return rr.applyInverseTransform([e,t],this.transform)}}class _r extends Gi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function kr(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function Ar(e){return"string"===typeof e&&/\.pdf$/i.test(e)}function Er(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function jr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(kr(e))return Bi('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let r=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch(s){}return r||t}class Tr{constructor(){o(this,"started",Object.create(null)),o(this,"times",[])}time(e){e in this.started&&Bi("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||Bi("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:r}of this.times)e.push("".concat(n.padEnd(t)," ").concat(r-i,"ms\n"));return e.join("")}}function Or(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch(n){return!1}}function Mr(e){e.preventDefault()}function Pr(e){console.log("Deprecated API usage: "+e)}class Nr{static toDateObject(e){if(!e||"string"!==typeof e)return null;Cn(Nr,this,$r)._||($r._=Cn(Nr,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=Cn(Nr,this,$r)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(s+=c,a+=d):"+"===l&&(s-=c,a-=d),new Date(Date.UTC(n,i,r,s,a,o))}}var $r={_:void 0};function Dr(e,t){let{scale:n=1,rotation:i=0}=t;const{width:r,height:s}=e.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new Cr({viewBox:a,scale:n,rotation:i})}function Lr(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Bi('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Ir(e){const{a:t,b:n,c:i,d:r,e:s,f:a}=e.getTransform();return[t,n,i,r,s,a]}function Fr(e){const{a:t,b:n,c:i,d:r,e:s,f:a}=e.getTransform().invertSelf();return[t,n,i,r,s,a]}function Rr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Cr){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:s}=e,a=nr.isCSSRoundSupported,o="var(--scale-factor) * ".concat(i,"px"),l="var(--scale-factor) * ".concat(r,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x, 1px))"):"calc(".concat(o,")"),d=a?"round(down, ".concat(l,", var(--scale-round-y, 1px))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(s.width=d,s.height=c):(s.width=c,s.height=d)}i&&e.setAttribute("data-main-rotation",t.rotation)}class Br{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}}var Wr=new WeakMap,zr=new WeakMap,Hr=new WeakMap,Ur=new WeakMap,Gr=new WeakMap,Vr=new WeakSet;class qr{constructor(e){wn(this,Vr),Sn(this,Wr,null),Sn(this,zr,null),Sn(this,Hr,void 0),Sn(this,Ur,null),Sn(this,Gr,null),An(Hr,this,e),es._||(es._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=An(Wr,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=kn(Hr,this)._uiManager._signal;e.addEventListener("contextmenu",Mr,{signal:t}),e.addEventListener("pointerdown",Xr,{signal:t});const n=An(Ur,this,document.createElement("div"));n.className="buttons",e.append(n);const i=kn(Hr,this).toolbarPosition;if(i){const{style:t}=e,n="ltr"===kn(Hr,this)._uiManager.direction?1-i[0]:i[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*i[1],"% + var(--editor-toolbar-vert-offset))")}return Cn(Vr,this,Jr).call(this),e}get div(){return kn(Wr,this)}hide(){var e;kn(Wr,this).classList.add("hidden"),null===(e=kn(zr,this))||void 0===e||e.hideDropdown()}show(){var e;kn(Wr,this).classList.remove("hidden"),null===(e=kn(Gr,this))||void 0===e||e.shown()}async addAltText(e){const t=await e.render();Cn(Vr,this,Qr).call(this,t),kn(Ur,this).prepend(t,_n(Vr,this,Zr)),An(Gr,this,e)}addColorPicker(e){An(zr,this,e);const t=e.renderButton();Cn(Vr,this,Qr).call(this,t),kn(Ur,this).prepend(t,_n(Vr,this,Zr))}remove(){var e;kn(Wr,this).remove(),null===(e=kn(zr,this))||void 0===e||e.destroy(),An(zr,this,null)}}function Xr(e){e.stopPropagation()}function Yr(e){kn(Hr,this)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()}function Kr(e){kn(Hr,this)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()}function Qr(e){const t=kn(Hr,this)._uiManager._signal;e.addEventListener("focusin",Cn(Vr,this,Yr).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",Cn(Vr,this,Kr).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Mr,{signal:t})}function Jr(){const{editorType:e,_uiManager:t}=kn(Hr,this),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",es._[e]),Cn(Vr,this,Qr).call(this,n),n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),kn(Ur,this).append(n)}function Zr(e){const t=document.createElement("div");return t.className="divider",t}var es={_:null},ts=new WeakMap,ns=new WeakMap,is=new WeakMap,rs=new WeakSet;class ss{constructor(e){wn(this,rs),Sn(this,ts,null),Sn(this,ns,null),Sn(this,is,void 0),An(is,this,e)}show(e,t,n){const[i,r]=Cn(rs,this,os).call(this,t,n),{style:s}=kn(ns,this)||An(ns,this,Cn(rs,this,as).call(this));e.append(kn(ns,this)),s.insetInlineEnd="".concat(100*i,"%"),s.top="calc(".concat(100*r,"% + var(--editor-toolbar-vert-offset))")}hide(){kn(ns,this).remove()}}function as(){const e=An(ns,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Mr,{signal:kn(is,this)._signal});const t=An(ts,this,document.createElement("div"));return t.className="buttons",e.append(t),Cn(rs,this,ls).call(this),e}function os(e,t){let n=0,i=0;for(const r of e){const e=r.y+r.height;if(e<n)continue;const s=r.x+(t?r.width:0);e>n?(i=s,n=e):t?s>i&&(i=s):s<i&&(i=s)}return[t?1-i:i,n]}function ls(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=kn(is,this)._signal;e.addEventListener("contextmenu",Mr,{signal:n}),e.addEventListener("click",()=>{kn(is,this).highlightSelection("floating_button")},{signal:n}),kn(ts,this).append(e)}function cs(e,t,n){for(const i of n)t.addEventListener(i,e[i].bind(e))}var ds=new WeakMap;class us{constructor(){Sn(this,ds,0)}get id(){var e,t;return"".concat("pdfjs_internal_editor_").concat((An(ds,this,(e=kn(ds,this),t=e++,e)),t))}}var hs=new WeakMap,fs=new WeakMap,ps=new WeakMap,gs=new WeakSet;class ms{constructor(){wn(this,gs),Sn(this,hs,function(){var e,t;if("undefined"!==typeof crypto&&"function"===typeof(null===(e=crypto)||void 0===e?void 0:e.randomUUID))return crypto.randomUUID();const n=new Uint8Array(32);if("undefined"!==typeof crypto&&"function"===typeof(null===(t=crypto)||void 0===t?void 0:t.getRandomValues))crypto.getRandomValues(n);else for(let i=0;i<32;i++)n[i]=Math.floor(255*Math.random());return Zi(n)}()),Sn(this,fs,0),Sn(this,ps,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return Ui(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:i,type:r}=e;return Cn(gs,this,vs).call(this,"".concat(t,"_").concat(n,"_").concat(i,"_").concat(r),e)}async getFromUrl(e){return Cn(gs,this,vs).call(this,e,e)}async getFromBlob(e,t){const n=await t;return Cn(gs,this,vs).call(this,e,n)}async getFromId(e){kn(ps,this)||An(ps,this,new Map);const t=kn(ps,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,i,r;kn(ps,this)||An(ps,this,new Map);let s=kn(ps,this).get(e);if(null!==(r=s)&&void 0!==r&&r.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(kn(hs,this),"_").concat((An(fs,this,(n=kn(fs,this),i=n++,n)),i)),refCounter:1,isSvg:!1},kn(ps,this).set(e,s),kn(ps,this).set(s.id,s),s}getSvgUrl(e){const t=kn(ps,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;kn(ps,this)||An(ps,this,new Map);const n=kn(ps,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:i}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(i.width,i.height);e.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=e.convertToBlob()}null===(t=i.close)||void 0===t||t.call(i),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(kn(hs,this),"_"))}}async function vs(e,t){var n;kn(ps,this)||An(ps,this,new Map);let i=kn(ps,this).get(e);if(null===i)return null;if(null!==(n=i)&&void 0!==n&&n.bitmap)return i.refCounter+=1,i;try{var r,s;let e;if(i||(i={bitmap:null,id:"image_".concat(kn(hs,this),"_").concat((An(fs,this,(r=kn(fs,this),s=r++,r)),s)),refCounter:0,isSvg:!1}),"string"===typeof t?(i.url=t,e=await Sr(t,"blob")):t instanceof File?e=i.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=Tn._isSVGFittingCanvas,n=new FileReader,r=new Image,s=new Promise((e,s)=>{r.onload=()=>{i.bitmap=r,i.isSvg=!0,e()},n.onload=async()=>{const e=i.svgUrl=n.result;r.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},r.onerror=n.onerror=s});n.readAsDataURL(e),await s}else i.bitmap=await createImageBitmap(e);i.refCounter=1}catch(zy){console.error(zy),i=null}return kn(ps,this).set(e,i),i&&kn(ps,this).set(i.id,i),i}Tn=ms;var ys=new WeakMap,bs=new WeakMap,xs=new WeakMap,ws=new WeakMap;class Ss{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;Sn(this,ys,[]),Sn(this,bs,!1),Sn(this,xs,void 0),Sn(this,ws,-1),An(xs,this,e)}add(e){let{cmd:t,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(r&&t(),kn(bs,this))return;const l={cmd:t,undo:n,post:i,type:s};if(-1===kn(ws,this))return kn(ys,this).length>0&&(kn(ys,this).length=0),An(ws,this,0),void kn(ys,this).push(l);if(a&&kn(ys,this)[kn(ws,this)].type===s)return o&&(l.undo=kn(ys,this)[kn(ws,this)].undo),void(kn(ys,this)[kn(ws,this)]=l);const c=kn(ws,this)+1;c===kn(xs,this)?kn(ys,this).splice(0,1):(An(ws,this,c),c<kn(ys,this).length&&kn(ys,this).splice(c)),kn(ys,this).push(l)}undo(){if(-1===kn(ws,this))return;An(bs,this,!0);const{undo:e,post:t}=kn(ys,this)[kn(ws,this)];e(),null===t||void 0===t||t(),An(bs,this,!1),An(ws,this,kn(ws,this)-1)}redo(){if(kn(ws,this)<kn(ys,this).length-1){An(ws,this,kn(ws,this)+1),An(bs,this,!0);const{cmd:e,post:t}=kn(ys,this)[kn(ws,this)];e(),null===t||void 0===t||t(),An(bs,this,!1)}}hasSomethingToUndo(){return-1!==kn(ws,this)}hasSomethingToRedo(){return kn(ws,this)<kn(ys,this).length-1}destroy(){An(ys,this,null)}}var Cs=new WeakSet;class _s{constructor(e){wn(this,Cs),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=nr.platform;for(const[n,i,r={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:i,options:r}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(Cn(Cs,this,ks).call(this,t));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(i.bind(e,...s,t)(),r||(t.stopPropagation(),t.preventDefault()))}}function ks(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class As{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const i=window.getComputedStyle(t).color;e.set(n,Lr(i))}t.remove()}(e),Ui(this,"_colors",e)}convert(e){const t=Lr(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((e,n)=>e===t[n]))return As._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?rr.makeHexColor(...t):e}}o(As,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var Es=new WeakMap,js=new WeakMap,Ts=new WeakMap,Os=new WeakMap,Ms=new WeakMap,Ps=new WeakMap,Ns=new WeakMap,$s=new WeakMap,Ds=new WeakMap,Ls=new WeakMap,Is=new WeakMap,Fs=new WeakMap,Rs=new WeakMap,Bs=new WeakMap,Ws=new WeakMap,zs=new WeakMap,Hs=new WeakMap,Us=new WeakMap,Gs=new WeakMap,Vs=new WeakMap,qs=new WeakMap,Xs=new WeakMap,Ys=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,Js=new WeakMap,Zs=new WeakMap,ea=new WeakMap,ta=new WeakMap,na=new WeakMap,ia=new WeakMap,ra=new WeakMap,sa=new WeakMap,aa=new WeakMap,oa=new WeakMap,la=new WeakMap,ca=new WeakMap,da=new WeakMap,ua=new WeakMap,ha=new WeakMap,fa=new WeakMap,pa=new WeakSet;class ga{static get _keyboardManager(){const e=ga.prototype,t=e=>kn(ua,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Ui(this,"_keyboardManager",new _s([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&kn(ua,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&kn(ua,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,n,i,r,s,a,o,l,c,d){wn(this,pa),Sn(this,Es,new AbortController),Sn(this,js,null),Sn(this,Ts,new Map),Sn(this,Os,new Map),Sn(this,Ms,null),Sn(this,Ps,null),Sn(this,Ns,null),Sn(this,$s,new Ss),Sn(this,Ds,null),Sn(this,Ls,0),Sn(this,Is,new Set),Sn(this,Fs,null),Sn(this,Rs,null),Sn(this,Bs,new Set),Sn(this,Ws,!1),Sn(this,zs,!1),Sn(this,Hs,!1),Sn(this,Us,null),Sn(this,Gs,null),Sn(this,Vs,null),Sn(this,qs,null),Sn(this,Xs,!1),Sn(this,Ys,null),Sn(this,Ks,new us),Sn(this,Qs,!1),Sn(this,Js,!1),Sn(this,Zs,null),Sn(this,ea,null),Sn(this,ta,null),Sn(this,na,null),Sn(this,ia,ei.NONE),Sn(this,ra,new Set),Sn(this,sa,null),Sn(this,aa,null),Sn(this,oa,null),Sn(this,la,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),Sn(this,ca,[0,0]),Sn(this,da,null),Sn(this,ua,null),Sn(this,ha,null),Sn(this,fa,null);const u=this._signal=kn(Es,this).signal;An(ua,this,e),An(ha,this,t),An(Ms,this,n),this._eventBus=i,i._on("editingaction",this.onEditingAction.bind(this),{signal:u}),i._on("pagechanging",this.onPageChanging.bind(this),{signal:u}),i._on("scalechanging",this.onScaleChanging.bind(this),{signal:u}),i._on("rotationchanging",this.onRotationChanging.bind(this),{signal:u}),i._on("setpreference",this.onSetPreference.bind(this),{signal:u}),i._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:u}),Cn(pa,this,wa).call(this),Cn(pa,this,ja).call(this),Cn(pa,this,_a).call(this),An(Ps,this,r.annotationStorage),An(Us,this,r.filterFactory),An(aa,this,s),An(qs,this,a||null),An(Ws,this,o),An(zs,this,l),An(Hs,this,c),An(na,this,d||null),this.viewParameters={realScale:wr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}destroy(){var e,t,n,i;null===(e=kn(fa,this))||void 0===e||e.resolve(),An(fa,this,null),null===(t=kn(Es,this))||void 0===t||t.abort(),An(Es,this,null),this._signal=null;for(const r of kn(Os,this).values())r.destroy();kn(Os,this).clear(),kn(Ts,this).clear(),kn(Bs,this).clear(),An(js,this,null),kn(ra,this).clear(),kn($s,this).destroy(),null===(n=kn(Ms,this))||void 0===n||n.destroy(),null===(i=kn(Ys,this))||void 0===i||i.hide(),An(Ys,this,null),kn(Gs,this)&&(clearTimeout(kn(Gs,this)),An(Gs,this,null)),kn(da,this)&&(clearTimeout(kn(da,this)),An(da,this,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return kn(na,this)}get useNewAltTextFlow(){return kn(zs,this)}get useNewAltTextWhenAddingImage(){return kn(Hs,this)}get hcmFilter(){return Ui(this,"hcmFilter",kn(aa,this)?kn(Us,this).addHCMFilter(kn(aa,this).foreground,kn(aa,this).background):"none")}get direction(){return Ui(this,"direction",getComputedStyle(kn(ua,this)).direction)}get highlightColors(){return Ui(this,"highlightColors",kn(qs,this)?new Map(kn(qs,this).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Ui(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){An(ta,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=kn(Ms,this))||void 0===t||t.editAltText(this,e,n)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)An(Hs,this,n)}onPageChanging(e){let{pageNumber:t}=e;An(Ls,this,t-1)}focusMainContainer(){kn(ua,this).focus()}findParent(e,t){for(const n of kn(Os,this).values()){const{x:i,y:r,width:s,height:a}=n.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=r&&t<=r+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];kn(ha,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){kn(Bs,this).add(e)}removeShouldRescale(e){kn(Bs,this).delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*wr.PDF_TO_CSS_UNITS;for(const n of kn(Bs,this))n.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t,a=t.toString(),o=Cn(pa,this,ma).call(this,t).closest(".textLayer"),l=this.getSelectionBoxes(o);if(!l)return;t.empty();const c=Cn(pa,this,va).call(this,o),d=kn(ia,this)===ei.NONE,u=()=>{null===c||void 0===c||c.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:l,anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s,text:a}),d&&this.showAllEditors("highlight",!0,!0)};d?this.switchToMode(ei.HIGHLIGHT,u):u()}addToAnnotationStorage(e){e.isEmpty()||!kn(Ps,this)||kn(Ps,this).has(e.id)||kn(Ps,this).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,kn(Xs,this)&&(An(Xs,this,!1),Cn(pa,this,xa).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of kn(ra,this))if(t.div.contains(e)){An(ea,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!kn(ea,this))return;const[e,t]=kn(ea,this);An(ea,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){Cn(pa,this,_a).call(this),Cn(pa,this,Aa).call(this)}removeEditListeners(){Cn(pa,this,ka).call(this),Cn(pa,this,Ea).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of kn(Rs,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of kn(Rs,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=kn(js,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of kn(ra,this)){const e=i.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const e of kn(Rs,this))if(e.isHandlingMimeForPasting(s.type))return void e.paste(s,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){return void Bi('paste: "'.concat(r.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const s of n){const t=await i.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)Cn(pa,this,Na).call(this,t);Cn(pa,this,La).call(this,e)},r=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:r,mustExec:!0})}catch(r){Bi('paste: "'.concat(r.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),kn(ia,this)===ei.NONE||this.isEditorHandlingKeyboard||ga._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,kn(Xs,this)&&(An(Xs,this,!1),Cn(pa,this,xa).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(Cn(pa,this,Sa).call(this),Cn(pa,this,Aa).call(this),Cn(pa,this,Ta).call(this,{isEditing:kn(ia,this)!==ei.NONE,isEmpty:Cn(pa,this,Da).call(this),hasSomethingToUndo:kn($s,this).hasSomethingToUndo(),hasSomethingToRedo:kn($s,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(Cn(pa,this,Ca).call(this),Cn(pa,this,Ea).call(this),Cn(pa,this,Ta).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!kn(Rs,this)){An(Rs,this,e);for(const e of kn(Rs,this))Cn(pa,this,Oa).call(this,e.defaultPropertiesToUpdate)}}getId(){return kn(Ks,this).id}get currentLayer(){return kn(Os,this).get(kn(Ls,this))}getLayer(e){return kn(Os,this).get(e)}get currentPageIndex(){return kn(Ls,this)}addLayer(e){kn(Os,this).set(e.pageIndex,e),kn(Qs,this)?e.enable():e.disable()}removeLayer(e){kn(Os,this).delete(e.pageIndex)}async updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(kn(ia,this)!==e&&(!kn(fa,this)||(await kn(fa,this).promise,kn(fa,this)))){if(An(fa,this,Promise.withResolvers()),An(ia,this,e),e===ei.NONE)return this.setEditingState(!1),Cn(pa,this,Pa).call(this),void kn(fa,this).resolve();this.setEditingState(!0),await Cn(pa,this,Ma).call(this),this.unselectAll();for(const t of kn(Os,this).values())t.updateMode(e);if(!t)return n&&this.addNewEditorFromKeyboard(),void kn(fa,this).resolve();for(const e of kn(Ts,this).values())e.annotationElementId===t?(this.setSelected(e),e.enterInEditMode()):e.unselect();kn(fa,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==kn(ia,this)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(kn(Rs,this)){switch(e){case ti.CREATE:return void this.currentLayer.addNewEditor();case ti.HIGHLIGHT_DEFAULT_COLOR:null===(n=kn(ta,this))||void 0===n||n.updateColor(t);break;case ti.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(kn(oa,this)||An(oa,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(const n of kn(ra,this))n.updateParams(e,t);for(const n of kn(Rs,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,i;for(const r of kn(Ts,this).values())r.editorType===e&&r.show(t);(null===(n=null===(i=kn(oa,this))||void 0===i?void 0:i.get(ti.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&Cn(pa,this,Oa).call(this,[[ti.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(kn(Js,this)!==e){An(Js,this,e);for(const t of kn(Os,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of kn(Ts,this).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return kn(Ts,this).get(e)}addEditor(e){kn(Ts,this).set(e.id,e)}removeEditor(e){var t;(e.div.contains(document.activeElement)&&(kn(Gs,this)&&clearTimeout(kn(Gs,this)),An(Gs,this,setTimeout(()=>{this.focusMainContainer(),An(Gs,this,null)},0))),kn(Ts,this).delete(e.id),this.unselect(e),e.annotationElementId&&kn(Is,this).has(e.annotationElementId))||(null===(t=kn(Ps,this))||void 0===t||t.remove(e.id))}addDeletedAnnotationElement(e){kn(Is,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return kn(Is,this).has(e)}removeDeletedAnnotationElement(e){kn(Is,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){kn(js,this)!==e&&(An(js,this,e),e&&Cn(pa,this,Oa).call(this,e.propertiesToUpdate))}updateUI(e){_n(pa,this,$a)===e&&Cn(pa,this,Oa).call(this,e.propertiesToUpdate)}toggleSelected(e){if(kn(ra,this).has(e))return kn(ra,this).delete(e),e.unselect(),void Cn(pa,this,Ta).call(this,{hasSelectedEditor:this.hasSelection});kn(ra,this).add(e),e.select(),Cn(pa,this,Oa).call(this,e.propertiesToUpdate),Cn(pa,this,Ta).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of kn(ra,this))t!==e&&t.unselect();kn(ra,this).clear(),kn(ra,this).add(e),e.select(),Cn(pa,this,Oa).call(this,e.propertiesToUpdate),Cn(pa,this,Ta).call(this,{hasSelectedEditor:!0})}isSelected(e){return kn(ra,this).has(e)}get firstSelectedEditor(){return kn(ra,this).values().next().value}unselect(e){e.unselect(),kn(ra,this).delete(e),Cn(pa,this,Ta).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==kn(ra,this).size}get isEnterHandled(){return 1===kn(ra,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){kn($s,this).undo(),Cn(pa,this,Ta).call(this,{hasSomethingToUndo:kn($s,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Cn(pa,this,Da).call(this)})}redo(){kn($s,this).redo(),Cn(pa,this,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:kn($s,this).hasSomethingToRedo(),isEmpty:Cn(pa,this,Da).call(this)})}addCommands(e){kn($s,this).add(e),Cn(pa,this,Ta).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Cn(pa,this,Da).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...kn(ra,this)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)Cn(pa,this,Na).call(this,t)},mustExec:!0})}commitOrRemove(){var e;null===(e=kn(js,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return kn(js,this)||this.hasSelection}selectAll(){for(const e of kn(ra,this))e.commit();Cn(pa,this,La).call(this,kn(Ts,this).values())}unselectAll(){if((!kn(js,this)||(kn(js,this).commitOrRemove(),kn(ia,this)===ei.NONE))&&this.hasSelection){for(const e of kn(ra,this))e.unselect();kn(ra,this).clear(),Cn(pa,this,Ta).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;kn(ca,this)[0]+=e,kn(ca,this)[1]+=t;const[n,i]=kn(ca,this),r=[...kn(ra,this)];kn(da,this)&&clearTimeout(kn(da,this)),An(da,this,setTimeout(()=>{An(da,this,null),kn(ca,this)[0]=kn(ca,this)[1]=0,this.addCommands({cmd:()=>{for(const e of r)kn(Ts,this).has(e.id)&&e.translateInPage(n,i)},undo:()=>{for(const e of r)kn(Ts,this).has(e.id)&&e.translateInPage(-n,-i)},mustExec:!1})},1e3));for(const s of r)s.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),An(Fs,this,new Map);for(const e of kn(ra,this))kn(Fs,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!kn(Fs,this))return!1;this.disableUserSelect(!1);const e=kn(Fs,this);An(Fs,this,null);let t=!1;for(const[{x:i,y:r,pageIndex:s},a]of e)a.newX=i,a.newY=r,a.newPageIndex=s,t||(t=i!==a.savedX||r!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,i)=>{if(kn(Ts,this).has(e.id)){const r=kn(Os,this).get(i);r?e._setParentAndPosition(r,t,n):(e.pageIndex=i,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:i,newY:r,newPageIndex:s}]of e)n(t,i,r,s)},undo:()=>{for(const[t,{savedX:i,savedY:r,savedPageIndex:s}]of e)n(t,i,r,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(kn(Fs,this))for(const n of kn(Fs,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===kn(ra,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return kn(js,this)===e}getActive(){return kn(js,this)}getMode(){return kn(ia,this)}get imageManager(){return Ui(this,"imageManager",new ms)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:i,width:r,height:s}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-i)/s,y:1-(e+a-n)/r,width:o/s,height:a/r});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/r,y:1-(t+o-i)/s,width:a/r,height:o/s});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-i)/s,y:(e-n)/r,width:o/s,height:a/r});break;default:a=(e,t,a,o)=>({x:(e-n)/r,y:(t-i)/s,width:a/r,height:o/s})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:i,height:r}of e.getClientRects())0!==i&&0!==r&&o.push(a(t,n,i,r))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(kn(Ns,this)||An(Ns,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=kn(Ns,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=kn(Ns,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const i=kn(Ps,this).getRawValue(n);i&&(kn(ia,this)!==ei.NONE||i.hasBeenModified)&&i.renderAnnotationElement(e)}}function ma(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function va(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of kn(Os,this).values())if(n.hasTextLayer(e))return n;return null}function ya(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=Cn(pa,this,ma).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(kn(Ys,this)||An(Ys,this,new ss(this)),kn(Ys,this).show(t,n,"ltr"===this.direction))}function ba(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(kn(sa,this))null===(n=kn(Ys,this))||void 0===n||n.hide(),An(sa,this,null),Cn(pa,this,Ta).call(this,{hasSelectedText:!1});return}const{anchorNode:i}=t;if(i===kn(sa,this))return;const r=Cn(pa,this,ma).call(this,t).closest(".textLayer");var s;if(r){if(null===(e=kn(Ys,this))||void 0===e||e.hide(),An(sa,this,i),Cn(pa,this,Ta).call(this,{hasSelectedText:!0}),(kn(ia,this)===ei.HIGHLIGHT||kn(ia,this)===ei.NONE)&&(kn(ia,this)===ei.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),An(Xs,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=kn(ia,this)===ei.HIGHLIGHT?Cn(pa,this,va).call(this,r):null;null===e||void 0===e||e.toggleDrawing();const t=new AbortController,n=this.combinedSignal(t),i=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&Cn(pa,this,xa).call(this,"main_toolbar"))};window.addEventListener("pointerup",i,{signal:n}),window.addEventListener("blur",i,{signal:n})}}else kn(sa,this)&&(null===(s=kn(Ys,this))||void 0===s||s.hide(),An(sa,this,null),Cn(pa,this,Ta).call(this,{hasSelectedText:!1}))}function xa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";kn(ia,this)===ei.HIGHLIGHT?this.highlightSelection(e):kn(Ws,this)&&Cn(pa,this,ya).call(this)}function wa(){document.addEventListener("selectionchange",Cn(pa,this,ba).bind(this),{signal:this._signal})}function Sa(){if(kn(Vs,this))return;An(Vs,this,new AbortController);const e=this.combinedSignal(kn(Vs,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function Ca(){var e;null===(e=kn(Vs,this))||void 0===e||e.abort(),An(Vs,this,null)}function _a(){if(kn(Zs,this))return;An(Zs,this,new AbortController);const e=this.combinedSignal(kn(Zs,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function ka(){var e;null===(e=kn(Zs,this))||void 0===e||e.abort(),An(Zs,this,null)}function Aa(){if(kn(Ds,this))return;An(Ds,this,new AbortController);const e=this.combinedSignal(kn(Ds,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function Ea(){var e;null===(e=kn(Ds,this))||void 0===e||e.abort(),An(Ds,this,null)}function ja(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function Ta(e){Object.entries(e).some(e=>{let[t,n]=e;return kn(la,this)[t]!==n})&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(kn(la,this),e)}),kn(ia,this)===ei.HIGHLIGHT&&!1===e.hasSelectedEditor&&Cn(pa,this,Oa).call(this,[[ti.HIGHLIGHT_FREE,!0]]))}function Oa(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function Ma(){if(!kn(Qs,this)){An(Qs,this,!0);const e=[];for(const t of kn(Os,this).values())e.push(t.enable());await Promise.all(e);for(const t of kn(Ts,this).values())t.enable()}}function Pa(){if(this.unselectAll(),kn(Qs,this)){An(Qs,this,!1);for(const e of kn(Os,this).values())e.disable();for(const e of kn(Ts,this).values())e.disable()}}function Na(e){const t=kn(Os,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function $a(e){let t=null;for(t of kn(ra,e));return t}function Da(){if(0===kn(Ts,this).size)return!0;if(1===kn(Ts,this).size)for(const e of kn(Ts,this).values())return e.isEmpty();return!1}function La(e){for(const t of kn(ra,this))t.unselect();kn(ra,this).clear();for(const t of e)t.isEmpty()||(kn(ra,this).add(t),t.select());Cn(pa,this,Ta).call(this,{hasSelectedEditor:this.hasSelection})}o(ga,"TRANSLATE_SMALL",1),o(ga,"TRANSLATE_BIG",10);var Ia=new WeakMap,Fa=new WeakMap,Ra=new WeakMap,Ba=new WeakMap,Wa=new WeakMap,za=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,Ga=new WeakMap,Va=new WeakMap,qa=new WeakMap,Xa=new WeakMap,Ya=new WeakSet;class Ka{constructor(e){wn(this,Ya),Sn(this,Ia,null),Sn(this,Fa,!1),Sn(this,Ra,null),Sn(this,Ba,null),Sn(this,Wa,null),Sn(this,za,null),Sn(this,Ha,!1),Sn(this,Ua,null),Sn(this,Ga,null),Sn(this,Va,null),Sn(this,qa,null),Sn(this,Xa,!1),An(Ga,this,e),An(Xa,this,e._uiManager.useNewAltTextFlow),Za._||(Za._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=Ka._l10n)&&void 0!==t||(Ka._l10n=e)}async render(){const e=An(Ra,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=An(Ba,this,document.createElement("span"));e.append(t),kn(Xa,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",Za._.missing),t.setAttribute("data-l10n-id",Za._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=kn(Ga,this)._uiManager._signal;e.addEventListener("contextmenu",Mr,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const i=e=>{e.preventDefault(),kn(Ga,this)._uiManager.editAltText(kn(Ga,this)),kn(Xa,this)&&kn(Ga,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:_n(Ya,this,Qa)}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(An(Ha,this,!0),i(t))},{signal:n}),await Cn(Ya,this,Ja).call(this),e}finish(){kn(Ra,this)&&(kn(Ra,this).focus({focusVisible:kn(Ha,this)}),An(Ha,this,!1))}isEmpty(){return kn(Xa,this)?null===kn(Ia,this):!kn(Ia,this)&&!kn(Fa,this)}hasData(){return kn(Xa,this)?null!==kn(Ia,this)||!!kn(Va,this):this.isEmpty()}get guessedText(){return kn(Va,this)}async setGuessedText(e){null===kn(Ia,this)&&(An(Va,this,e),An(qa,this,await Ka._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),Cn(Ya,this,Ja).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!kn(Xa,this)||kn(Ia,this))return null===(t=kn(Ua,this))||void 0===t||t.remove(),void An(Ua,this,null);if(!kn(Ua,this)){const e=An(Ua,this,document.createElement("div"));e.className="noAltTextBadge",kn(Ga,this).div.append(e)}kn(Ua,this).classList.toggle("hidden",!e)}serialize(e){let t=kn(Ia,this);return e||kn(Va,this)!==t||(t=kn(qa,this)),{altText:t,decorative:kn(Fa,this),guessedText:kn(Va,this),textWithDisclaimer:kn(qa,this)}}get data(){return{altText:kn(Ia,this),decorative:kn(Fa,this)}}set data(e){let{altText:t,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}=e;i&&(An(Va,this,i),An(qa,this,r)),kn(Ia,this)===t&&kn(Fa,this)===n||(s||(An(Ia,this,t),An(Fa,this,n)),Cn(Ya,this,Ja).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];kn(Ra,this)&&(!e&&kn(za,this)&&(clearTimeout(kn(za,this)),An(za,this,null)),kn(Ra,this).disabled=!e)}shown(){kn(Ga,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:_n(Ya,this,Qa)}})}destroy(){var e,t;null===(e=kn(Ra,this))||void 0===e||e.remove(),An(Ra,this,null),An(Ba,this,null),An(Wa,this,null),null===(t=kn(Ua,this))||void 0===t||t.remove(),An(Ua,this,null)}}function Qa(e){return(kn(Ia,e)?"added":null===kn(Ia,e)&&e.guessedText&&"review")||"missing"}async function Ja(){const e=kn(Ra,this);if(!e)return;if(kn(Xa,this)){var t,n;if(e.classList.toggle("done",!!kn(Ia,this)),e.setAttribute("data-l10n-id",Za._[_n(Ya,this,Qa)]),null===(t=kn(Ba,this))||void 0===t||t.setAttribute("data-l10n-id",Za._["".concat(_n(Ya,this,Qa),"-label")]),!kn(Ia,this))return void(null===(n=kn(Wa,this))||void 0===n||n.remove())}else{var i;if(!kn(Ia,this)&&!kn(Fa,this))return e.classList.remove("done"),void(null===(i=kn(Wa,this))||void 0===i||i.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=kn(Wa,this);if(!r){An(Wa,this,r=document.createElement("span")),r.className="tooltip",r.setAttribute("role","tooltip"),r.id="alt-text-tooltip-".concat(kn(Ga,this).id);const t=100,n=kn(Ga,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(kn(za,this)),An(za,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{An(za,this,setTimeout(()=>{An(za,this,null),kn(Wa,this).classList.add("show"),kn(Ga,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;kn(za,this)&&(clearTimeout(kn(za,this)),An(za,this,null)),null===(e=kn(Wa,this))||void 0===e||e.classList.remove("show")},{signal:n})}kn(Fa,this)?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=kn(Ia,this)),r.parentNode||e.append(r);const s=kn(Ga,this).getImageForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",r.id)}var Za={_:null};o(Ka,"_l10n",null);var eo=new WeakMap,to=new WeakMap,no=new WeakMap,io=new WeakMap,ro=new WeakMap,so=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakMap,ho=new WeakMap,fo=new WeakMap,po=new WeakMap,go=new WeakMap,mo=new WeakMap,vo=new WeakMap,yo=new WeakMap,bo=new WeakMap,xo=new WeakMap,wo=new WeakSet;class So{static get _resizerKeyboardManager(){const e=So.prototype._resizeWithKeyboard,t=ga.TRANSLATE_SMALL,n=ga.TRANSLATE_BIG;return Ui(this,"_resizerKeyboardManager",new _s([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],So.prototype._stopResizingWithKeyboard]]))}constructor(e){wn(this,wo),Sn(this,eo,null),Sn(this,to,null),Sn(this,no,null),Sn(this,io,!1),Sn(this,ro,!1),Sn(this,so,null),Sn(this,ao,null),Sn(this,oo,null),Sn(this,lo,""),Sn(this,co,!1),Sn(this,uo,null),Sn(this,ho,!1),Sn(this,fo,!1),Sn(this,po,!1),Sn(this,go,null),Sn(this,mo,0),Sn(this,vo,0),Sn(this,yo,null),o(this,"_editToolbar",null),o(this,"_initialOptions",Object.create(null)),o(this,"_initialData",null),o(this,"_isVisible",!0),o(this,"_uiManager",null),o(this,"_focusEventsAllowed",!0),Sn(this,bo,!1),Sn(this,xo,So._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[r,s];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ui(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Fo({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=So._l10n)&&void 0!==n||(So._l10n=e),So._l10nResizer||(So._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==So._borderLineWidth)return;const i=getComputedStyle(document.documentElement);So._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Wi("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return kn(bo,this)}set _isDraggable(e){var t;An(bo,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=kn(xo,this)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):Cn(wo,this,Io).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(kn(co,this)?An(co,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[r,s]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/r,this.y=(t+i)/s,this.fixAndSetPosition()}translate(e,t){Cn(wo,this,Co).call(this,this.parentDimensions,e,t)}translateInPage(e,t){kn(uo,this)||An(uo,this,[this.x,this.y]),Cn(wo,this,Co).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){kn(uo,this)||An(uo,this,[this.x,this.y]);const[n,i]=this.parentDimensions;if(this.x+=e/n,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:s}=this;const[a,o]=this.getBaseTranslation();r+=a,s+=o,this.div.style.left="".concat((100*r).toFixed(2),"%"),this.div.style.top="".concat((100*s).toFixed(2),"%"),this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!kn(uo,this)&&(kn(uo,this)[0]!==this.x||kn(uo,this)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=So,i=n/e,r=n/t;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const[t,n]=this.pageDimensions;let{x:i,y:r,width:s,height:a}=this;if(s*=t,a*=n,i*=t,r*=n,this._mustFixPosition)switch(e){case 0:i=Math.max(0,Math.min(t-s,i)),r=Math.max(0,Math.min(n-a,r));break;case 90:i=Math.max(0,Math.min(t-a,i)),r=Math.min(n,Math.max(s,r));break;case 180:i=Math.min(t,Math.max(s,i)),r=Math.min(n,Math.max(a,r));break;case 270:i=Math.min(t,Math.max(a,i)),r=Math.max(0,Math.min(n-s,r))}this.x=i/=t,this.y=r/=n;const[o,l]=this.getBaseTranslation();i+=o,r+=l;const{style:c}=this.div;c.left="".concat((100*i).toFixed(2),"%"),c.top="".concat((100*r).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return _o.call(So,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return _o.call(So,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,i]=this.parentDimensions;this.div.style.width="".concat((100*e/n).toFixed(2),"%"),kn(ro,this)||(this.div.style.height="".concat((100*t/i).toFixed(2),"%"))}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,i=n.endsWith("%"),r=!kn(ro,this)&&t.endsWith("%");if(i&&r)return;const[s,a]=this.parentDimensions;i||(e.width="".concat((100*parseFloat(n)/s).toFixed(2),"%")),kn(ro,this)||r||(e.height="".concat((100*parseFloat(t)/a).toFixed(2),"%"))}getInitialTranslation(){return[0,0]}altTextFinish(){var e;null===(e=kn(no,this))||void 0===e||e.finish()}async addEditToolbar(){return this._editToolbar||kn(fo,this)||(this._editToolbar=new qr(this),this.div.append(this._editToolbar.render()),kn(no,this)&&await this._editToolbar.addAltText(kn(no,this))),this._editToolbar}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,null===(e=kn(no,this))||void 0===e||e.destroy())}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){kn(no,this)||(Ka.initialize(So._l10n),An(no,this,new Ka(this)),kn(eo,this)&&(kn(no,this).data=kn(eo,this),An(eo,this,null)),await this.addEditToolbar())}get altTextData(){var e;return null===(e=kn(no,this))||void 0===e?void 0:e.data}set altTextData(e){kn(no,this)&&(kn(no,this).data=e)}get guessedAltText(){var e;return null===(e=kn(no,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=kn(no,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=kn(no,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!kn(no,this)&&!kn(no,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=kn(no,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=kn(io,this)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),Cn(wo,this,Po).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth="".concat((100*t/e).toFixed(2),"%"),this.div.style.maxHeight="".concat((100*e/t).toFixed(2),"%"));const[n,i]=this.getInitialTranslation();return this.translate(n,i),cs(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=nr.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(An(co,this,!0),this._isDraggable?Cn(wo,this,Mo).call(this,e):Cn(wo,this,Oo).call(this,e))}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){kn(go,this)&&clearTimeout(kn(go,this)),An(go,this,setTimeout(()=>{var e;An(go,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const i=this.parentScale,[r,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/i,c=t/i,d=this.x*r,u=this.y*s,h=this.width*r,f=this.height*s;switch(n){case 0:return[d+l+a,s-u-c-f+o,d+l+h+a,s-u-c+o];case 90:return[d+c+a,s-u+l+o,d+c+f+a,s-u+l+h+o];case 180:return[d-l-h+a,s-u+c+o,d-l+a,s-u+c+f+o];case 270:return[d-c-f+a,s-u-l-h+o,d-c+a,s-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,r,s]=e,a=r-n,o=s-i;switch(this.rotation){case 0:return[n,t-s,a,o];case 90:return[n,t-i,o,a];case 180:return[r,t-i,a,o];case 270:return[r,t-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){An(fo,this,!0)}disableEditMode(){An(fo,this,!1)}isInEditMode(){return kn(fo,this)}shouldGetKeyboardEvents(){return kn(po,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){Cn(wo,this,Po).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){Wi("An editor must be serializable")}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});i.rotation=e.rotation,An(eo,i,e.accessibilityData);const[r,s]=i.pageDimensions,[a,o,l,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=a/r,i.y=o/s,i.width=l/r,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e;if(null===(e=kn(oo,this))||void 0===e||e.abort(),An(oo,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),kn(go,this)&&(clearTimeout(kn(go,this)),An(go,this,null)),Cn(wo,this,Io).call(this),this.removeEditToolbar(),kn(yo,this)){for(const e of kn(yo,this).values())clearTimeout(e);An(yo,this,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(Cn(wo,this,Ao).call(this),kn(so,this).classList.remove("hidden"),cs(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),An(ao,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=kn(so,this).children;if(!kn(to,this)){An(to,this,Array.from(t));const e=Cn(wo,this,No).bind(this),n=Cn(wo,this,$o).bind(this),i=this._uiManager._signal;for(const t of kn(to,this)){const r=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:i}),t.addEventListener("blur",n,{signal:i}),t.addEventListener("focus",Cn(wo,this,Do).bind(this,r),{signal:i}),t.setAttribute("data-l10n-id",So._l10nResizer[r])}}const n=kn(to,this)[0];let i=0;for(const s of t){if(s===n)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(kn(to,this).length/4);if(r!==i){if(r<i)for(let t=0;t<i-r;t++)kn(so,this).append(kn(so,this).firstChild);else if(r>i)for(let t=0;t<r-i;t++)kn(so,this).firstChild.before(kn(so,this).lastChild);let e=0;for(const n of t){const t=kn(to,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",So._l10nResizer[t])}}Cn(wo,this,Lo).call(this,0),An(po,this,!0),kn(so,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){kn(po,this)&&Cn(wo,this,To).call(this,kn(lo,this),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){Cn(wo,this,Io).call(this),this.div.focus()}select(){var e,t,n;this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=kn(no,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())})}unselect(){var e,t,n,i,r;null===(e=kn(so,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(i=this._editToolbar)||void 0===i||i.hide(),null===(r=kn(no,this))||void 0===r||r.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return kn(ho,this)}set isEditing(e){An(ho,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){An(ro,this,!0);const n=e/t,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){kn(yo,this)||An(yo,this,new Map);const{action:t}=e;let n=kn(yo,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),kn(yo,this).delete(t),0===kn(yo,this).size&&An(yo,this,null)},So._telemetryTimeout),void kn(yo,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),An(io,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),An(io,this,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function Co(e,t,n){let[i,r]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/i,this.y+=n/r,this.fixAndSetPosition()}function _o(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function ko(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function Ao(){if(kn(so,this))return;An(so,this,document.createElement("div")),kn(so,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");kn(so,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",Cn(wo,this,Eo).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Mr,{signal:t}),e.tabIndex=-1}this.div.prepend(kn(so,this))}function Eo(e,t){var n;t.preventDefault();const{isMac:i}=nr.platform;if(0!==t.button||t.ctrlKey&&i)return;null===(n=kn(no,this))||void 0===n||n.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",Cn(wo,this,To).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Mr,{signal:a});const o=this.x,l=this.y,c=this.width,d=this.height,u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var e;s.abort(),this.parent.togglePointerEvents(!0),null===(e=kn(no,this))||void 0===e||e.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,Cn(wo,this,jo).call(this,o,l,c,d)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})}function jo(e,t,n,i){const r=this.x,s=this.y,a=this.width,o=this.height;r===e&&s===t&&a===n&&o===i||this.addCommands({cmd:()=>{this.width=a,this.height=o,this.x=r,this.y=s;const[e,t]=this.parentDimensions;this.setDims(e*a,t*o),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=i,this.x=e,this.y=t;const[r,s]=this.parentDimensions;this.setDims(r*n,s*i),this.fixAndSetPosition()},mustExec:!0})}function To(e,t){const[n,i]=this.parentDimensions,r=this.x,s=this.y,a=this.width,o=this.height,l=On.MIN_SIZE/n,c=On.MIN_SIZE/i,d=e=>Math.round(1e4*e)/1e4,u=Cn(wo,this,ko).call(this,this.rotation),h=(e,t)=>[u[0]*e+u[2]*t,u[1]*e+u[3]*t],f=Cn(wo,this,ko).call(this,360-this.rotation);let p,g,m=!1,v=!1;switch(e){case"topLeft":m=!0,p=(e,t)=>[0,0],g=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],g=(e,t)=>[e/2,t];break;case"topRight":m=!0,p=(e,t)=>[e,0],g=(e,t)=>[0,t];break;case"middleRight":v=!0,p=(e,t)=>[e,t/2],g=(e,t)=>[0,t/2];break;case"bottomRight":m=!0,p=(e,t)=>[e,t],g=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],g=(e,t)=>[e/2,0];break;case"bottomLeft":m=!0,p=(e,t)=>[0,t],g=(e,t)=>[e,0];break;case"middleLeft":v=!0,p=(e,t)=>[0,t/2],g=(e,t)=>[e,t/2]}const y=p(a,o),b=g(a,o);let x=h(...b);const w=d(r+x[0]),S=d(s+x[1]);let C=1,_=1,[k,A]=this.screenToPageTranslation(t.movementX,t.movementY);if([k,A]=((e,t)=>[f[0]*e+f[2]*t,f[1]*e+f[3]*t])(k/n,A/i),m){const e=Math.hypot(a,o);C=_=Math.max(Math.min(Math.hypot(b[0]-y[0]-k,b[1]-y[1]-A)/e,1/a,1/o),l/a,c/o)}else v?C=Math.max(l,Math.min(1,Math.abs(b[0]-y[0]-k)))/a:_=Math.max(c,Math.min(1,Math.abs(b[1]-y[1]-A)))/o;const E=d(a*C),j=d(o*_);x=h(...g(E,j));const T=w-x[0],O=S-x[1];this.width=E,this.height=j,this.x=T,this.y=O,this.setDims(n*E,i*j),this.fixAndSetPosition()}function Oo(e){const{isMac:t}=nr.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function Mo(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const n=new AbortController,i=this._uiManager.combinedSignal(n);if(t){this.div.classList.add("moving"),An(mo,this,e.clientX),An(vo,this,e.clientY);const t=e=>{const{clientX:t,clientY:n}=e,[i,r]=this.screenToPageTranslation(t-kn(mo,this),n-kn(vo,this));An(mo,this,t),An(vo,this,n),this._uiManager.dragSelectedEditors(i,r)};window.addEventListener("pointermove",t,{passive:!0,capture:!0,signal:i})}const r=()=>{n.abort(),t&&this.div.classList.remove("moving"),An(co,this,!1),this._uiManager.endDragSession()||Cn(wo,this,Oo).call(this,e)};window.addEventListener("pointerup",r,{signal:i}),window.addEventListener("blur",r,{signal:i})}function Po(){if(kn(oo,this)||!this.div)return;An(oo,this,new AbortController);const e=this._uiManager.combinedSignal(kn(oo,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function No(e){On._resizerKeyboardManager.exec(this,e)}function $o(e){var t;kn(po,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==kn(so,this)&&Cn(wo,this,Io).call(this)}function Do(e){An(lo,this,kn(po,this)?e:"")}function Lo(e){if(kn(to,this))for(const t of kn(to,this))t.tabIndex=e}function Io(){if(An(po,this,!1),Cn(wo,this,Lo).call(this,-1),kn(ao,this)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=kn(ao,this);Cn(wo,this,jo).call(this,e,t,n,i),An(ao,this,null)}}On=So,o(So,"_l10n",null),o(So,"_l10nResizer",null),o(So,"_borderLineWidth",-1),o(So,"_colorManager",new As),o(So,"_zIndex",1),o(So,"_telemetryTimeout",1e3);class Fo extends So{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Ro=3285377520,Bo=4294901760,Wo=65535;class zo{constructor(e){this.h1=e?4294967295&e:Ro,this.h2=e?4294967295&e:Ro}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let i=0,r=e.length;i<r;i++){const r=e.charCodeAt(i);r<=255?t[n++]=r:(t[n++]=r>>>8,t[n++]=255&r)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const i=n>>2,r=n-4*i,s=new Uint32Array(t.buffer,0,i);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,f=13715;for(let p=0;p<i;p++)1&p?(a=s[p],a=a*d&Bo|a*h&Wo,a=a<<15|a>>>17,a=a*u&Bo|a*f&Wo,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[p],o=o*d&Bo|o*h&Wo,o=o<<15|o>>>17,o=o*u&Bo|o*f&Wo,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,r){case 3:a^=t[4*i+2]<<16;case 2:a^=t[4*i+1]<<8;case 1:a^=t[4*i],a=a*d&Bo|a*h&Wo,a=a<<15|a>>>17,a=a*u&Bo|a*f&Wo,1&i?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&Bo|36045*e&Wo,t=4283543511*t&Bo|(2950163797*(t<<16|e>>>16)&Bo)>>>16,e^=t>>>1,e=444984403*e&Bo|60499*e&Wo,t=3301882366*t&Bo|(3120437893*(t<<16|e>>>16)&Bo)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ho=Object.freeze({map:null,hash:"",transfer:void 0});var Uo=new WeakMap,Go=new WeakMap,Vo=new WeakMap,qo=new WeakSet;class Xo{constructor(){wn(this,qo),Sn(this,Uo,!1),Sn(this,Go,null),Sn(this,Vo,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=kn(Vo,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return kn(Vo,this).get(e)}remove(e){if(kn(Vo,this).delete(e),0===kn(Vo,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor){for(const e of kn(Vo,this).values())if(e instanceof So)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=kn(Vo,this).get(e);let i=!1;if(void 0!==n)for(const[r,s]of Object.entries(t))n[r]!==s&&(i=!0,n[r]=s);else i=!0,kn(Vo,this).set(e,t);i&&Cn(qo,this,Yo).call(this),t instanceof So&&"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return kn(Vo,this).has(e)}getAll(){return kn(Vo,this).size>0?tr(kn(Vo,this)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return kn(Vo,this).size}resetModified(){kn(Uo,this)&&(An(Uo,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new Qo(this)}get serializable(){if(0===kn(Vo,this).size)return Ho;const e=new Map,t=new zo,n=[],i=Object.create(null);let r=!1;for(const[s,a]of kn(Vo,this)){const n=a instanceof So?a.serialize(!1,i):a;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),r||(r=!!n.bitmap))}if(r)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Ho}get editorStats(){let e=null;const t=new Map;for(const r of kn(Vo,this).values()){var n;if(!(r instanceof So))continue;const s=r.telemetryFinalData;if(!s)continue;const{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const o=(n=e)[a]||(n[a]=new Map);for(const[e,t]of Object.entries(s)){var i;if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));const r=null!==(i=n.get(t))&&void 0!==i?i:0;n.set(t,r+1)}}for(const[r,s]of t)e[r]=s.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){An(Go,this,null)}get modifiedIds(){if(kn(Go,this))return kn(Go,this);const e=[];for(const t of kn(Vo,this).values())t instanceof So&&t.annotationElementId&&t.serialize()&&e.push(t.annotationElementId);return An(Go,this,{ids:new Set(e),hash:e.join(",")})}}function Yo(){kn(Uo,this)||(An(Uo,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var Ko=new WeakMap;class Qo extends Xo{constructor(e){super(),Sn(this,Ko,void 0);const{map:t,hash:n,transfer:i}=e.serializable,r=structuredClone(t,i?{transfer:i}:null);An(Ko,this,{map:r,hash:n,transfer:i})}get print(){Wi("Should not call PrintAnnotationStorage.print")}get serializable(){return kn(Ko,this)}get modifiedIds(){return Ui(this,"modifiedIds",{ids:new Set,hash:""})}}var Jo=new WeakMap;class Zo{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;Sn(this,Jo,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),kn(Jo,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,_inspectFont:n}=e;if(t&&!kn(Jo,this).has(t.loadedName)){if(zi(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:r,style:s}=t,a=new FontFace(e,r,s);this.addNativeFontFace(a);try{await a.load(),kn(Jo,this).add(e),null===n||void 0===n||n(t)}catch(i){Bi("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}Wi("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw Bi("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return Ui(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){var e;let t=!1;return(Wn||"undefined"!==typeof navigator&&"string"===typeof(null===(e=navigator)||void 0===e?void 0:e.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),Ui(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(zi(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return Ui(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,i){return e.substring(0,t)+i+e.substring(t+n)}let r,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=i(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(r=0,s=c.length-3;r<s;r+=4)h=h-u+n(c,r)|0;var f;r<c.length&&(h=h-u+n(c+"XXX",r)|0),d=i(d,16,4,(f=h,String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,255&f)));const p="url(data:font/opentype;base64,".concat(btoa(d),");"),g='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(g);const m=this._document.createElement("div");m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px";for(const v of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=v,m.append(e)}this._document.body.append(m),function e(t,n){if(++l>30)return Bi("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{m.remove(),t.complete()})}}class el{constructor(e,t){let{disableFontFace:n=!1,inspectFont:i=null}=t;this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=!0===n,this._inspectFont=i}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat((n=this.data,Uint8Array.prototype.toBase64?n.toBase64():btoa(Zi(n))),");");var n;let i;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),i='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else i='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(r){Bi('getPathGenerator - ignoring character: "'.concat(r,'".'))}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[t]=function(e,t){};const i=[];for(let s=0,a=n.length;s<a;)switch(n[s++]){case ur:{const[e,t,r,a,o,l]=n.slice(s,s+6);i.push(n=>n.bezierCurveTo(e,t,r,a,o,l)),s+=6}break;case hr:{const[e,t]=n.slice(s,s+2);i.push(n=>n.moveTo(e,t)),s+=2}break;case fr:{const[e,t]=n.slice(s,s+2);i.push(n=>n.lineTo(e,t)),s+=2}break;case pr:{const[e,t,r,a]=n.slice(s,s+4);i.push(n=>n.quadraticCurveTo(e,t,r,a)),s+=4}break;case gr:i.push(e=>e.restore());break;case mr:i.push(e=>e.save());break;case vr:zi(2===i.length,"Scale command is only valid at the third position.");break;case yr:{const[e,t,r,a,o,l]=n.slice(s,s+6);i.push(n=>n.transform(e,t,r,a,o,l)),s+=6}break;case br:{const[e,t]=n.slice(s,s+2);i.push(n=>n.translate(e,t)),s+=2}}return this.compiledGlyphs[t]=function(e,t){i[0](e),i[1](e),e.scale(t,-t);for(let n=2,r=i.length;n<r;n++)i[n](e)}}}var tl=new WeakMap;class nl{constructor(e){let{enableHWA:t=!1}=e;Sn(this,tl,!1),An(tl,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!kn(tl,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Wi("Abstract method `_createCanvas` called.")}}class il{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){Wi("Abstract method `_fetch` called.")}}class rl extends il{async _fetch(e){const t=await Sr(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):er(t)}}class sl{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,r){return"none"}destroy(){}}var al=new WeakMap,ol=new WeakMap,ll=new WeakMap,cl=new WeakMap,dl=new WeakMap,ul=new WeakMap,hl=new WeakMap,fl=new WeakSet;function pl(e){return kn(ol,e)||An(ol,e,new Map)}function gl(e){return kn(ul,e)||An(ul,e,new Map)}function ml(e){if(!kn(ll,e)){const t=kn(dl,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=kn(dl,e).createElementNS(xr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),An(ll,e,kn(dl,e).createElementNS(xr,"defs")),t.append(i),i.append(kn(ll,e)),kn(dl,e).body.append(t)}return kn(ll,e)}function vl(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const i=n.join(",");return[i,i,i]}const[t,n,i]=e,r=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)r[o]=t[o]/255,s[o]=n[o]/255,a[o]=i[o]/255;return[r.join(","),s.join(","),a.join(",")]}function yl(e){if(void 0===kn(al,this)){An(al,this,"");const e=kn(dl,this).URL;e!==kn(dl,this).baseURI&&(kr(e)?Bi('#createUrl: ignore "data:"-URL for performance reasons.'):An(al,this,e.split("#",1)[0]))}return"url(".concat(kn(al,this),"#").concat(e,")")}function bl(e){const t=kn(dl,this).createElementNS(xr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function xl(e){const t=kn(dl,this).createElementNS(xr,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function wl(e){const t=kn(dl,this).createElementNS(xr,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),_n(fl,this,ml).append(t),t}function Sl(e,t,n){const i=kn(dl,this).createElementNS(xr,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}function Cl(e,t,n,i){const r=kn(dl,this).createElementNS(xr,"feComponentTransfer");i.append(r),Cn(fl,this,Sl).call(this,r,"feFuncR",e),Cn(fl,this,Sl).call(this,r,"feFuncG",t),Cn(fl,this,Sl).call(this,r,"feFuncB",n)}function _l(e,t){const n=kn(dl,this).createElementNS(xr,"feComponentTransfer");t.append(n),Cn(fl,this,Sl).call(this,n,"feFuncA",e)}function kl(e){return _n(fl,this,ml).style.color=e,Lr(getComputedStyle(_n(fl,this,ml)).getPropertyValue("color"))}class Al{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){Wi("Abstract method `_fetch` called.")}}class El extends Al{async _fetch(e){const t=await Sr(e,"arraybuffer");return new Uint8Array(t)}}if(Wn){var jl=Promise.withResolvers(),Tl=null;const e=async()=>{const e=await import("fs"),t=await import("http"),n=await import("https"),i=await import("url");return new Map(Object.entries({fs:e,http:t,https:n,url:i,canvas:undefined,path2d:undefined}))};e().then(e=>{Tl=e,jl.resolve()},e=>{Bi("loadPackages: ".concat(e)),Tl=new Map,jl.resolve()})}class Ol{static get promise(){return jl.promise}static get(e){var t;return null===(t=Tl)||void 0===t?void 0:t.get(e)}}async function Ml(e){const t=Ol.get("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}const Pl="Fill",Nl="Stroke",$l="Shading";function Dl(e,t){if(!t)return;const n=t[2]-t[0],i=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],n,i),e.clip(r)}class Ll{getPattern(){Wi("Abstract method `getPattern` called.")}}class Il extends Ll{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let r;if(i===Nl||i===Pl){const s=t.current.getClippedPathBoundingBox(i,Ir(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=rr.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),Dl(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),r=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else Dl(e,this._bbox),r=this._createGradient(e);return r}}function Fl(e,t,n,i,r,s,a,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=a,a=h),l[i+1]>l[r+1]&&(h=i,i=r,r=h,h=a,a=o,o=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=a,a=h);const f=(l[n]+t.offsetX)*t.scaleX,p=(l[n+1]+t.offsetY)*t.scaleY,g=(l[i]+t.offsetX)*t.scaleX,m=(l[i+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,y=(l[r+1]+t.offsetY)*t.scaleY;if(p>=y)return;const b=c[s],x=c[s+1],w=c[s+2],S=c[a],C=c[a+1],_=c[a+2],k=c[o],A=c[o+1],E=c[o+2],j=Math.round(p),T=Math.round(y);let O,M,P,N,$,D,L,I;for(let F=j;F<=T;F++){if(F<m){const e=F<p?0:(p-F)/(p-m);O=f-(f-g)*e,M=b-(b-S)*e,P=x-(x-C)*e,N=w-(w-_)*e}else{let e;e=F>y?1:m===y?0:(m-F)/(m-y),O=g-(g-v)*e,M=S-(S-k)*e,P=C-(C-A)*e,N=_-(_-E)*e}let e;e=F<p?0:F>y?1:(p-F)/(p-y),$=f-(f-v)*e,D=b-(b-k)*e,L=x-(x-A)*e,I=w-(w-E)*e;const t=Math.round(Math.min(O,$)),n=Math.round(Math.max(O,$));let i=u*F+4*t;for(let r=t;r<=n;r++)e=(O-r)/(O-$),e<0?e=0:e>1&&(e=1),d[i++]=M-(M-D)*e|0,d[i++]=P-(P-L)*e|0,d[i++]=N-(N-I)*e|0,d[i++]=255}}function Rl(e,t,n){const i=t.coords,r=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(i.length/o)-1,c=o-1;for(s=0;s<l;s++){let t=s*o;for(let s=0;s<c;s++,t++)Fl(e,n,i[t],i[t+1],i[t+o],r[t],r[t+1],r[t+o]),Fl(e,n,i[t+o+1],i[t+1],i[t+o],r[t+o+1],r[t+1],r[t+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Fl(e,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class Bl extends Ll{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-i,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=s/o,d=a/l,u={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/d},h=o+4,f=l+4,p=n.getCanvas("mesh",h,f),g=p.context,m=g.createImageData(o,l);if(t){const e=m.data;for(let n=0,i=e.length;n<i;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)Rl(m,v,u);g.putImageData(m,2,2);return{canvas:p.canvas,offsetX:i-2*c,offsetY:r-2*d,scaleX:c,scaleY:d}}getPattern(e,t,n,i){let r;if(Dl(e,this._bbox),i===$l)r=rr.singularValueDecompose2dScale(Ir(e));else if(r=rr.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=rr.singularValueDecompose2dScale(this.matrix);r=[r[0]*e[0],r[1]*e[1]]}const s=this._createMeshCanvas(r,i===$l?null:this._background,t.cachedCanvases);return i!==$l&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class Wl extends Ll{getPattern(){return"hotpink"}}const zl=1,Hl=2;class Ul{constructor(e,t,n,i,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:i,tilingType:r,color:s,canvasGraphicsFactory:a}=this;let{xstep:o,ystep:l}=this;o=Math.abs(o),l=Math.abs(l),Ri("TilingType: "+r);const c=t[0],d=t[1],u=t[2],h=t[3],f=u-c,p=h-d,g=rr.singularValueDecompose2dScale(this.matrix),m=rr.singularValueDecompose2dScale(this.baseTransform),v=g[0]*m[0],y=g[1]*m[1];let b=f,x=p,w=!1,S=!1;const C=Math.ceil(o*v),_=Math.ceil(l*y);C>=Math.ceil(f*v)?b=o:w=!0,_>=Math.ceil(p*y)?x=l:S=!0;const k=this.getSizeAndScale(b,this.ctx.canvas.width,v),A=this.getSizeAndScale(x,this.ctx.canvas.height,y),E=e.cachedCanvases.getCanvas("pattern",k.size,A.size),j=E.context,T=a.createCanvasGraphics(j);if(T.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(T,i,s),j.translate(-k.scale*c,-A.scale*d),T.transform(k.scale,0,0,A.scale,0,0),j.save(),this.clipBbox(T,c,d,u,h),T.baseTransform=Ir(T.ctx),T.executeOperatorList(n),T.endDrawing(),j.restore(),w||S){const t=E.canvas;w&&(b=o),S&&(x=l);const n=this.getSizeAndScale(b,this.ctx.canvas.width,v),i=this.getSizeAndScale(x,this.ctx.canvas.height,y),r=n.size,s=i.size,a=e.cachedCanvases.getCanvas("pattern-workaround",r,s),u=a.context,h=w?Math.floor(f/o):0,g=S?Math.floor(p/l):0;for(let e=0;e<=h;e++)for(let n=0;n<=g;n++)u.drawImage(t,r*e,s*n,r,s,0,0,r,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:i.scale,offsetX:c,offsetY:d}}return{canvas:E.canvas,scaleX:k.scale,scaleY:A.scale,offsetX:c,offsetY:d}}getSizeAndScale(e,t,n){const i=Math.max(Ul.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*n);return r>=i?r=i:n=r/e,{scale:n,size:r}}clipBbox(e,t,n,i,r){const s=i-t,a=r-n;e.ctx.rect(t,n,s,a),e.current.updateRectMinMax(Ir(e.ctx),[t,n,i,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case zl:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,r.fillColor=e.fillStyle,r.strokeColor=e.strokeStyle;break;case Hl:const s=rr.makeHexColor(n[0],n[1],n[2]);i.fillStyle=s,i.strokeStyle=s,r.fillColor=s,r.strokeColor=s;break;default:throw new Qi("Unsupported paint type: ".concat(t))}}getPattern(e,t,n,i){let r=n;i!==$l&&(r=rr.transform(r,t.baseTransform),this.matrix&&(r=rr.transform(r,this.matrix)));const s=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(s.offsetX,s.offsetY),a=a.scale(1/s.scaleX,1/s.scaleY);const o=e.createPattern(s.canvas,"repeat");return o.setTransform(a),o}}function Gl(e){let{src:t,srcPos:n=0,dest:i,width:r,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=nr.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=r>>3,h=7&r,f=t.length;i=new Uint32Array(i.buffer);let p=0;for(let g=0;g<s;g++){for(const r=n+u;n<r;n++){const e=n<f?t[n]:255;i[p++]=128&e?d:c,i[p++]=64&e?d:c,i[p++]=32&e?d:c,i[p++]=16&e?d:c,i[p++]=8&e?d:c,i[p++]=4&e?d:c,i[p++]=2&e?d:c,i[p++]=1&e?d:c}if(0===h)continue;const e=n<f?t[n++]:255;for(let t=0;t<h;t++)i[p++]=e&1<<7-t?d:c}return{srcPos:n,destPos:p}}o(Ul,"MAX_PATTERN_SIZE",3e3);const Vl=16;class ql{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Xl(e,t,n,i,r,s,a,o,l,c){const[d,u,h,f,p,g]=Ir(e);if(0===u&&0===h){const m=a*d+p,v=Math.round(m),y=o*f+g,b=Math.round(y),x=(a+l)*d+p,w=Math.abs(Math.round(x)-v)||1,S=(o+c)*f+g,C=Math.abs(Math.round(S)-b)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(f),v,b),e.drawImage(t,n,i,r,s,0,0,w,C),e.setTransform(d,u,h,f,p,g),[w,C]}if(0===d&&0===f){const m=o*h+p,v=Math.round(m),y=a*u+g,b=Math.round(y),x=(o+c)*h+p,w=Math.abs(Math.round(x)-v)||1,S=(a+l)*u+g,C=Math.abs(Math.round(S)-b)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,b),e.drawImage(t,n,i,r,s,0,0,C,w),e.setTransform(d,u,h,f,p,g),[C,w]}e.drawImage(t,n,i,r,s,a,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,f)*c]}class Yl{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=zn,this.textMatrixScale=1,this.fontMatrix=Hn,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=ii,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=rr.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=rr.applyTransform(t,e),i=rr.applyTransform(t.slice(2),e),r=rr.applyTransform([t[0],t[3]],e),s=rr.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],i[0],r[0],s[0]),this.minY=Math.min(this.minY,n[1],i[1],r[1],s[1]),this.maxX=Math.max(this.maxX,n[0],i[0],r[0],s[0]),this.maxY=Math.max(this.maxY,n[1],i[1],r[1],s[1])}updateScalingPathMinMax(e,t){rr.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,r,s,a,o,l,c){const d=rr.bezierBoundingBox(t,n,i,r,s,a,o,l,c);c||this.updateRectMinMax(e,d)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Nl){t||Wi("Stroke bounding box must include transform.");const e=rr.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,r=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const e=rr.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return rr.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Kl(e,t){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,r=n%Vl,s=(n-r)/Vl,a=0===r?s:s+1,o=e.createImageData(i,Vl);let l,c=0;const d=t.data,u=o.data;let h,f,p,g;if(t.kind===ci.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),g=n.length,m=i+7>>3,v=4294967295,y=nr.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(p=h<s?Vl:r,l=0,f=0;f<p;f++){const e=t-c;let r=0;const s=e>m?i:8*e-7,a=-8&s;let o=0,u=0;for(;r<a;r+=8)u=d[c++],n[l++]=128&u?v:y,n[l++]=64&u?v:y,n[l++]=32&u?v:y,n[l++]=16&u?v:y,n[l++]=8&u?v:y,n[l++]=4&u?v:y,n[l++]=2&u?v:y,n[l++]=1&u?v:y;for(;r<s;r++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:y,o>>=1}for(;l<g;)n[l++]=0;e.putImageData(o,0,h*Vl)}}else if(t.kind===ci.RGBA_32BPP){for(f=0,g=i*Vl*4,h=0;h<s;h++)u.set(d.subarray(c,c+g)),c+=g,e.putImageData(o,0,f),f+=Vl;h<a&&(g=i*r*4,u.set(d.subarray(c,c+g)),e.putImageData(o,0,f))}else{if(t.kind!==ci.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(p=Vl,g=i*p,h=0;h<a;h++){for(h>=s&&(p=r,g=i*p),l=0,f=g;f--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*Vl)}}}function Ql(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,i=t.width,r=n%Vl,s=(n-r)/Vl,a=0===r?s:s+1,o=e.createImageData(i,Vl);let l=0;const c=t.data,d=o.data;for(let u=0;u<a;u++){const t=u<s?Vl:r;({srcPos:l}=Gl({src:c,srcPos:l,dest:d,width:i,height:t,nonBlackColor:0})),e.putImageData(o,0,u*Vl)}}function Jl(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==e[i]&&(t[i]=e[i]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function Zl(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!Wn){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function ec(e,t){if(t)return!0;const n=rr.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*wr.PDF_TO_CSS_UNITS);return n[0]<=i&&n[1]<=i}const tc=["butt","round","square"],nc=["miter","round","bevel"],ic={},rc={};var sc=new WeakSet;class ac{constructor(e,t,n,i,r,s,a,o){let{optionalContentConfig:l,markedContentStack:c=null}=s;wn(this,sc),this.ctx=e,this.current=new Yl(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new ql(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:i=!1,background:r=null}=e;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const e=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Ir(this.compositeCtx))}this.ctx.save(),Zl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Ir(this.ctx)}executeOperatorList(e,t,n,i){const r=e.argsArray,s=e.fnArray;let a=t||0;const o=r.length;if(o===a)return a;const l=o-a>10&&"function"===typeof n,c=l?Date.now()+15:0;let d=0;const u=this.commonObjs,h=this.objs;let f;for(;;){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,n),a;if(f=s[a],f!==$i.dependency)this[f].apply(this,r[a]);else for(const e of r[a]){const t=e.startsWith("g_")?u:h;if(!t.has(e))return t.get(e,n),a}if(a++,a===o)return a;if(l&&++d>10){if(Date.now()>c)return n(),a;d=0}}}endDrawing(){Cn(sc,this,oc).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),Cn(sc,this,lc).call(this)}_scaleImage(e,t){var n,i;const r=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,s=null!==(i=e.height)&&void 0!==i?i:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=r,u=s,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),a=this.cachedCanvases.getCanvas(h,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=a.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:i}=e,r=this.current.fillColor,s=this.current.patternFill,a=Ir(t);let o,l,c,d;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;l=JSON.stringify(s?a:[a.slice(0,4),r]),o=this._cachedBitmapsMap.get(t),o||(o=new Map,this._cachedBitmapsMap.set(t,o));const n=o.get(l);if(n&&!s){return{canvas:n,offsetX:Math.round(Math.min(a[0],a[2])+a[4]),offsetY:Math.round(Math.min(a[1],a[3])+a[5])}}c=n}c||(d=this.cachedCanvases.getCanvas("maskCanvas",n,i),Ql(d.context,e));let u=rr.transform(a,[1/n,0,0,-1/i,0,0]);u=rr.transform(u,[1,0,0,1,0,-i]);const[h,f,p,g]=rr.getAxialAlignedBoundingBox([0,0,n,i],u),m=Math.round(p-h)||1,v=Math.round(g-f)||1,y=this.cachedCanvases.getCanvas("fillCanvas",m,v),b=y.context,x=h,w=f;b.translate(-x,-w),b.transform(...u),c||(c=this._scaleImage(d.canvas,Fr(b)),c=c.img,o&&s&&o.set(l,c)),b.imageSmoothingEnabled=ec(Ir(b),e.interpolate),Xl(b,c,0,0,c.width,c.height,0,0,n,i),b.globalCompositeOperation="source-in";const S=rr.transform(Fr(b),[1,0,0,1,-x,-w]);return b.fillStyle=s?r.getPattern(t,this,S,Pl):r,b.fillRect(0,0,n,i),o&&!s&&(this.cachedCanvases.delete("fillCanvas"),o.set(l,y.canvas)),{canvas:y.canvas,offsetX:Math.round(x),offsetY:Math.round(w)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=tc[e]}setLineJoin(e){this.ctx.lineJoin=nc[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=i.context;const r=this.ctx;r.setTransform(...Ir(this.suspendedCtx)),Jl(this.suspendedCtx,r),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,i,r,s,a){t.transform(e,n,i,r,s,a),this.__originalTransform(e,n,i,r,s,a)},e.setTransform=function(e,n,i,r,s,a){t.setTransform(e,n,i,r,s,a),this.__originalSetTransform(e,n,i,r,s,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,i,r,s,a){t.bezierCurveTo(e,n,i,r,s,a),this.__originalBezierCurveTo(e,n,i,r,s,a)},e.rect=function(e,n,i,r){t.rect(e,n,i,r),this.__originalRect(e,n,i,r)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const r=i[0],s=i[1],a=i[2]-r,o=i[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,r,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,r,s,a,o,l,c,d){let u=e.canvas,h=o-c,f=l-d;if(s){const t=rr.makeHexColor(...s);if(h<0||f<0||h+n>u.width||f+i>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,i),r=e.context;r.drawImage(u,-h,-f),r.globalCompositeOperation="destination-atop",r.fillStyle=t,r.fillRect(0,0,n,i),r.globalCompositeOperation="source-over",u=e.canvas,h=f=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const r=new Path2D;r.rect(h,f,n,i),e.clip(r),e.globalCompositeOperation="destination-atop",e.fillStyle=t,e.fillRect(h,f,n,i),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===r&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===r&&(t.filter=this.filterFactory.addLuminosityFilter(a));const p=new Path2D;p.rect(o,l,n,i),t.clip(p),t.globalCompositeOperation="destination-in",t.drawImage(u,h,f,n,i,o,l,n,i),t.restore()}save(){this.inSMaskMode?(Jl(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Jl(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,i,r,s){this.ctx.transform(e,t,n,i,r,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const i=this.ctx,r=this.current;let s,a,o=r.x,l=r.y;const c=Ir(i),d=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],u=d?n.slice(0):null;for(let h=0,f=0,p=e.length;h<p;h++)switch(0|e[h]){case $i.rectangle:o=t[f++],l=t[f++];const e=t[f++],n=t[f++],h=o+e,p=l+n;i.moveTo(o,l),0===e||0===n?i.lineTo(h,p):(i.lineTo(h,l),i.lineTo(h,p),i.lineTo(o,p)),d||r.updateRectMinMax(c,[o,l,h,p]),i.closePath();break;case $i.moveTo:o=t[f++],l=t[f++],i.moveTo(o,l),d||r.updatePathMinMax(c,o,l);break;case $i.lineTo:o=t[f++],l=t[f++],i.lineTo(o,l),d||r.updatePathMinMax(c,o,l);break;case $i.curveTo:s=o,a=l,o=t[f+4],l=t[f+5],i.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],o,l),r.updateCurvePathMinMax(c,s,a,t[f],t[f+1],t[f+2],t[f+3],o,l,u),f+=6;break;case $i.curveTo2:s=o,a=l,i.bezierCurveTo(o,l,t[f],t[f+1],t[f+2],t[f+3]),r.updateCurvePathMinMax(c,s,a,o,l,t[f],t[f+1],t[f+2],t[f+3],u),o=t[f+2],l=t[f+3],f+=4;break;case $i.curveTo3:s=o,a=l,o=t[f+2],l=t[f+3],i.bezierCurveTo(t[f],t[f+1],o,l,o,l),r.updateCurvePathMinMax(c,s,a,t[f],t[f+1],o,l,o,l,u),f+=4;break;case $i.closePath:i.closePath()}d&&r.updateScalingPathMinMax(c,u),r.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof n&&null!==n&&void 0!==n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,Fr(t),Nl),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let i=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,Fr(t),Pl),i=!0);const r=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==r&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(r)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ic}eoClip(){this.pendingClip=rc}beginText(){this.current.textMatrix=zn,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error("Can't find font for ".concat(e));if(r.fontMatrix=i.fontMatrix||Hn,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||Bi("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=(null===(n=i.systemFontInfo)||void 0===n?void 0:n.css)||'"'.concat(s,'", ').concat(i.fallbackName);let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let c=t;t<16?c=16:t>100&&(c=100),this.current.fontSizeScale=t/c,this.ctx.font="".concat(l," ").concat(o," ").concat(c,"px ").concat(a)}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,i,r,s){this.current.textMatrix=[e,t,n,i,r,s],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,i){const r=this.ctx,s=this.current,a=s.font,o=s.textRenderingMode,l=s.fontSize/s.fontSizeScale,c=o&oi,d=!!(o&li),u=s.patternFill&&!a.missingFile;let h;if((a.disableFontFace||d||u)&&(h=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||u?(r.save(),r.translate(t,n),r.beginPath(),h(r,l),i&&r.setTransform(...i),c!==ii&&c!==si||r.fill(),c!==ri&&c!==si||r.stroke(),r.restore()):(c!==ii&&c!==si||r.fillText(e,t,n),c!==ri&&c!==si||r.strokeText(e,t,n)),d){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ir(r),x:t,y:n,fontSize:l,addToPath:h})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return Ui(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const i=t.fontSize;if(0===i)return;const r=this.ctx,s=t.fontSizeScale,a=t.charSpacing,o=t.wordSpacing,l=t.fontDirection,c=t.textHScale*l,d=e.length,u=n.vertical,h=u?1:-1,f=n.defaultVMetrics,p=i*t.fontMatrix[0],g=t.textRenderingMode===ii&&!n.disableFontFace&&!t.patternFill;let m;if(r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),l>0?r.scale(c,-1):r.scale(c,1),t.patternFill){r.save();const e=t.fillColor.getPattern(r,this,Fr(r),Pl);m=Ir(r),r.restore(),r.fillStyle=e}let v=t.lineWidth;const y=t.textMatrixScale;if(0===y||0===v){const e=t.textRenderingMode&oi;e!==ri&&e!==si||(v=this.getSinglePixelWidth())}else v/=y;if(1!==s&&(r.scale(s,s),v/=s),r.lineWidth=v,n.isInvalidPDFjsFont){const n=[];let i=0;for(const t of e)n.push(t.unicode),i+=t.width;return r.fillText(n.join(""),0,0),t.x+=i*p*c,r.restore(),void this.compose()}let b,x=0;for(b=0;b<d;++b){const t=e[b];if("number"===typeof t){x+=h*t*i/1e3;continue}let c=!1;const d=(t.isSpace?o:0)+a,v=t.fontChar,y=t.accent;let w,S,C=t.width;if(u){const e=t.vmetric||f,n=-(t.vmetric?e[1]:.5*C)*p,i=e[2]*p;C=e?-e[0]:C,w=n/s,S=(x+i)/s}else w=x/s,S=0;if(n.remeasure&&C>0){const e=1e3*r.measureText(v).width/i*s;if(C<e&&this.isFontSubpixelAAEnabled){const t=C/e;c=!0,r.save(),r.scale(t,1),w/=t}else C!==e&&(w+=(C-e)/2e3*i/s)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(g&&!y)r.fillText(v,w,S);else if(this.paintChar(v,w,S,m),y){const e=w+i*y.offset.x/s,t=S-i*y.offset.y/s;this.paintChar(y.fontChar,e,t,m)}x+=u?C*p-d*l:C*p+d*l,c&&r.restore()}u?t.y-=x:t.x+=x*c,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,r=n.fontSize,s=n.fontDirection,a=i.vertical?1:-1,o=n.charSpacing,l=n.wordSpacing,c=n.textHScale*s,d=n.fontMatrix||Hn,u=e.length;let h,f,p,g;if(!(n.textRenderingMode===ai)&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,s),h=0;h<u;++h){if(f=e[h],"number"===typeof f){g=a*f*r/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const s=(f.isSpace?l:0)+o,u=i.charProcOperatorList[f.operatorListId];if(!u){Bi('Type3 character "'.concat(f.operatorListId,'" is not available.'));continue}this.contentVisible&&(this.processingType3=f,this.save(),t.scale(r,r),t.transform(...d),this.executeOperatorList(u),this.restore());p=rr.applyTransform([f.width,0],d)[0]*r+s,t.translate(p,0),n.x+=p*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,i,r,s){this.ctx.rect(n,i,r-n,s-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],i=this.baseTransform||Ir(this.ctx),r={createCanvasGraphics:e=>new ac(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Ul(e,n,this.ctx,r,i)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=rr.makeHexColor(e,t,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=rr.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=function(e){switch(e[0]){case"RadialAxial":return new Il(e);case"Mesh":return new Bl(e);case"Dummy":return new Wl}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,Fr(t),$l);const i=Fr(t);if(i){const{width:e,height:n}=t.canvas,[r,s,a,o]=rr.getAxialAlignedBoundingBox([0,0,e,n],i);this.ctx.fillRect(r,s,a-r,o-s)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Wi("Should not call beginInlineImage")}beginImageData(){Wi("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ir(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax(Ir(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||Ri("TODO: Support non-isolated groups."),e.knockout&&Bi("Knockout groups not supported.");const n=Ir(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=rr.getAxialAlignedBoundingBox(e.bbox,Ir(t));const r=[0,0,t.canvas.width,t.canvas.height];i=rr.intersect(i,r)||[0,0,0,0];const s=Math.floor(i[0]),a=Math.floor(i[1]),o=Math.max(Math.ceil(i[2])-s,1),l=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,o,l]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(c,o,l),u=d.context;u.translate(-s,-a),u.transform(...n),e.smask?this.smaskStack.push({canvas:d.canvas,context:u,offsetX:s,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,a),t.save()),Jl(t,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=Ir(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=rr.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,i,r){if(Cn(sc,this,oc).call(this),Zl(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const i=t[2]-t[0],s=t[3]-t[1];if(r&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=i,t[3]=s;const[r,a]=rr.singularValueDecompose2dScale(Ir(this.ctx)),{viewportScale:o}=this,l=Math.ceil(i*this.outputScaleX*o),c=Math.ceil(s*this.outputScaleY*o);this.annotationCanvas=this.canvasFactory.create(l,c);const{canvas:d,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.save(),this.ctx.setTransform(r,0,0,-a,0,s*a),Zl(this.ctx)}else Zl(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],i,s),this.ctx.clip(),this.ctx.beginPath()}this.current=new Yl(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Cn(sc,this,lc).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let s,a,o,l=new Uint8Array(r*(n+1));const c=t+7&-8;let d=new Uint8Array(c*n),u=0;for(const g of e.data){let e=128;for(;e>0;)d[u++]=g&e?0:255,e>>=1}let h=0;for(u=0,0!==d[u]&&(l[0]=1,++h),a=1;a<t;a++)d[u]!==d[u+1]&&(l[a]=d[u]?2:1,++h),u++;for(0!==d[u]&&(l[a]=2,++h),s=1;s<n;s++){u=s*c,o=s*r,d[u-c]!==d[u]&&(l[o]=d[u]?1:8,++h);let e=(d[u]?4:0)+(d[u-c]?8:0);for(a=1;a<t;a++)e=(e>>2)+(d[u+1]?4:0)+(d[u-c+1]?8:0),i[e]&&(l[o+a]=i[e],++h),u++;if(d[u-c]!==d[u]&&(l[o+a]=d[u]?2:4,++h),h>1e3)return null}for(u=c*(n-1),o=s*r,0!==d[u]&&(l[o]=8,++h),a=1;a<t;a++)d[u]!==d[u+1]&&(l[o+a]=d[u]?4:8,++h),u++;if(0!==d[u]&&(l[o+a]=4,++h),h>1e3)return null;const f=new Int32Array([0,r,-1,0,-r,0,0,0,1]),p=new Path2D;for(s=0;h&&s<=n;s++){let e=s*r;const n=e+t;for(;e<n&&!l[e];)e++;if(e===n)continue;p.moveTo(e%r,s);const i=e;let a=l[e];do{const t=f[a];do{e+=t}while(!l[e]);const n=l[e];5!==n&&10!==n?(a=n,l[e]=0):(a=n&51*a>>4,l[e]&=a>>2|a<<2),p.lineTo(e%r,e/r|0),l[e]||--h}while(i!==e);--s}return d=null,l=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(p),e.beginPath(),e.restore()}}(e)),i.compiled))return void i.compiled(n);const r=this._createMaskCanvas(e),s=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(s,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const o=Ir(a);a.transform(t,n,i,r,0,0);const l=this._createMaskCanvas(e);a.setTransform(1,0,0,1,l.offsetX-o[4],l.offsetY-o[5]);for(let c=0,d=s.length;c<d;c+=2){const e=rr.transform(o,[t,n,i,r,s[c],s[c+1]]),[d,u]=rr.applyTransform([0,0],e);a.drawImage(l.canvas,d,u)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const r of e){const{data:e,width:s,height:a,transform:o}=r,l=this.cachedCanvases.getCanvas("maskCanvas",s,a),c=l.context;c.save();Ql(c,this.getObject(e,r)),c.globalCompositeOperation="source-in",c.fillStyle=i?n.getPattern(c,this,Fr(t),Pl):n,c.fillRect(0,0,s,a),c.restore(),t.save(),t.transform(...o),t.scale(1,-1),Xl(t,l.canvas,0,0,s,a,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):Bi("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r)return void Bi("Dependent image isn't ready yet");const s=r.width,a=r.height,o=[];for(let l=0,c=i.length;l<c;l+=2)o.push({transform:[t,0,0,n,i[l],i[l+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(r,o)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:i}=e,r=this.cachedCanvases.getCanvas("inlineImage",n,i),s=r.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,i=this.ctx;if(this.save(),!Wn){const{filter:e}=i;"none"!==e&&""!==e&&(i.filter="none")}let r;if(i.scale(1/t,-1/n),e.bitmap)r=this.applyTransferMapsToBitmap(e);else if("function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)r=e;else{const i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Kl(i,e),r=this.applyTransferMapsToCanvas(i)}const s=this._scaleImage(r,Fr(i));i.imageSmoothingEnabled=ec(Ir(i),e.interpolate),Xl(i,s.img,0,0,s.paintWidth,s.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const t=e.width,n=e.height,r=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Kl(r,e),i=this.applyTransferMapsToCanvas(r)}for(const r of t)n.save(),n.transform(...r.transform),n.scale(1,-1),Xl(n,i,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===rc?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ir(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:r}=this.ctx.getTransform();let s,a;if(0===n&&0===i){const n=Math.abs(t),i=Math.abs(r);if(n===i)if(0===e)s=a=1/n;else{const t=n*e;s=a=t<1?1/t:1}else if(0===e)s=1/n,a=1/i;else{const t=n*e,r=i*e;s=t<1?1/t:1,a=r<1?1/r:1}}else{const o=Math.abs(t*r-n*i),l=Math.hypot(t,n),c=Math.hypot(i,r);if(0===e)s=c/o,a=l/o;else{const t=e*o;s=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(t.lineWidth=n||1,1===i&&1===r)return void t.stroke();const s=t.getLineDash();if(e&&t.save(),t.scale(i,r),s.length>0){const e=Math.max(i,r);t.setLineDash(s.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function oc(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function lc(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}for(const n in $i)void 0!==ac.prototype[n]&&(ac.prototype[$i[n]]=ac.prototype[n]);class cc{static get workerPort(){return Cn(cc,this,dc)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");dc._=Cn(cc,this,e)}static get workerSrc(){return Cn(cc,this,uc)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");uc._=Cn(cc,this,e)}}var dc={_:null},uc={_:""};const hc=1,fc=2,pc=1,gc=2,mc=3,vc=4,yc=5,bc=6,xc=7,wc=8;function Sc(e){switch(e instanceof Error||"object"===typeof e&&null!==e||Wi('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new Ji(e.message);case"MissingPDFException":return new Yi(e.message);case"PasswordException":return new Vi(e.message,e.code);case"UnexpectedResponseException":return new Ki(e.message,e.status);case"UnknownErrorException":return new qi(e.message,e.details);default:return new qi(e.message,e.toString())}}var Cc=new WeakMap,_c=new WeakSet;class kc{constructor(e,t,n){wn(this,_c),Sn(this,Cc,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",Cn(_c,this,Ac).bind(this),{signal:kn(Cc,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(s){r.reject(s)}return r.promise}sendWithStream(e,t,n,i){const r=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[r]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:e,streamId:r,data:t,desiredSize:n.desiredSize},i),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[r].pullCall=t,o.postMessage({sourceName:s,targetName:a,stream:bc,streamId:r,desiredSize:e.desiredSize}),t.promise},cancel:e=>{zi(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[r].cancelCall=t,this.streamControllers[r].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:pc,streamId:r,reason:Sc(e)}),t.promise}},n)}destroy(){var e;null===(e=kn(Cc,this))||void 0===e||e.abort(),An(Cc,this,null)}}function Ac(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void Cn(_c,this,jc).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===hc)n.resolve(t.data);else{if(t.callback!==fc)throw new Error("Unexpected callback case");n.reject(Sc(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,i=t.sourceName,r=this.comObj;return void new Promise(function(e){e(n(t.data))}).then(function(n){r.postMessage({sourceName:e,targetName:i,callback:hc,callbackId:t.callbackId,data:n})},function(n){r.postMessage({sourceName:e,targetName:i,callback:fc,callbackId:t.callbackId,reason:Sc(n)})})}t.streamId?Cn(_c,this,Ec).call(this,t):n(t.data)}function Ec(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this,a=this.actionHandler[e.action],o={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:i,stream:vc,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:mc,streamId:t}),delete s.streamSinks[t])},error(e){zi(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:i,stream:yc,streamId:t,reason:Sc(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,new Promise(function(t){t(a(e.data,o))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:wc,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:wc,streamId:t,reason:Sc(e)})})}function jc(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,r=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case wc:e.success?s.startCall.resolve():s.startCall.reject(Sc(e.reason));break;case xc:e.success?s.pullCall.resolve():s.pullCall.reject(Sc(e.reason));break;case bc:if(!a){r.postMessage({sourceName:n,targetName:i,stream:xc,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,new Promise(function(e){var t;e(null===(t=a.onPull)||void 0===t?void 0:t.call(a))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:xc,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:xc,streamId:t,reason:Sc(e)})});break;case vc:if(zi(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case mc:if(zi(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),Cn(_c,this,Tc).call(this,s,t);break;case yc:zi(s,"error should have stream controller"),s.controller.error(Sc(e.reason)),Cn(_c,this,Tc).call(this,s,t);break;case gc:e.success?s.cancelCall.resolve():s.cancelCall.reject(Sc(e.reason)),Cn(_c,this,Tc).call(this,s,t);break;case pc:if(!a)break;new Promise(function(t){var n;t(null===(n=a.onCancel)||void 0===n?void 0:n.call(a,Sc(e.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:i,stream:gc,streamId:t,success:!0})},function(e){r.postMessage({sourceName:n,targetName:i,stream:gc,streamId:t,reason:Sc(e)})}),a.sinkCapability.reject(Sc(e.reason)),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function Tc(e,t){var n,i,r;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(i=e.pullCall)||void 0===i?void 0:i.promise,null===(r=e.cancelCall)||void 0===r?void 0:r.promise]),delete this.streamControllers[t]}var Oc=new WeakMap,Mc=new WeakMap;class Pc{constructor(e){let{parsedData:t,rawData:n}=e;Sn(this,Oc,void 0),Sn(this,Mc,void 0),An(Oc,this,t),An(Mc,this,n)}getRaw(){return kn(Mc,this)}get(e){var t;return null!==(t=kn(Oc,this).get(e))&&void 0!==t?t:null}getAll(){return tr(kn(Oc,this))}has(e){return kn(Oc,this).has(e)}}const Nc=Symbol("INTERNAL");var $c=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,Ic=new WeakMap;class Fc{constructor(e,t){let{name:n,intent:i,usage:r,rbGroups:s}=t;Sn(this,$c,!1),Sn(this,Dc,!1),Sn(this,Lc,!1),Sn(this,Ic,!0),An($c,this,!!(e&Vn)),An(Dc,this,!!(e&qn)),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(kn(Lc,this))return kn(Ic,this);if(!kn(Ic,this))return!1;const{print:e,view:t}=this.usage;return kn($c,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!kn(Dc,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==Nc&&Wi("Internal method `_setVisible` called."),An(Lc,this,n),An(Ic,this,t)}}var Rc=new WeakMap,Bc=new WeakMap,Wc=new WeakMap,zc=new WeakMap,Hc=new WeakSet;class Uc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vn;if(wn(this,Hc),Sn(this,Rc,null),Sn(this,Bc,new Map),Sn(this,Wc,null),Sn(this,zc,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,An(zc,this,e.order);for(const n of e.groups)kn(Bc,this).set(n.id,new Fc(t,n));if("OFF"===e.baseState)for(const e of kn(Bc,this).values())e._setVisible(Nc,!1);for(const t of e.on)kn(Bc,this).get(t)._setVisible(Nc,!0);for(const t of e.off)kn(Bc,this).get(t)._setVisible(Nc,!1);An(Wc,this,this.getHash())}}isVisible(e){if(0===kn(Bc,this).size)return!0;if(!e)return Ri("Optional content group not defined."),!0;if("OCG"===e.type)return kn(Bc,this).has(e.id)?kn(Bc,this).get(e.id).visible:(Bi("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return Cn(Hc,this,Gc).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!kn(Bc,this).has(t))return Bi("Optional content group not found: ".concat(t)),!0;if(kn(Bc,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!kn(Bc,this).has(t))return Bi("Optional content group not found: ".concat(t)),!0;if(!kn(Bc,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!kn(Bc,this).has(t))return Bi("Optional content group not found: ".concat(t)),!0;if(!kn(Bc,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!kn(Bc,this).has(t))return Bi("Optional content group not found: ".concat(t)),!0;if(kn(Bc,this).get(t).visible)return!1}return!0}return Bi("Unknown optional content policy ".concat(e.policy,".")),!0}return Bi("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=kn(Bc,this).get(e);if(i){if(n&&t&&i.rbGroups.length)for(const t of i.rbGroups)for(const n of t){var r;if(n!==e)null===(r=kn(Bc,this).get(n))||void 0===r||r._setVisible(Nc,!1,!0)}i._setVisible(Nc,!!t,!0),An(Rc,this,null)}else Bi("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:i}=e;for(const r of n){switch(r){case"ON":case"OFF":case"Toggle":t=r;continue}const e=kn(Bc,this).get(r);if(e)switch(t){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!e.visible,i)}}An(Rc,this,null)}get hasInitialVisibility(){return null===kn(Wc,this)||this.getHash()===kn(Wc,this)}getOrder(){return kn(Bc,this).size?kn(zc,this)?kn(zc,this).slice():[...kn(Bc,this).keys()]:null}getGroups(){return kn(Bc,this).size>0?tr(kn(Bc,this)):null}getGroup(e){return kn(Bc,this).get(e)||null}getHash(){if(null!==kn(Rc,this))return kn(Rc,this);const e=new zo;for(const[t,n]of kn(Bc,this))e.update("".concat(t,":").concat(n.visible));return An(Rc,this,e.hexdigest())}}function Gc(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let r;if(Array.isArray(t))r=Cn(Hc,this,Gc).call(this,t);else{if(!kn(Bc,this).has(t))return Bi("Optional content group not found: ".concat(t)),!0;r=kn(Bc,this).get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}class Vc{constructor(e,t){let{disableRange:n=!1,disableStream:i=!1}=t;zi(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!n,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{zi(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,i,r;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(i=this._fullRequestReader)||void 0===i||null===(r=i.onProgress)||void 0===r||r.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){zi(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new qc(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new Xc(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class qc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=Ar(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Xc{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Yc(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const i in t){const e=t[i];void 0!==e&&n.append(i,e)}return n}function Kc(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:i,disableRange:r}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*i)return s;if(r||!n)return s;if("bytes"!==t.get("Accept-Ranges"))return s;return"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function Qc(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),s(e)}if(n=function(e){const t=[];let n;const r=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=r.exec(e));){let[,e,i,r]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[i,r]}const s=[];for(let i=0;i<t.length&&i in t;++i){let[e,n]=t[i];n=a(n),e&&(n=unescape(n),0===i&&(n=o(n))),s.push(n)}return s.join("")}(e),n)return s(l(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),r=er(n);n=i.decode(r),t=!1}catch(i){}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,i){if("q"===n||"Q"===n)return i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),r(t,i);try{i=atob(i)}catch(s){}return r(t,i)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(Ar(e))return e}return null}function Jc(e,t){return 404===e||0===e&&t.startsWith("file:")?new Yi('Missing PDF "'+t+'".'):new Ki("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e)}function Zc(e){return 200===e||206===e}function ed(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function td(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(Bi("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class nd{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=Yc(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return zi(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new id(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new rd(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class id{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,ed(n,this._withCredentials,this._abortController)).then(t=>{if(!Zc(t.status))throw Jc(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:r,suggestedLength:s}=Kc({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=s||this._contentLength,this._filename=Qc(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ji("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:td(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class rd{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range","bytes=".concat(t,"-").concat(n-1));const s=i.url;fetch(s,ed(r,this._withCredentials,this._abortController)).then(e=>{if(!Zc(e.status))throw Jc(e.status,s);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:td(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class sd{constructor(e){let{url:t,httpHeaders:n,withCredentials:i}=e;this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Yc(this.isHttp,n),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const i={begin:e,end:t};for(const r in n)i[r]=n[r];return this.request(i)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,s]of this.headers)t.setRequestHeader(r,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),i.expectedStatus=206):i.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const i=this.pendingRequests[e];i&&(null===(n=i.onProgress)||void 0===n||n.call(i,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;var r;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void(null===(r=n.onError)||void 0===r||r.call(n,i.status));const s=i.status||200;var a;if(!(200===s&&206===n.expectedStatus)&&s!==n.expectedStatus)return void(null===(a=n.onError)||void 0===a||a.call(n,i.status));const o=function(e){const t=e.response;return"string"!==typeof t?t:er(t).buffer}(i);if(206===s){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:o})}else if(o)n.onDone({begin:0,chunk:o});else{var l;null===(l=n.onError)||void 0===l||l.call(n,i.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ad{constructor(e){this._source=e,this._manager=new sd(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return zi(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new od(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new ld(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class od{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]})),{allowRangeRequests:i,suggestedLength:r}=Kc({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=Qc(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Jc(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ld{constructor(e,t,n){this._manager=e;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Jc(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const cd=/^[a-z][a-z0-9\-+.]+:/i;function dd(e,t,n){if("http:"===e.protocol){return Ol.get("http").request(e,{headers:t},n)}return Ol.get("https").request(e,{headers:t},n)}class ud{constructor(e){this.source=e,this.url=function(e){if(cd.test(e))return new URL(e);const t=Ol.get("url");return new URL(t.pathToFileURL(e))}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.headers=Yc(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return zi(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new md(this):new pd(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new vd(this,e,t):new gd(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class hd{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ji("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fd{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class pd extends hd{constructor(e){super(e);const t=Object.fromEntries(e.headers);this._request=dd(this._url,t,t=>{if(404===t.statusCode){const e=new Yi('Missing PDF "'.concat(this._url,'".'));return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=new Headers(this._readableStream.headers),{allowRangeRequests:i,suggestedLength:r}=Kc({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=r||this._contentLength,this._filename=Qc(n)}),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class gd extends fd{constructor(e,t,n){super(e);const i=Object.fromEntries(e.headers);i.Range="bytes=".concat(t,"-").concat(n-1);this._request=dd(this._url,i,e=>{if(404===e.statusCode){const e=new Yi('Missing PDF "'.concat(this._url,'".'));return void(this._storedError=e)}this._setReadableStream(e)}),this._request.on("error",e=>{this._storedError=e}),this._request.end()}}class md extends hd{constructor(e){super(e);const t=Ol.get("fs");t.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new Yi('Missing PDF "'.concat(this._url,'".'))),this._storedError=e,this._headersCapability.reject(e)})}}class vd extends fd{constructor(e,t,n){super(e);const i=Ol.get("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}}const yd=30;var bd=new WeakMap,xd=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,_d=new WeakMap,kd=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,jd=new WeakMap,Td=new WeakMap,Od=new WeakMap,Md=new WeakMap,Pd=new WeakMap,Nd=new WeakMap,$d=new WeakMap,Dd=new WeakMap,Ld=new WeakMap,Id=new WeakSet;class Fd{constructor(e){var t;let{textContentSource:n,container:i,viewport:r}=e;if(wn(this,Id),Sn(this,bd,Promise.withResolvers()),Sn(this,xd,null),Sn(this,wd,!1),Sn(this,Sd,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),Sn(this,Cd,null),Sn(this,_d,null),Sn(this,kd,0),Sn(this,Ad,0),Sn(this,Ed,null),Sn(this,jd,null),Sn(this,Td,0),Sn(this,Od,0),Sn(this,Md,Object.create(null)),Sn(this,Pd,[]),Sn(this,Nd,null),Sn(this,$d,[]),Sn(this,Dd,new WeakMap),Sn(this,Ld,null),n instanceof ReadableStream)An(Nd,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');An(Nd,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}An(xd,this,An(jd,this,i)),An(Od,this,r.scale*(globalThis.devicePixelRatio||1)),An(Td,this,r.rotation),An(_d,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=r.rawDims;An(Ld,this,[1,0,0,-1,-o,l+a]),An(Ad,this,s),An(kd,this,a),Ud.call(Fd),Rr(i,r),kn(bd,this).promise.finally(()=>{Kd._.delete(this),An(_d,this,null),An(Md,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=nr.platform;return Ui(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{kn(Ed,this).read().then(t=>{var n;let{value:i,done:r}=t;r?kn(bd,this).resolve():(null!==(n=kn(Cd,this))&&void 0!==n||An(Cd,this,i.lang),Object.assign(kn(Md,this),i.styles),Cn(Id,this,Rd).call(this,i.items),e())},kn(bd,this).reject)};return An(Ed,this,kn(Nd,this).getReader()),Kd._.add(this),e(),kn(bd,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const i=t.scale*(globalThis.devicePixelRatio||1),r=t.rotation;if(r!==kn(Td,this)&&(null===n||void 0===n||n(),An(Td,this,r),Rr(kn(jd,this),{rotation:r})),i!==kn(Od,this)){null===n||void 0===n||n(),An(Od,this,i);const e={div:null,properties:null,ctx:zd.call(Fd,kn(Cd,this))};for(const t of kn($d,this))e.properties=kn(Dd,this).get(t),e.div=t,Cn(Id,this,Wd).call(this,e)}}cancel(){var e;const t=new Ji("TextLayer task cancelled.");null===(e=kn(Ed,this))||void 0===e||e.cancel(t).catch(()=>{}),An(Ed,this,null),kn(bd,this).reject(t)}get textDivs(){return kn($d,this)}get textContentItemsStr(){return kn(Pd,this)}static cleanup(){if(!(Cn(Fd,this,Kd)._.size>0)){Cn(Fd,this,Vd)._.clear();for(const{canvas:e}of Cn(Fd,this,qd)._.values())e.remove();Cn(Fd,this,qd)._.clear()}}}function Rd(e){var t,n;if(kn(wd,this))return;null!==(n=(t=kn(_d,this)).ctx)&&void 0!==n||(t.ctx=zd.call(Mn,kn(Cd,this)));const i=kn($d,this),r=kn(Pd,this);for(const s of e){if(i.length>1e5)return Bi("Ignoring additional textDivs for performance reasons."),void An(wd,this,!0);if(void 0!==s.str)r.push(s.str),Cn(Id,this,Bd).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=kn(xd,this);An(xd,this,document.createElement("span")),kn(xd,this).classList.add("markedContent"),null!==s.id&&kn(xd,this).setAttribute("id","".concat(s.id)),e.append(kn(xd,this))}else"endMarkedContent"===s.type&&An(xd,this,kn(xd,this).parentNode)}}function Bd(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};kn($d,this).push(t);const i=rr.transform(kn(Ld,this),e.transform);let r=Math.atan2(i[1],i[0]);const s=kn(Md,this)[e.fontName];s.vertical&&(r+=Math.PI/2);let a=kn(Sd,this)&&s.fontSubstitution||s.fontFamily;a=Mn.fontFamilyMap.get(a)||a;const o=Math.hypot(i[2],i[3]),l=o*Gd.call(Mn,a,kn(Cd,this));let c,d;0===r?(c=i[4],d=i[5]-l):(c=i[4]+l*Math.sin(r),d=i[5]-l*Math.cos(r));const u="calc(var(--scale-factor)*",h=t.style;kn(xd,this)===kn(jd,this)?(h.left="".concat((100*c/kn(Ad,this)).toFixed(2),"%"),h.top="".concat((100*d/kn(kd,this)).toFixed(2),"%")):(h.left="".concat(u).concat(c.toFixed(2),"px)"),h.top="".concat(u).concat(d.toFixed(2),"px)")),h.fontSize="".concat(u).concat((Yd._*o).toFixed(2),"px)"),h.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,kn(Sd,this)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==r&&(n.angle=r*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(f=!0)}if(f&&(n.canvasWidth=s.vertical?e.height:e.width),kn(Dd,this).set(t,n),kn(_d,this).div=t,kn(_d,this).properties=n,Cn(Id,this,Wd).call(this,kn(_d,this)),n.hasText&&kn(xd,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),kn(xd,this).append(e)}}function Wd(e){const{div:t,properties:n,ctx:i}=e,{style:r}=t;let s="";if(Yd._>1&&(s="scale(".concat(1/Yd._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=r,{canvasWidth:a,fontSize:o}=n;Hd.call(Mn,i,o*kn(Od,this),e);const{width:l}=i.measureText(t.textContent);l>0&&(s="scaleX(".concat(a*kn(Od,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(r.transform=s)}function zd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Cn(Mn,this,qd)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),Cn(Mn,this,qd)._.set(e,t),Cn(Mn,this,Xd)._.set(t,{size:0,family:""})}return t}function Hd(e,t,n){const i=Cn(Mn,this,Xd)._.get(e);t===i.size&&n===i.family||(e.font="".concat(t,"px ").concat(n),i.size=t,i.family=n)}function Ud(){if(null!==Cn(Mn,this,Yd)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),Yd._=Cn(Mn,this,e.getBoundingClientRect().height),e.remove()}function Gd(e,t){const n=Cn(Mn,this,Vd)._.get(e);if(n)return n;const i=Cn(Mn,this,zd).call(this,t);i.canvas.width=i.canvas.height=yd,Cn(Mn,this,Hd).call(this,i,yd,e);const r=i.measureText("");let s=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(s){const t=s/(s+a);return Cn(Mn,this,Vd)._.set(e,t),i.canvas.width=i.canvas.height=0,t}i.strokeStyle="red",i.clearRect(0,0,yd,yd),i.strokeText("g",0,0);let o=i.getImageData(0,0,yd,yd).data;a=0;for(let c=o.length-1-3;c>=0;c-=4)if(o[c]>0){a=Math.ceil(c/4/yd);break}i.clearRect(0,0,yd,yd),i.strokeText("A",0,yd),o=i.getImageData(0,0,yd,yd).data,s=0;for(let c=0,d=o.length;c<d;c+=4)if(o[c]>0){s=yd-Math.floor(c/4/yd);break}i.canvas.width=i.canvas.height=0;const l=s?s/(s+a):.8;return Cn(Mn,this,Vd)._.set(e,l),l}Mn=Fd;var Vd={_:new Map},qd={_:new Map},Xd={_:new WeakMap},Yd={_:null},Kd={_:new Set};class Qd{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var i;if(!n)return;let r=null;const s=n.name;if("#text"===s)r=n.value;else{if(!Qd.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(i=n.attributes)&&void 0!==i&&i.textContent?r=n.attributes.textContent:n.value&&(r=n.value)}if(null!==r&&t.push({str:r}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}const Jd=65536,Zd=Wn?class extends nl{_createCanvas(e,t){return Ol.get("canvas").createCanvas(e,t)}}:class extends nl{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}},eu=Wn?class extends il{async _fetch(e){return Ml(e)}}:rl,tu=Wn?class extends sl{}:class extends sl{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),wn(this,fl),Sn(this,al,void 0),Sn(this,ol,void 0),Sn(this,ll,void 0),Sn(this,cl,void 0),Sn(this,dl,void 0),Sn(this,ul,void 0),Sn(this,hl,0),An(cl,this,t),An(dl,this,n)}addFilter(e){var t,n;if(!e)return"none";let i=_n(fl,this,pl).get(e);if(i)return i;const[r,s,a]=Cn(fl,this,vl).call(this,e),o=1===e.length?r:"".concat(r).concat(s).concat(a);if(i=_n(fl,this,pl).get(o),i)return _n(fl,this,pl).set(e,i),i;const l="g_".concat(kn(cl,this),"_transfer_map_").concat((An(hl,this,(t=kn(hl,this),n=t++,t)),n)),c=Cn(fl,this,yl).call(this,l);_n(fl,this,pl).set(e,c),_n(fl,this,pl).set(o,c);const d=Cn(fl,this,wl).call(this,l);return Cn(fl,this,Cl).call(this,r,s,a,d),c}addHCMFilter(e,t){var n;const i="".concat(e,"-").concat(t),r="base";let s=_n(fl,this,gl).get(r);if((null===(n=s)||void 0===n?void 0:n.key)===i)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},_n(fl,this,gl).set(r,s));if(!e||!t)return s.url;const o=Cn(fl,this,kl).call(this,e);e=rr.makeHexColor(...o);const l=Cn(fl,this,kl).call(this,t);if(t=rr.makeHexColor(...l),_n(fl,this,ml).style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const c=new Array(256);for(let p=0;p<=255;p++){const e=p/255;c[p]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(kn(cl,this),"_hcm_filter"),h=s.filter=Cn(fl,this,wl).call(this,u);Cn(fl,this,Cl).call(this,d,d,d,h),Cn(fl,this,xl).call(this,h);const f=(e,t)=>{const n=o[e]/255,i=l[e]/255,r=new Array(t+1);for(let s=0;s<=t;s++)r[s]=n+s/t*(i-n);return r.join(",")};return Cn(fl,this,Cl).call(this,f(0,5),f(1,5),f(2,5),h),s.url=Cn(fl,this,yl).call(this,u),s.url}addAlphaFilter(e){var t,n;let i=_n(fl,this,pl).get(e);if(i)return i;const[r]=Cn(fl,this,vl).call(this,[e]),s="alpha_".concat(r);if(i=_n(fl,this,pl).get(s),i)return _n(fl,this,pl).set(e,i),i;const a="g_".concat(kn(cl,this),"_alpha_map_").concat((An(hl,this,(t=kn(hl,this),n=t++,t)),n)),o=Cn(fl,this,yl).call(this,a);_n(fl,this,pl).set(e,o),_n(fl,this,pl).set(s,o);const l=Cn(fl,this,wl).call(this,a);return Cn(fl,this,_l).call(this,r,l),o}addLuminosityFilter(e){var t,n;let i,r,s=_n(fl,this,pl).get(e||"luminosity");if(s)return s;if(e?([i]=Cn(fl,this,vl).call(this,[e]),r="luminosity_".concat(i)):r="luminosity",s=_n(fl,this,pl).get(r),s)return _n(fl,this,pl).set(e,s),s;const a="g_".concat(kn(cl,this),"_luminosity_map_").concat((An(hl,this,(t=kn(hl,this),n=t++,t)),n)),o=Cn(fl,this,yl).call(this,a);_n(fl,this,pl).set(e,o),_n(fl,this,pl).set(r,o);const l=Cn(fl,this,wl).call(this,a);return Cn(fl,this,bl).call(this,l),e&&Cn(fl,this,_l).call(this,i,l),o}addHighlightHCMFilter(e,t,n,i,r){var s;const a="".concat(t,"-").concat(n,"-").concat(i,"-").concat(r);let o=_n(fl,this,gl).get(e);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},_n(fl,this,gl).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(Cn(fl,this,kl).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,p]=[i,r].map(Cn(fl,this,kl).bind(this));h<u&&([u,h,f,p]=[h,u,p,f]),_n(fl,this,ml).style.color="";const g=(e,t,n)=>{const i=new Array(256),r=(h-u)/n,s=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*r),t=s+l*a;for(let n=o;n<=e;n++)i[n]=t;o=e+1}for(let l=o;l<256;l++)i[l]=i[o-1];return i.join(",")},m="g_".concat(kn(cl,this),"_hcm_").concat(e,"_filter"),v=o.filter=Cn(fl,this,wl).call(this,m);return Cn(fl,this,xl).call(this,v),Cn(fl,this,Cl).call(this,g(f[0],p[0],5),g(f[1],p[1],5),g(f[2],p[2],5),v),o.url=Cn(fl,this,yl).call(this,m),o.url}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&0!==_n(fl,this,gl).size||(kn(ll,this)&&(kn(ll,this).parentNode.parentNode.remove(),An(ll,this,null)),kn(ol,this)&&(kn(ol,this).clear(),An(ol,this,null)),An(hl,this,0))}},nu=Wn?class extends Al{async _fetch(e){return Ml(e)}}:El;function iu(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof i||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const r=new su,{docId:s}=r,a=i.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch(t){if(Wn&&"string"===typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(i.url):null,o=i.data?function(e){if(Wn&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return er(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(i.data):null,l=i.httpHeaders||null,c=!0===i.withCredentials,d=null!==(e=i.password)&&void 0!==e?e:null,u=i.range instanceof ou?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:Jd;let f=i.worker instanceof bu?i.worker:null;const p=i.verbosity,g="string"!==typeof i.docBaseUrl||kr(i.docBaseUrl)?null:i.docBaseUrl,m="string"===typeof i.cMapUrl?i.cMapUrl:null,v=!1!==i.cMapPacked,y=i.CMapReaderFactory||eu,b="string"===typeof i.standardFontDataUrl?i.standardFontDataUrl:null,x=i.StandardFontDataFactory||nu,w=!0!==i.stopAtErrors,S=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,C=!1!==i.isEvalSupported,_="boolean"===typeof i.isOffscreenCanvasSupported?i.isOffscreenCanvasSupported:!Wn,k="boolean"===typeof i.isChrome?i.isChrome:!nr.platform.isFirefox&&"undefined"!==typeof window&&!(null===(t=window)||void 0===t||!t.chrome),A=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,E="boolean"===typeof i.disableFontFace?i.disableFontFace:Wn,j=!0===i.fontExtraProperties,T=!0===i.enableXfa,O=i.ownerDocument||globalThis.document,M=!0===i.disableRange,P=!0===i.disableStream,N=!0===i.disableAutoFetch,$=!0===i.pdfBug,D=i.CanvasFactory||Zd,L=i.FilterFactory||tu,I=!0===i.enableHWA,F=u?u.length:null!==(n=i.length)&&void 0!==n?n:NaN,R="boolean"===typeof i.useSystemFonts?i.useSystemFonts:!Wn&&!E,B="boolean"===typeof i.useWorkerFetch?i.useWorkerFetch:y===rl&&x===El&&m&&b&&Or(m,document.baseURI)&&Or(b,document.baseURI);i.canvasFactory&&Pr("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&Pr("`filterFactory`-instance option, please use `FilterFactory` instead.");Ii(p);const W={canvasFactory:new D({ownerDocument:O,enableHWA:I}),filterFactory:new L({docId:s,ownerDocument:O}),cMapReaderFactory:B?null:new y({baseUrl:m,isCompressed:v}),standardFontDataFactory:B?null:new x({baseUrl:b})};if(!f){const e={verbosity:p,port:cc.workerPort};f=e.port?bu.fromPort(e):new bu(e),r._worker=f}const z={docId:s,apiVersion:"4.8.69",data:o,password:d,disableAutoFetch:N,rangeChunkSize:h,length:F,docBaseUrl:g,enableXfa:T,evaluatorOptions:{maxImageSize:S,disableFontFace:E,ignoreErrors:w,isEvalSupported:C,isOffscreenCanvasSupported:_,isChrome:k,canvasMaxAreaInBytes:A,fontExtraProperties:j,useSystemFonts:R,cMapUrl:B?m:null,standardFontDataUrl:B?b:null}},H={disableFontFace:E,fontExtraProperties:j,ownerDocument:O,pdfBug:$,styleElement:null,loadingParams:{disableAutoFetch:N,enableXfa:T}};return f.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const e=f.messageHandler.sendWithPromise("GetDocRequest",z,o?[o.buffer]:null);let t;if(u)t=new Vc(u,{disableRange:M,disableStream:P});else if(!o){if(!a)throw new Error("getDocument - no `url` parameter provided.");let e;if(Wn){e="undefined"!==typeof fetch&&"undefined"!==typeof Response&&"body"in Response.prototype&&Or(a)?nd:ud}else e=Or(a)?nd:ad;t=new e({url:a,length:F,httpHeaders:l,withCredentials:c,rangeChunkSize:h,disableRange:M,disableStream:P})}return e.then(e=>{if(r.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const n=new kc(s,e,f.port),i=new Mu(n,r,t,H,W);r._transport=i,n.send("Ready",null)})}).catch(r._capability.reject),r}function ru(e){return"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0}class su{constructor(){var e,t;this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId="d".concat((au._=(e=au._,t=e++,e),t)),this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{var e,t;null!==(e=this._worker)&&void 0!==e&&e.port&&(this._worker._pendingDestroy=!0),await(null===(t=this._transport)||void 0===t?void 0:t.destroy())}catch(i){var n;throw null!==(n=this._worker)&&void 0!==n&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}var au={_:0};class ou{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Wi("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class lu{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ui(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var cu=new WeakMap,du=new WeakMap,uu=new WeakSet;class hu{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];wn(this,uu),Sn(this,cu,null),Sn(this,du,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new Tr:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new Lu,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Cr({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ui(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n;let{canvasContext:i,viewport:r,intent:s="display",annotationMode:a=Zn.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:f=!1}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const p=this._transport.getRenderingIntent(s,a,h,f),{renderingIntent:g,cacheKey:m}=p;An(du,this,!1),Cn(uu,this,pu).call(this),c||(c=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const y=!!(g&qn);var b;v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(b=this._stats)||void 0===b||b.time("Page Request"),this._pumpOperatorList(p));const x=e=>{var t;(v.renderTasks.delete(w),(this._maybeCleanupAfterRender||y)&&An(du,this,!0),Cn(uu,this,fu).call(this,!y),e?(w.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:new Error(e)})):w.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(t=globalThis.Stats)&&void 0!==t&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new Wu({callback:x,params:{canvasContext:i,viewport:r,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:u});((n=v).renderTasks||(n.renderTasks=new Set)).add(w);const S=w.task;return Promise.all([v.displayReadyCapability.promise,c]).then(e=>{var t;let[n,i]=e;if(this.destroyed)x();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(i.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:n,optionalContentConfig:i}),w.operatorListChanged()}}).catch(x),S}getOperatorList(){let{intent:e="display",annotationMode:t=Zn.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this._transport.getRenderingIntent(e,t,n,i,!0);let s,a=this._intentStates.get(r.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(r));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>Qd.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const i=t.getReader(),r={items:[],styles:Object.create(null),lang:null};!function t(){i.read().then(function(n){var i;let{value:s,done:a}=n;a?e(r):(null!==(i=r.lang)&&void 0!==i||(r.lang=s.lang),Object.assign(r.styles,s.styles),r.items.push(...s.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),An(du,this,!1),Cn(uu,this,pu).call(this),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];An(du,this,!0);const t=Cn(uu,this,fu).call(this,!1);return e&&t&&this._stats&&(this._stats=new Tr),t}_startRenderPage(e,t){var n,i;const r=this._intentStates.get(t);r&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(i=r.displayReadyCapability)||void 0===i||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&Cn(uu,this,fu).call(this,!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}=e;const{map:s,transfer:a}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();Cn(uu,this,fu).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:i=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(n instanceof _r){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new Ji(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function fu(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Cn(uu,this,pu).call(this),!kn(du,this)||this.destroyed)return!1;if(e)return An(cu,this,setTimeout(()=>{An(cu,this,null),Cn(uu,this,fu).call(this,!1)},5e3)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),An(du,this,!1),!0}function pu(){kn(cu,this)&&(clearTimeout(kn(cu,this)),An(cu,this,null))}var gu=new WeakMap,mu=new WeakMap;class vu{constructor(){Sn(this,gu,new Map),Sn(this,mu,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};kn(mu,this).then(()=>{for(const[e]of kn(gu,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted)return void Bi("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(e,t);i=()=>r.removeEventListener("abort",s),r.addEventListener("abort",s)}kn(gu,this).set(t,i)}removeEventListener(e,t){const n=kn(gu,this).get(t);null===n||void 0===n||n(),kn(gu,this).delete(t)}terminate(){for(const[,e]of kn(gu,this))null===e||void 0===e||e();kn(gu,this).clear()}}var yu=new WeakSet;class bu{constructor(){let{name:e=null,port:t=null,verbosity:n=Fi()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(wn(this,yu),this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){var i;if(null!==(i=_u._)&&void 0!==i&&i.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(_u._||(_u._=new WeakMap)).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return Wn?Promise.all([Ol.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new kc("main","worker",e),this._messageHandler.on("ready",function(){}),Cn(yu,this,xu).call(this)}_initialize(){if(Cu._||wu(bu))return void this._setupFakeWorker();let{workerSrc:e}=bu;try{bu._isSameOrigin(window.location.href,e)||(e=bu._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new kc("main","worker",t),i=()=>{r.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),n.on("test",e=>{r.abort(),!this.destroyed&&e?(this._messageHandler=n,this._port=t,this._webWorker=t,Cn(yu,this,xu).call(this)):i()}),n.on("ready",e=>{if(r.abort(),this.destroyed)i();else try{s()}catch(t){this._setupFakeWorker()}});const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch(t){Ri("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Cu._||(Bi("Setting up fake worker."),Cu._=!0),bu._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const i=new vu;this._port=i;const r="fake".concat((Su._=(t=Su._,n=t++,t),n)),s=new kc(r+"_worker",r,i);e.setup(s,i),this._messageHandler=new kc(r,r+"_worker",i),Cn(yu,this,xu).call(this)}).catch(e=>{this._readyCapability.reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null===(e=_u._)||void 0===e||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var t;if(null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=null===(t=Cn(bu,this,_u)._)||void 0===t?void 0:t.get(e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new bu(e)}static get workerSrc(){if(cc.workerSrc)return cc.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ui(this,"_setupFakeWorkerGlobal",(async()=>{if(_n(bu,this,wu))return _n(bu,this,wu);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function xu(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}function wu(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}Pn=bu;var Su={_:0},Cu={_:!1},_u={_:void 0};Wn&&(Cu._=Cn(Pn,Pn,!0),cc.workerSrc||(cc.workerSrc="./pdf.worker.mjs")),Pn._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch(r){return!1}const i=new URL(t,n);return n.origin===i.origin},Pn._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};var ku=new WeakMap,Au=new WeakMap,Eu=new WeakMap,ju=new WeakMap,Tu=new WeakMap,Ou=new WeakSet;class Mu{constructor(e,t,n,i,r){wn(this,Ou),Sn(this,ku,new Map),Sn(this,Au,new Map),Sn(this,Eu,new Map),Sn(this,ju,new Map),Sn(this,Tu,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Lu,this.fontLoader=new Zo({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ui(this,"annotationStorage",new Xo)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zn.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=Vn,a=Ho;switch(e){case"any":s=Gn;break;case"display":break;case"print":s=qn;break;default:Bi("getRenderingIntent - invalid intent: ".concat(e))}const o=s&qn&&n instanceof Qo?n:this.annotationStorage;switch(t){case Zn.DISABLE:s+=Kn;break;case Zn.ENABLE:break;case Zn.ENABLE_FORMS:s+=Xn;break;case Zn.ENABLE_STORAGE:s+=Yn,a=o.serializable;break;default:Bi("getRenderingIntent - invalid annotationMode: ".concat(t))}i&&(s+=Qn),r&&(s+=Jn);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=kn(Tu,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of kn(Au,this).values())t.push(i._destroy());kn(Au,this).clear(),kn(Eu,this).clear(),kn(ju,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),kn(ku,this).clear(),this.filterFactory.destroy(),Fd.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new Ji("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{zi(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:i}=e;i?t.close():(zi(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:i,contentLength:r}=this._fullReader;if(!n||!i){var s;if(this._lastProgress)null===(s=t.onProgress)||void 0===s||s.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:i,contentLength:r}}),e.on("GetRangeReader",(e,t)=>{zi(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:i}=e;i?t.close():(zi(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new lu(n,this))}),e.on("DocException",function(e){let n;switch(e.name){case"PasswordException":n=new Vi(e.message,e.code);break;case"InvalidPDFException":n=new Xi(e.message);break;case"MissingPDFException":n=new Yi(e.message);break;case"UnexpectedResponseException":n=new Ki(e.message,e.status);break;case"UnknownErrorException":n=new qi(e.message,e.details);break;default:Wi("DocException - expected a valid Error.")}t._capability.reject(n)}),e.on("PasswordRequest",e=>{if(An(Tu,this,Promise.withResolvers()),t.onPassword){const i=e=>{e instanceof Error?kn(Tu,this).reject(e):kn(Tu,this).resolve({password:e})};try{t.onPassword(i,e.code)}catch(n){kn(Tu,this).reject(n)}}else kn(Tu,this).reject(new Vi(e.message,e.code));return kn(Tu,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;kn(Au,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[i,r,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:t,fontExtraProperties:a,pdfBug:o}=this._params;if("error"in s){const e=s.error;Bi("Error during font loading: ".concat(e)),this.commonObjs.resolve(i,e);break}const l=o&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,c=new el(s,{disableFontFace:t,inspectFont:l});this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a&&c.data&&(c.data=null),this.commonObjs.resolve(i,c)});break;case"CopyLocalImage":const{imageRef:d}=s;zi(d,"The imageRef must be defined.");for(const e of kn(Au,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===d)return t.dataLen?(this.commonObjs.resolve(i,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error("Got unknown common object type ".concat(r))}return null}),e.on("obj",e=>{let[t,n,i,r]=e;if(this.destroyed)return;const s=kn(Au,this).get(n);var a;if(!s.objs.has(t))if(0!==s._intentStates.size)switch(i){case"Image":s.objs.resolve(t,r),(null===r||void 0===r?void 0:r.dataLen)>1e7&&(s._maybeCleanupAfterRender=!0);break;case"Pattern":s.objs.resolve(t,r);break;default:throw new Error("Got unknown object type ".concat(i))}else null===r||void 0===r||null===(a=r.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(e)}),e.on("FetchStandardFontData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&Bi("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=kn(Eu,this).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&kn(ju,this).set(n.refStr,e);const i=new hu(t,n,this,this._params.pdfBug);return kn(Au,this).set(t,i),i});return kn(Eu,this).set(t,i),i}getPageIndex(e){return ru(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return Cn(Ou,this,Pu).call(this,"GetFieldObjects")}hasJSActions(){return Cn(Ou,this,Pu).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Cn(Ou,this,Pu).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return Cn(Ou,this,Pu).call(this,"GetOptionalContentConfig").then(t=>new Uc(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=kn(ku,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,i,r;return{info:e[0],metadata:e[1]?new Pc(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(i=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==i?i:null}});return kn(ku,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of kn(Au,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),kn(ku,this).clear(),this.filterFactory.destroy(!0),Fd.cleanup()}}cachedPageNumber(e){var t;if(!ru(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=kn(ju,this).get(n))&&void 0!==t?t:null}}function Pu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=kn(ku,this).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return kn(ku,this).set(e,i),i}const Nu=Symbol("INITIAL_DATA");var $u=new WeakMap,Du=new WeakSet;class Lu{constructor(){wn(this,Du),Sn(this,$u,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=Cn(Du,this,Iu).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=kn($u,this)[e];if(!n||n.data===Nu)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=kn($u,this)[e];return!!t&&t.data!==Nu}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Cn(Du,this,Iu).call(this,e);n.data=t,n.resolve()}clear(){for(const t in kn($u,this)){var e;const{data:n}=kn($u,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}An($u,this,Object.create(null))}*[Symbol.iterator](){for(const e in kn($u,this)){const{data:t}=kn($u,this)[e];t!==Nu&&(yield[e,t])}}}function Iu(e){var t;return(t=kn($u,this))[e]||(t[e]=c(c({},Promise.withResolvers()),{},{data:Nu}))}var Fu=new WeakMap;class Ru{constructor(e){Sn(this,Fu,null),An(Fu,this,e),this.onContinue=null}get promise(){return kn(Fu,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;kn(Fu,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=kn(Fu,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=kn(Fu,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var Bu=new WeakMap;class Wu{constructor(e){let{callback:t,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null}=e;Sn(this,Bu,null),this.callback=t,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ru(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:i=!1,optionalContentConfig:r}=e;if(this.cancelled)return;if(this._canvas){if(zu._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");zu._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:a,transform:o,background:l}=this.params;this.gfx=new ac(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:a,transparency:i,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),kn(Bu,this)&&(window.cancelAnimationFrame(kn(Bu,this)),An(Bu,this,null)),zu._.delete(this._canvas),this.callback(t||new _r("Rendering cancelled, page ".concat(this._pageIndex+1),n))}operatorListChanged(){var e;this.graphicsReady?(null===(e=this.stepper)||void 0===e||e.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?An(Bu,this,window.requestAnimationFrame(()=>{An(Bu,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),zu._.delete(this._canvas),this.callback())))}}var zu={_:new WeakSet};const Hu="4.8.69",Uu="3634dab10";function Gu(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function Vu(e){return Math.max(0,Math.min(255,255*e))}class qu{static CMYK_G(e){let[t,n,i,r]=e;return["G",1-Math.min(1,.3*t+.59*i+.11*n+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=Vu(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=Gu(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,i]=e;return["G",.3*t+.59*n+.11*i]}static RGB_rgb(e){return e.map(Vu)}static RGB_HTML(e){return"#".concat(e.map(Gu).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,i,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb(e){let[t,n,i,r]=e;return[Vu(1-Math.min(1,t+r)),Vu(1-Math.min(1,i+r)),Vu(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,i]=e;const r=1-t,s=1-n,a=1-i;return["CMYK",r,s,a,Math.min(r,s,a)]}}class Xu{create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width","".concat(e,"px")),i.setAttribute("height","".concat(t,"px"))),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),i}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Wi("Abstract method `_createSVG` called.")}}class Yu extends Xu{_createSVG(e){return document.createElementNS(xr,e)}}class Ku{static setupStorage(e,t,n,i,r){const s=i.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===r)break;e.addEventListener("change",e=>{i.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===r)break;e.addEventListener("input",e=>{i.setValue(t,{value:e.target.value})})}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(t,{value:r})})}}static setAttributes(e){let{html:t,element:n,storage:i=null,intent:r,linkService:s}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(r));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(t,a.dataId,n,i)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:r,linkService:n});const a="richText"!==r,o=e.div;if(o.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===i.children.length){if(i.value){const e=document.createTextNode(i.value);s.append(e),a&&Qd.shouldBuildText(i.name)&&l.push(e)}return{textDivs:l}}const c=[[i,-1,s]];for(;c.length>0;){var d,u;const[e,i,s]=c.at(-1);if(i+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),s.append(e);continue}const f=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(s.append(f),o.attributes&&this.setAttributes({html:f,element:o,storage:t,intent:r,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,f]);else if(o.value){const e=document.createTextNode(o.value);a&&Qd.shouldBuildText(h)&&l.push(e),f.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const Qu=1e3,Ju=new WeakSet;function Zu(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class eh{static create(e){switch(e.data.annotationType){case ui:return new lh(e);case di:return new hh(e);case Ei:switch(e.data.fieldType){case"Tx":return new ph(e);case"Btn":return e.data.radioButton?new vh(e):e.data.checkBox?new mh(e):new yh(e);case"Ch":return new bh(e);case"Sig":return new gh(e)}return new fh(e);case ki:return new xh(e);case hi:return new Qh(e);case fi:return new Zh(e);case pi:return new tf(e);case gi:return new rf(e);case vi:return new af(e);case Ci:return new lf(e);case _i:return new df(e);case mi:return new of(e);case yi:return new uf(e);case bi:return new hf(e);case xi:return new ff(e);case wi:return new pf(e);case Si:return new gf(e);case Ai:return new yf(e);default:return new sh(e)}}}var th=new WeakMap,nh=new WeakMap,ih=new WeakMap,rh=new WeakSet;class sh{constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};wn(this,rh),Sn(this,th,null),Sn(this,nh,!1),Sn(this,ih,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:i}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str||null!==i&&void 0!==i&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return sh._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;kn(th,this)||An(th,this,{rect:this.data.rect.slice(0)});const{rect:n}=e;n&&Cn(rh,this,ah).call(this,n),null===(t=kn(ih,this))||void 0===t||t.popup.updateEdited(e)}resetEdited(){var e;kn(th,this)&&(Cn(rh,this,ah).call(this,kn(th,this).rect),null===(e=kn(ih,this))||void 0===e||e.popup.resetEdited(),An(th,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof fh||(r.tabIndex=Qu);const{style:s}=r;if(s.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof xh){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:a,height:o}=Zu(t.rect);if(!e&&t.borderStyle.width>0){s.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--scale-factor)) / calc(").concat(n,"px * var(--scale-factor))");s.borderRadius=t}else if(this instanceof vh){const e="calc(".concat(a,"px * var(--scale-factor)) / calc(").concat(o,"px * var(--scale-factor))");s.borderRadius=e}switch(t.borderStyle.style){case ji:s.borderStyle="solid";break;case Ti:s.borderStyle="dashed";break;case Oi:Bi("Unimplemented border style: beveled");break;case Mi:Bi("Unimplemented border style: inset");break;case Pi:s.borderBottomStyle="solid"}const i=t.borderColor||null;i?(An(nh,this,!0),s.borderColor=rr.makeHexColor(0|i[0],0|i[1],0|i[2])):s.borderWidth=0}const l=rr.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=i.rawDims;s.left="".concat(100*(l[0]-u)/c,"%"),s.top="".concat(100*(l[1]-h)/d,"%");const{rotation:f}=t;return t.hasOwnCanvas||0===f?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/d,"%")):this.setRotation(f,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:s}=Zu(this.data.rect);let a,o;e%180===0?(a=100*r/n,o=100*s/i):(a=100*s/n,o=100*r/i),t.style.width="".concat(a,"%"),t.style.height="".concat(o,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const i=n.detail[e],r=i[0],s=i.slice(1);n.target.style[t]=qu["".concat(r,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:qu["".concat(r,"_rgb")](s)})};return Ui(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail)){const r=e[i]||n[i];null===r||void 0===r||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,r]of Object.entries(t)){const s=n[i];if(s){s({detail:{[i]:r},target:e}),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,r]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[s,a,o,l]=e.subarray(2,6);if(i===s&&r===a&&t===o&&n===l)return}const{style:s}=this.container;let a;if(kn(nh,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=i-t,l=r-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),f="clippath_".concat(this.data.id);h.setAttribute("id",f),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let g=2,m=e.length;g<m;g+=8){var p;const n=e[g],i=e[g+1],s=e[g+2],d=e[g+3],u=c.createElement("rect"),f=(s-t)/o,m=(r-i)/l,v=(n-s)/o,y=(i-d)/l;u.setAttribute("x",f),u.setAttribute("y",m),u.setAttribute("width",v),u.setAttribute("height",y),h.append(u),null===(p=a)||void 0===p||p.push('<rect vector-effect="non-scaling-stroke" x="'.concat(f,'" y="').concat(m,'" width="').concat(v,'" height="').concat(y,'"/>'))}kn(nh,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(f,")")}_createPopup(){const{data:e}=this,t=An(ih,this,new xh({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:"popup_".concat(e.id),rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Wi("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:r,exportValues:s}of i){if(-1===e)continue;if(r===t)continue;const i="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(r,'"]'));!a||Ju.has(a)?n.push({id:r,exportValue:i,domElement:a}):Bi("_getElementsByName - element not allowed: ".concat(r))}return n}for(const i of document.getElementsByName(e)){const{exportValue:e}=i,r=i.getAttribute("data-element-id");r!==t&&(Ju.has(i)&&n.push({id:r,exportValue:e,domElement:i}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}function ah(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e);const{width:l,height:c}=Zu(e);t.left="".concat(100*(e[0]-a)/r,"%"),t.top="".concat(100*(s-e[3]+o)/s,"%"),0===i?(t.width="".concat(100*l/r,"%"),t.height="".concat(100*c/s,"%")):this.setRotation(i)}var oh=new WeakSet;class lh extends sh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),wn(this,oh),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action),i=!0):e.attachment?(Cn(oh,this,dh).call(this,n,e.attachment,e.attachmentDest),i=!0):e.setOCGState?(Cn(oh,this,uh).call(this,n,e.setOCGState),i=!0):e.dest?(this._bindLink(n,e.dest),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&Cn(oh,this,ch).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),Cn(oh,this,ch).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const r=n.get(i);r&&(e[r]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1})}e.onclick||(e.onclick=()=>!1),Cn(oh,this,ch).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),Cn(oh,this,ch).call(this),!this._fieldObjects)return Bi('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:i,include:r}=t,s=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,o=[];for(const t of s){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(Ju.has(n)?n.dispatchEvent(new Event("resetform")):Bi("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function ch(){this.container.setAttribute("data-internal-link","")}function dh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,n),!1},Cn(oh,this,ch).call(this)}function uh(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),Cn(oh,this,ch).call(this)}class hh extends sh{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class fh extends sh{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return nr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,r){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}r&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(e)}}))})}_setEventListeners(e,t,n,i){for(const[o,l]of n){var r,s,a;if("Action"===l||null!==(r=this.data.actions)&&void 0!==r&&r[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,i),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":rr.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||9,r=e.style;let s;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(Un*i))||1);s=Math.min(i,a(t/Un))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(i,a(e/Un))}r.fontSize="calc(".concat(s,"px * var(--scale-factor))"),r.color=rr.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ph extends fh{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,i){const r=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),r.setValue(s.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var i;const s=e.getValue(t,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(i=this.data.textContent)||void 0===i?void 0:i.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Ju.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Qu,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",i=>{e.setValue(t,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const i=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=i,c.formattedValue=null});let d=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var r;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;c.userValue&&(n.value=c.userValue),c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const i={value(n){var i;c.userValue=null!==(i=n.detail.value)&&void 0!==i?i:"",e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:i}=n.detail;c.formattedValue=i,null!==i&&void 0!==i&&n.target!==document.activeElement&&(n.target.value=i),e.setValue(t,{formattedValue:i})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var i;const{charLimit:r}=n.detail,{target:s}=n;if(0===r)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",r);let a=c.userValue;!a||a.length<=r||(a=a.slice(0,r),s.value=c.userValue=a,e.setValue(t,{value:a}),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let i=-1;if("Escape"===e.key?i=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):i=2,-1===i)return;const{value:r}=e.target;c.lastCommittedValue!==r&&(c.lastCommittedValue=r,c.userValue=r,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:i,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const i=d;d=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{value:r}=e.target;var s;(c.userValue=r,c.lastCommittedValue!==r)&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));i(e)}),null!==(r=this.data.actions)&&void 0!==r&&r.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:i,target:r}=e,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,d=o;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(a).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:i||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class gh extends fh{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class mh extends fh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof i&&(i="Off"!==i,e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ju.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Qu,r.addEventListener("change",i=>{const{name:r,checked:s}=i.target;for(const a of this._getElementsByName(r,n)){const n=s&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:s})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",t=>{const i={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class vh extends fh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof i&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const r=document.createElement("input");if(Ju.add(r),r.setAttribute("data-element-id",n),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Qu,r.addEventListener("change",t=>{const{name:i,checked:r}=t.target;for(const s of this._getElementsByName(i,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:r})}),r.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const i=t.buttonValue;r.addEventListener("updatefromsandbox",t=>{const r={value:t=>{const r=i===t.detail.value;for(const i of this._getElementsByName(t.target.name)){const t=r&&i.id===n;i.domElement&&(i.domElement.checked=t),e.setValue(i.id,{value:t})}}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class yh extends lh{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class bh extends fh{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");Ju.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Qu;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of i.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),r=!1),i.append(e)}let s=null;if(r){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),i.prepend(e),s=()=>{e.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",n=>{const r={value(n){var r;null===(r=s)||void 0===r||r();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of i.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){i.multiple=!0},remove(n){const r=i.options,s=n.detail.remove;if(r[s].selected=!1,i.remove(s),r.length>0){-1===Array.prototype.findIndex.call(r,e=>e.selected)&&(r[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==i.length;)i.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:r,displayValue:s,exportValue:c}=n.detail.insert,d=i.children[r],u=document.createElement("option");u.textContent=s,u.value=c,d?d.before(u):i.append(u),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const e of r){const{displayValue:t,exportValue:n}=e,r=document.createElement("option");r.textContent=t,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const i=new Set(n.detail.indices);for(const e of n.target.options)e.selected=i.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(r,n)}),i.addEventListener("input",n=>{var i;const r=a(!0),s=a(!1);e.setValue(t,{value:r}),n.preventDefault(),null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:s,changeEx:r,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):i.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class xh extends sh{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:sh._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Wh({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>"".concat(dr).concat(e)).join(",")),this.container}}var wh=new WeakMap,Sh=new WeakMap,Ch=new WeakMap,_h=new WeakMap,kh=new WeakMap,Ah=new WeakMap,Eh=new WeakMap,jh=new WeakMap,Th=new WeakMap,Oh=new WeakMap,Mh=new WeakMap,Ph=new WeakMap,Nh=new WeakMap,$h=new WeakMap,Dh=new WeakMap,Lh=new WeakMap,Ih=new WeakMap,Fh=new WeakMap,Rh=new WeakMap,Bh=new WeakSet;class Wh{constructor(e){let{container:t,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:u}=e;wn(this,Bh),Sn(this,wh,Cn(Bh,this,Vh).bind(this)),Sn(this,Sh,Cn(Bh,this,Kh).bind(this)),Sn(this,Ch,Cn(Bh,this,Yh).bind(this)),Sn(this,_h,Cn(Bh,this,Xh).bind(this)),Sn(this,kh,null),Sn(this,Ah,null),Sn(this,Eh,null),Sn(this,jh,null),Sn(this,Th,null),Sn(this,Oh,null),Sn(this,Mh,null),Sn(this,Ph,!1),Sn(this,Nh,null),Sn(this,$h,null),Sn(this,Dh,null),Sn(this,Lh,null),Sn(this,Ih,null),Sn(this,Fh,null),Sn(this,Rh,!1),An(Ah,this,t),An(Ih,this,r),An(Eh,this,a),An(Lh,this,o),An(Oh,this,l),An(kh,this,n),An(Dh,this,c),An(Mh,this,d),An(Th,this,i),An(jh,this,Nr.toDateObject(s)),this.trigger=i.flatMap(e=>e.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",kn(_h,this)),f.addEventListener("mouseenter",kn(Ch,this)),f.addEventListener("mouseleave",kn(Sh,this)),f.classList.add("popupTriggerArea");for(const f of i){var h;null===(h=f.container)||void 0===h||h.addEventListener("keydown",kn(wh,this))}kn(Ah,this).hidden=!0,u&&Cn(Bh,this,Xh).call(this)}render(){if(kn(Nh,this))return;const e=An(Nh,this,document.createElement("div"));if(e.className="popup",kn(kh,this)){const t=e.style.outlineColor=rr.makeHexColor(...kn(kh,this));if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))e.style.backgroundColor="color-mix(in srgb, ".concat(t," 30%, white)");else{const t=.7;e.style.backgroundColor=rr.makeHexColor(...kn(kh,this).map(e=>Math.floor(t*(255-e)+e)))}}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),({dir:n.dir,str:n.textContent}=kn(Ih,this)),e.append(t),kn(jh,this)){const e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:kn(jh,this).valueOf()})),t.append(e)}const i=_n(Bh,this,zh);if(i)Ku.render({xfaHtml:i,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const t=this._formatContents(kn(Eh,this));e.append(t)}kn(Ah,this).append(e)}_formatContents(e){let{str:t,dir:n}=e;const i=document.createElement("p");i.classList.add("popupContent"),i.dir=n;const r=t.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const e=r[s];i.append(document.createTextNode(e)),s<a-1&&i.append(document.createElement("br"))}return i}updateEdited(e){var t;let{rect:n,popupContent:i}=e;kn(Fh,this)||An(Fh,this,{contentsObj:kn(Eh,this),richText:kn(Lh,this)}),n&&An($h,this,null),i&&(An(Lh,this,Cn(Bh,this,Gh).call(this,i)),An(Eh,this,null)),null===(t=kn(Nh,this))||void 0===t||t.remove(),An(Nh,this,null)}resetEdited(){var e;kn(Fh,this)&&(({contentsObj:bn(An,[Eh,this])._,richText:bn(An,[Lh,this])._}=kn(Fh,this)),An(Fh,this,null),null===(e=kn(Nh,this))||void 0===e||e.remove(),An(Nh,this,null),An($h,this,null))}forceHide(){An(Rh,this,this.isVisible),kn(Rh,this)&&(kn(Ah,this).hidden=!0)}maybeShow(){kn(Rh,this)&&(kn(Nh,this)||Cn(Bh,this,Yh).call(this),An(Rh,this,!1),kn(Ah,this).hidden=!1)}get isVisible(){return!1===kn(Ah,this).hidden}}function zh(e){const t=kn(Lh,e),n=kn(Eh,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:kn(Lh,e).html||null}function Hh(e){var t;return(null===(t=_n(Bh,e,zh))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function Uh(e){var t;return(null===(t=_n(Bh,e,zh))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function Gh(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:_n(Bh,this,Uh),fontSize:_n(Bh,this,Hh)?"calc(".concat(_n(Bh,this,Hh),"px * var(--scale-factor))"):""}};for(const r of e.split("\n"))t.push({name:"span",value:r,attributes:i});return n}function Vh(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&kn(Ph,this))&&Cn(Bh,this,Xh).call(this)}function qh(){if(null!==kn($h,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=kn(Oh,this);let s=!!kn(Mh,this),a=kn(s?Mh:Dh,this);for(const h of kn(Th,this))if(!a||null!==rr.intersect(h.data.rect,a)){a=h.data.rect,s=!0;break}const o=rr.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];An($h,this,[100*(c-i)/t,100*(d-r)/n]);const{style:u}=kn(Ah,this);u.left="".concat(kn($h,this)[0],"%"),u.top="".concat(kn($h,this)[1],"%")}function Xh(){An(Ph,this,!kn(Ph,this)),kn(Ph,this)?(Cn(Bh,this,Yh).call(this),kn(Ah,this).addEventListener("click",kn(_h,this)),kn(Ah,this).addEventListener("keydown",kn(wh,this))):(Cn(Bh,this,Kh).call(this),kn(Ah,this).removeEventListener("click",kn(_h,this)),kn(Ah,this).removeEventListener("keydown",kn(wh,this)))}function Yh(){kn(Nh,this)||this.render(),this.isVisible?kn(Ph,this)&&kn(Ah,this).classList.add("focused"):(Cn(Bh,this,qh).call(this),kn(Ah,this).hidden=!1,kn(Ah,this).style.zIndex=parseInt(kn(Ah,this).style.zIndex)+1e3)}function Kh(){kn(Ah,this).classList.remove("focused"),!kn(Ph,this)&&this.isVisible&&(kn(Ah,this).hidden=!0,kn(Ah,this).style.zIndex=parseInt(kn(Ah,this).style.zIndex)-1e3)}class Qh extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ei.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jh=new WeakMap;class Zh extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sn(this,Jh,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=Zu(e.rect),i=this.svgFactory.create(t,n,!0),r=An(Jh,this,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kn(Jh,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var ef=new WeakMap;class tf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sn(this,ef,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=Zu(e.rect),i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=An(ef,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",r/2),s.setAttribute("y",r/2),s.setAttribute("width",t-r),s.setAttribute("height",n-r),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kn(ef,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var nf=new WeakMap;class rf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sn(this,nf,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=Zu(e.rect),i=this.svgFactory.create(t,n,!0),r=e.borderStyle.width,s=An(nf,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-r/2),s.setAttribute("ry",n/2-r/2),s.setAttribute("stroke-width",r||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kn(nf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var sf=new WeakMap;class af extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sn(this,sf,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i}}=this;if(!t)return this.container;const{width:r,height:s}=Zu(e),a=this.svgFactory.create(r,s,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],i=e[3]-t[c+1];o.push("".concat(n,",").concat(i))}o=o.join(" ");const l=An(sf,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return kn(sf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class of extends af{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class lf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var cf=new WeakMap;class df extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),Sn(this,cf,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?ei.HIGHLIGHT:ei.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:t,borderStyle:n,popupRef:i}}=this,{width:r,height:s}=Zu(e),a=this.svgFactory.create(r,s,!0);for(const o of t){let t=[];for(let n=0,r=o.length;n<r;n+=2){const i=o[n]-e[0],r=e[3]-o[n+1];t.push("".concat(i,",").concat(r))}t=t.join(" ");const i=this.svgFactory.createElement(this.svgElementName);kn(cf,this).push(i),i.setAttribute("points",t),i.setAttribute("stroke-width",n.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a.append(i)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(a),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return kn(cf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class uf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ei.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class hf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class ff extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class gf extends sh{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ei.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var mf=new WeakMap,vf=new WeakSet;class yf extends sh{constructor(e){var t;super(e,{isRenderable:!0}),wn(this,vf),Sn(this,mf,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",c({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",Cn(vf,this,bf).bind(this)),An(mf,this,n);const{isMac:i}=nr.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&Cn(vf,this,bf).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return kn(mf,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function bf(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var xf=new WeakMap,wf=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,_f=new WeakSet;class kf{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}=e;wn(this,_f),Sn(this,xf,null),Sn(this,wf,null),Sn(this,Sf,new Map),Sn(this,Cf,null),this.div=t,An(xf,this,n),An(wf,this,i),An(Cf,this,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return kn(Sf,this).size>0}async render(e){const{annotations:t}=e,n=this.div;Rr(n,this.viewport);const i=new Map,r={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new Yu,annotationStorage:e.annotationStorage||new Xo,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const a of t){if(a.noHTML)continue;const e=a.annotationType===ki;if(e){const e=i.get(a.id);if(!e)continue;r.elements=e}else{const{width:e,height:t}=Zu(a.rect);if(e<=0||t<=0)continue}r.data=a;const t=eh.create(r);if(!t.isRenderable)continue;if(!e&&a.popupRef){const e=i.get(a.popupRef);e?e.push(t):i.set(a.popupRef,[t])}const n=t.render();var s;if(a.hidden&&(n.style.visibility="hidden"),await Cn(_f,this,Af).call(this,n,a.id),t._isEditable)kn(Sf,this).set(t.data.id,t),null===(s=this._annotationEditorUIManager)||void 0===s||s.renderAnnotationElement(t)}Cn(_f,this,Ef).call(this)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Rr(n,{rotation:t.rotation}),Cn(_f,this,Ef).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(kn(Sf,this).values())}getEditableAnnotation(e){return kn(Sf,this).get(e)}}async function Af(e,t){var n,i;const r=e.firstChild||e,s=r.id="".concat(dr).concat(t),a=await(null===(n=kn(Cf,this))||void 0===n?void 0:n.getAriaAttributes(s));if(a)for(const[o,l]of a)r.setAttribute(o,l);this.div.append(e),null===(i=kn(xf,this))||void 0===i||i.moveElementInDOM(this.div,e,r,!1)}function Ef(){if(!kn(wf,this))return;const e=this.div;for(const[t,n]of kn(wf,this)){const i=e.querySelector('[data-annotation-id="'.concat(t,'"]'));if(!i)continue;n.className="annotationContent";const{firstChild:r}=i;r?"CANVAS"===r.nodeName?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):i.append(n)}kn(wf,this).clear()}const jf=/\r\n?|\n/g;var Tf=new WeakMap,Of=new WeakMap,Mf=new WeakMap,Pf=new WeakMap,Nf=new WeakMap,$f=new WeakSet;class Df extends So{static get _keyboardManager(){const e=Df.prototype,t=e=>e.isEmpty(),n=ga.TRANSLATE_SMALL,i=ga.TRANSLATE_BIG;return Ui(this,"_keyboardManager",new _s([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}constructor(e){super(c(c({},e),{},{name:"freeTextEditor"})),wn(this,$f),Sn(this,Tf,void 0),Sn(this,Of,""),Sn(this,Mf,"".concat(this.id,"-editor")),Sn(this,Pf,null),Sn(this,Nf,void 0),An(Tf,this,e.color||Df._defaultColor||So._defaultLineColor),An(Nf,this,e.fontSize||Df._defaultFontSize)}static initialize(e,t){So.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ti.FREETEXT_SIZE:Df._defaultFontSize=t;break;case ti.FREETEXT_COLOR:Df._defaultColor=t}}updateParams(e,t){switch(e){case ti.FREETEXT_SIZE:Cn($f,this,Lf).call(this,t);break;case ti.FREETEXT_COLOR:Cn($f,this,If).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ti.FREETEXT_SIZE,Df._defaultFontSize],[ti.FREETEXT_COLOR,Df._defaultColor||So._defaultLineColor]]}get propertiesToUpdate(){return[[ti.FREETEXT_SIZE,kn(Nf,this)],[ti.FREETEXT_COLOR,kn(Tf,this)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Df._internalPadding*e,-(Df._internalPadding+kn(Nf,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ei.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),An(Pf,this,new AbortController);const e=this._uiManager.combinedSignal(kn(Pf,this));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",kn(Mf,this)),this._isDraggable=!0,null===(e=kn(Pf,this))||void 0===e||e.abort(),An(Pf,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=kn(Of,this),t=An(Of,this,Cn($f,this,Ff).call(this).trimEnd());if(e===t)return;const n=e=>{An(Of,this,e),e?(Cn($f,this,Wf).call(this),this._uiManager.rebuild(this),Cn($f,this,Rf).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),Cn($f,this,Rf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Df._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",kn(Mf,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(kn(Nf,this),"px * var(--scale-factor))"),n.color=kn(Tf,this),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),cs(this,this.div,["dblclick","keydown"]),this.width){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(r[0]-c)/o,h=t+this.height-(r[1]-d)/l;break;case 90:u=e+(r[0]-c)/o,h=t-(r[1]-d)/l,[s,a]=[a,-s];break;case 180:u=e-this.width+(r[0]-c)/o,h=t-(r[1]-d)/l,[s,a]=[-s,-a];break;case 270:u=e+(r[0]-c-this.height*l)/o,h=t+(r[1]-d-this.width*o)/l,[s,a]=[-a,s]}this.setAt(u*n,h*i,s,a)}else this.setAt(e*n,t*i,this.width*n,this.height*i);Cn($f,this,Wf).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const i=Hf.call(Df,t.getData("text")||"").replaceAll(jf,"\n");if(!i)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const s=r.getRangeAt(0);if(!i.includes("\n"))return s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),void r.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(jf,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(Bf.call(Df,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(jf,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(Bf.call(Df,n))}An(Of,this,"".concat(l.join("\n")).concat(i).concat(c.join("\n"))),Cn($f,this,Wf).call(this);const d=new Range;let u=l.reduce((e,t)=>e+t.length,0);for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}r.removeAllRanges(),r.addRange(d)}get contentDiv(){return this.editorDiv}static async deserialize(e,t,n){let i=null;if(e instanceof Qh){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:s,id:a,popupRef:o},textContent:l,textPosition:c,parent:{page:{pageNumber:d}}}=e;if(!l||0===l.length)return null;i=e={annotationType:ei.FREETEXT,color:Array.from(n),fontSize:t,value:l.join("\n"),position:c,pageIndex:d-1,rect:r.slice(0),rotation:s,id:a,deleted:!1,popupRef:o}}const r=await super.deserialize(e,t,n);return An(Nf,r,e.fontSize),An(Tf,r,rr.makeHexColor(...e.color)),An(Of,r,Hf.call(Df,e.value)),r.annotationElementId=e.id||null,r._initialData=i,r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Df._internalPadding*this.parentScale,n=this.getRect(t,t),i=So._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:kn(Tf,this)),r={annotationType:ei.FREETEXT,color:i,fontSize:kn(Nf,this),value:Cn($f,this,zf).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!Cn($f,this,Uf).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:n}=t;n.fontSize="calc(".concat(kn(Nf,this),"px * var(--scale-factor))"),n.color=kn(Tf,this),t.replaceChildren();for(const r of kn(Of,this).split("\n")){const e=document.createElement("div");e.append(r?document.createTextNode(r):document.createElement("br")),t.append(e)}const i=Df._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(i,i),popupContent:kn(Of,this)}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function Lf(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--scale-factor))"),this.translate(0,-(e-kn(Nf,this))*this.parentScale),An(Nf,this,e),Cn($f,this,Rf).call(this)},n=kn(Nf,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function If(e){const t=e=>{An(Tf,this,this.editorDiv.style.color=e)},n=kn(Tf,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function Ff(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===i.nodeName||(e.push(Bf.call(Nn,i)),t=i)}return e.join("\n")}function Rf(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,i=t.style.display,r=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=i,t.classList.toggle("hidden",r)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function Bf(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(jf,"")}function Wf(){if(this.editorDiv.replaceChildren(),kn(Of,this))for(const e of kn(Of,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function zf(){return kn(Of,this).replaceAll("\xa0"," ")}function Hf(e){return e.replaceAll(" ","\xa0")}function Uf(e){const{value:t,fontSize:n,color:i,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==i[t])||e.pageIndex!==r}Nn=Df,o(Df,"_freeTextDefaultContent",""),o(Df,"_internalPadding",0),o(Df,"_defaultColor",null),o(Df,"_defaultFontSize",10),o(Df,"_type","freetext"),o(Df,"_editorType",ei.FREETEXT);class Gf{toSVGPath(){Wi("Abstract method `toSVGPath` must be implemented.")}get box(){Wi("Abstract getter `box` must be implemented.")}serialize(e,t){Wi("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Wi("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Wi("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Vf=new WeakMap,qf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Kf=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Zf=new WeakMap,ep=new WeakMap,tp=new WeakMap,np=new WeakMap,ip=new WeakMap,rp=new WeakMap,sp=new WeakSet;class ap{constructor(e,t,n,i,r){let{x:s,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;wn(this,sp),Sn(this,Vf,void 0),Sn(this,qf,[]),Sn(this,Xf,void 0),Sn(this,Yf,void 0),Sn(this,Kf,[]),Sn(this,Qf,new Float64Array(18)),Sn(this,Jf,void 0),Sn(this,Zf,void 0),Sn(this,ep,void 0),Sn(this,tp,void 0),Sn(this,np,void 0),Sn(this,ip,void 0),Sn(this,rp,[]),An(Vf,this,t),An(ip,this,i*n),An(Yf,this,r),kn(Qf,this).set([NaN,NaN,NaN,NaN,s,a],6),An(Xf,this,o),An(tp,this,pp._*n),An(ep,this,gp._*n),An(np,this,n),kn(rp,this).push(s,a)}isEmpty(){return isNaN(kn(Qf,this)[8])}add(e){var t;let{x:n,y:i}=e;An(Jf,this,n),An(Zf,this,i);const[r,s,a,o]=kn(Vf,this);let[l,c,d,u]=kn(Qf,this).subarray(8,12);const h=n-d,f=i-u,p=Math.hypot(h,f);if(p<kn(ep,this))return!1;const g=p-kn(tp,this),m=g/p,v=m*h,y=m*f;let b=l,x=c;l=d,c=u,d+=v,u+=y,null===(t=kn(rp,this))||void 0===t||t.push(n,i);const w=v/g,S=-y/g*kn(ip,this),C=w*kn(ip,this);if(kn(Qf,this).set(kn(Qf,this).subarray(2,8),0),kn(Qf,this).set([d+S,u+C],4),kn(Qf,this).set(kn(Qf,this).subarray(14,18),12),kn(Qf,this).set([d-S,u-C],16),isNaN(kn(Qf,this)[6]))return 0===kn(Kf,this).length&&(kn(Qf,this).set([l+S,c+C],2),kn(Kf,this).push(NaN,NaN,NaN,NaN,(l+S-r)/a,(c+C-s)/o),kn(Qf,this).set([l-S,c-C],14),kn(qf,this).push(NaN,NaN,NaN,NaN,(l-S-r)/a,(c-C-s)/o)),kn(Qf,this).set([b,x,l,c,d,u],6),!this.isEmpty();kn(Qf,this).set([b,x,l,c,d,u],6);return Math.abs(Math.atan2(x-c,b-l)-Math.atan2(y,v))<Math.PI/2?([l,c,d,u]=kn(Qf,this).subarray(2,6),kn(Kf,this).push(NaN,NaN,NaN,NaN,((l+d)/2-r)/a,((c+u)/2-s)/o),[l,c,b,x]=kn(Qf,this).subarray(14,18),kn(qf,this).push(NaN,NaN,NaN,NaN,((b+l)/2-r)/a,((x+c)/2-s)/o),!0):([b,x,l,c,d,u]=kn(Qf,this).subarray(0,6),kn(Kf,this).push(((b+5*l)/6-r)/a,((x+5*c)/6-s)/o,((5*l+d)/6-r)/a,((5*c+u)/6-s)/o,((l+d)/2-r)/a,((c+u)/2-s)/o),[d,u,l,c,b,x]=kn(Qf,this).subarray(12,18),kn(qf,this).push(((b+5*l)/6-r)/a,((x+5*c)/6-s)/o,((5*l+d)/6-r)/a,((5*c+u)/6-s)/o,((l+d)/2-r)/a,((c+u)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=kn(Kf,this),t=kn(qf,this);if(isNaN(kn(Qf,this)[6])&&!this.isEmpty())return Cn(sp,this,lp).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push("L".concat(e[i+4]," ").concat(e[i+5])):n.push("C".concat(e[i]," ").concat(e[i+1]," ").concat(e[i+2]," ").concat(e[i+3]," ").concat(e[i+4]," ").concat(e[i+5]));Cn(sp,this,dp).call(this,n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push("L".concat(t[i+4]," ").concat(t[i+5])):n.push("C".concat(t[i]," ").concat(t[i+1]," ").concat(t[i+2]," ").concat(t[i+3]," ").concat(t[i+4]," ").concat(t[i+5]));return Cn(sp,this,cp).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,i,r,s){return new _p(e,t,n,i,r,s)}getOutlines(){var e,t;const n=kn(Kf,this),i=kn(qf,this),r=kn(Qf,this),[s,a,o,l]=kn(Vf,this),c=new Float64Array((null!==(e=null===(t=kn(rp,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,f=c.length-2;h<f;h+=2)c[h]=(kn(rp,this)[h]-s)/o,c[h+1]=(kn(rp,this)[h+1]-a)/l;if(c[c.length-2]=(kn(Jf,this)-s)/o,c[c.length-1]=(kn(Zf,this)-a)/l,isNaN(r[6])&&!this.isEmpty())return Cn(sp,this,up).call(this,c);const d=new Float64Array(kn(Kf,this).length+24+kn(qf,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=Cn(sp,this,fp).call(this,d,u);for(let h=i.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(i[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=i[h+e],d[u+1]=i[h+e+1],u+=2);return Cn(sp,this,hp).call(this,d,u),this.newFreeDrawOutline(d,c,kn(Vf,this),kn(np,this),kn(Xf,this),kn(Yf,this))}}function op(){const e=kn(Qf,this).subarray(4,6),t=kn(Qf,this).subarray(16,18),[n,i,r,s]=kn(Vf,this);return[(kn(Jf,this)+(e[0]-t[0])/2-n)/r,(kn(Zf,this)+(e[1]-t[1])/2-i)/s,(kn(Jf,this)+(t[0]-e[0])/2-n)/r,(kn(Zf,this)+(t[1]-e[1])/2-i)/s]}function lp(){const[e,t,n,i]=kn(Vf,this),[r,s,a,o]=Cn(sp,this,op).call(this);return"M".concat((kn(Qf,this)[2]-e)/n," ").concat((kn(Qf,this)[3]-t)/i," L").concat((kn(Qf,this)[4]-e)/n," ").concat((kn(Qf,this)[5]-t)/i," L").concat(r," ").concat(s," L").concat(a," ").concat(o," L").concat((kn(Qf,this)[16]-e)/n," ").concat((kn(Qf,this)[17]-t)/i," L").concat((kn(Qf,this)[14]-e)/n," ").concat((kn(Qf,this)[15]-t)/i," Z")}function cp(e){const t=kn(qf,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function dp(e){const[t,n,i,r]=kn(Vf,this),s=kn(Qf,this).subarray(4,6),a=kn(Qf,this).subarray(16,18),[o,l,c,d]=Cn(sp,this,op).call(this);e.push("L".concat((s[0]-t)/i," ").concat((s[1]-n)/r," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((a[0]-t)/i," ").concat((a[1]-n)/r))}function up(e){const t=kn(Qf,this),[n,i,r,s]=kn(Vf,this),[a,o,l,c]=Cn(sp,this,op).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/r,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-n)/r,(t[5]-i)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/r,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-n)/r,(t[15]-i)/s],0),this.newFreeDrawOutline(d,e,kn(Vf,this),kn(np,this),kn(Xf,this),kn(Yf,this))}function hp(e,t){const n=kn(qf,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function fp(e,t){const n=kn(Qf,this).subarray(4,6),i=kn(Qf,this).subarray(16,18),[r,s,a,o]=kn(Vf,this),[l,c,d,u]=Cn(sp,this,op).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-s)/o],t),t+24}var pp={_:8},gp={_:pp._+2},mp=new WeakMap,vp=new WeakMap,yp=new WeakMap,bp=new WeakMap,xp=new WeakMap,wp=new WeakMap,Sp=new WeakMap,Cp=new WeakSet;class _p extends Gf{constructor(e,t,n,i,r,s){super(),wn(this,Cp),Sn(this,mp,void 0),Sn(this,vp,null),Sn(this,yp,void 0),Sn(this,bp,void 0),Sn(this,xp,void 0),Sn(this,wp,void 0),Sn(this,Sp,void 0),An(Sp,this,e),An(xp,this,t),An(mp,this,n),An(wp,this,i),An(yp,this,r),An(bp,this,s),Cn(Cp,this,Ep).call(this,s);const{x:a,y:o,width:l,height:c}=kn(vp,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-a)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-a)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(kn(Sp,this)[4]," ").concat(kn(Sp,this)[5])];for(let t=6,n=kn(Sp,this).length;t<n;t+=6)isNaN(kn(Sp,this)[t])?e.push("L".concat(kn(Sp,this)[t+4]," ").concat(kn(Sp,this)[t+5])):e.push("C".concat(kn(Sp,this)[t]," ").concat(kn(Sp,this)[t+1]," ").concat(kn(Sp,this)[t+2]," ").concat(kn(Sp,this)[t+3]," ").concat(kn(Sp,this)[t+4]," ").concat(kn(Sp,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const a=r-n,o=s-i;let l,c;switch(t){case 0:l=Cn(Cp,this,kp).call(this,kn(Sp,this),n,s,a,-o),c=Cn(Cp,this,kp).call(this,kn(xp,this),n,s,a,-o);break;case 90:l=Cn(Cp,this,Ap).call(this,kn(Sp,this),n,i,a,o),c=Cn(Cp,this,Ap).call(this,kn(xp,this),n,i,a,o);break;case 180:l=Cn(Cp,this,kp).call(this,kn(Sp,this),r,i,-a,o),c=Cn(Cp,this,kp).call(this,kn(xp,this),r,i,-a,o);break;case 270:l=Cn(Cp,this,Ap).call(this,kn(Sp,this),r,s,-a,-o),c=Cn(Cp,this,Ap).call(this,kn(xp,this),r,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return kn(vp,this)}newOutliner(e,t,n,i,r){return new ap(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const{x:n,y:i,width:r,height:s}=kn(vp,this),[a,o,l,c]=kn(mp,this),d=r*l,u=s*c,h=n*l+a,f=i*c+o,p=this.newOutliner({x:kn(xp,this)[0]*d+h,y:kn(xp,this)[1]*u+f},kn(mp,this),kn(wp,this),e,kn(bp,this),null!==t&&void 0!==t?t:kn(yp,this));for(let g=2;g<kn(xp,this).length;g+=2)p.add({x:kn(xp,this)[g]*d+h,y:kn(xp,this)[g+1]*u+f});return p.getOutlines()}get mustRemoveSelfIntersections(){return!0}}function kp(e,t,n,i,r){const s=new Float64Array(e.length);for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a]*i,s[a+1]=n+e[a+1]*r;return s}function Ap(e,t,n,i,r){const s=new Float64Array(e.length);for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a+1]*i,s[a+1]=n+e[a]*r;return s}function Ep(e){const t=kn(Sp,this);let n=t[4],i=t[5],r=n,s=i,a=n,o=i,l=n,c=i;const d=e?Math.max:Math.min;for(let g=6,m=t.length;g<m;g+=6){if(isNaN(t[g]))r=Math.min(r,t[g+4]),s=Math.min(s,t[g+5]),a=Math.max(a,t[g+4]),o=Math.max(o,t[g+5]),c<t[g+5]?(l=t[g+4],c=t[g+5]):c===t[g+5]&&(l=d(l,t[g+4]));else{const e=rr.bezierBoundingBox(n,i,...t.slice(g,g+6));r=Math.min(r,e[0]),s=Math.min(s,e[1]),a=Math.max(a,e[2]),o=Math.max(o,e[3]),c<e[3]?(l=e[2],c=e[3]):c===e[3]&&(l=d(l,e[2]))}n=t[g+4],i=t[g+5]}const u=r-kn(yp,this),h=s-kn(yp,this),f=a-r+2*kn(yp,this),p=o-s+2*kn(yp,this);An(vp,this,{x:u,y:h,width:f,height:p,lastPoint:[l,c]})}var jp=new WeakMap,Tp=new WeakMap,Op=new WeakMap,Mp=new WeakSet;class Pp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];wn(this,Mp),Sn(this,jp,void 0),Sn(this,Tp,[]),Sn(this,Op,[]);let r=1/0,s=-1/0,a=1/0,o=-1/0;const l=10**-4;for(const{x:g,y:m,width:v,height:y}of e){const e=Math.floor((g-t)/l)*l,n=Math.ceil((g+v+t)/l)*l,i=Math.floor((m-t)/l)*l,c=Math.ceil((m+y+t)/l)*l,d=[e,i,c,!0],u=[n,i,c,!1];kn(Tp,this).push(d,u),r=Math.min(r,e),s=Math.max(s,n),a=Math.min(a,i),o=Math.max(o,c)}const c=s-r+2*n,d=o-a+2*n,u=r-n,h=a-n,f=kn(Tp,this).at(i?-1:-2),p=[f[0],f[2]];for(const g of kn(Tp,this)){const[e,t,n]=g;g[0]=(e-u)/c,g[1]=(t-h)/d,g[2]=(n-h)/d}An(jp,this,{x:u,y:h,width:c,height:d,lastPoint:p})}getOutlines(){kn(Tp,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of kn(Tp,this))t[3]?(e.push(...Cn(Mp,this,Ip).call(this,t)),Cn(Mp,this,Dp).call(this,t)):(Cn(Mp,this,Lp).call(this,t),e.push(...Cn(Mp,this,Ip).call(this,t)));return Cn(Mp,this,Np).call(this,e)}}function Np(e){const t=[],n=new Set;for(const s of e){const[e,n,i]=s;t.push([e,n,s],[e,i,s])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let s=0,a=t.length;s<a;s+=2){const e=t[s][2],i=t[s+1][2];e.push(i),i.push(e),n.add(e),n.add(i)}const i=[];let r;for(;n.size>0;){const e=n.values().next().value;let[t,s,a,o,l]=e;n.delete(e);let c=t,d=s;for(r=[t,a],i.push(r);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,s,a,o,l]=e,c!==t&&(r.push(c,d,t,d===s?s:a),c=t),d=d===s?a:s}r.push(c,d)}return new Bp(i,kn(jp,this))}function $p(e){const t=kn(Op,this);let n=0,i=t.length-1;for(;n<=i;){const r=n+i>>1,s=t[r][0];if(s===e)return r;s<e?n=r+1:i=r-1}return i+1}function Dp(e){let[,t,n]=e;const i=Cn(Mp,this,$p).call(this,t);kn(Op,this).splice(i,0,[t,n])}function Lp(e){let[,t,n]=e;const i=Cn(Mp,this,$p).call(this,t);for(let r=i;r<kn(Op,this).length;r++){const[e,i]=kn(Op,this)[r];if(e!==t)break;if(e===t&&i===n)return void kn(Op,this).splice(r,1)}for(let r=i-1;r>=0;r--){const[e,i]=kn(Op,this)[r];if(e!==t)break;if(e===t&&i===n)return void kn(Op,this).splice(r,1)}}function Ip(e){const[t,n,i]=e,r=[[t,n,i]],s=Cn(Mp,this,$p).call(this,i);for(let a=0;a<s;a++){const[e,n]=kn(Op,this)[a];for(let i=0,s=r.length;i<s;i++){const[,a,o]=r[i];if(!(n<=a||o<=e))if(a>=e)if(o>n)r[i][1]=n;else{if(1===s)return[];r.splice(i,1),i--,s--}else r[i][2]=e,o>n&&r.push([t,n,o])}}return r}var Fp=new WeakMap,Rp=new WeakMap;class Bp extends Gf{constructor(e,t){super(),Sn(this,Fp,void 0),Sn(this,Rp,void 0),An(Rp,this,e),An(Fp,this,t)}toSVGPath(){const e=[];for(const t of kn(Rp,this)){let[n,i]=t;e.push("M".concat(n," ").concat(i));for(let r=2;r<t.length;r+=2){const s=t[r],a=t[r+1];s===n?(e.push("V".concat(a)),i=a):a===i&&(e.push("H".concat(s)),n=s)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,i,r,s]=e;const a=[],o=r-n,l=s-i;for(const c of kn(Rp,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=s-c[t+1]*l;a.push(e)}return a}get box(){return kn(Fp,this)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}class Wp extends ap{newFreeDrawOutline(e,t,n,i,r,s){return new zp(e,t,n,i,r,s)}get classNamesForDrawing(){return["highlight","free"]}}class zp extends _p{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,n,i,r){return new Wp(e,t,n,i,r,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var Hp=new WeakMap,Up=new WeakMap,Gp=new WeakMap,Vp=new WeakMap,qp=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,Kp=new WeakMap,Qp=new WeakMap,Jp=new WeakMap,Zp=new WeakMap,eg=new WeakSet;class tg{static get _keyboardManager(){return Ui(this,"_keyboardManager",new _s([[["Escape","mac+Escape"],tg.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],tg.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],tg.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],tg.prototype._moveToPrevious],[["Home","mac+Home"],tg.prototype._moveToBeginning],[["End","mac+End"],tg.prototype._moveToEnd]]))}constructor(e){var t;let{editor:n=null,uiManager:i=null}=e;wn(this,eg),Sn(this,Hp,null),Sn(this,Up,null),Sn(this,Gp,void 0),Sn(this,Vp,null),Sn(this,qp,!1),Sn(this,Xp,!1),Sn(this,Yp,null),Sn(this,Kp,void 0),Sn(this,Qp,null),Sn(this,Jp,null),Sn(this,Zp,void 0),n?(An(Xp,this,!1),An(Zp,this,ti.HIGHLIGHT_COLOR),An(Yp,this,n)):(An(Xp,this,!0),An(Zp,this,ti.HIGHLIGHT_DEFAULT_COLOR)),An(Jp,this,(null===n||void 0===n?void 0:n._uiManager)||i),An(Kp,this,kn(Jp,this)._eventBus),An(Gp,this,(null===n||void 0===n?void 0:n.color)||(null===(t=kn(Jp,this))||void 0===t?void 0:t.highlightColors.values().next().value)||"#FFFF98"),lg._||(lg._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=An(Hp,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=kn(Jp,this)._signal;e.addEventListener("click",Cn(eg,this,sg).bind(this),{signal:t}),e.addEventListener("keydown",Cn(eg,this,rg).bind(this),{signal:t});const n=An(Up,this,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=kn(Gp,this),e.append(n),e}renderMainDropdown(){const e=An(Vp,this,Cn(eg,this,ng).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===kn(Hp,this))return void Cn(eg,this,sg).call(this,e);const t=e.target.getAttribute("data-color");t&&Cn(eg,this,ig).call(this,t,e)}_moveToNext(e){var t,n;_n(eg,this,og)?e.target!==kn(Hp,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=kn(Vp,this).firstChild)||void 0===n||n.focus():Cn(eg,this,sg).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=kn(Vp,this))||void 0===t?void 0:t.firstChild)&&e.target!==kn(Hp,this)?(_n(eg,this,og)||Cn(eg,this,sg).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):_n(eg,this,og)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;_n(eg,this,og)?null===(t=kn(Vp,this).firstChild)||void 0===t||t.focus():Cn(eg,this,sg).call(this,e)}_moveToEnd(e){var t;_n(eg,this,og)?null===(t=kn(Vp,this).lastChild)||void 0===t||t.focus():Cn(eg,this,sg).call(this,e)}hideDropdown(){var e,t;null===(e=kn(Vp,this))||void 0===e||e.classList.add("hidden"),null===(t=kn(Qp,this))||void 0===t||t.abort(),An(Qp,this,null)}_hideDropdownFromKeyboard(){var e;kn(Xp,this)||(_n(eg,this,og)?(this.hideDropdown(),kn(Hp,this).focus({preventScroll:!0,focusVisible:kn(qp,this)})):null===(e=kn(Yp,this))||void 0===e||e.unselect())}updateColor(e){if(kn(Up,this)&&(kn(Up,this).style.backgroundColor=e),!kn(Vp,this))return;const t=kn(Jp,this).highlightColors.values();for(const n of kn(Vp,this).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null===(e=kn(Hp,this))||void 0===e||e.remove(),An(Hp,this,null),An(Up,this,null),null===(t=kn(Vp,this))||void 0===t||t.remove(),An(Vp,this,null)}}function ng(){const e=document.createElement("div"),t=kn(Jp,this)._signal;e.addEventListener("contextmenu",Mr,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,i]of kn(Jp,this).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=n,r.setAttribute("data-l10n-id",lg._[n]);const s=document.createElement("span");r.append(s),s.className="swatch",s.style.backgroundColor=i,r.setAttribute("aria-selected",i===kn(Gp,this)),r.addEventListener("click",Cn(eg,this,ig).bind(this,i),{signal:t}),e.append(r)}return e.addEventListener("keydown",Cn(eg,this,rg).bind(this),{signal:t}),e}function ig(e,t){t.stopPropagation(),kn(Kp,this).dispatch("switchannotationeditorparams",{source:this,type:kn(Zp,this),value:e})}function rg(e){$n._keyboardManager.exec(this,e)}function sg(e){if(_n(eg,this,og))return void this.hideDropdown();if(An(qp,this,0===e.detail),kn(Qp,this)||(An(Qp,this,new AbortController),window.addEventListener("pointerdown",Cn(eg,this,ag).bind(this),{signal:kn(Jp,this).combinedSignal(kn(Qp,this))})),kn(Vp,this))return void kn(Vp,this).classList.remove("hidden");const t=An(Vp,this,Cn(eg,this,ng).call(this));kn(Hp,this).append(t)}function ag(e){var t;null!==(t=kn(Vp,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function og(e){return kn(Vp,e)&&!kn(Vp,e).classList.contains("hidden")}$n=tg;var lg={_:null},cg=new WeakMap,dg=new WeakMap,ug=new WeakMap,hg=new WeakMap,fg=new WeakMap,pg=new WeakMap,gg=new WeakMap,mg=new WeakMap,vg=new WeakMap,yg=new WeakMap,bg=new WeakMap,xg=new WeakMap,wg=new WeakMap,Sg=new WeakMap,Cg=new WeakMap,_g=new WeakMap,kg=new WeakMap,Ag=new WeakMap,Eg=new WeakSet;class jg extends So{static get _keyboardManager(){const e=jg.prototype;return Ui(this,"_keyboardManager",new _s([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super(c(c({},e),{},{name:"highlightEditor"})),wn(this,Eg),Sn(this,cg,null),Sn(this,dg,0),Sn(this,ug,void 0),Sn(this,hg,null),Sn(this,fg,null),Sn(this,pg,null),Sn(this,gg,null),Sn(this,mg,0),Sn(this,vg,null),Sn(this,yg,null),Sn(this,bg,null),Sn(this,xg,!1),Sn(this,wg,null),Sn(this,Sg,void 0),Sn(this,Cg,null),Sn(this,_g,""),Sn(this,kg,void 0),Sn(this,Ag,""),this.color=e.color||jg._defaultColor,An(kg,this,e.thickness||jg._defaultThickness),An(Sg,this,e.opacity||jg._defaultOpacity),An(ug,this,e.boxes||null),An(Ag,this,e.methodOfCreation||""),An(_g,this,e.text||""),this._isDraggable=!1,e.highlightId>-1?(An(xg,this,!0),Cn(Eg,this,Og).call(this,e),Cn(Eg,this,Dg).call(this)):kn(ug,this)&&(An(cg,this,e.anchorNode),An(dg,this,e.anchorOffset),An(gg,this,e.focusNode),An(mg,this,e.focusOffset),Cn(Eg,this,Tg).call(this),Cn(Eg,this,Dg).call(this),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:kn(xg,this)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:kn(kg,this),methodOfCreation:kn(Ag,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;So.initialize(e,t),jg._defaultColor||(jg._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case ti.HIGHLIGHT_DEFAULT_COLOR:jg._defaultColor=t;break;case ti.HIGHLIGHT_THICKNESS:jg._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return kn(wg,this)}updateParams(e,t){switch(e){case ti.HIGHLIGHT_COLOR:Cn(Eg,this,Mg).call(this,t);break;case ti.HIGHLIGHT_THICKNESS:Cn(Eg,this,Pg).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ti.HIGHLIGHT_DEFAULT_COLOR,jg._defaultColor],[ti.HIGHLIGHT_THICKNESS,jg._defaultThickness]]}get propertiesToUpdate(){return[[ti.HIGHLIGHT_COLOR,this.color||jg._defaultColor],[ti.HIGHLIGHT_THICKNESS,kn(kg,this)||jg._defaultThickness],[ti.HIGHLIGHT_FREE,kn(xg,this)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(An(fg,this,new tg({editor:this})),e.addColorPicker(kn(fg,this))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(Cn(Eg,this,Rg).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,Cn(Eg,this,Rg).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){Cn(Eg,this,$g).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(Cn(Eg,this,Dg).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)Cn(Eg,this,$g).call(this);else if(e){var n;Cn(Eg,this,Dg).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;kn(xg,this)?(e=(e-this.rotation+360)%360,n=Lg.call(jg,kn(yg,this).box,e)):n=Lg.call(jg,this,e),t.rotate(kn(bg,this),e),t.rotate(kn(Cg,this),e),t.updateBox(kn(bg,this),n),t.updateBox(kn(Cg,this),Lg.call(jg,kn(pg,this).box,e))}render(){if(this.div)return this.div;const e=super.render();kn(_g,this)&&(e.setAttribute("aria-label",kn(_g,this)),e.setAttribute("role","mark")),kn(xg,this)?e.classList.add("free"):this.div.addEventListener("keydown",Cn(Eg,this,Ig).bind(this),{signal:this._uiManager._signal});const t=An(vg,this,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=kn(hg,this);const[n,i]=this.parentDimensions;return this.setDims(this.width*n,this.height*i),cs(this,kn(vg,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(kn(Cg,this),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(kn(Cg,this),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:Cn(Eg,this,Fg).call(this,!0);break;case 1:case 3:Cn(Eg,this,Fg).call(this,!1)}}select(){var e,t;super.select(),kn(Cg,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(kn(Cg,this),"hovered"),null===(t=this.parent)||void 0===t||t.drawLayer.addClass(kn(Cg,this),"selected"))}unselect(){var e;super.unselect(),kn(Cg,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.removeClass(kn(Cg,this),"selected"),kn(xg,this)||Cn(Eg,this,Fg).call(this,!1))}get _mustFixPosition(){return!kn(xg,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.show(kn(bg,this),e),this.parent.drawLayer.show(kn(Cg,this),e))}static startHighlighting(e,t,n){let{target:i,x:r,y:s}=n;const{x:a,y:o,width:l,height:c}=i.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),Cn(jg,this,Hg).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",e=>{e.preventDefault(),e.stopPropagation()},{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Mr,{signal:u}),i.addEventListener("pointermove",Cn(jg,this,zg).bind(this,e),{signal:u}),this._freeHighlight=new Wp({x:r,y:s},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0))}static async deserialize(e,t,n){let i=null;if(e instanceof uf){const{data:{quadPoints:t,rect:n,rotation:r,id:s,color:a,opacity:o,popupRef:l},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:ei.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:r,id:s,deleted:!1,popupRef:l}}else if(e instanceof df){const{data:{inkLists:t,rect:n,rotation:r,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l},parent:{page:{pageNumber:c}}}=e;i=e={annotationType:ei.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:c-1,rect:n.slice(0),rotation:r,id:s,deleted:!1,popupRef:l}}const{color:r,quadPoints:s,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=rr.makeHexColor(...r),An(Sg,l,o||1),a&&An(kg,l,e.thickness),l.annotationElementId=e.id||null,l._initialData=i;const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(s){const e=An(ug,l,[]);for(let t=0;t<s.length;t+=8)e.push({x:(s[t]-u)/c,y:1-(s[t+1]-h)/d,width:(s[t+2]-s[t])/c,height:(s[t+1]-s[t+5])/d});Cn(Eg,l,Tg).call(l),Cn(Eg,l,Dg).call(l),l.rotate(l.rotation)}else if(a){An(xg,l,!0);const e=a[0],n={x:e[0]-u,y:d-(e[1]-h)},i=new Wp(n,[0,0,c,d],1,kn(kg,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),i.add(n);const{id:r,clipPathId:s}=t.drawLayer.draw(i,l.color,l._defaultOpacity,!0);Cn(Eg,l,Og).call(l,{highlightOutlines:i.getOutlines(),highlightId:r,clipPathId:s}),Cn(Eg,l,Dg).call(l)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),n=So._colorManager.convert(this.color),i={annotationType:ei.HIGHLIGHT,color:n,opacity:kn(Sg,this),thickness:kn(kg,this),quadPoints:Cn(Eg,this,Bg).call(this),outlines:Cn(Eg,this,Wg).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:Cn(Eg,this,Rg).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!Cn(Eg,this,Ug).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}function Tg(){const e=new Pp(kn(ug,this),.001);An(yg,this,e.getOutlines()),({x:this.x,y:this.y,width:this.width,height:this.height}=kn(yg,this).box);const t=new Pp(kn(ug,this),.0025,.001,"ltr"===this._uiManager.direction);An(pg,this,t.getOutlines());const{lastPoint:n}=kn(pg,this).box;An(wg,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])}function Og(e){let{highlightOutlines:t,highlightId:n,clipPathId:i}=e;An(yg,this,t);if(An(pg,this,t.getNewOutline(kn(kg,this)/2+1.5,.0025)),n>=0)An(bg,this,n),An(hg,this,i),this.parent.drawLayer.finalizeLine(n,t),An(Cg,this,this.parent.drawLayer.drawOutline(kn(pg,this)));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(kn(bg,this),t),this.parent.drawLayer.updateBox(kn(bg,this),Lg.call(Dn,kn(yg,this).box,(e-this.rotation+360)%360)),this.parent.drawLayer.updateLine(kn(Cg,this),kn(pg,this)),this.parent.drawLayer.updateBox(kn(Cg,this),Lg.call(Dn,kn(pg,this).box,e))}const{x:r,y:s,width:a,height:o}=t.box;switch(this.rotation){case 0:this.x=r,this.y=s,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=s,this.y=1-r,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-r,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-s,this.y=r,this.width=a*t/e,this.height=o*e/t;break}}const{lastPoint:l}=kn(pg,this).box;An(wg,this,[(l[0]-r)/a,(l[1]-s)/o])}function Mg(e){const t=(e,t)=>{var n,i,r;this.color=e,null===(n=this.parent)||void 0===n||n.drawLayer.changeColor(kn(bg,this),e),null===(i=kn(fg,this))||void 0===i||i.updateColor(e),An(Sg,this,t),null===(r=this.parent)||void 0===r||r.drawLayer.changeOpacity(kn(bg,this),t)},n=this.color,i=kn(Sg,this);this.addCommands({cmd:t.bind(this,e,Dn._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}function Pg(e){const t=kn(kg,this),n=e=>{An(kg,this,e),Cn(Eg,this,Ng).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function Ng(e){if(!kn(xg,this))return;Cn(Eg,this,Og).call(this,{highlightOutlines:kn(yg,this).getNewOutline(e/2)}),this.fixAndSetPosition();const[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)}function $g(){null!==kn(bg,this)&&this.parent&&(this.parent.drawLayer.remove(kn(bg,this)),An(bg,this,null),this.parent.drawLayer.remove(kn(Cg,this)),An(Cg,this,null))}function Dg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===kn(bg,this)&&(({id:bn(An,[bg,this])._,clipPathId:bn(An,[hg,this])._}=e.drawLayer.draw(kn(yg,this),this.color,kn(Sg,this))),An(Cg,this,e.drawLayer.drawOutline(kn(pg,this))),kn(vg,this)&&(kn(vg,this).style.clipPath=kn(hg,this)))}function Lg(e,t){let{x:n,y:i,width:r,height:s}=e;switch(t){case 90:return{x:1-i-s,y:n,width:s,height:r};case 180:return{x:1-n-r,y:1-i-s,width:r,height:s};case 270:return{x:i,y:1-n-r,width:s,height:r}}return{x:n,y:i,width:r,height:s}}function Ig(e){Dn._keyboardManager.exec(this,e)}function Fg(e){if(!kn(cg,this))return;const t=window.getSelection();e?t.setPosition(kn(cg,this),kn(dg,this)):t.setPosition(kn(gg,this),kn(mg,this))}function Rg(){return kn(xg,this)?this.rotation:0}function Bg(){if(kn(xg,this))return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,r=kn(ug,this),s=new Float32Array(8*r.length);let a=0;for(const{x:o,y:l,width:c,height:d}of r){const r=o*e+n,u=(1-l-d)*t+i;s[a]=s[a+4]=r,s[a+1]=s[a+3]=u,s[a+2]=s[a+6]=r+c*e,s[a+5]=s[a+7]=u+d*t,a+=8}return s}function Wg(e){return kn(yg,this).serialize(e,Cn(Eg,this,Rg).call(this))}function zg(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)}function Hg(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Ug(e){const{color:t}=this._initialData;return e.color.some((e,n)=>e!==t[n])}Dn=jg,o(jg,"_defaultColor",null),o(jg,"_defaultOpacity",1),o(jg,"_defaultThickness",12),o(jg,"_type","highlight"),o(jg,"_editorType",ei.HIGHLIGHT),o(jg,"_freeHighlightId",-1),o(jg,"_freeHighlight",null),o(jg,"_freeHighlightClipId","");var Gg=new WeakMap,Vg=new WeakMap,qg=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,Kg=new WeakMap,Qg=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,em=new WeakMap,tm=new WeakMap,nm=new WeakMap,im=new WeakMap,rm=new WeakSet;class sm extends So{constructor(e){super(c(c({},e),{},{name:"inkEditor"})),wn(this,rm),Sn(this,Gg,0),Sn(this,Vg,0),Sn(this,qg,null),Sn(this,Xg,new Path2D),Sn(this,Yg,!1),Sn(this,Kg,null),Sn(this,Qg,!1),Sn(this,Jg,!1),Sn(this,Zg,null),Sn(this,em,null),Sn(this,tm,0),Sn(this,nm,0),Sn(this,im,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){So.initialize(e,t)}static updateDefaultParams(e,t){switch(e){case ti.INK_THICKNESS:sm._defaultThickness=t;break;case ti.INK_COLOR:sm._defaultColor=t;break;case ti.INK_OPACITY:sm._defaultOpacity=t/100}}updateParams(e,t){switch(e){case ti.INK_THICKNESS:Cn(rm,this,am).call(this,t);break;case ti.INK_COLOR:Cn(rm,this,om).call(this,t);break;case ti.INK_OPACITY:Cn(rm,this,lm).call(this,t)}}static get defaultPropertiesToUpdate(){return[[ti.INK_THICKNESS,sm._defaultThickness],[ti.INK_COLOR,sm._defaultColor||So._defaultLineColor],[ti.INK_OPACITY,Math.round(100*sm._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[ti.INK_THICKNESS,this.thickness||sm._defaultThickness],[ti.INK_COLOR,this.color||sm._defaultColor||So._defaultLineColor],[ti.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:sm._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(Cn(rm,this,Sm).call(this),Cn(rm,this,Cm).call(this)),this.isAttachedToDOM||(this.parent.add(this),Cn(rm,this,_m).call(this)),Cn(rm,this,Nm).call(this)))}remove(){var e;null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,kn(qg,this)&&(clearTimeout(kn(qg,this)),An(qg,this,null)),null===(e=kn(Zg,this))||void 0===e||e.disconnect(),An(Zg,this,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,i=this.height*t;this.setDimensions(n,i)}enableEditMode(){kn(Yg,this)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,Cn(rm,this,bm).call(this))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),Cn(rm,this,xm).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){kn(Yg,this)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),An(Yg,this,!0),this.div.classList.add("disabled"),Cn(rm,this,Nm).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!kn(Yg,this)&&(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),Cn(rm,this,um).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),Cn(rm,this,hm).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),Cn(rm,this,wm).call(this,e)}canvasPointerleave(e){Cn(rm,this,wm).call(this,e)}get isResizable(){return!this.isEmpty()&&kn(Yg,this)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,i,r,s]=Cn(rm,this,cm).call(this);if(this.setAt(n,i,0,0),this.setDims(r,s),Cn(rm,this,Sm).call(this),this.width){const[n,i]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*i),this.setAt(e*n,t*i,this.width*n,this.height*i),An(Jg,this,!0),Cn(rm,this,_m).call(this),this.setDims(this.width*n,this.height*i),Cn(rm,this,ym).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Cn(rm,this,Cm).call(this),this.div}setDimensions(e,t){const n=Math.round(e),i=Math.round(t);if(kn(tm,this)===n&&kn(nm,this)===i)return;An(tm,this,n),An(nm,this,i),this.canvas.style.visibility="hidden";const[r,s]=this.parentDimensions;this.width=e/r,this.height=t/s,this.fixAndSetPosition(),kn(Yg,this)&&Cn(rm,this,km).call(this,e,t),Cn(rm,this,_m).call(this),Cn(rm,this,ym).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,t,n){if(e instanceof df)return null;const i=await super.deserialize(e,t,n);i.thickness=e.thickness,i.color=rr.makeHexColor(...e.color),i.opacity=e.opacity;const[r,s]=i.pageDimensions,a=i.width*r,o=i.height*s,l=i.parentScale,c=e.thickness/2;An(Yg,i,!0),An(tm,i,Math.round(a)),An(nm,i,Math.round(o));const{paths:d,rect:u,rotation:h}=e;for(let{bezier:p}of d){p=Tm.call(sm,p,u,h);const e=[];i.paths.push(e);let t=l*(p[0]-c),n=l*(p[1]-c);for(let i=2,s=p.length;i<s;i+=6){const r=l*(p[i]-c),s=l*(p[i+1]-c),a=l*(p[i+2]-c),o=l*(p[i+3]-c),d=l*(p[i+4]-c),u=l*(p[i+5]-c);e.push([[t,n],[r,s],[a,o],[d,u]]),t=d,n=u}const r=Cn(sm,this,Em).call(this,e);i.bezierPath2D.push(r)}const f=Cn(rm,i,Mm).call(i);return An(Vg,i,Math.max(So.MIN_SIZE,f[2]-f[0])),An(Gg,i,Math.max(So.MIN_SIZE,f[3]-f[1])),Cn(rm,i,km).call(i,a,o),i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=So._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ei.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:Cn(rm,this,Om).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}function am(e){const t=e=>{this.thickness=e,Cn(rm,this,Nm).call(this)},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function om(e){const t=e=>{this.color=e,Cn(rm,this,ym).call(this)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function lm(e){const t=e=>{this.opacity=e,Cn(rm,this,ym).call(this)};e/=100;const n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ti.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function cm(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}function dm(){const{ctx:e,color:t,opacity:n,thickness:i,parentScale:r,scaleFactor:s}=this;e.lineWidth=i*r/s,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle="".concat(t).concat(function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")}(n))}function um(e,t){this.canvas.addEventListener("contextmenu",Mr,{signal:this._uiManager._signal}),Cn(rm,this,xm).call(this),An(Kg,this,new AbortController);const n=this._uiManager.combinedSignal(kn(Kg,this));var i;(this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:n}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:n}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:n}),this.isEditing=!0,kn(Jg,this))||(An(Jg,this,!0),Cn(rm,this,_m).call(this),this.thickness||(this.thickness=Ln._defaultThickness),this.color||(this.color=Ln._defaultColor||So._defaultLineColor),null!==(i=this.opacity)&&void 0!==i||(this.opacity=Ln._defaultOpacity));this.currentPath.push([e,t]),An(Qg,this,!1),Cn(rm,this,dm).call(this),An(im,this,()=>{Cn(rm,this,gm).call(this),kn(im,this)&&window.requestAnimationFrame(kn(im,this))}),window.requestAnimationFrame(kn(im,this))}function hm(e,t){const[n,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===i)return;const r=this.currentPath;let s=kn(Xg,this);if(r.push([e,t]),An(Qg,this,!0),r.length<=2)return s.moveTo(...r[0]),void s.lineTo(e,t);3===r.length&&(An(Xg,this,s=new Path2D),s.moveTo(...r[0])),Cn(rm,this,mm).call(this,s,...r.at(-3),...r.at(-2),e,t)}function fm(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);kn(Xg,this).lineTo(...e)}function pm(e,t){let n;if(An(im,this,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),Cn(rm,this,hm).call(this,e,t),Cn(rm,this,fm).call(this),1!==this.currentPath.length)n=Cn(rm,this,vm).call(this);else{const i=[e,t];n=[[i,i.slice(),i.slice(),i]]}const i=kn(Xg,this),r=this.currentPath;this.currentPath=[],An(Xg,this,new Path2D);this.addCommands({cmd:()=>{this.allRawPaths.push(r),this.paths.push(n),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(Cn(rm,this,Sm).call(this),Cn(rm,this,Cm).call(this)),Cn(rm,this,Nm).call(this))},mustExec:!0})}function gm(){if(!kn(Qg,this))return;An(Qg,this,!1);const e=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),n=t.map(e=>e[0]),i=t.map(e=>e[1]),{ctx:r}=(Math.min(...n),Math.max(...n),Math.min(...i),Math.max(...i),this);r.save(),r.clearRect(0,0,this.canvas.width,this.canvas.height);for(const s of this.bezierPath2D)r.stroke(s);r.stroke(kn(Xg,this)),r.restore()}function mm(e,t,n,i,r,s,a){const o=(t+i)/2,l=(n+r)/2,c=(i+s)/2,d=(r+a)/2;e.bezierCurveTo(o+2*(i-o)/3,l+2*(r-l)/3,c+2*(i-c)/3,d+2*(r-d)/3,c,d)}function vm(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[i,r]=e[0];for(n=1;n<e.length-2;n++){const[s,a]=e[n],[o,l]=e[n+1],c=(s+o)/2,d=(a+l)/2,u=[i+2*(s-i)/3,r+2*(a-r)/3],h=[c+2*(s-c)/3,d+2*(a-d)/3];t.push([[i,r],u,h,[c,d]]),[i,r]=[c,d]}const[s,a]=e[n],[o,l]=e[n+1],c=[i+2*(s-i)/3,r+2*(a-r)/3],d=[o+2*(s-o)/3,l+2*(a-l)/3];return t.push([[i,r],c,d,[o,l]]),t}function ym(){if(this.isEmpty())return void Cn(rm,this,Am).call(this);Cn(rm,this,dm).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),Cn(rm,this,Am).call(this);for(const n of this.bezierPath2D)t.stroke(n)}function bm(){if(kn(em,this))return;An(em,this,new AbortController);const e=this._uiManager.combinedSignal(kn(em,this));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})}function xm(){var e;null===(e=this.pointerdownAC)||void 0===e||e.abort(),this.pointerdownAC=null}function wm(e){var t;null===(t=kn(Kg,this))||void 0===t||t.abort(),An(Kg,this,null),Cn(rm,this,bm).call(this),kn(qg,this)&&clearTimeout(kn(qg,this)),An(qg,this,setTimeout(()=>{An(qg,this,null),this.canvas.removeEventListener("contextmenu",Mr)},10)),Cn(rm,this,pm).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}function Sm(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function Cm(){An(Zg,this,new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)})),kn(Zg,this).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;null===(e=kn(Zg,this))||void 0===e||e.disconnect(),An(Zg,this,null)},{once:!0})}function _m(){if(!kn(Jg,this))return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),Cn(rm,this,Am).call(this)}function km(e,t){const n=Cn(rm,this,Pm).call(this),i=(e-n)/kn(Vg,this),r=(t-n)/kn(Gg,this);this.scaleFactor=Math.min(i,r)}function Am(){const e=Cn(rm,this,Pm).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function Em(e){const t=new Path2D;for(let n=0,i=e.length;n<i;n++){const[i,r,s,a]=e[n];0===n&&t.moveTo(...i),t.bezierCurveTo(r[0],r[1],s[0],s[1],a[0],a[1])}return t}function jm(e,t,n){const[i,r,s,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=i,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+i,e[t+1]=n+r}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=s-e[t],e[t+1]+=r;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=s-e[t+1],e[t+1]=a-n}break;default:throw new Error("Invalid rotation")}return e}function Tm(e,t,n){const[i,r,s,a]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=i,e[t+1]=a-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-r,e[t+1]=n-i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=s-e[t],e[t+1]-=r;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=a-e[t+1],e[t+1]=s-n}break;default:throw new Error("Invalid rotation")}return e}function Om(e,t,n,i){const r=[],s=this.thickness/2,a=e*t+s,o=e*n+s;for(const l of this.paths){const t=[],n=[];for(let i=0,r=l.length;i<r;i++){const[s,c,d,u]=l[i];if(s[0]===u[0]&&s[1]===u[1]&&1===r){const i=e*s[0]+a,r=e*s[1]+o;t.push(i,r),n.push(i,r);break}const h=e*s[0]+a,f=e*s[1]+o,p=e*c[0]+a,g=e*c[1]+o,m=e*d[0]+a,v=e*d[1]+o,y=e*u[0]+a,b=e*u[1]+o;0===i&&(t.push(h,f),n.push(h,f)),t.push(p,g,m,v,y,b),n.push(p,g),i===r-1&&n.push(y,b)}r.push({bezier:jm.call(Ln,t,i,this.rotation),points:jm.call(Ln,n,i,this.rotation)})}return r}function Mm(){let e=1/0,t=-1/0,n=1/0,i=-1/0;for(const r of this.paths)for(const[s,a,o,l]of r){const r=rr.bezierBoundingBox(...s,...a,...o,...l);e=Math.min(e,r[0]),n=Math.min(n,r[1]),t=Math.max(t,r[2]),i=Math.max(i,r[3])}return[e,n,t,i]}function Pm(){return kn(Yg,this)?Math.ceil(this.thickness*this.parentScale):0}function Nm(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!kn(Yg,this))return void Cn(rm,this,ym).call(this);const t=Cn(rm,this,Mm).call(this),n=Cn(rm,this,Pm).call(this);An(Vg,this,Math.max(So.MIN_SIZE,t[2]-t[0])),An(Gg,this,Math.max(So.MIN_SIZE,t[3]-t[1]));const i=Math.ceil(n+kn(Vg,this)*this.scaleFactor),r=Math.ceil(n+kn(Gg,this)*this.scaleFactor),[s,a]=this.parentDimensions;this.width=i/s,this.height=r/a,this.setAspectRatio(i,r);const o=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],Cn(rm,this,_m).call(this),Cn(rm,this,ym).call(this),An(tm,this,i),An(nm,this,r),this.setDims(i,r);const c=e?n/this.scaleFactor/2:0;this.translate(o-this.translationX-c,l-this.translationY-c)}Ln=sm,o(sm,"_defaultColor",null),o(sm,"_defaultOpacity",1),o(sm,"_defaultThickness",1),o(sm,"_type","ink"),o(sm,"_editorType",ei.INK);var $m=new WeakMap,Dm=new WeakMap,Lm=new WeakMap,Im=new WeakMap,Fm=new WeakMap,Rm=new WeakMap,Bm=new WeakMap,Wm=new WeakMap,zm=new WeakMap,Hm=new WeakMap,Um=new WeakMap,Gm=new WeakSet;class Vm extends So{constructor(e){super(c(c({},e),{},{name:"stampEditor"})),wn(this,Gm),Sn(this,$m,null),Sn(this,Dm,null),Sn(this,Lm,null),Sn(this,Im,null),Sn(this,Fm,null),Sn(this,Rm,""),Sn(this,Bm,null),Sn(this,Wm,null),Sn(this,zm,null),Sn(this,Hm,!1),Sn(this,Um,!1),An(Im,this,e.bitmapUrl),An(Fm,this,e.bitmapFile)}static initialize(e,t){So.initialize(e,t)}static get supportedTypes(){return Ui(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>"image/".concat(e)))}static get supportedTypesStr(){return Ui(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ei.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const i=e.get("hasAltText");return{hasAltText:null!==(t=i.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=i.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:r,height:s}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:i,width:r,height:s,channels:i.length/(r*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e,t;kn(Dm,this)&&(An($m,this,null),this._uiManager.imageManager.deleteId(kn(Dm,this)),null===(e=kn(Bm,this))||void 0===e||e.remove(),An(Bm,this,null),null===(t=kn(Wm,this))||void 0===t||t.disconnect(),An(Wm,this,null),kn(zm,this)&&(clearTimeout(kn(zm,this)),An(zm,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(kn(Dm,this)&&null===kn(Bm,this)&&Cn(Gm,this,Ym).call(this),this.isAttachedToDOM||this.parent.add(this))):kn(Dm,this)&&Cn(Gm,this,Ym).call(this)}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(kn(Lm,this)||kn($m,this)||kn(Im,this)||kn(Fm,this)||kn(Dm,this))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),kn($m,this)?Cn(Gm,this,Km).call(this):Cn(Gm,this,Ym).call(this),this.width&&!this.annotationElementId){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i)}return this.div}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:i,height:r}=kn($m,this),s=new Br;let a=kn($m,this),o=i,l=r,c=null;if(t){var d,u;if(i>t||r>t){const e=Math.min(t/i,t/r);o=Math.floor(i*e),l=Math.floor(r*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);kn(Hm,this)||(a=Cn(Gm,this,Jm).call(this,e,n));const h=c.getContext("2d");h.filter=this._uiManager.hcmFilter;let f="white",p="#cfcfd8";"none"!==this._uiManager.hcmFilter?p="black":null!==(d=(u=window).matchMedia)&&void 0!==d&&d.call(u,"(prefers-color-scheme: dark)").matches&&(f="#8f8f9d",p="#42414d");const g=15,m=g*s.sx,v=g*s.sy,y=new OffscreenCanvas(2*m,2*v),b=y.getContext("2d");b.fillStyle=f,b.fillRect(0,0,2*m,2*v),b.fillStyle=p,b.fillRect(0,0,m,v),b.fillRect(m,v,m,v),h.fillStyle=h.createPattern(y,"repeat"),h.fillRect(0,0,e,n),h.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let h=null;if(n){let t,n;if(s.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=kn($m,this),i>e||r>e){const s=Math.min(e/i,e/r);t=Math.floor(i*s),n=Math.floor(r*s),kn(Hm,this)||(a=Cn(Gm,this,Jm).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),h={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:h}}getImageForAltText(){return kn(Bm,this)}static async deserialize(e,t,n){let i=null;if(e instanceof gf){var r;const{data:{rect:s,rotation:a,id:o,structParent:l,popupRef:c},container:d,parent:{page:{pageNumber:u}}}=e,h=d.querySelector("canvas"),f=n.imageManager.getFromCanvas(d.id,h);h.remove();const p=(null===(r=await t._structTree.getAriaAttributes("".concat(dr).concat(o)))||void 0===r?void 0:r.get("aria-label"))||"";i=e={annotationType:ei.STAMP,bitmapId:f.id,bitmap:f.bitmap,pageIndex:u-1,rect:s.slice(0),rotation:a,id:o,deleted:!1,accessibilityData:{decorative:!1,altText:p},isSvg:!1,structParent:l,popupRef:c}}const s=await super.deserialize(e,t,n),{rect:a,bitmap:o,bitmapUrl:l,bitmapId:c,isSvg:d,accessibilityData:u}=e;c&&n.imageManager.isValidId(c)?(An(Dm,s,c),o&&An($m,s,o)):An(Im,s,l),An(Hm,s,d);const[h,f]=s.pageDimensions;return s.width=(a[2]-a[0])/h,s.height=(a[3]-a[1])/f,s.annotationElementId=e.id||null,u&&(s.altTextData=u),s._initialData=i,An(Um,s,!!i),s}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:ei.STAMP,bitmapId:kn(Dm,this),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:kn(Hm,this),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=Cn(Gm,this,ev).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n;const{decorative:i,altText:r}=this.serializeAltText(!1);if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const e=Cn(Gm,this,nv).call(this,n);if(e.isSame)return null;var s;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1}if(n.id=this.annotationElementId,null===t)return n;t.stamps||(t.stamps=new Map);const a=kn(Hm,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(kn(Dm,this))){if(kn(Hm,this)){const e=t.stamps.get(kn(Dm,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=Cn(Gm,this,ev).call(this,!1))}}else t.stamps.set(kn(Dm,this),{area:a,serialized:n}),n.bitmap=Cn(Gm,this,ev).call(this,!1);return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}function qm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(An($m,this,e.bitmap),t||(An(Dm,this,e.id),An(Hm,this,e.isSvg)),e.file&&An(Rm,this,e.file.name),Cn(Gm,this,Km).call(this)):this.remove()}function Xm(){if(An(Lm,this,null),this._uiManager.enableWaiting(!1),kn(Bm,this)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&kn($m,this))return this._editToolbar.hide(),void this._uiManager.editAltText(this,!0);if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&kn($m,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function Ym(){if(kn(Dm,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(kn(Dm,this)).then(e=>Cn(Gm,this,qm).call(this,e,!0)).finally(()=>Cn(Gm,this,Xm).call(this));if(kn(Im,this)){const e=kn(Im,this);return An(Im,this,null),this._uiManager.enableWaiting(!0),void An(Lm,this,this._uiManager.imageManager.getFromUrl(e).then(e=>Cn(Gm,this,qm).call(this,e)).finally(()=>Cn(Gm,this,Xm).call(this)))}if(kn(Fm,this)){const e=kn(Fm,this);return An(Fm,this,null),this._uiManager.enableWaiting(!0),void An(Lm,this,this._uiManager.imageManager.getFromFile(e).then(e=>Cn(Gm,this,qm).call(this,e)).finally(()=>Cn(Gm,this,Xm).call(this)))}const e=document.createElement("input");e.type="file",e.accept=In.supportedTypesStr;const t=this._uiManager._signal;An(Lm,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),Cn(Gm,this,qm).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>Cn(Gm,this,Xm).call(this))),e.click()}function Km(){const{div:e}=this;let{width:t,height:n}=kn($m,this);const[i,r]=this.pageDimensions,s=.75;if(this.width)t=this.width*i,n=this.height*r;else if(t>s*i||n>s*r){const e=Math.min(s*i/t,s*r/n);t*=e,n*=e}const[a,o]=this.parentDimensions;this.setDims(t*a/i,n*o/r),this._uiManager.enableWaiting(!1);const l=An(Bm,this,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(e.hidden=!1),Cn(Gm,this,Zm).call(this,t,n),Cn(Gm,this,tv).call(this),kn(Um,this)||(this.parent.addUndoableEditor(this),An(Um,this,!0)),this._reportTelemetry({action:"inserted_image"}),kn(Rm,this)&&l.setAttribute("aria-label",kn(Rm,this))}function Qm(e,t){var n;const[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,null!==(n=this._initialOptions)&&void 0!==n&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==kn(zm,this)&&clearTimeout(kn(zm,this));An(zm,this,setTimeout(()=>{An(zm,this,null),Cn(Gm,this,Zm).call(this,e,t)},200))}function Jm(e,t){const{width:n,height:i}=kn($m,this);let r=n,s=i,a=kn($m,this);for(;r>2*e||s>2*t;){const n=r,i=s;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(r,s);o.getContext("2d").drawImage(a,0,0,n,i,0,0,r,s),a=o.transferToImageBitmap()}return a}function Zm(e,t){const n=new Br,i=Math.ceil(e*n.sx),r=Math.ceil(t*n.sy),s=kn(Bm,this);if(!s||s.width===i&&s.height===r)return;s.width=i,s.height=r;const a=kn(Hm,this)?kn($m,this):Cn(Gm,this,Jm).call(this,i,r),o=s.getContext("2d");o.filter=this._uiManager.hcmFilter,o.drawImage(a,0,0,a.width,a.height,0,0,i,r)}function ev(e){if(e){if(kn(Hm,this)){const e=this._uiManager.imageManager.getSvgUrl(kn(Dm,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=kn($m,this));return e.getContext("2d").drawImage(kn($m,this),0,0),e.toDataURL()}if(kn(Hm,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*wr.PDF_TO_CSS_UNITS),i=Math.round(this.height*t*wr.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(kn($m,this),0,0,kn($m,this).width,kn($m,this).height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(kn($m,this))}function tv(){this._uiManager._signal&&(An(Wm,this,new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&Cn(Gm,this,Qm).call(this,t.width,t.height)})),kn(Wm,this).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;null===(e=kn(Wm,this))||void 0===e||e.disconnect(),An(Wm,this,null)},{once:!0}))}function nv(e){var t;const{rect:n,pageIndex:i,accessibilityData:{altText:r}}=this._initialData,s=e.rect.every((e,t)=>Math.abs(e-n[t])<1),a=e.pageIndex===i,o=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===r;return{isSame:s&&a&&o,isSameAltText:o}}In=Vm,o(Vm,"_type","stamp"),o(Vm,"_editorType",ei.STAMP);var iv=new WeakMap,rv=new WeakMap,sv=new WeakMap,av=new WeakMap,ov=new WeakMap,lv=new WeakMap,cv=new WeakMap,dv=new WeakMap,uv=new WeakMap,hv=new WeakMap,fv=new WeakMap,pv=new WeakMap,gv=new WeakSet;class mv{constructor(e){let{uiManager:t,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;wn(this,gv),Sn(this,iv,void 0),Sn(this,rv,!1),Sn(this,sv,null),Sn(this,av,null),Sn(this,ov,null),Sn(this,lv,new Map),Sn(this,cv,!1),Sn(this,dv,!1),Sn(this,uv,!1),Sn(this,hv,null),Sn(this,fv,null),Sn(this,pv,void 0);const u=[...Sv._.values()];if(!mv._initialized){mv._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),An(pv,this,t),this.pageIndex=n,this.div=i,An(iv,this,s),An(sv,this,a),this.viewport=c,An(hv,this,l),this.drawLayer=o,this._structTree=r,kn(pv,this).addLayer(this)}get isEmpty(){return 0===kn(lv,this).size}get isInvisible(){return this.isEmpty&&kn(pv,this).getMode()===ei.NONE}updateToolbar(e){kn(pv,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn(pv,this).getMode();switch(Cn(gv,this,wv).call(this),e){case ei.NONE:return this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case ei.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ei.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of Sv._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=kn(hv,this))||void 0===t?void 0:t.div)}addInkEditorIfNeeded(e){if(kn(pv,this).getMode()!==ei.INK)return;if(!e)for(const t of kn(lv,this).values())if(t.isEmpty())return void t.setInBackground();this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){kn(pv,this).setEditingState(e)}addCommands(e){kn(pv,this).addCommands(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=kn(sv,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of kn(lv,this).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(kn(pv,this).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!kn(sv,this))return;const t=kn(sv,this).getEditableAnnotations();for(const n of t){if(n.hide(),kn(pv,this).isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=await this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){An(uv,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of kn(lv,this).values()){var n;r.disableEditing(),r.annotationElementId&&(null===r.serialize()?(t.set(r.annotationElementId,r),null===(n=this.getEditableAnnotation(r.annotationElementId))||void 0===n||n.show(),r.remove()):e.set(r.annotationElementId,r))}if(kn(sv,this)){const n=kn(sv,this).getEditableAnnotations();for(const i of n){const{id:n}=i.data;if(kn(pv,this).isDeletedAnnotationElement(n))continue;let r=t.get(n);r?(r.resetAnnotationElement(i),r.show(!1),i.show()):(r=e.get(n),r&&(kn(pv,this).addChangedExistingAnnotation(r),r.renderAnnotationElement(i)&&r.show(!1)),i.show())}}Cn(gv,this,wv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of Sv._.values())i.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),An(uv,this,!1)}getEditableAnnotation(e){var t;return(null===(t=kn(sv,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){kn(pv,this).getActive()!==e&&kn(pv,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=kn(hv,this))&&void 0!==e&&e.div&&!kn(fv,this)){An(fv,this,new AbortController);const e=kn(pv,this).combinedSignal(kn(fv,this));kn(hv,this).div.addEventListener("pointerdown",Cn(gv,this,vv).bind(this),{signal:e}),kn(hv,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=kn(hv,this))&&void 0!==e&&e.div&&kn(fv,this)&&(kn(fv,this).abort(),An(fv,this,null),kn(hv,this).div.classList.remove("highlighting"))}enableClick(){if(kn(av,this))return;An(av,this,new AbortController);const e=kn(pv,this).combinedSignal(kn(av,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;null===(e=kn(av,this))||void 0===e||e.abort(),An(av,this,null)}attach(e){kn(lv,this).set(e.id,e);const{annotationElementId:t}=e;t&&kn(pv,this).isDeletedAnnotationElement(t)&&kn(pv,this).removeDeletedAnnotationElement(e)}detach(e){var t;kn(lv,this).delete(e.id),null===(t=kn(iv,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!kn(uv,this)&&e.annotationElementId&&kn(pv,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),kn(pv,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,kn(dv,this)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(kn(pv,this).addDeletedAnnotationElement(e.annotationElementId),So.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),kn(pv,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),kn(pv,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!kn(ov,this)&&(e._focusEventsAllowed=!1,An(ov,this,setTimeout(()=>{An(ov,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:kn(pv,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=kn(iv,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return kn(pv,this).getId()}combinedSignal(e){return kn(pv,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=_n(gv,this,yv))||void 0===e?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){kn(pv,this).updateToolbar(e),kn(pv,this).updateMode(e);const{offsetX:n,offsetY:i}=Cn(gv,this,xv).call(this),r=this.getNextId(),s=Cn(gv,this,bv).call(this,c({parent:this,id:r,x:n,y:i,uiManager:kn(pv,this),isCentered:!0},t));s&&this.add(s)}async deserialize(e){var t,n;return await(null===(t=Sv._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,kn(pv,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getNextId(),r=Cn(gv,this,bv).call(this,c({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:kn(pv,this),isCentered:t},n));return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(Cn(gv,this,xv).call(this),!0)}setSelected(e){kn(pv,this).setSelected(e)}toggleSelected(e){kn(pv,this).toggleSelected(e)}unselect(e){kn(pv,this).unselect(e)}pointerup(e){const{isMac:t}=nr.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&kn(cv,this)&&(An(cv,this,!1),kn(rv,this)?kn(pv,this).getMode()!==ei.STAMP?this.createAndAddNewEditor(e,!1):kn(pv,this).unselectAll():An(rv,this,!0))}pointerdown(e){if(kn(pv,this).getMode()===ei.HIGHLIGHT&&this.enableTextSelection(),kn(cv,this))return void An(cv,this,!1);const{isMac:t}=nr.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;An(cv,this,!0);const n=kn(pv,this).getActive();An(rv,this,!n||n.isEmpty())}findNewParent(e,t,n){const i=kn(pv,this).findParent(t,n);return null!==i&&i!==this&&(i.changeParent(e),!0)}destroy(){var e;(null===(e=kn(pv,this).getActive())||void 0===e?void 0:e.parent)===this&&(kn(pv,this).commitOrRemove(),kn(pv,this).setActiveEditor(null)),kn(ov,this)&&(clearTimeout(kn(ov,this)),An(ov,this,null));for(const n of kn(lv,this).values()){var t;null===(t=kn(iv,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,kn(lv,this).clear(),kn(pv,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Rr(this.div,t);for(const n of kn(pv,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;kn(pv,this).commitOrRemove(),Cn(gv,this,wv).call(this);const n=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Rr(this.div,{rotation:i}),n!==i)for(const r of kn(lv,this).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return kn(pv,this).viewParameters.realScale}}function vv(e){kn(pv,this).unselectAll();const{target:t}=e;if(t===kn(hv,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&kn(hv,this).div.contains(t)){const{isMac:t}=nr.platform;if(0!==e.button||e.ctrlKey&&t)return;kn(pv,this).showAllEditors("highlight",!0,!0),kn(hv,this).div.classList.add("free"),this.toggleDrawing(),jg.startHighlighting(this,"ltr"===kn(pv,this).direction,{target:kn(hv,this).div,x:e.x,y:e.y}),kn(hv,this).div.addEventListener("pointerup",()=>{kn(hv,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:kn(pv,this)._signal}),e.preventDefault()}}function yv(e){return Sv._.get(kn(pv,e).getMode())}function bv(e){const t=_n(gv,this,yv);return t?new t.prototype.constructor(e):null}function xv(){const{x:e,y:t,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,e),s=Math.max(0,t),a=(r+Math.min(window.innerWidth,e+n))/2-e,o=(s+Math.min(window.innerHeight,t+i))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function wv(){An(dv,this,!0);for(const e of kn(lv,this).values())e.isEmpty()&&e.remove();An(dv,this,!1)}o(mv,"_initialized",!1);var Sv={_:new Map([Df,sm,Vm,jg].map(e=>[e._editorType,e]))},Cv=new WeakMap,_v=new WeakMap,kv=new WeakMap,Av=new WeakMap,Ev=new WeakSet;class jv{constructor(e){let{pageIndex:t}=e;wn(this,Ev),Sn(this,Cv,null),Sn(this,_v,0),Sn(this,kv,new Map),Sn(this,Av,new Map),this.pageIndex=t}setParent(e){if(kn(Cv,this)){if(kn(Cv,this)!==e){if(kn(kv,this).size>0)for(const t of kn(kv,this).values())t.remove(),e.append(t);An(Cv,this,e)}}else An(Cv,this,e)}static get _svgFactory(){return Ui(this,"_svgFactory",new Yu)}draw(e,t,n){var i,r;let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(An(_v,this,(i=kn(_v,this),r=i++,i)),r),o=Cn(Ev,this,Ov).call(this,e.box);o.classList.add(...e.classNamesForDrawing);const l=jv._svgFactory.createElement("defs");o.append(l);const c=jv._svgFactory.createElement("path");l.append(c);const d="path_p".concat(this.pageIndex,"_").concat(a);c.setAttribute("id",d),c.setAttribute("d",e.toSVGPath()),s&&kn(Av,this).set(a,c);const u=Cn(Ev,this,Mv).call(this,l,d),h=jv._svgFactory.createElement("use");return o.append(h),o.setAttribute("fill",t),o.setAttribute("fill-opacity",n),h.setAttribute("href","#".concat(d)),kn(kv,this).set(a,o),{id:a,clipPathId:"url(#".concat(u,")")}}drawOutline(e){var t,n;const i=(An(_v,this,(t=kn(_v,this),n=t++,t)),n),r=Cn(Ev,this,Ov).call(this,e.box);r.classList.add(...e.classNamesForOutlining);const s=jv._svgFactory.createElement("defs");r.append(s);const a=jv._svgFactory.createElement("path");s.append(a);const o="path_p".concat(this.pageIndex,"_").concat(i);let l;if(a.setAttribute("id",o),a.setAttribute("d",e.toSVGPath()),a.setAttribute("vector-effect","non-scaling-stroke"),e.mustRemoveSelfIntersections){const e=jv._svgFactory.createElement("mask");s.append(e),l="mask_p".concat(this.pageIndex,"_").concat(i),e.setAttribute("id",l),e.setAttribute("maskUnits","objectBoundingBox");const t=jv._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=jv._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(o)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const c=jv._svgFactory.createElement("use");r.append(c),c.setAttribute("href","#".concat(o)),l&&c.setAttribute("mask","url(#".concat(l,")"));const d=c.cloneNode();return r.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),kn(kv,this).set(i,r),i}finalizeLine(e,t){const n=kn(Av,this).get(e);kn(Av,this).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){kn(kv,this).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){kn(Av,this).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){Tv.call(jv,kn(kv,this).get(e),t)}show(e,t){kn(kv,this).get(e).classList.toggle("hidden",!t)}rotate(e,t){kn(kv,this).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){kn(kv,this).get(e).setAttribute("fill",t)}changeOpacity(e,t){kn(kv,this).get(e).setAttribute("fill-opacity",t)}addClass(e,t){kn(kv,this).get(e).classList.add(t)}removeClass(e,t){kn(kv,this).get(e).classList.remove(t)}getSVGRoot(e){return kn(kv,this).get(e)}remove(e){kn(Av,this).delete(e),null!==kn(Cv,this)&&(kn(kv,this).get(e).remove(),kn(kv,this).delete(e))}destroy(){An(Cv,this,null);for(const e of kn(kv,this).values())e.remove();kn(kv,this).clear(),kn(Av,this).clear()}}function Tv(e){let{x:t=0,y:n=0,width:i=1,height:r=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{style:s}=e;s.top="".concat(100*n,"%"),s.left="".concat(100*t,"%"),s.width="".concat(100*i,"%"),s.height="".concat(100*r,"%")}function Ov(e){const t=Fn._svgFactory.create(1,1,!0);return kn(Cv,this).append(t),t.setAttribute("aria-hidden",!0),Tv.call(Fn,t,e),t}function Mv(e,t){const n=Fn._svgFactory.createElement("clipPath");e.append(n);const i="clip_".concat(t);n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const r=Fn._svgFactory.createElement("use");return n.append(r),r.setAttribute("href","#".concat(t)),r.classList.add("clip"),i}Fn=jv;var Pv=Bn.AnnotationLayer,Nv=Bn.AnnotationMode,$v=Bn.GlobalWorkerOptions,Dv=Bn.PDFDataRangeTransport,Lv=Bn.TextLayer,Iv=Bn.getDocument,Fv=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Rv=Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv(Fv([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function Bv(e,t){var n={};return Rv.forEach(function(i){var r=e[i];r&&(n[i]=t?function(e){return r(e,t(i))}:r)}),n}function Wv(e){var t=!1;return{promise:new Promise(function(n,i){e.then(function(e){return!t&&n(e)}).catch(function(e){return!t&&i(e)})}),cancel:function(){t=!0}}}function zv(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=zv(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const Hv=function(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=zv(e))&&(i&&(i+=" "),i+=t);return i};var Uv="Invariant failed";function Gv(e,t){if(!e)throw new Error(Uv)}var Vv=n(440),qv=Object.prototype.hasOwnProperty;function Xv(e,t,n){for(n of e.keys())if(Yv(n,t))return n}function Yv(e,t){var n,i,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&Yv(e[i],t[i]););return-1===i}if(n===Set){if(e.size!==t.size)return!1;for(i of e){if((r=i)&&"object"===typeof r&&!(r=Xv(t,r)))return!1;if(!t.has(r))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(i of e){if((r=i[0])&&"object"===typeof r&&!(r=Xv(t,r)))return!1;if(!Yv(i[1],t.get(r)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((i=e.byteLength)===t.byteLength)for(;i--&&e.getInt8(i)===t.getInt8(i););return-1===i}if(ArrayBuffer.isView(e)){if((i=e.byteLength)===t.byteLength)for(;i--&&e[i]===t[i];);return-1===i}if(!n||"object"===typeof e){for(n in i=0,e){if(qv.call(e,n)&&++i&&!qv.call(t,n))return!1;if(!(n in t)||!Yv(e[n],t[n]))return!1}return Object.keys(t).length===i}}return e!==e&&t!==t}const Kv=(0,t.createContext)(null);function Qv(e){let{children:t,type:n}=e;return(0,_t.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:t})}class Jv{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Gv(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Gv(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Gv(this.pdfDocument),Gv(e),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(e=>{Gv(Array.isArray(e),'"'.concat(e,'" is not a valid destination array.'));const t=e[0];new Promise(e=>{Gv(this.pdfDocument),t instanceof Object?this.pdfDocument.getPageIndex(t).then(t=>{e(t)}).catch(()=>{Gv(!1,'"'.concat(t,'" is not a valid page reference.'))}):"number"===typeof t?e(t):Gv(!1,'"'.concat(t,'" is not a valid destination reference.'))}).then(t=>{const n=t+1;Gv(this.pdfViewer),Gv(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Gv(this.pdfViewer),Gv(e>=1&&e<=this.pagesCount,'"'.concat(e,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Zv={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},ey="undefined"!==typeof window,ty=ey&&"file:"===window.location.protocol;function ny(e){return function(e){return"undefined"!==typeof e}(e)&&null!==e}function iy(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function ry(e){Gv(iy(e));const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}function sy(){return ey&&window.devicePixelRatio||1}const ay="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function oy(){Vv(!ty,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(ay))}function ly(e){(null===e||void 0===e?void 0:e.cancel)&&e.cancel()}function cy(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function dy(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function uy(){return(0,t.useReducer)(dy,{value:void 0,error:void 0})}var hy=function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function a(e){try{l(i.next(e))}catch(zy){s(zy)}}function o(e){try{l(i.throw(e))}catch(zy){s(zy)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})},fy=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const{Tm:py}=e,gy=(e,t)=>{switch(t){case Zv.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case Zv.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function my(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const vy=(0,t.forwardRef)(function(e,n){var{children:i,className:r,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:u="Loading PDF\u2026",noData:h="No PDF file specified.",onItemClick:f,onLoadError:p,onLoadProgress:g,onLoadSuccess:m,onPassword:v=gy,onSourceError:y,onSourceSuccess:b,options:x,renderMode:w,rotate:S}=e,C=fy(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[_,k]=uy(),{value:A,error:E}=_,[j,T]=uy(),{value:O,error:M}=j,P=(0,t.useRef)(new Jv),N=(0,t.useRef)([]),$=(0,t.useRef)(void 0),D=(0,t.useRef)(void 0);l&&l!==$.current&&my(l)&&(Vv(!Yv(l,$.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),$.current=l),x&&x!==D.current&&(Vv(!Yv(x,D.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),D.current=x);const L=(0,t.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:i=n-1}=e;if(f)return void f({dest:t,pageIndex:i,pageNumber:n});const r=N.current[i];r?r.scrollIntoView():Vv(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,t.useImperativeHandle)(n,()=>({linkService:P,pages:N,viewer:L}),[]),(0,t.useEffect)(function(){k({type:"RESET"})},[l,k]);const I=(0,t.useCallback)(()=>hy(this,void 0,void 0,function*(){if(!l)return null;if("string"===typeof l){if(iy(l)){return{data:ry(l)}}return oy(),{url:l}}if(l instanceof py)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(ey&&function(e){return Gv(ey),e instanceof Blob}(l)){const e=yield function(e){return new Promise((t,n)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return n(new Error("Error while reading a file."));t(i.result)},i.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},i.readAsArrayBuffer(e)})}(l);return{data:e}}if(Gv("object"===typeof l),Gv(my(l)),"url"in l&&"string"===typeof l.url){if(iy(l.url)){const{url:e}=l,t=fy(l,["url"]),n=ry(e);return Object.assign({data:n},t)}oy()}return l}),[l]);(0,t.useEffect)(()=>{const e=Wv(I());return e.promise.then(e=>{k({type:"RESOLVE",value:e})}).catch(e=>{k({type:"REJECT",error:e})}),()=>{ly(e)}},[I,k]),(0,t.useEffect)(()=>{"undefined"!==typeof A&&(!1!==A?b&&b():E&&(Vv(!1,E.toString()),y&&y(E)))},[A]),(0,t.useEffect)(function(){T({type:"RESET"})},[T,A]),(0,t.useEffect)(function(){if(!A)return;const e=x?Object.assign(Object.assign({},A),x):A,t=Iv(e);g&&(t.onProgress=g),v&&(t.onPassword=v);const n=t,i=n.promise.then(e=>{T({type:"RESOLVE",value:e})}).catch(e=>{n.destroyed||T({type:"REJECT",error:e})});return()=>{i.finally(()=>n.destroy())}},[x,T,A]),(0,t.useEffect)(()=>{"undefined"!==typeof O&&(!1!==O?O&&(m&&m(O),N.current=new Array(O.numPages),P.current.setDocument(O)):M&&(Vv(!1,M.toString()),p&&p(M)))},[O]),(0,t.useEffect)(function(){P.current.setViewer(L.current),P.current.setExternalLinkRel(a),P.current.setExternalLinkTarget(o)},[a,o]);const F=(0,t.useCallback)((e,t)=>{N.current[e]=t},[]),R=(0,t.useCallback)(e=>{delete N.current[e]},[]),B=(0,t.useMemo)(()=>({imageResourcesPath:d,linkService:P.current,onItemClick:f,pdf:O,registerPage:F,renderMode:w,rotate:S,unregisterPage:R}),[d,f,O,F,w,S,R]),W=(0,t.useMemo)(()=>Bv(C,()=>O),[C,O]);return(0,_t.jsx)("div",Object.assign({className:Hv("react-pdf__Document",r),ref:c,style:{"--scale-factor":"1"}},W,{children:l?void 0===O||null===O?(0,_t.jsx)(Qv,{type:"loading",children:"function"===typeof u?u():u}):!1===O?(0,_t.jsx)(Qv,{type:"error",children:"function"===typeof s?s():s}):(0,_t.jsx)(Kv.Provider,{value:B,children:i}):(0,_t.jsx)(Qv,{type:"no-data",children:"function"===typeof h?h():h})}))}),yy=vy;function by(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){n.forEach(function(t){"function"===typeof t?t(e):t&&(t.current=e)})}}const xy=(0,t.createContext)(null),wy={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Sy=/^H(\d+)$/;function Cy(e){return"children"in e}function _y(e){return!!Cy(e)&&(1===e.children.length&&0 in e.children&&"id"in e.children[0])}function ky(e){const t={};if(Cy(e)){const{role:n}=e,i=n.match(Sy);if(i)t.role="heading",t["aria-level"]=Number(i[1]);else if(function(e){return e in wy}(n)){const e=wy[n];e&&(t.role=e)}}return t}function Ay(e){const t={};if(Cy(e)){if(void 0!==e.alt&&(t["aria-label"]=e.alt),void 0!==e.lang&&(t.lang=e.lang),_y(e)){const[n]=e.children;if(n){const e=Ay(n);return Object.assign(Object.assign({},t),e)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function Ey(e){return e?Object.assign(Object.assign({},ky(e)),Ay(e)):null}function jy(e){let{className:n,node:i}=e;const r=(0,t.useMemo)(()=>Ey(i),[i]),s=(0,t.useMemo)(()=>Cy(i)?_y(i)?null:i.children.map((e,t)=>(0,_t.jsx)(jy,{node:e},t)):null,[i]);return(0,_t.jsx)("span",Object.assign({className:n},r,{children:s}))}function Ty(){return(0,t.useContext)(xy)}function Oy(){const e=Ty();Gv(e);const{onGetStructTreeError:n,onGetStructTreeSuccess:i}=e,[r,s]=uy(),{value:a,error:o}=r,{customTextRenderer:l,page:c}=e;return(0,t.useEffect)(function(){s({type:"RESET"})},[s,c]),(0,t.useEffect)(function(){if(l)return;if(!c)return;const e=Wv(c.getStructTree()),t=e;return e.promise.then(e=>{s({type:"RESOLVE",value:e})}).catch(e=>{s({type:"REJECT",error:e})}),()=>ly(t)},[l,c,s]),(0,t.useEffect)(()=>{void 0!==a&&(!1!==a?a&&i&&i(a):o&&(Vv(!1,o.toString()),n&&n(o)))},[a]),a?(0,_t.jsx)(jy,{className:"react-pdf__Page__structTree structTree",node:a}):null}const My=Nv;function Py(e){const n=Ty();Gv(n);const i=Object.assign(Object.assign({},n),e),{_className:r,canvasBackground:s,devicePixelRatio:a=sy(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:d,renderTextLayer:u,rotate:h,scale:f}=i,{canvasRef:p}=e;Gv(c);const g=(0,t.useRef)(null);function m(e){(function(e){return"RenderingCancelledException"===e.name})(e)||(Vv(!1,e.toString()),o&&o(e))}const v=(0,t.useMemo)(()=>c.getViewport({scale:f*a,rotation:h}),[a,c,h,f]),y=(0,t.useMemo)(()=>c.getViewport({scale:f,rotation:h}),[c,h,f]);(0,t.useEffect)(function(){if(!c)return;c.cleanup();const{current:e}=g;if(!e)return;e.width=v.width,e.height=v.height,e.style.width="".concat(Math.floor(y.width),"px"),e.style.height="".concat(Math.floor(y.height),"px"),e.style.visibility="hidden";const t={annotationMode:d?My.ENABLE_FORMS:My.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:v};s&&(t.background=s);const n=c.render(t),i=n;return n.promise.then(()=>{e.style.visibility="",c&&l&&l(cy(c,f))}).catch(m),()=>ly(i)},[s,c,d,v,y]);const b=(0,t.useCallback)(()=>{const{current:e}=g;e&&(e.width=0,e.height=0)},[]);return(0,t.useEffect)(()=>b,[b]),(0,_t.jsx)("canvas",{className:"".concat(r,"__canvas"),dir:"ltr",ref:by(p,g),style:{display:"block",userSelect:"none"},children:u?(0,_t.jsx)(Oy,{}):null})}function Ny(){const e=Ty();Gv(e);const{customTextRenderer:n,onGetTextError:i,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:d,scale:u}=e;Gv(o);const[h,f]=uy(),{value:p,error:g}=h,m=(0,t.useRef)(null);Vv(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,t.useEffect)(function(){f({type:"RESET"})},[o,f]),(0,t.useEffect)(function(){if(!o)return;const e=Wv(o.getTextContent()),t=e;return e.promise.then(e=>{f({type:"RESOLVE",value:e})}).catch(e=>{f({type:"REJECT",error:e})}),()=>ly(t)},[o,f]),(0,t.useEffect)(()=>{void 0!==p&&(!1!==p?p&&r&&r(p):g&&(Vv(!1,g.toString()),i&&i(g)))},[p]);const v=(0,t.useCallback)(()=>{a&&a()},[a]),y=(0,t.useCallback)(e=>{Vv(!1,e.toString()),s&&s(e)},[s]);const b=(0,t.useMemo)(()=>o.getViewport({scale:u,rotation:d}),[o,d,u]);return(0,t.useLayoutEffect)(function(){if(!o||!p)return;const{current:e}=m;if(!e)return;e.innerHTML="";const t=o.streamTextContent({includeMarkedContent:!0}),i=new Lv({container:e,textContentSource:t,viewport:b}),r=i;return i.render().then(()=>{const t=document.createElement("div");t.className="endOfContent",e.append(t);const i=e.querySelectorAll('[role="presentation"]');if(n){let e=0;p.items.forEach((t,r)=>{if(!function(e){return"str"in e}(t))return;const s=i[e];if(!s)return;const a=n(Object.assign({pageIndex:l,pageNumber:c,itemIndex:r},t));s.innerHTML=a,e+=t.str&&t.hasEOL?2:1})}v()}).catch(y),()=>ly(r)},[n,y,v,o,l,c,p,b]),(0,_t.jsx)("div",{className:Hv("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const e=m.current;e&&e.classList.remove("selecting")},onMouseDown:function(){const e=m.current;e&&e.classList.add("selecting")},ref:m})}function $y(){return(0,t.useContext)(Kv)}function Dy(){const e=$y(),n=Ty();Gv(n);const i=Object.assign(Object.assign({},e),n),{imageResourcesPath:r,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:d,pdf:u,renderForms:h,rotate:f,scale:p=1}=i;Gv(u),Gv(d),Gv(s);const[g,m]=uy(),{value:v,error:y}=g,b=(0,t.useRef)(null);Vv(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,t.useEffect)(function(){m({type:"RESET"})},[m,d]),(0,t.useEffect)(function(){if(!d)return;const e=Wv(d.getAnnotations()),t=e;return e.promise.then(e=>{m({type:"RESOLVE",value:e})}).catch(e=>{m({type:"REJECT",error:e})}),()=>{ly(t)}},[m,d]),(0,t.useEffect)(()=>{void 0!==v&&(!1!==v?v&&o&&o(v):y&&(Vv(!1,y.toString()),a&&a(y)))},[v]);const x=(0,t.useMemo)(()=>d.getViewport({scale:p,rotation:f}),[d,f,p]);return(0,t.useEffect)(function(){if(!u||!d||!s||!v)return;const{current:e}=b;if(!e)return;const t=x.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:e,l10n:null,page:d,structTreeLayer:null,viewport:t},i={annotations:v,annotationStorage:u.annotationStorage,div:e,imageResourcesPath:r,linkService:s,page:d,renderForms:h,viewport:t};e.innerHTML="";try{new Pv(n).render(i),c&&c()}catch(a){!function(e){Vv(!1,"".concat(e)),l&&l(e)}(a)}return()=>{}},[v,r,s,d,u,h,x]),(0,_t.jsx)("div",{className:Hv("react-pdf__Page__annotations","annotationLayer"),ref:b})}var Ly=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};const Iy=1;function Fy(e){const n=$y(),i=Object.assign(Object.assign({},n),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:o,children:l,className:c,customRenderer:d,customTextRenderer:u,devicePixelRatio:h,error:f="Failed to load the page.",height:p,inputRef:g,loading:m="Loading page\u2026",noData:v="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:b,onGetStructTreeError:x,onGetStructTreeSuccess:w,onGetTextError:S,onGetTextSuccess:C,onLoadError:_,onLoadSuccess:k,onRenderAnnotationLayerError:A,onRenderAnnotationLayerSuccess:E,onRenderError:j,onRenderSuccess:T,onRenderTextLayerError:O,onRenderTextLayerSuccess:M,pageIndex:P,pageNumber:N,pdf:$,registerPage:D,renderAnnotationLayer:L=!0,renderForms:I=!1,renderMode:F="canvas",renderTextLayer:R=!0,rotate:B,scale:W=Iy,unregisterPage:z,width:H}=i,U=Ly(i,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[G,V]=uy(),{value:q,error:X}=G,Y=(0,t.useRef)(null);Gv($);const K=ny(N)?N-1:null!==P&&void 0!==P?P:null,Q=null!==N&&void 0!==N?N:ny(P)?P+1:null,J=null!==B&&void 0!==B?B:q?q.rotate:null,Z=(0,t.useMemo)(()=>{if(!q)return null;let e=1;const t=null!==W&&void 0!==W?W:Iy;if(H||p){const t=q.getViewport({scale:1,rotation:J});H?e=H/t.width:p&&(e=p/t.height)}return t*e},[p,q,J,W,H]);(0,t.useEffect)(function(){return()=>{ny(K)&&s&&z&&z(K)}},[s,$,K,z]),(0,t.useEffect)(function(){V({type:"RESET"})},[V,$,K]),(0,t.useEffect)(function(){if(!$||!Q)return;const e=Wv($.getPage(Q)),t=e;return e.promise.then(e=>{V({type:"RESOLVE",value:e})}).catch(e=>{V({type:"REJECT",error:e})}),()=>ly(t)},[V,$,Q]),(0,t.useEffect)(()=>{void 0!==q&&(!1!==q?function(){if(k){if(!q||!Z)return;k(cy(q,Z))}if(s&&D){if(!ny(K)||!Y.current)return;D(K,Y.current)}}():X&&(Vv(!1,X.toString()),_&&_(X)))},[q,Z]);const ee=(0,t.useMemo)(()=>q&&ny(K)&&Q&&ny(J)&&ny(Z)?{_className:r,canvasBackground:a,customTextRenderer:u,devicePixelRatio:h,onGetAnnotationsError:y,onGetAnnotationsSuccess:b,onGetStructTreeError:x,onGetStructTreeSuccess:w,onGetTextError:S,onGetTextSuccess:C,onRenderAnnotationLayerError:A,onRenderAnnotationLayerSuccess:E,onRenderError:j,onRenderSuccess:T,onRenderTextLayerError:O,onRenderTextLayerSuccess:M,page:q,pageIndex:K,pageNumber:Q,renderForms:I,renderTextLayer:R,rotate:J,scale:Z}:null,[r,a,u,h,y,b,x,w,S,C,A,E,j,T,O,M,q,K,Q,I,R,J,Z]),te=(0,t.useMemo)(()=>Bv(U,()=>q?Z?cy(q,Z):void 0:q),[U,q,Z]),ne="".concat(K,"@").concat(Z,"/").concat(J);function ie(){switch(F){case"custom":return Gv(d),(0,_t.jsx)(d,{},"".concat(ne,"_custom"));case"none":return null;default:return(0,_t.jsx)(Py,{canvasRef:o},"".concat(ne,"_canvas"))}}return(0,_t.jsx)("div",Object.assign({className:Hv(r,c),"data-page-number":Q,ref:by(g,Y),style:{"--scale-factor":"".concat(Z),backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te,{children:Q?null===$||void 0===q||null===q?(0,_t.jsx)(Qv,{type:"loading",children:"function"===typeof m?m():m}):!1===$||!1===q?(0,_t.jsx)(Qv,{type:"error",children:"function"===typeof f?f():f}):(0,_t.jsxs)(xy.Provider,{value:ee,children:[ie(),R?(0,_t.jsx)(Ny,{},"".concat(ne,"_text")):null,L?(0,_t.jsx)(Dy,{},"".concat(ne,"_annotations")):null,l]}):(0,_t.jsx)(Qv,{type:"no-data",children:"function"===typeof v?v():v})}))}$v.workerSrc="".concat("/EduSite","/pdf.worker.min.mjs");const Ry={viewerContainer:{display:"flex",flexDirection:"column",height:"100%",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"#f8f9fa",overflow:"hidden"},toolbar:{padding:"8px 12px",borderBottom:"1px solid #ddd",backgroundColor:"#efefef",textAlign:"center",fontSize:"14px",color:"#333",flexShrink:0},pdfScrollArea:{flexGrow:1,overflowY:"auto",backgroundColor:"#e9ecef",padding:"10px 0"},pageContainer:{margin:"15px auto",display:"flex",justifyContent:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",width:"100%",maxWidth:"100%"},errorMessage:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",color:"#dc3545",fontSize:"16px"}},By=e=>{let{pdfUrl:n}=e;const[i,r]=(0,t.useState)(null),[s,a]=(0,t.useState)(1),[o,l]=(0,t.useState)(!1),[d,u]=(0,t.useState)(null),h=(0,t.useRef)();if((0,t.useEffect)(()=>{function e(){h.current&&u(h.current.offsetWidth)}return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),o)return(0,_t.jsx)("div",{style:c(c({},Ry.viewerContainer),Ry.errorMessage),children:"Error loading document."});const f=c(c({},Ry.pageContainer),{},{margin:window.innerWidth<=600?"5px 0":"15px auto"});return(0,_t.jsxs)("div",{style:Ry.viewerContainer,ref:h,children:[(0,_t.jsx)("div",{style:Ry.toolbar,children:i?"Total Pages: ".concat(i):"Loading PDF..."}),(0,_t.jsx)("div",{style:Ry.pdfScrollArea,children:(0,_t.jsx)(yy,{file:n,onLoadSuccess:function(e){let{numPages:t}=e;r(t),l(!1),a(1)},onLoadError:function(e){console.error("Failed to load PDF document:",e),l(!0),r(null)},loading:(0,_t.jsx)("div",{style:{textAlign:"center",padding:"20px"},children:"Loading document..."}),noData:(0,_t.jsx)("div",{style:Ry.errorMessage,children:"No PDF file specified."}),children:Array.from(new Array(i||0),(e,t)=>(0,_t.jsx)("div",{style:f,children:(0,_t.jsx)(Fy,{pageNumber:t+1,renderAnnotationLayer:!1,renderTextLayer:!1,width:d?Math.min(d-16,800):void 0},"page_".concat(t+1))},"page_container_".concat(t+1)))})})]})};Ut().setAppElement("#root");Ut().setAppElement("#root");Ut().setAppElement("#root");function Wy(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Hy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zy(Object(n),!0).forEach(function(t){Wy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Uy(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gy(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}class Vy{constructor(){Wy(this,"browserShadowBlurConstant",1),Wy(this,"DPI",96),Wy(this,"devicePixelRatio","undefined"!=typeof window?window.devicePixelRatio:1),Wy(this,"perfLimitSizeTotal",2097152),Wy(this,"maxCacheSideLimit",4096),Wy(this,"minCacheSideLimit",256),Wy(this,"disableStyleCopyPaste",!1),Wy(this,"enableGLFiltering",!0),Wy(this,"textureSize",4096),Wy(this,"forceGLPutImageData",!1),Wy(this,"cachesBoundsOfCurve",!1),Wy(this,"fontPaths",{}),Wy(this,"NUM_FRACTION_DIGITS",4)}}const qy=new class extends Vy{constructor(e){super(),this.configure(e)}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,e)}addFonts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fontPaths=Hy(Hy({},this.fontPaths),e)}removeFonts(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(e=>{delete this.fontPaths[e]})}clearFonts(){this.fontPaths={}}restoreDefaults(e){const t=new Vy,n=(null==e?void 0:e.reduce((e,n)=>(e[n]=t[n],e),{}))||t;this.configure(n)}},Xy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return console[e]("fabric",...n)};class Yy extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Ky extends Yy{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class Qy{}class Jy extends Qy{testPrecision(e,t){const n="precision ".concat(t," float;\nvoid main(){}"),i=e.createShader(e.FRAGMENT_SHADER);return!!i&&(e.shaderSource(i,n),e.compileShader(i),!!e.getShaderParameter(i,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(e=>this.testPrecision(t,e)),t.getExtension("WEBGL_lose_context").loseContext(),Xy("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Zy={};let eb;const tb=()=>eb||(eb={document:document,window:window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Jy,dispose(){},copyPasteData:Zy}),nb=()=>tb().document,ib=()=>tb().window,rb=()=>{var e;return Math.max(null!==(e=qy.devicePixelRatio)&&void 0!==e?e:ib().devicePixelRatio,1)},sb=new class{constructor(){Wy(this,"charWidthsCache",{}),Wy(this,"boundsOfCurveCache",{})}getFontCache(e){let{fontFamily:t,fontStyle:n,fontWeight:i}=e;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const r=this.charWidthsCache[t],s="".concat(n.toLowerCase(),"_").concat((i+"").toLowerCase());return r[s]||(r[s]={}),r[s]}clearFontCache(e){(e=(e||"").toLowerCase())?this.charWidthsCache[e]&&delete this.charWidthsCache[e]:this.charWidthsCache={}}limitDimsByArea(e){const{perfLimitSizeTotal:t}=qy,n=Math.sqrt(t*e);return[Math.floor(n),Math.floor(t/n)]}},ab="6.7.1";function ob(){}const lb=Math.PI/2,cb=2*Math.PI,db=Math.PI/180,ub=Object.freeze([1,0,0,1,0,0]),hb=16,fb=.4477152502,pb="center",gb="left",mb="top",vb="bottom",yb="right",bb="none",xb=/\r?\n/,wb="moving",Sb="scaling",Cb="rotating",_b="rotate",kb="skewing",Ab="resizing",Eb="modifyPoly",jb="modifyPath",Tb="changed",Ob="scale",Mb="scaleX",Pb="scaleY",Nb="skewX",$b="skewY",Db="fill",Lb="stroke",Ib="modified",Fb="json",Rb="svg",Bb=new class{constructor(){this[Fb]=new Map,this[Rb]=new Map}has(e){return this[Fb].has(e)}getClass(e){const t=this[Fb].get(e);if(!t)throw new Yy("No class registered for ".concat(e));return t}setClass(e,t){t?this[Fb].set(t,e):(this[Fb].set(e.type,e),this[Fb].set(e.type.toLowerCase(),e))}getSVGClass(e){return this[Rb].get(e)}setSVGClass(e,t){this[Rb].set(null!=t?t:e.type.toLowerCase(),e)}},Wb=new class extends Array{remove(e){const t=this.indexOf(e);t>-1&&this.splice(t,1)}cancelAll(){const e=this.splice(0);return e.forEach(e=>e.abort()),e}cancelByCanvas(e){if(!e)return[];const t=this.filter(t=>{var n;return t.target===e||"object"==typeof t.target&&(null===(n=t.target)||void 0===n?void 0:n.canvas)===e});return t.forEach(e=>e.abort()),t}cancelByTarget(e){if(!e)return[];const t=this.filter(t=>t.target===e);return t.forEach(e=>e.abort()),t}};class zb{constructor(){Wy(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),"object"==typeof e)return Object.entries(e).forEach(e=>{let[t,n]=e;this.on(t,n)}),()=>this.off(e);if(t){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(t),()=>this.off(n,t)}return()=>!1}once(e,t){if("object"==typeof e){const t=[];return Object.entries(e).forEach(e=>{let[n,i]=e;t.push(this.once(n,i))}),()=>t.forEach(e=>e())}if(t){const n=this.on(e,function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];t.call(this,...i),n()});return n}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const n=this.__eventListeners[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(void 0===e)for(const n in this.__eventListeners)this._removeEventListener(n);else"object"==typeof e?Object.entries(e).forEach(e=>{let[t,n]=e;this._removeEventListener(t,n)}):this._removeEventListener(e,t)}fire(e,t){var n;if(!this.__eventListeners)return;const i=null===(n=this.__eventListeners[e])||void 0===n?void 0:n.concat();if(i)for(let r=0;r<i.length;r++)i[r].call(this,t||{})}}const Hb=(e,t)=>{const n=e.indexOf(t);return-1!==n&&e.splice(n,1),e},Ub=e=>{if(0===e)return 1;switch(Math.abs(e)/lb){case 1:case 3:return 0;case 2:return-1}return Math.cos(e)},Gb=e=>{if(0===e)return 0;const t=e/lb,n=Math.sign(e);switch(t){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(e)};class Vb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"object"==typeof e?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new Vb(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new Vb(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new Vb(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new Vb(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new Vb(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new Vb(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new Vb(this.x/e.x,this.y/e.y)}scalarDivide(e){return new Vb(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new Vb(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,n=this.y-e.y;return Math.sqrt(t*t+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new Vb(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new Vb(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=n}clone(){return new Vb(this.x,this.y)}rotate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qb;const n=Gb(e),i=Ub(e),r=this.subtract(t);return new Vb(r.x*i-r.y*n,r.x*n+r.y*i).add(t)}transform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Vb(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const qb=new Vb(0,0),Xb=e=>!!e&&Array.isArray(e._objects);function Yb(e){class t extends e{constructor(){super(...arguments),Wy(this,"_objects",[])}_onObjectAdded(e){}_onObjectRemoved(e){}_onStackOrderChanged(e){}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=this._objects.push(...t);return t.forEach(e=>this._onObjectAdded(e)),i}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this._objects.splice(e,0,...n),n.forEach(e=>this._onObjectAdded(e)),this._objects.length}remove(){const e=this._objects,t=[];for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return i.forEach(n=>{const i=e.indexOf(n);-1!==i&&(e.splice(i,1),t.push(n),this._onObjectRemoved(n))}),t}forEachObject(e){this.getObjects().forEach((t,n,i)=>e(t,n,i))}getObjects(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?[...this._objects]:this._objects.filter(e=>e.isType(...t))}item(e){return this._objects[e]}isEmpty(){return 0===this._objects.length}size(){return this._objects.length}contains(e,n){return!!this._objects.includes(e)||!!n&&this._objects.some(n=>n instanceof t&&n.contains(e,!0))}complexity(){return this._objects.reduce((e,t)=>e+(t.complexity?t.complexity():0),0)}sendObjectToBack(e){return!(!e||e===this._objects[0])&&(Hb(this._objects,e),this._objects.unshift(e),this._onStackOrderChanged(e),!0)}bringObjectToFront(e){return!(!e||e===this._objects[this._objects.length-1])&&(Hb(this._objects,e),this._objects.push(e),this._onStackOrderChanged(e),!0)}sendObjectBackwards(e,t){if(!e)return!1;const n=this._objects.indexOf(e);if(0!==n){const i=this.findNewLowerIndex(e,n,t);return Hb(this._objects,e),this._objects.splice(i,0,e),this._onStackOrderChanged(e),!0}return!1}bringObjectForward(e,t){if(!e)return!1;const n=this._objects.indexOf(e);if(n!==this._objects.length-1){const i=this.findNewUpperIndex(e,n,t);return Hb(this._objects,e),this._objects.splice(i,0,e),this._onStackOrderChanged(e),!0}return!1}moveObjectTo(e,t){return e!==this._objects[t]&&(Hb(this._objects,e),this._objects.splice(t,0,e),this._onStackOrderChanged(e),!0)}findNewLowerIndex(e,t,n){let i;if(n){i=t;for(let n=t-1;n>=0;--n)if(e.isOverlapping(this._objects[n])){i=n;break}}else i=t-1;return i}findNewUpperIndex(e,t,n){let i;if(n){i=t;for(let n=t+1;n<this._objects.length;++n)if(e.isOverlapping(this._objects[n])){i=n;break}}else i=t+1;return i}collectObjects(e){let{left:t,top:n,width:i,height:r}=e,{includeIntersecting:s=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[],o=new Vb(t,n),l=o.add(new Vb(i,r));for(let c=this._objects.length-1;c>=0;c--){const e=this._objects[c];e.selectable&&e.visible&&(s&&e.intersectsWithRect(o,l)||e.isContainedWithinRect(o,l)||s&&e.containsPoint(o)||s&&e.containsPoint(l))&&a.push(e)}return a}}return t}class Kb extends zb{_setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return"object"==typeof e?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return"boolean"==typeof t&&this.set(e,!t),this}get(e){return this[e]}}function Qb(e){return ib().requestAnimationFrame(e)}function Jb(e){return ib().cancelAnimationFrame(e)}let Zb=0;const ex=()=>Zb++,tx=()=>{const e=nb().createElement("canvas");if(!e||void 0===e.getContext)throw new Yy("Failed to create `canvas` element");return e},nx=()=>nb().createElement("img"),ix=e=>{const t=tx();return t.width=e.width,t.height=e.height,t},rx=(e,t,n)=>e.toDataURL("image/".concat(t),n),sx=(e,t,n)=>new Promise((i,r)=>{e.toBlob(i,"image/".concat(t),n)}),ax=e=>e*db,ox=e=>e/db,lx=e=>e.every((e,t)=>e===ub[t]),cx=(e,t,n)=>new Vb(e).transform(t,n),dx=e=>{const t=1/(e[0]*e[3]-e[1]*e[2]),n=[t*e[3],-t*e[1],-t*e[2],t*e[0],0,0],{x:i,y:r}=new Vb(e[4],e[5]).transform(n,!0);return n[4]=-i,n[5]=-r,n},ux=(e,t,n)=>[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],n?0:e[0]*t[4]+e[2]*t[5]+e[4],n?0:e[1]*t[4]+e[3]*t[5]+e[5]],hx=(e,t)=>e.reduceRight((e,n)=>n&&e?ux(n,e,t):n||e,void 0)||ub.concat(),fx=e=>{let[t,n]=e;return Math.atan2(n,t)},px=e=>{const t=fx(e),n=Math.pow(e[0],2)+Math.pow(e[1],2),i=Math.sqrt(n),r=(e[0]*e[3]-e[2]*e[1])/i,s=Math.atan2(e[0]*e[2]+e[1]*e[3],n);return{angle:ox(t),scaleX:i,scaleY:r,skewX:ox(s),skewY:0,translateX:e[4]||0,translateY:e[5]||0}},gx=function(e){return[1,0,0,1,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0]};function mx(){let{angle:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{x:t=0,y:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=ax(e),r=Ub(i),s=Gb(i);return[r,s,-s,r,t?t-(r*t-s*n):0,n?n-(s*t+r*n):0]}const vx=function(e){return[e,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,0,0]},yx=e=>Math.tan(ax(e)),bx=e=>[1,0,yx(e),1,0,0],xx=e=>[1,yx(e),0,1,0,0],wx=e=>{let{scaleX:t=1,scaleY:n=1,flipX:i=!1,flipY:r=!1,skewX:s=0,skewY:a=0}=e,o=vx(i?-t:t,r?-n:n);return s&&(o=ux(o,bx(s),!0)),a&&(o=ux(o,xx(a),!0)),o},Sx=e=>{const{translateX:t=0,translateY:n=0,angle:i=0}=e;let r=gx(t,n);i&&(r=ux(r,mx({angle:i})));const s=wx(e);return lx(s)||(r=ux(r,s)),r},Cx=function(e){let{signal:t,crossOrigin:n=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i,r){if(t&&t.aborted)return r(new Ky("loadImage"));const s=nx();let a;t&&(a=function(e){s.src="",r(e)},t.addEventListener("abort",a,{once:!0}));const o=function(){s.onload=s.onerror=null,a&&(null==t||t.removeEventListener("abort",a)),i(s)};e?(s.onload=o,s.onerror=function(){a&&(null==t||t.removeEventListener("abort",a)),r(new Yy("Error loading ".concat(s.src)))},n&&(s.crossOrigin=n),s.src=e):o()})},_x=function(e){let{signal:t,reviver:n=ob}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((i,r)=>{const s=[];t&&t.addEventListener("abort",r,{once:!0}),Promise.all(e.map(e=>Bb.getClass(e.type).fromObject(e,{signal:t}).then(t=>(n(e,t),s.push(t),t)))).then(i).catch(e=>{s.forEach(e=>{e.dispose&&e.dispose()}),r(e)}).finally(()=>{t&&t.removeEventListener("abort",r)})})},kx=function(e){let{signal:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((n,i)=>{const r=[];t&&t.addEventListener("abort",i,{once:!0});const s=Object.values(e).map(e=>e&&e.type&&Bb.has(e.type)?_x([e],{signal:t}).then(e=>{let[t]=e;return r.push(t),t}):e),a=Object.keys(e);Promise.all(s).then(e=>e.reduce((e,t,n)=>(e[a[n]]=t,e),{})).then(n).catch(e=>{r.forEach(e=>{e.dispose&&e.dispose()}),i(e)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},Ax=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce((t,n)=>(n in e&&(t[n]=e[n]),t),{})},Ex=(e,t)=>Object.keys(e).reduce((n,i)=>(t(e[i],i,e)&&(n[i]=e[i]),n),{}),jx=(e,t)=>parseFloat(Number(e).toFixed(t)),Tx=e=>"matrix("+e.map(e=>jx(e,qy.NUM_FRACTION_DIGITS)).join(" ")+")",Ox=e=>!!e&&void 0!==e.toLive,Mx=e=>!!e&&"function"==typeof e.toObject,Px=e=>!!e&&void 0!==e.offsetX&&"source"in e,Nx=e=>!!e&&"multiSelectionStacking"in e;function $x(e){const t=e&&Dx(e);let n=0,i=0;if(!e||!t)return{left:n,top:i};let r=e;const s=t.documentElement,a=t.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===t?(n=a.scrollLeft||s.scrollLeft||0,i=a.scrollTop||s.scrollTop||0):(n+=r.scrollLeft||0,i+=r.scrollTop||0),1!==r.nodeType||"fixed"!==r.style.position););return{left:n,top:i}}const Dx=e=>e.ownerDocument||null,Lx=e=>{var t;return(null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)||null},Ix=function(e,t,n){let{width:i,height:r}=n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.width=i,e.height=r,s>1&&(e.setAttribute("width",(i*s).toString()),e.setAttribute("height",(r*s).toString()),t.scale(s,s))},Fx=(e,t)=>{let{width:n,height:i}=t;n&&(e.style.width="number"==typeof n?"".concat(n,"px"):n),i&&(e.style.height="number"==typeof i?"".concat(i,"px"):i)};function Rx(e){return void 0!==e.onselectstart&&(e.onselectstart=()=>!1),e.style.userSelect=bb,e}class Bx{constructor(e){Wy(this,"_originalCanvasStyle",void 0),Wy(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(n=e)&&void 0!==n.getContext?e:e&&nb().getElementById(e)||tx();var n;if(t.hasAttribute("data-fabric"))throw new Yy("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:n}=e;const{el:i}=this.lower;i.classList.remove("lower-canvas"),i.removeAttribute("data-fabric"),i.setAttribute("width","".concat(t)),i.setAttribute("height","".concat(n)),i.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:n,ctx:i}=this.lower;Ix(n,i,e,t)}setCSSDimensions(e){Fx(this.lower.el,e)}calcOffset(){return function(e){var t;const n=e&&Dx(e),i={left:0,top:0};if(!n)return i;const r=(null===(t=Lx(e))||void 0===t?void 0:t.getComputedStyle(e,null))||{};i.left+=parseInt(r.borderLeftWidth,10)||0,i.top+=parseInt(r.borderTopWidth,10)||0,i.left+=parseInt(r.paddingLeft,10)||0,i.top+=parseInt(r.paddingTop,10)||0;let s={left:0,top:0};const a=n.documentElement;void 0!==e.getBoundingClientRect&&(s=e.getBoundingClientRect());const o=$x(e);return{left:s.left+o.left-(a.clientLeft||0)+i.left,top:s.top+o.top-(a.clientTop||0)+i.top}}(this.lower.el)}dispose(){tb().dispose(this.lower.el),delete this.lower}}const Wx={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...ub]};class zx extends(Yb(Kb)){get lowerCanvasEl(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.el}get contextContainer(){var e;return null===(e=this.elements.lower)||void 0===e?void 0:e.ctx}static getDefaults(){return zx.ownDefaults}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Bx(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),r}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Xy("warn","Canvas is trying to add an object that belongs to a different canvas.\nResulting to default behavior: removing object from previous canvas and adding to new canvas"),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?rb():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t){const t=Hy({width:this.width,height:this.height},e);this.elements.setDimensions(t,this.getRetinaScaling()),this.hasLostContext=!0,this.width=t.width,this.height=t.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const n=e,i=[...this.viewportTransform],r=cx(e,dx(i));i[0]=t,i[3]=t;const s=cx(r,i);i[4]+=n.x-s.x,i[5]+=n.y-s.y,this.setViewportTransform(i)}setZoom(e){this.zoomToPoint(new Vb(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new Vb(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Qb(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,n=dx(this.viewportTransform),i=cx({x:0,y:0},n),r=cx({x:e,y:t},n),s=i.min(r),a=i.max(r);return this.vptCoords={tl:s,tr:new Vb(a.x,s.y),bl:new Vb(s.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(Jb(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const n=this.viewportTransform,i=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),i&&(i._set("canvas",this),i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,i)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let n=0,i=t.length;n<i;++n)t[n]&&t[n].render(e)}_renderBackgroundOrOverlay(e,t){const n=this["".concat(t,"Color")],i=this["".concat(t,"Image")],r=this.viewportTransform,s=this["".concat(t,"Vpt")];if(!n&&!i)return;const a=Ox(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,s&&e.transform(...r),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const t=n.gradientTransform||n.patternTransform;t&&e.transform(...t)}e.fill(),e.restore()}if(i){e.save();const{skipOffscreen:t}=this;this.skipOffscreen=s,s&&e.transform(...r),i.render(e),this.skipOffscreen=t,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new Vb(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new Vb(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new Vb(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new Vb(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new Vb(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return cx(this.getCenterPoint(),dx(this.viewportTransform))}_centerObject(e,t){e.setXY(t,pb,pb),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const n=this.clipPath,i=n&&!n.excludeFromExport?this._toObject(n,e,t):null;return Hy(Hy(Hy({version:ab},Ax(this,t)),{},{objects:this._objects.filter(e=>!e.excludeFromExport).map(n=>this._toObject(n,e,t))},this.__serializeBgOverlay(e,t)),i?{clipPath:i}:null)}_toObject(e,t,n){let i;this.includeDefaultValues||(i=e.includeDefaultValues,e.includeDefaultValues=!1);const r=e[t](n);return this.includeDefaultValues||(e.includeDefaultValues=!!i),r}__serializeBgOverlay(e,t){const n={},i=this.backgroundImage,r=this.overlayImage,s=this.backgroundColor,a=this.overlayColor;return Ox(s)?s.excludeFromExport||(n.background=s.toObject(t)):s&&(n.background=s),Ox(a)?a.excludeFromExport||(n.overlay=a.toObject(t)):a&&(n.overlay=a),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,e,t)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,e,t)),n}toSVG(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,')" >\n')),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",t),this._setSVGObjects(n,t),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",t),n.push("</svg>"),n.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')}_setSVGHeader(e,t){const n=t.width||"".concat(this.width),i=t.height||"".concat(this.height),r=qy.NUM_FRACTION_DIGITS,s=t.viewBox;let a;if(s)a='viewBox="'.concat(s.x," ").concat(s.y," ").concat(s.width," ").concat(s.height,'" ');else if(this.svgViewportTransformation){const e=this.viewportTransform;a='viewBox="'.concat(jx(-e[4]/e[0],r)," ").concat(jx(-e[5]/e[3],r)," ").concat(jx(this.width/e[0],r)," ").concat(jx(this.height/e[3],r),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",ab,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),"</defs>\n")}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(ex()),'<clipPath id="'.concat(t.clipPathId,'" >\n').concat(t.toClipPathSVG(e.reviver),"</clipPath>\n")):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Ox(t)){const n=this["".concat(e,"Vpt")],i=this.viewportTransform,r={isType:()=>!1,width:this.width/(n?i[0]:1),height:this.height/(n?i[3]:1)};return t.toSVG(r,{additionalTransform:n?Tx(i):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},n=qy.fontPaths;this._objects.forEach(function t(n){e.push(n),Xb(n)&&n._objects.forEach(t)}),e.forEach(e=>{if(!(i=e)||"function"!=typeof i._renderText)return;var i;const{styles:r,fontFamily:s}=e;!t[s]&&n[s]&&(t[s]=!0,r&&Object.values(r).forEach(e=>{Object.values(e).forEach(e=>{let{fontFamily:i=""}=e;!t[i]&&n[i]&&(t[i]=!0)})}))});const i=Object.keys(t).map(e=>"\t\t@font-face {\n\t\t\tfont-family: '".concat(e,"';\n\t\t\tsrc: url('").concat(n[e],"');\n\t\t}\n")).join("");return i?'\t<style type="text/css"><![CDATA[\n'.concat(i,"]]></style>\n"):""}_setSVGObjects(e,t){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,t)})}_setSVGObject(e,t,n){e.push(t.toSVG(n))}_setSVGBgOverlayImage(e,t,n){const i=this[t];i&&!i.excludeFromExport&&i.toSVG&&e.push(i.toSVG(n))}_setSVGBgOverlayColor(e,t){const n=this["".concat(t,"Color")];if(n)if(Ox(n)){const i=n.repeat||"",r=this.width,s=this.height,a=this["".concat(t,"Vpt")]?Tx(dx(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(r/2,",").concat(s/2,')" x="').concat(n.offsetX-r/2,'" y="').concat(n.offsetY-s/2,'" width="').concat("repeat-y"!==i&&"no-repeat"!==i||!Px(n)?r:n.source.width,'" height="').concat("repeat-x"!==i&&"no-repeat"!==i||!Px(n)?s:n.source.height,'" fill="url(#SVGID_').concat(n.id,')"></rect>\n'))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")}loadFromJSON(e,t){let{signal:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return Promise.reject(new Yy("`json` is undefined"));const i="string"==typeof e?JSON.parse(e):e,{objects:r=[],backgroundImage:s,background:a,overlayImage:o,overlay:l,clipPath:c}=i,d=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([_x(r,{reviver:t,signal:n}),kx({backgroundImage:s,backgroundColor:a,overlayImage:o,overlayColor:l,clipPath:c},{signal:n})]).then(e=>{let[t,n]=e;return this.clear(),this.add(...t),this.set(i),this.set(n),this.renderOnAddRemove=d,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=ix(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:i=1,enableRetinaScaling:r=!1}=e,s=i*(r?this.getRetinaScaling():1);return rx(this.toCanvasElement(s,e),t,n)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{format:t="png",quality:n=1,multiplier:i=1,enableRetinaScaling:r=!1}=e,s=i*(r?this.getRetinaScaling():1);return sx(this.toCanvasElement(s,e),t,n)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,{width:t,height:n,left:i,top:r,filter:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=(t||this.width)*e,o=(n||this.height)*e,l=this.getZoom(),c=this.width,d=this.height,u=this.skipControlsDrawing,h=l*e,f=this.viewportTransform,p=[h,0,0,h,(f[4]-(i||0))*e,(f[5]-(r||0))*e],g=this.enableRetinaScaling,m=ix({width:a,height:o}),v=s?this._objects.filter(e=>s(e)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=p,this.width=a,this.height=o,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(m.getContext("2d"),v),this.viewportTransform=f,this.width=c,this.height=d,this.calcViewportBoundaries(),this.enableRetinaScaling=g,this.skipControlsDrawing=u,m}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Wb.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const n=()=>{this.destroy(),e(!0)};n.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}Wy(zx,"ownDefaults",Wx);const Hx=["touchstart","touchmove","touchend"],Ux=e=>{const t=$x(e.target),n=function(e){const t=e.changedTouches;return t&&t[0]?t[0]:e}(e);return new Vb(n.clientX+t.left,n.clientY+t.top)},Gx=e=>Hx.includes(e.type)||"touch"===e.pointerType,Vx=e=>{e.preventDefault(),e.stopPropagation()},qx=e=>{let t=0,n=0,i=0,r=0;for(let s=0,a=e.length;s<a;s++){const{x:a,y:o}=e[s];(a>i||!s)&&(i=a),(a<t||!s)&&(t=a),(o>r||!s)&&(r=o),(o<n||!s)&&(n=o)}return{left:t,top:n,width:i-t,height:r-n}},Xx=["translateX","translateY","scaleX","scaleY"],Yx=(e,t)=>Kx(e,ux(t,e.calcOwnMatrix())),Kx=(e,t)=>{const n=px(t),{translateX:i,translateY:r,scaleX:s,scaleY:a}=n,o=Uy(n,Xx),l=new Vb(i,r);e.flipX=!1,e.flipY=!1,Object.assign(e,o),e.set({scaleX:s,scaleY:a}),e.setPositionByOrigin(l,pb,pb)},Qx=e=>{e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.flipX=!1,e.flipY=!1,e.rotate(0)},Jx=e=>({scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,left:e.left,flipX:e.flipX,flipY:e.flipY,top:e.top}),Zx=(e,t,n)=>{const i=e/2,r=t/2,s=[new Vb(-i,-r),new Vb(i,-r),new Vb(-i,r),new Vb(i,r)].map(e=>e.transform(n)),a=qx(s);return new Vb(a.width,a.height)},ew=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ub;return ux(dx(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ub),e)},tw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ub,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ub;return e.transform(ew(t,n))},nw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ub,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ub;return e.transform(ew(t,n),!0)},iw=(e,t,n)=>{const i=ew(t,n);return Kx(e,ux(i,e.calcOwnMatrix())),i},rw=(e,t)=>{var n;const{transform:{target:i}}=t;null===(n=i.canvas)||void 0===n||n.fire("object:".concat(e),Hy(Hy({},t),{},{target:i})),i.fire(e,t)},sw={left:-.5,top:-.5,center:0,bottom:.5,right:.5},aw=e=>"string"==typeof e?sw[e]:e-.5,ow="not-allowed";function lw(e){return aw(e.originX)===aw(pb)&&aw(e.originY)===aw(pb)}function cw(e){return.5-aw(e)}const dw=(e,t)=>e[t],uw=(e,t,n,i)=>({e:e,transform:t,pointer:new Vb(n,i)});function hw(e,t){const n=e.getTotalAngle()+ox(Math.atan2(t.y,t.x))+360;return Math.round(n%360/45)}function fw(e,t,n,i,r){var s;let{target:a,corner:o}=e;const l=a.controls[o],c=(null===(s=a.canvas)||void 0===s?void 0:s.getZoom())||1,d=a.padding/c,u=function(e,t,n,i){const r=e.getRelativeCenterPoint(),s=void 0!==n&&void 0!==i?e.translateToGivenOrigin(r,pb,pb,n,i):new Vb(e.left,e.top);return(e.angle?t.rotate(-ax(e.angle),r):t).subtract(s)}(a,new Vb(i,r),t,n);return u.x>=d&&(u.x-=d),u.x<=-d&&(u.x+=d),u.y>=d&&(u.y-=d),u.y<=d&&(u.y+=d),u.x-=l.offsetX,u.y-=l.offsetY,u}const pw=(e,t,n,i)=>{const{target:r,offsetX:s,offsetY:a}=t,o=n-s,l=i-a,c=!dw(r,"lockMovementX")&&r.left!==o,d=!dw(r,"lockMovementY")&&r.top!==l;return c&&r.set(gb,o),d&&r.set(mb,l),(c||d)&&rw(wb,uw(e,t,n,i)),c||d},gw={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},mw=(e,t,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e),vw=(e,t,n,i)=>{e/=255,t/=255,n/=255;const r=Math.max(e,t,n),s=Math.min(e,t,n);let a,o;const l=(r+s)/2;if(r===s)a=o=0;else{const i=r-s;switch(o=l>.5?i/(2-r-s):i/(r+s),r){case e:a=(t-n)/i+(t<n?6:0);break;case t:a=(n-e)/i+2;break;case n:a=(e-t)/i+4}a/=6}return[Math.round(360*a),Math.round(100*o),Math.round(100*l),i]},yw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1";return parseFloat(e)/(e.endsWith("%")?100:1)},bw=e=>Math.min(Math.round(e),255).toString(16).toUpperCase().padStart(2,"0"),xw=e=>{let[t,n,i,r=1]=e;const s=Math.round(.3*t+.59*n+.11*i);return[s,s,s,r]};class ww{constructor(e){if(Wy(this,"isUnrecognised",!1),e)if(e instanceof ww)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,n,i,r=1]=e;this.setSource([t,n,i,r])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in gw&&(e=gw[e]),"transparent"===e?[255,255,255,0]:ww.sourceFromHex(e)||ww.sourceFromRgb(e)||ww.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,n]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,n]=vw(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(n,"%)")}toHsla(){const[e,t,n,i]=vw(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(n,"%,").concat(i,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,n,i]=this.getSource();return"".concat(bw(e)).concat(bw(t)).concat(bw(n)).concat(bw(Math.round(255*i)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(xw(this.getSource())),this}toBlackWhite(e){const[t,,,n]=xw(this.getSource()),i=t<(e||127)?0:255;return this.setSource([i,i,i,n]),this}overlayWith(e){e instanceof ww||(e=new ww(e));const t=this.getSource(),n=e.getSource(),[i,r,s]=t.map((e,t)=>Math.round(.5*e+.5*n[t]));return this.setSource([i,r,s,t[3]]),this}static fromRgb(e){return ww.fromRgba(e)}static fromRgba(e){return new ww(ww.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[e,n,i]=t.slice(1,4).map(e=>{const t=parseFloat(e);return e.endsWith("%")?Math.round(2.55*t):t});return[e,n,i,yw(t[4])]}}static fromHsl(e){return ww.fromHsla(e)}static fromHsla(e){return new ww(ww.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const n=(ww.parseAngletoDegrees(t[1])%360+360)%360/360,i=parseFloat(t[2])/100,r=parseFloat(t[3])/100;let s,a,o;if(0===i)s=a=o=r;else{const e=r<=.5?r*(i+1):r+i-r*i,t=2*r-e;s=mw(t,e,n+1/3),a=mw(t,e,n),o=mw(t,e,n-1/3)}return[Math.round(255*s),Math.round(255*a),Math.round(255*o),yw(t[4])]}static fromHex(e){return new ww(ww.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let n;n=t.length<=4?t.split("").map(e=>e+e):t.match(/.{2}/g);const[i,r,s,a=255]=n.map(e=>parseInt(e,16));return[i,r,s,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),n=parseFloat(t);return t.includes("rad")?ox(n):t.includes("turn")?360*n:n}}const Sw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hb;const n=/\D{0,2}$/.exec(e),i=parseFloat(e),r=qy.DPI;switch(null==n?void 0:n[0]){case"mm":return i*r/25.4;case"cm":return i*r/2.54;case"in":return i*r;case"pt":return i*r/72;case"pc":return i*r/72*12;case"em":return i*t;default:return i}},Cw=e=>{const[t,n]=e.trim().split(" "),[i,r]=(s=t)&&s!==bb?[s.slice(1,4),s.slice(5,8)]:s===bb?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:n||"meet",alignX:i,alignY:r}},_w=function(e,t){let n,i,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t)if(t.toLive)n="url(#SVGID_".concat(t.id,")");else{const e=new ww(t),r=e.getAlpha();n=e.toRgb(),1!==r&&(i=r.toString())}else n="none";return r?"".concat(e,": ").concat(n,"; ").concat(i?"".concat(e,"-opacity: ").concat(i,"; "):""):"".concat(e,'="').concat(n,'" ').concat(i?"".concat(e,'-opacity="').concat(i,'" '):"")};class kw{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",i=this.strokeDashArray?this.strokeDashArray.join(" "):bb,r=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",l=void 0!==this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",d=e?"":this.getSvgFilter(),u=_w(Db,this.fill);return[_w(Lb,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",i,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",o,"; ",u,"fill-rule: ",t,"; ","opacity: ",l,";",d,c].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),i='transform="'.concat(Tx(n));return"".concat(i).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:n=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),r=e.indexOf("COMMON_PARTS");return e[r]=i,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:n,withShadow:i,additionalTransform:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=i?'style="'.concat(this.getSvgFilter(),'" '):"",o=this.clipPath,l=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",c=o&&o.absolutePositioned,d=this.stroke,u=this.fill,h=this.shadow,f=[],p=e.indexOf("COMMON_PARTS");let g;o&&(o.clipPathId="CLIPPATH_".concat(ex()),g='<clipPath id="'.concat(o.clipPathId,'" >\n').concat(o.toClipPathSVG(n),"</clipPath>\n")),c&&f.push("<g ",a,this.getSvgCommons()," >\n"),f.push("<g ",this.getSvgTransform(!1),c?"":a+this.getSvgCommons()," >\n");const m=[s,l,t?"":this.addPaintOrder()," ",r?'transform="'.concat(r,'" '):""].join("");return e[p]=m,Ox(u)&&f.push(u.toSVG(this)),Ox(d)&&f.push(d.toSVG(this)),h&&f.push(h.toSVG(this)),o&&f.push(g),f.push(e.join("")),f.push("</g>\n"),c&&f.push("</g>\n"),n?n(f.join("")):f.join("")}addPaintOrder(){return this.paintFirst!==Db?' paint-order="'.concat(this.paintFirst,'" '):""}}function Aw(e){return new RegExp("^("+e.join("|")+")\\b","i")}const Ew="textDecorationThickness",jw=["fontSize","fontWeight","fontFamily","fontStyle"],Tw=["underline","overline","linethrough"],Ow=[...jw,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Mw=[...Ow,...Tw,"textBackgroundColor","direction",Ew],Pw=[...jw,...Tw,Lb,"strokeWidth",Db,"deltaY","textBackgroundColor",Ew],Nw={_reNewline:xb,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:gb,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:gb,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Ew]:66.667},$w="justify",Dw="justify-left",Lw="justify-right",Iw="justify-center";var Fw,Rw,Bw;const Ww=String.raw(Fw||(Fw=Gy(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),zw=String.raw(Rw||(Rw=Gy(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),Hw=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ww+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ww+"))?\\s+(.*)"),Uw={cx:gb,x:gb,r:"radius",cy:mb,y:mb,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Ew},Gw="font-size",Vw="clip-path",qw=(Aw(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),Aw(["symbol","image","marker","pattern","view","svg"]),Aw(["symbol","g","a","svg","clipPath","defs"])),Xw=(new RegExp(String.raw(Bw||(Bw=Gy(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Ww,zw,Ww,zw,Ww,zw,Ww)),new Vb(1,0)),Yw=new Vb,Kw=(e,t)=>e.rotate(t),Qw=(e,t)=>new Vb(t).subtract(e),Jw=e=>e.distanceFrom(Yw),Zw=(e,t)=>Math.atan2(iS(e,t),rS(e,t)),eS=e=>Zw(Xw,e),tS=e=>e.eq(Yw)?e:e.scalarDivide(Jw(e)),nS=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return tS(new Vb(-e.y,e.x).scalarMultiply(t?1:-1))},iS=(e,t)=>e.x*t.y-e.y*t.x,rS=(e,t)=>e.x*t.x+e.y*t.y,sS=(e,t,n)=>{if(e.eq(t)||e.eq(n))return!0;const i=iS(t,n),r=iS(t,e),s=iS(n,e);return i>=0?r>=0&&s<=0:!(r<=0&&s>=0)},aS="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",oS=new RegExp("(?:\\s|^)"+aS+aS+"("+Ww+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class lS{constructor(e){const t="string"==typeof e?lS.parseShadow(e):e;Object.assign(this,lS.ownDefaults,t),this.id=ex()}static parseShadow(e){const t=e.trim(),[,n=0,i=0,r=0]=(oS.exec(t)||[]).map(e=>parseFloat(e)||0);return{color:(t.replace(oS,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:i,blur:r}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Kw(new Vb(this.offsetX,this.offsetY),ax(-e.angle)),n=new ww(this.color);let i=40,r=40;return e.width&&e.height&&(i=100*jx((Math.abs(t.x)+this.blur)/e.width,qy.NUM_FRACTION_DIGITS)+20,r=100*jx((Math.abs(t.y)+this.blur)/e.height,qy.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(r,'%" height="').concat(100+2*r,'%" x="-').concat(i,'%" width="').concat(100+2*i,'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="').concat(jx(this.blur?this.blur/2:0,qy.NUM_FRACTION_DIGITS),'"></feGaussianBlur>\n\t<feOffset dx="').concat(jx(t.x,qy.NUM_FRACTION_DIGITS),'" dy="').concat(jx(t.y,qy.NUM_FRACTION_DIGITS),'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="').concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n')}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=lS.ownDefaults;return this.includeDefaultValues?e:Ex(e,(e,n)=>e!==t[n])}static async fromObject(e){return new this(e)}}Wy(lS,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),Wy(lS,"type","shadow"),Bb.setClass(lS,"shadow");const cS=(e,t,n)=>Math.max(e,Math.min(t,n)),dS=[mb,gb,Mb,Pb,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Nb,$b],uS=[Db,Lb,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],hS={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:gb,originY:mb,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Db,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},fS=(e,t,n,i)=>(e<Math.abs(t)?(e=t,i=n/4):i=0===t&&0===e?n/cb*Math.asin(1):n/cb*Math.asin(t/e),{a:e,c:t,p:n,s:i}),pS=(e,t,n,i,r)=>e*Math.pow(2,10*(i-=1))*Math.sin((i*r-t)*cb/n),gS=(e,t,n,i)=>-n*Math.cos(e/i*lb)+n+t,mS=(e,t,n,i)=>(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,vS=(e,t,n,i)=>n-mS(i-e,0,n,i)+t;var yS=Object.freeze({__proto__:null,defaultEasing:gS,easeInBack:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return n*(e/=i)*e*((r+1)*e-r)+t},easeInBounce:vS,easeInCirc:(e,t,n,i)=>-n*(Math.sqrt(1-(e/=i)*e)-1)+t,easeInCubic:(e,t,n,i)=>n*(e/i)**3+t,easeInElastic:(e,t,n,i)=>{const r=n;let s=0;if(0===e)return t;if(1===(e/=i))return t+n;s||(s=.3*i);const{a:a,s:o,p:l}=fS(r,n,s,1.70158);return-pS(a,o,l,e,i)+t},easeInExpo:(e,t,n,i)=>0===e?t:n*2**(10*(e/i-1))+t,easeInOutBack:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return(e/=i/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},easeInOutBounce:(e,t,n,i)=>e<i/2?.5*vS(2*e,0,n,i)+t:.5*mS(2*e-i,0,n,i)+.5*n+t,easeInOutCirc:(e,t,n,i)=>(e/=i/2)<1?-n/2*(Math.sqrt(1-e**2)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t,easeInOutCubic:(e,t,n,i)=>(e/=i/2)<1?n/2*e**3+t:n/2*((e-2)**3+2)+t,easeInOutElastic:(e,t,n,i)=>{const r=n;let s=0;if(0===e)return t;if(2===(e/=i/2))return t+n;s||(s=i*(.3*1.5));const{a:a,s:o,p:l,c:c}=fS(r,n,s,1.70158);return e<1?-.5*pS(a,o,l,e,i)+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*i-o)*cb/l)*.5+c+t},easeInOutExpo:(e,t,n,i)=>0===e?t:e===i?t+n:(e/=i/2)<1?n/2*2**(10*(e-1))+t:n/2*-(2**(-10*--e)+2)+t,easeInOutQuad:(e,t,n,i)=>(e/=i/2)<1?n/2*e**2+t:-n/2*(--e*(e-2)-1)+t,easeInOutQuart:(e,t,n,i)=>(e/=i/2)<1?n/2*e**4+t:-n/2*((e-=2)*e**3-2)+t,easeInOutQuint:(e,t,n,i)=>(e/=i/2)<1?n/2*e**5+t:n/2*((e-2)**5+2)+t,easeInOutSine:(e,t,n,i)=>-n/2*(Math.cos(Math.PI*e/i)-1)+t,easeInQuad:(e,t,n,i)=>n*(e/=i)*e+t,easeInQuart:(e,t,n,i)=>n*(e/=i)*e**3+t,easeInQuint:(e,t,n,i)=>n*(e/i)**5+t,easeInSine:(e,t,n,i)=>-n*Math.cos(e/i*lb)+n+t,easeOutBack:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.70158;return n*((e=e/i-1)*e*((r+1)*e+r)+1)+t},easeOutBounce:mS,easeOutCirc:(e,t,n,i)=>n*Math.sqrt(1-(e=e/i-1)*e)+t,easeOutCubic:(e,t,n,i)=>n*((e/i-1)**3+1)+t,easeOutElastic:(e,t,n,i)=>{const r=n;let s=0;if(0===e)return t;if(1===(e/=i))return t+n;s||(s=.3*i);const{a:a,s:o,p:l,c:c}=fS(r,n,s,1.70158);return a*2**(-10*e)*Math.sin((e*i-o)*cb/l)+c+t},easeOutExpo:(e,t,n,i)=>e===i?t+n:n*-(2**(-10*e/i)+1)+t,easeOutQuad:(e,t,n,i)=>-n*(e/=i)*(e-2)+t,easeOutQuart:(e,t,n,i)=>-n*((e=e/i-1)*e**3-1)+t,easeOutQuint:(e,t,n,i)=>n*((e/i-1)**5+1)+t,easeOutSine:(e,t,n,i)=>n*Math.sin(e/i*lb)+t});const bS=()=>!1;class xS{constructor(e){let{startValue:t,byValue:n,duration:i=500,delay:r=0,easing:s=gS,onStart:a=ob,onChange:o=ob,onComplete:l=ob,abort:c=bS,target:d}=e;Wy(this,"_state","pending"),Wy(this,"durationProgress",0),Wy(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=i,this.delay=r,this.easing=s,this._onStart=a,this._onChange=o,this._onComplete=l,this._abort=c,this.target=d,this.startValue=t,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return"aborted"===this._state||"completed"===this._state}start(){const e=e=>{"pending"===this._state&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Qb(e),this.delay):Qb(e)}tick(e){const t=(e||+new Date)-this.startTime,n=Math.min(t,this.duration);this.durationProgress=n/this.duration;const{value:i,valueProgress:r}=this.calculate(n);this.value=Object.freeze(i),this.valueProgress=r,"aborted"!==this._state&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Qb(this.tick)))}register(){Wb.push(this)}unregister(){Wb.remove(this)}abort(){this._state="aborted",this.unregister()}}const wS=["startValue","endValue"];class SS extends xS{constructor(e){let{startValue:t=0,endValue:n=100}=e;super(Hy(Hy({},Uy(e,wS)),{},{startValue:t,byValue:n-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const CS=["startValue","endValue"];class _S extends xS{constructor(e){let{startValue:t=[0],endValue:n=[100]}=e;super(Hy(Hy({},Uy(e,CS)),{},{startValue:t,byValue:n.map((e,n)=>e-t[n])}))}calculate(e){const t=this.startValue.map((t,n)=>this.easing(e,t,this.byValue[n],this.duration,n));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const kS=["startValue","endValue","easing","onChange","onComplete","abort"],AS=(e,t,n,i)=>t+n*(1-Math.cos(e/i*lb)),ES=e=>e&&((t,n,i)=>e(new ww(t).toRgba(),n,i));class jS extends xS{constructor(e){let{startValue:t,endValue:n,easing:i=AS,onChange:r,onComplete:s,abort:a}=e,o=Uy(e,kS);const l=new ww(t).getSource(),c=new ww(n).getSource();super(Hy(Hy({},o),{},{startValue:l,byValue:c.map((e,t)=>e-l[t]),easing:i,onChange:ES(r),onComplete:ES(s),abort:ES(a)}))}calculate(e){const[t,n,i,r]=this.startValue.map((t,n)=>this.easing(e,t,this.byValue[n],this.duration,n)),s=[...[t,n,i].map(Math.round),cS(0,r,1)];return{value:s,valueProgress:s.map((e,t)=>0!==this.byValue[t]?Math.abs((e-this.startValue[t])/this.byValue[t]):0).find(e=>0!==e)||0}}}function TS(e){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(e)?new _S(e):new SS(e);return t.start(),t}function OS(e){const t=new jS(e);return t.start(),t}class MS{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.points=this.points.concat(t.filter(e=>!this.includes(e))),this}static isPointContained(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.eq(n))return e.eq(t);if(t.x===n.x)return e.x===t.x&&(i||e.y>=Math.min(t.y,n.y)&&e.y<=Math.max(t.y,n.y));if(t.y===n.y)return e.y===t.y&&(i||e.x>=Math.min(t.x,n.x)&&e.x<=Math.max(t.x,n.x));{const r=Qw(t,n),s=Qw(t,e).divide(r);return i?Math.abs(s.x)===Math.abs(s.y):s.x===s.y&&s.x>=0&&s.x<=1}}static isPointInPolygon(e,t){const n=new Vb(e).setX(Math.min(e.x-1,...t.map(e=>e.x)));let i=0;for(let r=0;r<t.length;r++){const s=this.intersectSegmentSegment(t[r],t[(r+1)%t.length],e,n);if(s.includes(e))return!0;i+=Number("Intersection"===s.status)}return i%2==1}static intersectLineLine(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const a=t.x-e.x,o=t.y-e.y,l=i.x-n.x,c=i.y-n.y,d=e.x-n.x,u=e.y-n.y,h=l*u-c*d,f=a*u-o*d,p=c*a-l*o;if(0!==p){const t=h/p,n=f/p;return(r||0<=t&&t<=1)&&(s||0<=n&&n<=1)?new MS("Intersection").append(new Vb(e.x+t*a,e.y+t*o)):new MS}if(0===h||0===f){const a=r||s||MS.isPointContained(e,n,i)||MS.isPointContained(t,n,i)||MS.isPointContained(n,e,t)||MS.isPointContained(i,e,t);return new MS(a?"Coincident":void 0)}return new MS("Parallel")}static intersectSegmentLine(e,t,n,i){return MS.intersectLineLine(e,t,n,i,!1,!0)}static intersectSegmentSegment(e,t,n,i){return MS.intersectLineLine(e,t,n,i,!1,!1)}static intersectLinePolygon(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=new MS,s=n.length;for(let a,o,l,c=0;c<s;c++){if(a=n[c],o=n[(c+1)%s],l=MS.intersectLineLine(e,t,a,o,i,!1),"Coincident"===l.status)return l;r.append(...l.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectSegmentPolygon(e,t,n){return MS.intersectLinePolygon(e,t,n,!1)}static intersectPolygonPolygon(e,t){const n=new MS,i=e.length,r=[];for(let s=0;s<i;s++){const a=e[s],o=e[(s+1)%i],l=MS.intersectSegmentPolygon(a,o,t);"Coincident"===l.status?(r.push(l),n.append(a,o)):n.append(...l.points)}return r.length>0&&r.length===e.length?new MS("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,t,n){const i=t.min(n),r=t.max(n),s=new Vb(r.x,i.y),a=new Vb(i.x,r.y);return MS.intersectPolygonPolygon(e,[i,s,r,a])}}class PS extends Kb{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?cx(e,this.group.calcTransformMatrix()):e}setXY(e,t,n){this.group&&(e=cx(e,dx(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,n)}getRelativeXY(){return new Vb(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.originX,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.originY;this.setPositionByOrigin(e,t,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:n,bl:i}=this.aCoords||(this.aCoords=this.calcACoords()),r=[e,t,n,i];if(this.group){const e=this.group.calcTransformMatrix();return r.map(t=>cx(t,e))}return r}intersectsWithRect(e,t){return"Intersection"===MS.intersectPolygonRectangle(this.getCoords(),e,t).status}intersectsWithObject(e){const t=MS.intersectPolygonPolygon(this.getCoords(),e.getCoords());return"Intersection"===t.status||"Coincident"===t.status||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:n,top:i,width:r,height:s}=this.getBoundingRect();return n>=e.x&&n+r<=t.x&&i>=e.y&&i+s<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return MS.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=t.x&&n.x>=e.x&&n.y<=t.y&&n.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.intersectsWithRect(e,t)||this.getCoords().every(n=>(n.x>=t.x||n.x<=e.x)&&(n.y>=t.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return qx(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(Mb,e),this._set(Pb,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?ox(fx(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return(null===(e=this.canvas)||void 0===e?void 0:e.viewportTransform)||ub.concat()}calcACoords(){const e=mx({angle:this.angle}),{x:t,y:n}=this.getRelativeCenterPoint(),i=gx(t,n),r=ux(i,e),s=this._getTransformedDimensions(),a=s.x/2,o=s.y/2;return{tl:cx({x:-a,y:-o},r),tr:cx({x:a,y:-o},r),bl:cx({x:-a,y:o},r),br:cx({x:a,y:o},r)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,aw(this.originX),aw(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const n=this.transformMatrixKey(e),i=this.matrixCache;return i&&i.key.every((e,t)=>e===n[t])?i.value:(this.group&&(t=ux(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:n,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const n=this.getRelativeCenterPoint(),i={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},r=Sx(i);return this.ownMatrixCache={key:e,value:r},r}_getNonTransformedDimensions(){return new Vb(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Hy({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=t.strokeWidth;let i=n,r=0;this.strokeUniform&&(i=0,r=n);const s=t.width+i,a=t.height+i;let o;return o=0===t.skewX&&0===t.skewY?new Vb(s*t.scaleX,a*t.scaleY):Zx(s,a,wx(t)),o.scalarAdd(r)}translateToGivenOrigin(e,t,n,i,r){let s=e.x,a=e.y;const o=aw(i)-aw(t),l=aw(r)-aw(n);if(o||l){const e=this._getTransformedDimensions();s+=o*e.x,a+=l*e.y}return new Vb(s,a)}translateToCenterPoint(e,t,n){if(t===pb&&n===pb)return e;const i=this.translateToGivenOrigin(e,t,n,pb,pb);return this.angle?i.rotate(ax(this.angle),e):i}translateToOriginPoint(e,t,n){const i=this.translateToGivenOrigin(e,pb,pb,t,n);return this.angle?i.rotate(ax(this.angle),e):i}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?cx(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new Vb(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,n){const i=this.translateToCenterPoint(e,t,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set({left:r.x,top:r.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),gb,mb)}}const NS=["type"],$S=["extraParam"];let DS=class e extends PS{static getDefaults(){return e.ownDefaults}get type(){const e=this.constructor.type;return"FabricObject"===e?"object":e.toLowerCase()}set type(e){Xy("warn","Setting type has no effect",e)}constructor(t){super(),Wy(this,"_cacheContext",null),Object.assign(this,e.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=tx(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,n=e.height,i=qy.maxCacheSideLimit,r=qy.minCacheSideLimit;if(t<=i&&n<=i&&t*n<=qy.perfLimitSizeTotal)return t<r&&(e.width=r),n<r&&(e.height=r),e;const s=t/n,[a,o]=sb.limitDimsByArea(s),l=cS(r,a,i),c=cS(r,o,i);return t>l&&(e.zoomX/=t/l,e.width=l,e.capped=!0),n>c&&(e.zoomY/=n/c,e.height=c,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),n=t.x*e.x/this.scaleX,i=t.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(i+2),zoomX:e.x,zoomY:e.y,x:n,y:i}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:n,height:i,zoomX:r,zoomY:s,x:a,y:o}=this._limitCacheSize(this._getCacheCanvasDimensions()),l=n!==e.width||i!==e.height,c=this.zoomX!==r||this.zoomY!==s;if(!e||!t)return!1;if(l||c){n!==e.width||i!==e.height?(e.width=n,e.height=i):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const l=a/2,c=o/2;return this.cacheTranslationX=Math.round(e.width/2-l)+l,this.cacheTranslationY=Math.round(e.height/2-c)+c,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(r,s),this.zoomX=r,this.zoomY=s,!0}return!1}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!t);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new Vb(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=px(this.calcTransformMatrix());return new Vb(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(t*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:0===e?1e-4:e}_set(e,t){e!==Mb&&e!==Pb||(t=this._constrainScale(t)),e===Mb&&t<0?(this.flipX=!this.flipX,t*=-1):"scaleY"===e&&t<0?(this.flipY=!this.flipY,t*=-1):"shadow"!==e||!t||t instanceof lS||(t=new lS(t));const n=this[e]!==t;return this[e]=t,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:r}=this,{width:s,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:n,cacheTranslationX:i,cacheTranslationY:r,width:s,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth}hasFill(){return this.fill&&"transparent"!==this.fill}needsItsOwnCache(){return!!(this.paintFirst===Lb&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)}drawClipPathOnCache(e,t,n){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,t,n){const i=this.fill,r=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=i,this.stroke=r}createClipPathLayer(e,t){const n=ix(t),i=n.getContext("2d");if(i.translate(t.cacheTranslationX,t.cacheTranslationY),i.scale(t.zoomX,t.zoomY),e._cacheCanvas=n,t.parentClipPaths.forEach(e=>{e.transform(i)}),t.parentClipPaths.push(e),e.absolutePositioned){const e=dx(this.calcTransformMatrix());i.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return e.transform(i),e.drawObject(i,!0,t),n}_drawClipPath(e,t,n){if(!t)return;t._transformDone=!0;const i=this.createClipPathLayer(t,n);this.drawClipPathOnCache(e,t,i)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,n=this._cacheContext;return!(!t||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const n=t.stroke;n&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Ox(n)?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:n}=t;n&&(Ox(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&0!==t.length&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,n=this.canvas,i=this.getCanvasRetinaScaling(),[r,,,s]=(null==n?void 0:n.viewportTransform)||ub,a=r*i,o=s*i,l=t.nonScaling?new Vb(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*qy.browserShadowBlurConstant*(a+o)*(l.x+l.y)/4,e.shadowOffsetX=t.offsetX*a*l.x,e.shadowOffsetY=t.offsetY*o*l.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Ox(t))return{offsetX:0,offsetY:0};const n=t.gradientTransform||t.patternTransform,i=-this.width/2+t.offsetX||0,r=-this.height/2+t.offsetY||0;return"percentage"===t.gradientUnits?e.transform(this.width,0,0,this.height,i,r):e.transform(1,0,0,1,i,r),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}}_renderPaintInOrder(e){this.paintFirst===Lb?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),"evenodd"===this.fillRule?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var n;const i=this._limitCacheSize(this._getCacheCanvasDimensions()),r=this.getCanvasRetinaScaling(),s=i.x/this.scaleX/r,a=i.y/this.scaleY/r,o=ix({width:Math.ceil(s),height:Math.ceil(a)}),l=o.getContext("2d");l&&(l.beginPath(),l.moveTo(0,0),l.lineTo(s,0),l.lineTo(s,a),l.lineTo(0,a),l.closePath(),l.translate(s/2,a/2),l.scale(i.zoomX/this.scaleX/r,i.zoomY/this.scaleY/r),this._applyPatternGradientTransform(l,t),l.fillStyle=t.toLive(e),l.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(r*this.scaleX/i.zoomX,r*this.scaleY/i.zoomY),e.strokeStyle=null!==(n=l.createPattern(o,"no-repeat"))&&void 0!==n?n:"")}_findCenterFromElement(){return new Vb(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(Bb.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Jx(this),n=this.group,i=this.shadow,r=Math.abs,s=e.enableRetinaScaling?rb():1,a=(e.multiplier||1)*s,o=e.canvasProvider||(e=>new zx(e,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&Qx(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&iw(this,this.getViewportTransform()),this.setCoords();const l=tx(),c=this.getBoundingRect(),d=this.shadow,u=new Vb;if(d){const e=d.blur,t=d.nonScaling?new Vb(1,1):this.getObjectScaling();u.x=2*Math.round(r(d.offsetX)+e)*r(t.x),u.y=2*Math.round(r(d.offsetY)+e)*r(t.y)}const h=c.width+u.x,f=c.height+u.y;l.width=Math.ceil(h),l.height=Math.ceil(f);const p=o(l);"jpeg"===e.format&&(p.backgroundColor="#fff"),this.setPositionByOrigin(new Vb(p.width/2,p.height/2),pb,pb);const g=this.canvas;p._objects=[this],this.set("canvas",p),this.setCoords();const m=p.toCanvasElement(a||1,e);return this.set("canvas",g),this.shadow=i,n&&(this.group=n),this.set(t),this.setCoords(),p._objects=[],p.destroy(),m}toDataURL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return rx(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return sx(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:n,originY:i}=this;if(t){const{x:e,y:t}=this.getRelativeCenterPoint();this.originX=pb,this.originY=pb,this.left=e,this.top=t}if(this.set("angle",e),t){const{x:e,y:t}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,i);this.left=e,this.top=t,this.originX=n,this.originY=i}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Wb.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&tb().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((e,n)=>{let[i,r]=n;return e[i]=this._animate(i,r,t),e},{})}_animate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.split("."),r=this.constructor.colorProperties.includes(i[i.length-1]),{abort:s,startValue:a,onChange:o,onComplete:l}=n,c=Hy(Hy({},n),{},{target:this,startValue:null!=a?a:i.reduce((e,t)=>e[t],this),endValue:t,abort:null==s?void 0:s.bind(this),onChange:(e,t,n)=>{i.reduce((t,n,r)=>(r===i.length-1&&(t[n]=e),t[n]),this),o&&o(e,t,n)},onComplete:(e,t,n)=>{this.setCoords(),l&&l(e,t,n)}});return r?OS(c):TS(c)}isDescendantOf(e){const{parent:t,group:n}=this;return t===e||n===e||!!t&&t.isDescendantOf(e)||!!n&&n!==t&&n.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do{t=t.parent,t&&e.push(t)}while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),n=e.getAncestors();if(0===t.length&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let i,r=0;r<t.length;r++){if(i=t[r],i===e)return{fork:[this,...t.slice(0,r)],otherFork:[],common:t.slice(r)};for(let s=0;s<n.length;s++){if(this===n[s])return{fork:[],otherFork:[e,...n.slice(0,s)],common:[this,...t]};if(i===n[s])return{fork:[this,...t.slice(0,r)],otherFork:[e,...n.slice(0,s)],common:t.slice(r)}}}return{fork:[this,...t],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const n=t.common[0]||this.canvas;if(!n)return;const i=t.fork.pop(),r=t.otherFork.pop(),s=n._objects.indexOf(i),a=n._objects.indexOf(r);return s>-1&&s>a}toObject(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).concat(e.customProperties,this.constructor.customProperties||[]);let n;const i=qy.NUM_FRACTION_DIGITS,{clipPath:r,fill:s,stroke:a,shadow:o,strokeDashArray:l,left:c,top:d,originX:u,originY:h,width:f,height:p,strokeWidth:g,strokeLineCap:m,strokeDashOffset:v,strokeLineJoin:y,strokeUniform:b,strokeMiterLimit:x,scaleX:w,scaleY:S,angle:C,flipX:_,flipY:k,opacity:A,visible:E,backgroundColor:j,fillRule:T,paintFirst:O,globalCompositeOperation:M,skewX:P,skewY:N}=this;r&&!r.excludeFromExport&&(n=r.toObject(t.concat("inverted","absolutePositioned")));const $=e=>jx(e,i),D=Hy(Hy({},Ax(this,t)),{},{type:this.constructor.type,version:ab,originX:u,originY:h,left:$(c),top:$(d),width:$(f),height:$(p),fill:Mx(s)?s.toObject():s,stroke:Mx(a)?a.toObject():a,strokeWidth:$(g),strokeDashArray:l?l.concat():l,strokeLineCap:m,strokeDashOffset:v,strokeLineJoin:y,strokeUniform:b,strokeMiterLimit:$(x),scaleX:$(w),scaleY:$(S),angle:$(C),flipX:_,flipY:k,opacity:$(A),shadow:o?o.toObject():o,visible:E,backgroundColor:j,fillRule:T,paintFirst:O,globalCompositeOperation:M,skewX:$(P),skewY:$(N)},n?{clipPath:n}:null);return this.includeDefaultValues?D:this._removeDefaultValues(D)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),n=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return Ex(e,(e,t)=>{if(t===gb||t===mb||"type"===t)return!0;const i=n[t];return e!==i&&!(Array.isArray(e)&&Array.isArray(i)&&0===e.length&&0===i.length)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Uy(e,NS),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{extraParam:i}=n,r=Uy(n,$S);return kx(t,r).then(e=>i?(delete e[i],new this(t[i],e)):new this(e))}static fromObject(e,t){return this._fromObject(e,t)}};Wy(DS,"stateProperties",dS),Wy(DS,"cacheProperties",uS),Wy(DS,"ownDefaults",hS),Wy(DS,"type","FabricObject"),Wy(DS,"colorProperties",[Db,Lb,"backgroundColor"]),Wy(DS,"customProperties",[]),Bb.setClass(DS),Bb.setClass(DS,"object");const LS=(e,t,n)=>(i,r,s,a)=>{const o=t(i,r,s,a);return o&&rw(e,Hy(Hy({},uw(i,r,s,a)),n)),o};function IS(e){return(t,n,i,r)=>{const{target:s,originX:a,originY:o}=n,l=s.getRelativeCenterPoint(),c=s.translateToOriginPoint(l,a,o),d=e(t,n,i,r);return s.setPositionByOrigin(c,n.originX,n.originY),d}}const FS=LS(Ab,IS((e,t,n,i)=>{const r=fw(t,t.originX,t.originY,n,i);if(aw(t.originX)===aw(pb)||aw(t.originX)===aw(yb)&&r.x<0||aw(t.originX)===aw(gb)&&r.x>0){const{target:e}=t,n=e.strokeWidth/(e.strokeUniform?e.scaleX:1),i=lw(t)?2:1,s=e.width,a=Math.abs(r.x*i/e.scaleX)-n;return e.set("width",Math.max(a,1)),s!==e.width}return!1}));function RS(e,t,n,i,r){i=i||{};const s=this.sizeX||i.cornerSize||r.cornerSize,a=this.sizeY||i.cornerSize||r.cornerSize,o=void 0!==i.transparentCorners?i.transparentCorners:r.transparentCorners,l=o?Lb:Db,c=!o&&(i.cornerStrokeColor||r.cornerStrokeColor);let d,u=t,h=n;e.save(),e.fillStyle=i.cornerColor||r.cornerColor||"",e.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor||"",s>a?(d=s,e.scale(1,a/s),h=n*s/a):a>s?(d=a,e.scale(s/a,1),u=t*a/s):d=s,e.beginPath(),e.arc(u,h,d/2,0,cb,!1),e[l](),c&&e.stroke(),e.restore()}function BS(e,t,n,i,r){i=i||{};const s=this.sizeX||i.cornerSize||r.cornerSize,a=this.sizeY||i.cornerSize||r.cornerSize,o=void 0!==i.transparentCorners?i.transparentCorners:r.transparentCorners,l=o?Lb:Db,c=!o&&(i.cornerStrokeColor||r.cornerStrokeColor),d=s/2,u=a/2;e.save(),e.fillStyle=i.cornerColor||r.cornerColor||"",e.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor||"",e.translate(t,n);const h=r.getTotalAngle();e.rotate(ax(h)),e["".concat(l,"Rect")](-d,-u,s,a),c&&e.strokeRect(-d,-u,s,a),e.restore()}class WS{constructor(e){Wy(this,"visible",!0),Wy(this,"actionName",Ob),Wy(this,"angle",0),Wy(this,"x",0),Wy(this,"y",0),Wy(this,"offsetX",0),Wy(this,"offsetY",0),Wy(this,"sizeX",0),Wy(this,"sizeY",0),Wy(this,"touchSizeX",0),Wy(this,"touchSizeY",0),Wy(this,"cursorStyle","crosshair"),Wy(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,n,i){var r;let{tl:s,tr:a,br:o,bl:l}=i;return(null===(r=t.canvas)||void 0===r?void 0:r.getActiveObject())===t&&t.isControlVisible(e)&&MS.isPointInPolygon(n,[s,a,o,l])}getActionHandler(e,t,n){return this.actionHandler}getMouseDownHandler(e,t,n){return this.mouseDownHandler}getMouseUpHandler(e,t,n){return this.mouseUpHandler}cursorStyleHandler(e,t,n){return t.cursorStyle}getActionName(e,t,n){return t.actionName}getVisibility(e,t){var n,i;return null!==(n=null===(i=e._controlsVisibility)||void 0===i?void 0:i[t])&&void 0!==n?n:this.visible}setVisibility(e,t,n){this.visible=e}positionHandler(e,t,n,i){return new Vb(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,n,i,r,s){const a=hx([gx(n,i),mx({angle:e}),vx((r?this.touchSizeX:this.sizeX)||t,(r?this.touchSizeY:this.sizeY)||t)]);return{tl:new Vb(-.5,-.5).transform(a),tr:new Vb(.5,-.5).transform(a),br:new Vb(.5,.5).transform(a),bl:new Vb(-.5,.5).transform(a)}}render(e,t,n,i,r){"circle"===((i=i||{}).cornerStyle||r.cornerStyle)?RS.call(this,e,t,n,i,r):BS.call(this,e,t,n,i,r)}}const zS=(e,t,n)=>n.lockRotation?ow:t.cursorStyle,HS=LS(Cb,IS((e,t,n,i)=>{let{target:r,ex:s,ey:a,theta:o,originX:l,originY:c}=t;const d=r.translateToOriginPoint(r.getRelativeCenterPoint(),l,c);if(dw(r,"lockRotation"))return!1;const u=Math.atan2(a-d.y,s-d.x),h=Math.atan2(i-d.y,n-d.x);let f=ox(h-u+o);if(r.snapAngle&&r.snapAngle>0){const e=r.snapAngle,t=r.snapThreshold||e,n=Math.ceil(f/e)*e,i=Math.floor(f/e)*e;Math.abs(f-i)<t?f=i:Math.abs(f-n)<t&&(f=n)}f<0&&(f=360+f),f%=360;const p=r.angle!==f;return r.angle=f,p}));function US(e,t){const n=t.canvas,i=e[n.uniScaleKey];return n.uniformScaling&&!i||!n.uniformScaling&&i}function GS(e,t,n){const i=dw(e,"lockScalingX"),r=dw(e,"lockScalingY");if(i&&r)return!0;if(!t&&(i||r)&&n)return!0;if(i&&"x"===t)return!0;if(r&&"y"===t)return!0;const{width:s,height:a,strokeWidth:o}=e;return 0===s&&0===o&&"y"!==t||0===a&&0===o&&"x"!==t}const VS=["e","se","s","sw","w","nw","n","ne","e"],qS=(e,t,n)=>{const i=US(e,n);if(GS(n,0!==t.x&&0===t.y?"x":0===t.x&&0!==t.y?"y":"",i))return ow;const r=hw(n,t);return"".concat(VS[r],"-resize")};function XS(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=t.target,a=r.by,o=US(e,s);let l,c,d,u,h,f;if(GS(s,a,o))return!1;if(t.gestureScale)c=t.scaleX*t.gestureScale,d=t.scaleY*t.gestureScale;else{if(l=fw(t,t.originX,t.originY,n,i),h="y"!==a?Math.sign(l.x||t.signX||1):1,f="x"!==a?Math.sign(l.y||t.signY||1):1,t.signX||(t.signX=h),t.signY||(t.signY=f),dw(s,"lockScalingFlip")&&(t.signX!==h||t.signY!==f))return!1;if(u=s._getTransformedDimensions(),o&&!a){const e=Math.abs(l.x)+Math.abs(l.y),{original:n}=t,i=e/(Math.abs(u.x*n.scaleX/s.scaleX)+Math.abs(u.y*n.scaleY/s.scaleY));c=n.scaleX*i,d=n.scaleY*i}else c=Math.abs(l.x*s.scaleX/u.x),d=Math.abs(l.y*s.scaleY/u.y);lw(t)&&(c*=2,d*=2),t.signX!==h&&"y"!==a&&(t.originX=cw(t.originX),c*=-1,t.signX=h),t.signY!==f&&"x"!==a&&(t.originY=cw(t.originY),d*=-1,t.signY=f)}const p=s.scaleX,g=s.scaleY;return a?("x"===a&&s.set(Mb,c),"y"===a&&s.set(Pb,d)):(!dw(s,"lockScalingX")&&s.set(Mb,c),!dw(s,"lockScalingY")&&s.set(Pb,d)),p!==s.scaleX||g!==s.scaleY}const YS=LS(Sb,IS((e,t,n,i)=>XS(e,t,n,i))),KS=LS(Sb,IS((e,t,n,i)=>XS(e,t,n,i,{by:"x"}))),QS=LS(Sb,IS((e,t,n,i)=>XS(e,t,n,i,{by:"y"}))),JS=["target","ex","ey","skewingSide"],ZS={x:{counterAxis:"y",scale:Mb,skew:Nb,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Pb,skew:$b,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},eC=["ns","nesw","ew","nwse"],tC=(e,t,n)=>{if(0!==t.x&&dw(n,"lockSkewingY"))return ow;if(0!==t.y&&dw(n,"lockSkewingX"))return ow;const i=hw(n,t)%4;return"".concat(eC[i],"-resize")};function nC(e,t,n,i,r){const{target:s}=n,{counterAxis:a,origin:o,lockSkewing:l,skew:c,flip:d}=ZS[e];if(dw(s,l))return!1;const{origin:u,flip:h}=ZS[a],f=aw(n[u])*(s[h]?-1:1),p=-Math.sign(f)*(s[d]?-1:1),g=-(0===s[c]&&fw(n,pb,pb,i,r)[e]>0||s[c]>0?1:-1)*p*.5+.5,m=LS(kb,IS((t,n,i,r)=>function(e,t,n){let{target:i,ex:r,ey:s,skewingSide:a}=t,o=Uy(t,JS);const{skew:l}=ZS[e],c=n.subtract(new Vb(r,s)).divide(new Vb(i.scaleX,i.scaleY))[e],d=i[l],u=o[l],h=Math.tan(ax(u)),f="y"===e?i._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:i._getTransformedDimensions({scaleX:1,scaleY:1}).y,p=2*c*a/Math.max(f,1)+h,g=ox(Math.atan(p));i.set(l,g);const m=d!==i[l];if(m&&"y"===e){const{skewX:e,scaleX:t}=i,n=i._getTransformedDimensions({skewY:d}),r=i._getTransformedDimensions(),s=0!==e?n.x/r.x:1;1!==s&&i.set(Mb,s*t)}return m}(e,n,new Vb(i,r))));return m(t,Hy(Hy({},n),{},{[o]:g,skewingSide:p}),i,r)}const iC=(e,t,n,i)=>nC("x",e,t,n,i),rC=(e,t,n,i)=>nC("y",e,t,n,i);function sC(e,t){return e[t.canvas.altActionKey]}const aC=(e,t,n)=>{const i=sC(e,n);return 0===t.x?i?Nb:Pb:0===t.y?i?$b:Mb:""},oC=(e,t,n)=>sC(e,n)?tC(0,t,n):qS(e,t,n),lC=(e,t,n,i)=>sC(e,t.target)?rC(e,t,n,i):KS(e,t,n,i),cC=(e,t,n,i)=>sC(e,t.target)?iC(e,t,n,i):QS(e,t,n,i),dC=()=>({ml:new WS({x:-.5,y:0,cursorStyleHandler:oC,actionHandler:lC,getActionName:aC}),mr:new WS({x:.5,y:0,cursorStyleHandler:oC,actionHandler:lC,getActionName:aC}),mb:new WS({x:0,y:.5,cursorStyleHandler:oC,actionHandler:cC,getActionName:aC}),mt:new WS({x:0,y:-.5,cursorStyleHandler:oC,actionHandler:cC,getActionName:aC}),tl:new WS({x:-.5,y:-.5,cursorStyleHandler:qS,actionHandler:YS}),tr:new WS({x:.5,y:-.5,cursorStyleHandler:qS,actionHandler:YS}),bl:new WS({x:-.5,y:.5,cursorStyleHandler:qS,actionHandler:YS}),br:new WS({x:.5,y:.5,cursorStyleHandler:qS,actionHandler:YS}),mtr:new WS({x:0,y:-.5,actionHandler:HS,cursorStyleHandler:zS,offsetY:-40,withConnection:!0,actionName:_b})}),uC=()=>({mr:new WS({x:.5,y:0,actionHandler:FS,cursorStyleHandler:oC,actionName:Ab}),ml:new WS({x:-.5,y:0,actionHandler:FS,cursorStyleHandler:oC,actionName:Ab})}),hC=()=>Hy(Hy({},dC()),uC());class fC extends DS{static getDefaults(){return Hy(Hy({},super.getDefaults()),fC.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),fC.ownDefaults),this.setOptions(e)}static createControls(){return{controls:dC()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,n=t.target,i=t.action;if(this===n&&i&&i.startsWith(Ob))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let i=n.length-1;i>=0;i--){const[r,s]=n[i],a=this.controls[r];if(a.shouldActivate(r,this,e,t?s.touchCorner:s.corner))return this.__corner=r,{key:r,control:a,coord:this.oCoords[r]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),n=gx(t.x,t.y),i=mx({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),r=ux(n,i),s=ux(e,r),a=ux(s,[1/e[0],0,0,1/e[3],0,0]),o=this.group?px(this.calcTransformMatrix()):void 0;o&&(o.scaleX=Math.abs(o.scaleX),o.scaleY=Math.abs(o.scaleY));const l=this._calculateCurrentDimensions(o),c={};return this.forEachControl((e,t)=>{const n=e.positionHandler(l,a,this,e);c[t]=Object.assign(n,this._calcCornerCoords(e,n))}),c}_calcCornerCoords(e,t){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),i=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/i[0],1/i[3]),e.rotate(ax(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=Hy({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=i.borderColor,this._setLineDash(e,i.borderDashArray),this.strokeBorders(e,t),i.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{hasBorders:n,hasControls:i}=this,r=Hy({hasBorders:n,hasControls:i},t),s=this.getViewportTransform(),a=r.hasBorders,o=r.hasControls,l=ux(s,this.calcTransformMatrix()),c=px(l);e.save(),e.translate(c.translateX,c.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(c.angle-=180),e.rotate(ax(this.group?c.angle:this.angle)),a&&this.drawBorders(e,c,t),o&&this.drawControls(e,t),e.restore()}drawBorders(e,t,n){let i;if(n&&n.forActiveSelection||this.group){const e=Zx(this.width,this.height,wx(t)),n=this.isStrokeAccountedForInDimensions()?qb:(this.strokeUniform?(new Vb).scalarAdd(this.canvas?this.canvas.getZoom():1):new Vb(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);i=e.add(n).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else i=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,i,n)}drawControlsConnectingLines(e,t){let n=!1;e.beginPath(),this.forEachControl((i,r)=>{i.withConnection&&i.getVisibility(this,r)&&(n=!0,e.moveTo(i.x*t.x,i.y*t.y),e.lineTo(i.x*t.x+i.offsetX,i.y*t.y+i.offsetY))}),n&&e.stroke()}drawControls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:i,cornerDashArray:r,cornerColor:s}=this,a=Hy({cornerStrokeColor:i,cornerDashArray:r,cornerColor:s},t);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((t,n)=>{if(t.getVisibility(this,n)){const i=this.oCoords[n];t.render(e,i.x,i.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.entries(e).forEach(e=>{let[t,n]=e;return this.setControlVisible(t,n)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const n=this.canvas.viewportTransform;t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(t);const i=this.width+4,r=this.height+4;return t.clearRect(-i/2,-r/2,i,r),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function pC(e,t){return t.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n)||Object.create(null))})}),e}Wy(fC,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class gC extends fC{}pC(gC,[kw]),Bb.setClass(gC),Bb.setClass(gC,"object");const mC=(e,t,n,i)=>{const r=2*(i=Math.round(i))+1,{data:s}=e.getImageData(t-i,n-i,r,r);for(let a=3;a<s.length;a+=4)if(s[a]>0)return!1;return!0};class vC{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new Vb(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new Vb(1/this.options.scaleX,1/this.options.scaleY):new Vb(1,1)}createSideVector(e,t){const n=Qw(e,t);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,t,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,n)))}isSkewed(){return 0!==this.options.skewX||0!==this.options.skewY}applySkew(e){const t=new Vb(e);return t.y+=t.x*Math.tan(ax(this.options.skewY)),t.x+=t.y*Math.tan(ax(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const yC=new Vb;class bC extends vC{static getOrthogonalRotationFactor(e,t){const n=t?Zw(e,t):eS(e);return Math.abs(n)<lb?-1:1}constructor(e,t,n,i){super(i),Wy(this,"AB",void 0),Wy(this,"AC",void 0),Wy(this,"alpha",void 0),Wy(this,"bisector",void 0),this.A=new Vb(e),this.B=new Vb(t),this.C=new Vb(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Zw(this.AB,this.AC),this.bisector=tS(Kw(this.AB.eq(yC)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t),r=nS(i),s=bC.getOrthogonalRotationFactor(r,this.bisector);return this.scaleUnitVector(r,n*s)}projectBevel(){const e=[];return(this.alpha%cb==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),n=1/Math.sin(t/2),i=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),r=this.options.strokeUniform?Jw(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Jw(i)/this.strokeProjectionMagnitude<=r&&e.push(this.applySkew(this.A.add(i))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const n=[],i=new Vb(bC.getOrthogonalRotationFactor(this.bisector),bC.getOrthogonalRotationFactor(new Vb(this.bisector.y,this.bisector.x)));return[new Vb(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i),new Vb(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(i)].forEach(i=>{sS(i,e,t)&&n.push(this.A.add(i))}),n}projectRoundWithSkew(e,t){const n=[],{skewX:i,skewY:r,scaleX:s,scaleY:a,strokeUniform:o}=this.options,l=new Vb(Math.tan(ax(i)),Math.tan(ax(r))),c=this.strokeProjectionMagnitude,d=o?c/a/Math.sqrt(1/a**2+1/s**2*l.y**2):c/Math.sqrt(1+l.y**2),u=new Vb(Math.sqrt(Math.max(c**2-d**2,0)),d),h=o?c/Math.sqrt(1+l.x**2*(1/a)**2/(1/s+1/s*l.x*l.y)**2):c/Math.sqrt(1+l.x**2/(1+l.x*l.y)**2),f=new Vb(h,Math.sqrt(Math.max(c**2-h**2,0)));return[f,f.scalarMultiply(-1),u,u.scalarMultiply(-1)].map(e=>this.applySkew(o?e.multiply(this.strokeUniformScalar):e)).forEach(i=>{sS(i,e,t)&&n.push(this.applySkew(this.A).add(i))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%cb==0,n=this.applySkew(this.A),i=e[t?0:2].subtract(n),r=e[t?1:0].subtract(n),s=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=iS(i,s)>0,o=a?i:r,l=a?r:i;return this.isSkewed()?e.push(...this.projectRoundWithSkew(o,l)):e.push(...this.projectRoundNoSkew(o,l)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class xC extends vC{constructor(e,t,n){super(n),this.A=new Vb(e),this.T=new Vb(t)}calcOrthogonalProjection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.strokeProjectionMagnitude;const i=this.createSideVector(e,t);return this.scaleUnitVector(nS(i),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new Vb(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new bC(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new Vb(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(tS(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),i=this.A.add(n);e.push(i.add(t),i.subtract(t))}return e.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const wC=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=[];if(0===e.length)return i;const r=e.reduce((e,t)=>(e[e.length-1].eq(t)||e.push(new Vb(t)),e),[new Vb(e[0])]);if(1===r.length)n=!0;else if(!n){const e=r[0],t=((e,t)=>{for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1})(r,t=>!t.eq(e));r.splice(t+1)}return r.forEach((e,r,s)=>{let a,o;0===r?(o=s[1],a=n?e:s[s.length-1]):r===s.length-1?(a=s[r-1],o=n?e:s[0]):(a=s[r-1],o=s[r+1]),n&&1===s.length?i.push(...new xC(e,e,t).project()):!n||0!==r&&r!==s.length-1?i.push(...new bC(e,a,o,t).project()):i.push(...new xC(e,0===r?o:a,t).project())}),i},SC=e=>{const t={};return Object.keys(e).forEach(n=>{t[n]={},Object.keys(e[n]).forEach(i=>{t[n][i]=Hy({},e[n][i])})}),t},CC=e=>e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let _C;const kC=e=>{if(_C||_C||(_C="Intl"in ib()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),_C){const t=_C.segment(e);return Array.from(t).map(e=>{let{segment:t}=e;return t})}return AC(e)},AC=e=>{const t=[];for(let n,i=0;i<e.length;i++)!1!==(n=EC(e,i))&&t.push(n);return t},EC=(e,t)=>{const n=e.charCodeAt(t);if(isNaN(n))return"";if(n<55296||n>57343)return e.charAt(t);if(55296<=n&&n<=56319){if(e.length<=t+1)throw"High surrogate without following low surrogate";const n=e.charCodeAt(t+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return e.charAt(t)+e.charAt(t+1)}if(0===t)throw"Low surrogate without preceding high surrogate";const i=e.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1};var jC=Object.freeze({__proto__:null,capitalize:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(e.charAt(0).toUpperCase()).concat(t?e.slice(1):e.slice(1).toLowerCase())},escapeXml:CC,graphemeSplit:kC});const TC=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.fill!==t.fill||e.stroke!==t.stroke||e.strokeWidth!==t.strokeWidth||e.fontSize!==t.fontSize||e.fontFamily!==t.fontFamily||e.fontWeight!==t.fontWeight||e.fontStyle!==t.fontStyle||e.textDecorationThickness!==t.textDecorationThickness||e.textBackgroundColor!==t.textBackgroundColor||e.deltaY!==t.deltaY||n&&(e.overline!==t.overline||e.underline!==t.underline||e.linethrough!==t.linethrough)},OC=(e,t)=>{const n=t.split("\n"),i=[];let r=-1,s={};e=SC(e);for(let a=0;a<n.length;a++){const t=kC(n[a]);if(e[a])for(let n=0;n<t.length;n++){r++;const t=e[a][n];t&&Object.keys(t).length>0&&(TC(s,t,!0)?i.push({start:r,end:r+1,style:t}):i[i.length-1].end++),s=t||{}}else r+=t.length,s={}}return i},MC=(e,t)=>{if(!Array.isArray(e))return SC(e);const n=t.split(xb),i={};let r=-1,s=0;for(let a=0;a<n.length;a++){const t=kC(n[a]);for(let n=0;n<t.length;n++)r++,e[s]&&e[s].start<=r&&r<e[s].end&&(i[a]=i[a]||{},i[a][n]=Hy({},e[s].style),r===e[s].end-1&&s++)}return i},PC=["display","transform",Db,"fill-opacity","fill-rule","opacity",Lb,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function NC(e,t){const n=e.nodeName,i=e.getAttribute("class"),r=e.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let a;if(a=new RegExp("^"+n,"i"),t=t.replace(a,""),r&&t.length&&(a=new RegExp("#"+r+s,"i"),t=t.replace(a,"")),i&&t.length){const e=i.split(" ");for(let n=e.length;n--;)a=new RegExp("\\."+e[n]+s,"i"),t=t.replace(a,"")}return 0===t.length}function $C(e,t){let n=!0;const i=NC(e,t.pop());return i&&t.length&&(n=function(e,t){let n,i=!0;for(;e.parentElement&&1===e.parentElement.nodeType&&t.length;)i&&(n=t.pop()),i=NC(e=e.parentElement,n);return 0===t.length}(e,t)),i&&n&&0===t.length}const DC=e=>{var t;return null!==(t=Uw[e])&&void 0!==t?t:e},LC=new RegExp("(".concat(Ww,")"),"gi");var IC,FC,RC,BC,WC,zC,HC;const UC="(".concat(Ww,")"),GC=String.raw(IC||(IC=Gy(["(skewX)(",")"],["(skewX)\\(","\\)"])),UC),VC=String.raw(FC||(FC=Gy(["(skewY)(",")"],["(skewY)\\(","\\)"])),UC),qC=String.raw(RC||(RC=Gy(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),UC,UC,UC),XC=String.raw(BC||(BC=Gy(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),UC,UC),YC=String.raw(WC||(WC=Gy(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),UC,UC),KC=String.raw(zC||(zC=Gy(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),UC,UC,UC,UC,UC,UC),QC="(?:".concat(KC,"|").concat(YC,"|").concat(qC,"|").concat(XC,"|").concat(GC,"|").concat(VC,")"),JC="(?:".concat(QC,"*)"),ZC=String.raw(HC||(HC=Gy(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),JC),e_=new RegExp(ZC),t_=new RegExp(QC),n_=new RegExp(QC,"g");function i_(e){const t=[];if(!(e=(e=>e.replace(LC," $1 ").replace(/,/gi," ").replace(/\s+/gi," "))(e).replace(/\s*([()])\s*/gi,"$1"))||e&&!e_.test(e))return[...ub];for(const n of e.matchAll(n_)){const e=t_.exec(n[0]);if(!e)continue;let i=ub;const r=e.filter(e=>!!e),[,s,...a]=r,[o,l,c,d,u,h]=a.map(e=>parseFloat(e));switch(s){case"translate":i=gx(o,l);break;case _b:i=mx({angle:o},{x:l,y:c});break;case Ob:i=vx(o,l);break;case Nb:i=bx(o);break;case $b:i=xx(o);break;case"matrix":i=[o,l,c,d,u,h]}t.push(i)}return hx(t)}function r_(e,t,n,i){const r=Array.isArray(t);let s,a=t;if(e!==Db&&e!==Lb||t!==bb){if("strokeUniform"===e)return"non-scaling-stroke"===t;if("strokeDashArray"===e)a=t===bb?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===e)a=n&&n.transformMatrix?ux(n.transformMatrix,i_(t)):i_(t);else if("visible"===e)a=t!==bb&&"hidden"!==t,n&&!1===n.visible&&(a=!1);else if("opacity"===e)a=parseFloat(t),n&&void 0!==n.opacity&&(a*=n.opacity);else if("textAnchor"===e)a="start"===t?gb:"end"===t?yb:pb;else if("charSpacing"===e||e===Ew)s=Sw(t,i)/i*1e3;else if("paintFirst"===e){const e=t.indexOf(Db),n=t.indexOf(Lb);a=Db,(e>-1&&n>-1&&n<e||-1===e&&n>-1)&&(a=Lb)}else{if("href"===e||"xlink:href"===e||"font"===e||"id"===e)return t;if("imageSmoothing"===e)return"optimizeQuality"===t;s=r?t.map(Sw):Sw(t,i)}}else a="";return!r&&isNaN(s)?a:s}function s_(e,t){e.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[n,i]=e.split(":");t[n.trim().toLowerCase()]=i.trim()})}const a_={stroke:"strokeOpacity",fill:"fillOpacity"};function o_(e,t,n){if(!e)return{};let i,r={},s=hb;e.parentNode&&qw.test(e.parentNode.nodeName)&&(r=o_(e.parentElement,t,n),r.fontSize&&(i=s=Sw(r.fontSize)));const a=Hy(Hy(Hy({},t.reduce((t,n)=>{const i=e.getAttribute(n);return i&&(t[n]=i),t},{})),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};for(const i in t)$C(e,i.split(" "))&&(n=Hy(Hy({},n),t[i]));return n}(e,n)),function(e){const t={},n=e.getAttribute("style");return n?("string"==typeof n?s_(n,t):function(e,t){Object.entries(e).forEach(e=>{let[n,i]=e;void 0!==i&&(t[n.toLowerCase()]=i)})}(n,t),t):t}(e));a[Vw]&&e.setAttribute(Vw,a[Vw]),a[Gw]&&(i=Sw(a[Gw],s),a[Gw]="".concat(i));const o={};for(const c in a){const e=DC(c),t=r_(e,a[c],r,i);o[e]=t}o&&o.font&&function(e,t){const n=e.match(Hw);if(!n)return;const i=n[1],r=n[3],s=n[4],a=n[5],o=n[6];i&&(t.fontStyle=i),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(t.fontSize=Sw(s)),o&&(t.fontFamily=o),a&&(t.lineHeight="normal"===a?1:a)}(o.font,o);const l=Hy(Hy({},r),o);return qw.test(e.nodeName)?l:function(e){const t=gC.getDefaults();return Object.entries(a_).forEach(n=>{let[i,r]=n;if(void 0===e[r]||""===e[i])return;if(void 0===e[i]){if(!t[i])return;e[i]=t[i]}if(0===e[i].indexOf("url("))return;const s=new ww(e[i]);e[i]=s.setAlpha(jx(s.getAlpha()*e[r],2)).toRgba()}),e}(l)}const l_=["left","top","width","height","visible"],c_=["rx","ry"];class d_ extends gC{static getDefaults(){return Hy(Hy({},super.getDefaults()),d_.ownDefaults)}constructor(e){super(),Object.assign(this,d_.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:n}=this,i=-t/2,r=-n/2,s=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,n/2):0,o=0!==s||0!==a;e.beginPath(),e.moveTo(i+s,r),e.lineTo(i+t-s,r),o&&e.bezierCurveTo(i+t-fb*s,r,i+t,r+fb*a,i+t,r+a),e.lineTo(i+t,r+n-a),o&&e.bezierCurveTo(i+t,r+n-fb*a,i+t-fb*s,r+n,i+t-s,r+n),e.lineTo(i+s,r+n),o&&e.bezierCurveTo(i+fb*s,r+n,i,r+n-fb*a,i,r+n-a),e.lineTo(i,r+a),o&&e.bezierCurveTo(i,r+fb*a,i+fb*s,r,i+s,r),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...c_,...e])}_toSVG(){const{width:e,height:t,rx:n,ry:i}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(n,'" ry="').concat(i,'" width="').concat(e,'" height="').concat(t,'" />\n')]}static async fromElement(e,t,n){const i=o_(e,this.ATTRIBUTE_NAMES,n),{left:r=0,top:s=0,width:a=0,height:o=0,visible:l=!0}=i,c=Uy(i,l_);return new this(Hy(Hy(Hy({},t),c),{},{left:r,top:s,width:a,height:o,visible:Boolean(l&&a&&o)}))}}Wy(d_,"type","Rect"),Wy(d_,"cacheProperties",[...uS,...c_]),Wy(d_,"ownDefaults",{rx:0,ry:0}),Wy(d_,"ATTRIBUTE_NAMES",[...PC,"x","y","rx","ry","width","height"]),Bb.setClass(d_),Bb.setSVGClass(d_);const u_="initialization",h_="added",f_="removed",p_="imperative",g_=(e,t)=>{const{strokeUniform:n,strokeWidth:i,width:r,height:s,group:a}=t,o=a&&a!==e?ew(a.calcTransformMatrix(),e.calcTransformMatrix()):null,l=o?t.getRelativeCenterPoint().transform(o):t.getRelativeCenterPoint(),c=!t.isStrokeAccountedForInDimensions(),d=n&&c?nw(new Vb(i,i),void 0,e.calcTransformMatrix()):qb,u=!n&&c?i:0,h=Zx(r+u,s+u,hx([o,t.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[l.subtract(h),l.add(h)]};class m_{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:n,strategy:i}=e;return t===u_||t===p_||!!n&&i!==n}shouldLayoutClipPath(e){let{type:t,target:{clipPath:n}}=e;return t!==u_&&n&&!n.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:n,target:i}=t;if(n===p_&&t.overrides)return t.overrides;if(0===e.length)return;const{left:r,top:s,width:a,height:o}=qx(e.map(e=>g_(i,e)).reduce((e,t)=>e.concat(t),[])),l=new Vb(a,o),c=new Vb(r,s).add(l.scalarDivide(2));if(n===u_){const e=this.getInitialSize(t,{size:l,center:c});return{center:c,relativeCorrection:new Vb(0,0),size:e}}return{center:c.transform(i.calcOwnMatrix()),size:l}}}Wy(m_,"type","strategy");class v_ extends m_{shouldPerformLayout(e){return!0}}Wy(v_,"type","fit-content"),Bb.setClass(v_);const y_=["strategy"],b_=["target","strategy","bubbles","prevStrategy"],x_="layoutManager";class w_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v_;Wy(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=Hy(Hy({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const n=this.getLayoutResult(t);n&&this.commitLayout(t,n),this.onAfterLayout(t,n),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:n}=t;return[Ib,wb,Ab,Cb,Sb,kb,Tb,Eb,jb].map(t=>e.on(t,e=>this.performLayout(t===Ib?{type:"object_modified",trigger:t,e:e,target:n}:{type:"object_modifying",trigger:t,e:e,target:n})))}subscribe(e,t){this.unsubscribe(e,t);const n=this.attachHandlers(e,t);this._subscriptions.set(e,n)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(e=>e()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:n}=e,{canvas:i}=t;if(n===u_||n===h_?this.subscribeTargets(e):n===f_&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),i&&i.fire("object:layout:before",{target:t,context:e}),n===p_&&e.deep){const n=Uy(e,y_);t.forEachObject(e=>e.layoutManager&&e.layoutManager.performLayout(Hy(Hy({},n),{},{bubbles:!1,target:e})))}}getLayoutResult(e){const{target:t,strategy:n,type:i}=e,r=n.calcLayoutResult(e,t.getObjects());if(!r)return;const s=i===u_?new Vb:t.getRelativeCenterPoint(),{center:a,correction:o=new Vb,relativeCorrection:l=new Vb}=r,c=s.subtract(a).add(o).transform(i===u_?ub:dx(t.calcOwnMatrix()),!0).add(l);return{result:r,prevCenter:s,nextCenter:a,offset:c}}commitLayout(e,t){const{target:n}=e,{result:{size:i},nextCenter:r}=t;var s,a;n.set({width:i.x,height:i.y}),this.layoutObjects(e,t),e.type===u_?n.set({left:null!==(s=e.x)&&void 0!==s?s:r.x+i.x*aw(n.originX),top:null!==(a=e.y)&&void 0!==a?a:r.y+i.y*aw(n.originY)}):(n.setPositionByOrigin(r,pb,pb),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,t){const{target:n}=e;n.forEachObject(i=>{i.group===n&&this.layoutObject(e,t,i)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,n.clipPath)}layoutObject(e,t,n){let{offset:i}=t;n.set({left:n.left+i.x,top:n.top+i.y})}onAfterLayout(e,t){const{target:n,strategy:i,bubbles:r,prevStrategy:s}=e,a=Uy(e,b_),{canvas:o}=n;n.fire("layout:after",{context:e,result:t}),o&&o.fire("object:layout:after",{context:e,result:t,target:n});const l=n.parent;r&&null!=l&&l.layoutManager&&((a.path||(a.path=[])).push(n),l.layoutManager.performLayout(Hy(Hy({},a),{},{target:l}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(e=>e.forEach(e=>e())),e.clear()}toObject(){return{type:x_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Bb.setClass(w_,x_);const S_=["type","objects","layoutManager"];class C_ extends w_{performLayout(){}}class __ extends(Yb(gC)){static getDefaults(){return Hy(Hy({},super.getDefaults()),__.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Wy(this,"_activeObjects",[]),Wy(this,"__objectSelectionTracker",void 0),Wy(this,"__objectSelectionDisposer",void 0),Object.assign(this,__.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(e=>{this.enterGroup(e,!1)}),this.layoutManager=null!==(n=t.layoutManager)&&void 0!==n?n:new w_,this.layoutManager.performLayout({type:u_,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Xy("error","Group: circular object trees are not supported, this call has no effect"),!1):-1===this._objects.indexOf(e)||(Xy("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((e,t,n)=>this.canEnterGroup(e)&&n.indexOf(e)===t)}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=this._filterObjectsBeforeEnteringGroup(t),r=super.add(...i);return this._onAfterObjectsChange(h_,i),r}insertAt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=this._filterObjectsBeforeEnteringGroup(n),s=super.insertAt(e,...r);return this._onAfterObjectsChange(h_,r),s}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(f_,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const n=this[e];return super._set(e,t),"canvas"===e&&n!==t&&(this._objects||[]).forEach(n=>{n._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:n}=t;const i=this._activeObjects;if(e)i.push(n),this._set("dirty",!0);else if(i.length>0){const e=i.indexOf(n);e>-1&&(i.splice(e,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Kx(e,ux(dx(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Kx(e,ux(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=gC.prototype.shouldCache.call(this);if(e)for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1;return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,n){this._renderBackground(e);for(let r=0;r<this._objects.length;r++){var i;const t=this._objects[r];null!==(i=this.canvas)&&void 0!==i&&i.preserveObjectStacking&&t.group!==this?(e.save(),e.transform(...dx(this.calcTransformMatrix())),t.render(e),e.restore()):t.group===this&&t.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.layoutManager.performLayout(Hy({target:this,type:p_},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const n=this.includeDefaultValues;return this._objects.filter(function(e){return!e.excludeFromExport}).map(function(i){const r=i.includeDefaultValues;i.includeDefaultValues=n;const s=i[e||"toObject"](t);return i.includeDefaultValues=r,s})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.layoutManager.toObject();return Hy(Hy(Hy({},super.toObject(["subTargetCheck","interactive",...e])),"fit-content"!==t.strategy||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=d_.prototype._toSVG.call(this),n=t.indexOf("COMMON_PARTS");t[n]='for="group" ';const i=t.join("");return e?e(i):i}_toSVG(e){const t=["<g ","COMMON_PARTS"," >\n"],n=this._createSVGBgRect(e);n&&t.push("\t\t",n);for(let i=0;i<this._objects.length;i++)t.push("\t\t",this._objects[i].toSVG(e));return t.push("</g>\n"),t}getSvgStyles(){const e=void 0!==this.opacity&&1!==this.opacity?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],n=this._createSVGBgRect(e);n&&t.push("\t",n);for(let i=0;i<this._objects.length;i++)t.push("\t",this._objects[i].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:n,objects:i=[],layoutManager:r}=e,s=Uy(e,S_);return Promise.all([_x(i,t),kx(s,t)]).then(e=>{let[t,n]=e;const i=new this(t,Hy(Hy(Hy({},s),n),{},{layoutManager:new C_}));if(r){const e=Bb.getClass(r.type),t=Bb.getClass(r.strategy);i.layoutManager=new e(new t)}else i.layoutManager=new w_;return i.layoutManager.subscribeTargets({type:u_,target:i,targets:i.getObjects()}),i.setCoords(),i})}}Wy(__,"type","Group"),Wy(__,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Bb.setClass(__);const k_=(e,t)=>Math.min(t.width/e.width,t.height/e.height),A_=(e,t)=>Math.max(t.width/e.width,t.height/e.height),E_="\\s*,?\\s*",j_="".concat(E_,"(").concat(Ww,")"),T_="".concat(j_).concat(j_).concat(j_).concat(E_,"([01])").concat(E_,"([01])").concat(j_).concat(j_),O_={m:"l",M:"L"},M_=(e,t,n,i,r,s,a,o,l,c,d)=>{const u=Ub(e),h=Gb(e),f=Ub(t),p=Gb(t),g=n*r*f-i*s*p+a,m=i*r*f+n*s*p+o;return["C",c+l*(-n*r*h-i*s*u),d+l*(-i*r*h+n*s*u),g+l*(n*r*p+i*s*f),m+l*(i*r*p-n*s*f),g,m]},P_=(e,t,n,i)=>{const r=Math.atan2(t,e),s=Math.atan2(i,n);return s>=r?s-r:2*Math.PI-(r-s)};function N_(e,t,n,i,r,s,a,o){let l;if(qy.cachesBoundsOfCurve&&(l=[...arguments].join(),sb.boundsOfCurveCache[l]))return sb.boundsOfCurveCache[l];const c=Math.sqrt,d=Math.abs,u=[],h=[[0,0],[0,0]];let f=6*e-12*n+6*r,p=-3*e+9*n-9*r+3*a,g=3*n-3*e;for(let x=0;x<2;++x){if(x>0&&(f=6*t-12*i+6*s,p=-3*t+9*i-9*s+3*o,g=3*i-3*t),d(p)<1e-12){if(d(f)<1e-12)continue;const e=-g/f;0<e&&e<1&&u.push(e);continue}const e=f*f-4*g*p;if(e<0)continue;const n=c(e),r=(-f+n)/(2*p);0<r&&r<1&&u.push(r);const a=(-f-n)/(2*p);0<a&&a<1&&u.push(a)}let m=u.length;const v=m,y=I_(e,t,n,i,r,s,a,o);for(;m--;){const{x:e,y:t}=y(u[m]);h[0][m]=e,h[1][m]=t}h[0][v]=e,h[1][v]=t,h[0][v+1]=a,h[1][v+1]=o;const b=[new Vb(Math.min(...h[0]),Math.min(...h[1])),new Vb(Math.max(...h[0]),Math.max(...h[1]))];return qy.cachesBoundsOfCurve&&(sb.boundsOfCurveCache[l]=b),b}const $_=(e,t,n)=>{let[i,r,s,a,o,l,c,d]=n;const u=((e,t,n,i,r,s,a)=>{if(0===n||0===i)return[];let o=0,l=0,c=0;const d=Math.PI,u=a*db,h=Gb(u),f=Ub(u),p=.5*(-f*e-h*t),g=.5*(-f*t+h*e),m=n**2,v=i**2,y=g**2,b=p**2,x=m*v-m*y-v*b;let w=Math.abs(n),S=Math.abs(i);if(x<0){const e=Math.sqrt(1-x/(m*v));w*=e,S*=e}else c=(r===s?-1:1)*Math.sqrt(x/(m*y+v*b));const C=c*w*g/S,_=-c*S*p/w,k=f*C-h*_+.5*e,A=h*C+f*_+.5*t;let E=P_(1,0,(p-C)/w,(g-_)/S),j=P_((p-C)/w,(g-_)/S,(-p-C)/w,(-g-_)/S);0===s&&j>0?j-=2*d:1===s&&j<0&&(j+=2*d);const T=Math.ceil(Math.abs(j/d*2)),O=[],M=j/T,P=8/3*Math.sin(M/4)*Math.sin(M/4)/Math.sin(M/2);let N=E+M;for(let $=0;$<T;$++)O[$]=M_(E,N,f,h,w,S,k,A,P,o,l),o=O[$][5],l=O[$][6],E=N,N+=M;return O})(c-e,d-t,r,s,o,l,a);for(let h=0,f=u.length;h<f;h++)u[h][1]+=e,u[h][2]+=t,u[h][3]+=e,u[h][4]+=t,u[h][5]+=e,u[h][6]+=t;return u},D_=e=>{let t=0,n=0,i=0,r=0;const s=[];let a,o=0,l=0;for(const c of e){const e=[...c];let d;switch(e[0]){case"l":e[1]+=t,e[2]+=n;case"L":t=e[1],n=e[2],d=["L",t,n];break;case"h":e[1]+=t;case"H":t=e[1],d=["L",t,n];break;case"v":e[1]+=n;case"V":n=e[1],d=["L",t,n];break;case"m":e[1]+=t,e[2]+=n;case"M":t=e[1],n=e[2],i=e[1],r=e[2],d=["M",t,n];break;case"c":e[1]+=t,e[2]+=n,e[3]+=t,e[4]+=n,e[5]+=t,e[6]+=n;case"C":o=e[3],l=e[4],t=e[5],n=e[6],d=["C",e[1],e[2],o,l,t,n];break;case"s":e[1]+=t,e[2]+=n,e[3]+=t,e[4]+=n;case"S":"C"===a?(o=2*t-o,l=2*n-l):(o=t,l=n),t=e[3],n=e[4],d=["C",o,l,e[1],e[2],t,n],o=d[3],l=d[4];break;case"q":e[1]+=t,e[2]+=n,e[3]+=t,e[4]+=n;case"Q":o=e[1],l=e[2],t=e[3],n=e[4],d=["Q",o,l,t,n];break;case"t":e[1]+=t,e[2]+=n;case"T":"Q"===a?(o=2*t-o,l=2*n-l):(o=t,l=n),t=e[1],n=e[2],d=["Q",o,l,t,n];break;case"a":e[6]+=t,e[7]+=n;case"A":$_(t,n,e).forEach(e=>s.push(e)),t=e[6],n=e[7];break;case"z":case"Z":t=i,n=r,d=["Z"]}d?(s.push(d),a=d[0]):a=""}return s},L_=(e,t,n,i)=>Math.sqrt((n-e)**2+(i-t)**2),I_=(e,t,n,i,r,s,a,o)=>l=>{const c=l**3,d=(e=>3*e**2*(1-e))(l),u=(e=>3*e*(1-e)**2)(l),h=(e=>(1-e)**3)(l);return new Vb(a*c+r*d+n*u+e*h,o*c+s*d+i*u+t*h)},F_=e=>e**2,R_=e=>2*e*(1-e),B_=e=>(1-e)**2,W_=(e,t,n,i,r,s,a,o)=>l=>{const c=F_(l),d=R_(l),u=B_(l),h=3*(u*(n-e)+d*(r-n)+c*(a-r)),f=3*(u*(i-t)+d*(s-i)+c*(o-s));return Math.atan2(f,h)},z_=(e,t,n,i,r,s)=>a=>{const o=F_(a),l=R_(a),c=B_(a);return new Vb(r*o+n*l+e*c,s*o+i*l+t*c)},H_=(e,t,n,i,r,s)=>a=>{const o=1-a,l=2*(o*(n-e)+a*(r-n)),c=2*(o*(i-t)+a*(s-i));return Math.atan2(c,l)},U_=(e,t,n)=>{let i=new Vb(t,n),r=0;for(let s=1;s<=100;s+=1){const t=e(s/100);r+=L_(i.x,i.y,t.x,t.y),i=t}return r},G_=e=>{let t,n,i=0,r=0,s=0,a=0,o=0;const l=[];for(const c of e){const e={x:r,y:s,command:c[0],length:0};switch(c[0]){case"M":n=e,n.x=a=r=c[1],n.y=o=s=c[2];break;case"L":n=e,n.length=L_(r,s,c[1],c[2]),r=c[1],s=c[2];break;case"C":t=I_(r,s,c[1],c[2],c[3],c[4],c[5],c[6]),n=e,n.iterator=t,n.angleFinder=W_(r,s,c[1],c[2],c[3],c[4],c[5],c[6]),n.length=U_(t,r,s),r=c[5],s=c[6];break;case"Q":t=z_(r,s,c[1],c[2],c[3],c[4]),n=e,n.iterator=t,n.angleFinder=H_(r,s,c[1],c[2],c[3],c[4]),n.length=U_(t,r,s),r=c[3],s=c[4];break;case"Z":n=e,n.destX=a,n.destY=o,n.length=L_(r,s,a,o),r=a,s=o}i+=n.length,l.push(n)}return l.push({length:i,x:r,y:s}),l},V_=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G_(e),i=0;for(;t-n[i].length>0&&i<n.length-2;)t-=n[i].length,i++;const r=n[i],s=t/r.length,a=e[i];switch(r.command){case"M":return{x:r.x,y:r.y,angle:0};case"Z":return Hy(Hy({},new Vb(r.x,r.y).lerp(new Vb(r.destX,r.destY),s)),{},{angle:Math.atan2(r.destY-r.y,r.destX-r.x)});case"L":return Hy(Hy({},new Vb(r.x,r.y).lerp(new Vb(a[1],a[2]),s)),{},{angle:Math.atan2(a[2]-r.y,a[1]-r.x)});case"C":case"Q":return((e,t)=>{let n,i=0,r=0,s={x:e.x,y:e.y},a=Hy({},s),o=.01,l=0;const c=e.iterator,d=e.angleFinder;for(;r<t&&o>1e-4;)a=c(i),l=i,n=L_(s.x,s.y,a.x,a.y),n+r>t?(i-=o,o/=2):(s=a,i+=o,r+=n);return Hy(Hy({},a),{},{angle:d(l)})})(r,t)}},q_=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),X_=new RegExp(T_,"g"),Y_=new RegExp(Ww,"gi"),K_={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Q_=e=>{var t;const n=[],i=null!==(t=e.match(q_))&&void 0!==t?t:[];for(const r of i){const e=r[0];if("z"===e||"Z"===e){n.push([e]);continue}const t=K_[e.toLowerCase()];let i=[];if("a"===e||"A"===e){X_.lastIndex=0;for(let e=null;e=X_.exec(r);)i.push(...e.slice(1))}else i=r.match(Y_)||[];for(let r=0;r<i.length;r+=t){const s=new Array(t),a=O_[e];s[0]=r>0&&a?a:e;for(let e=0;e<t;e++)s[e+1]=parseFloat(i[r+e]);n.push(s)}}return n},J_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Vb(e[0]),i=new Vb(e[1]),r=1,s=0;const a=[],o=e.length,l=o>2;let c;for(l&&(r=e[2].x<i.x?-1:e[2].x===i.x?0:1,s=e[2].y<i.y?-1:e[2].y===i.y?0:1),a.push(["M",n.x-r*t,n.y-s*t]),c=1;c<o;c++){if(!n.eq(i)){const e=n.midPointFrom(i);a.push(["Q",n.x,n.y,e.x,e.y])}n=e[c],c+1<e.length&&(i=e[c+1])}return l&&(r=n.x>e[c-2].x?1:n.x===e[c-2].x?0:-1,s=n.y>e[c-2].y?1:n.y===e[c-2].y?0:-1),a.push(["L",n.x+r*t,n.y+s*t]),a},Z_=(e,t)=>e.map(e=>e.map((e,n)=>0===n||void 0===t?e:jx(e,t)).join(" ")).join(" ");function ek(e,t){const n=e.style;n&&t&&("string"==typeof t?n.cssText+=";"+t:Object.entries(t).forEach(e=>{let[t,i]=e;return n.setProperty(t,i)}))}const tk=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;function nk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.onComplete||ob,i=new(ib().XMLHttpRequest),r=t.signal,s=function(){i.abort()},a=function(){r&&r.removeEventListener("abort",s),i.onerror=i.ontimeout=ob};if(r&&r.aborted)throw new Ky("request");return r&&r.addEventListener("abort",s,{once:!0}),i.onreadystatechange=function(){4===i.readyState&&(a(),n(i),i.onreadystatechange=ob)},i.onerror=i.ontimeout=a,i.open("get",e,!0),i.send(),i}const ik=(e,t)=>{let n=e._findCenterFromElement();e.transformMatrix&&((e=>{if(e.transformMatrix){const{scaleX:t,scaleY:n,angle:i,skewX:r}=px(e.transformMatrix);e.flipX=!1,e.flipY=!1,e.set(Mb,t),e.set(Pb,n),e.angle=i,e.skewX=r,e.skewY=0}})(e),n=n.transform(e.transformMatrix)),delete e.transformMatrix,t&&(e.scaleX*=t.scaleX,e.scaleY*=t.scaleY,e.cropX=t.cropX,e.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,e.width=t.width,e.height=t.height),e.setPositionByOrigin(n,pb,pb)};Object.freeze({__proto__:null,addTransformToObject:Yx,animate:TS,animateColor:OS,applyTransformToObject:Kx,calcAngleBetweenVectors:Zw,calcDimensionsMatrix:wx,calcPlaneChangeMatrix:ew,calcVectorRotation:eS,cancelAnimFrame:Jb,capValue:cS,composeMatrix:Sx,copyCanvasElement:e=>{var t;const n=ix(e);return null===(t=n.getContext("2d"))||void 0===t||t.drawImage(e,0,0),n},cos:Ub,createCanvasElement:tx,createImage:nx,createRotateMatrix:mx,createScaleMatrix:vx,createSkewXMatrix:bx,createSkewYMatrix:xx,createTranslateMatrix:gx,createVector:Qw,crossProduct:iS,degreesToRadians:ax,dotProduct:rS,ease:yS,enlivenObjectEnlivables:kx,enlivenObjects:_x,findScaleToCover:A_,findScaleToFit:k_,getBoundsOfCurve:N_,getOrthonormalVector:nS,getPathSegmentsInfo:G_,getPointOnPath:V_,getPointer:Ux,getRandomInt:tk,getRegularPolygonPath:(e,t)=>{const n=2*Math.PI/e;let i=-lb;e%2==0&&(i+=n/2);const r=new Array(e+1);for(let s=0;s<e;s++){const e=s*n+i,{x:a,y:o}=new Vb(Ub(e),Gb(e)).scalarMultiply(t);r[s]=[0===s?"M":"L",a,o]}return r[e]=["Z"],r},getSmoothPathFromPoints:J_,getSvgAttributes:e=>{const t=["instantiated_by_use","style","id","class"];switch(e){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:tS,groupSVGElements:(e,t)=>e&&1===e.length?e[0]:new __(e,t),hasStyleChanged:TC,invertTransform:dx,isBetweenVectors:sS,isIdentityMatrix:lx,isTouchEvent:Gx,isTransparent:mC,joinPath:Z_,loadImage:Cx,magnitude:Jw,makeBoundingBoxFromPoints:qx,makePathSimpler:D_,matrixToSVG:Tx,mergeClipPaths:(e,t)=>{var n;let i=e,r=t;i.inverted&&!r.inverted&&(i=t,r=e),iw(r,null===(n=r.group)||void 0===n?void 0:n.calcTransformMatrix(),i.calcTransformMatrix());const s=i.inverted&&r.inverted;return s&&(i.inverted=r.inverted=!1),new __([i],{clipPath:r,inverted:s})},multiplyTransformMatrices:ux,multiplyTransformMatrixArray:hx,parsePath:Q_,parsePreserveAspectRatioAttribute:Cw,parseUnit:Sw,pick:Ax,projectStrokeOnPoints:wC,qrDecompose:px,radiansToDegrees:ox,removeFromArray:Hb,removeTransformFromObject:(e,t)=>{const n=dx(t),i=ux(n,e.calcOwnMatrix());Kx(e,i)},removeTransformMatrixForSvgParsing:ik,request:nk,requestAnimFrame:Qb,resetObjectTransform:Qx,rotatePoint:(e,t,n)=>e.rotate(n,t),rotateVector:Kw,saveObjectTransform:Jx,sendObjectToPlane:iw,sendPointToPlane:tw,sendVectorToPlane:nw,setStyle:ek,sin:Gb,sizeAfterTransform:Zx,string:jC,stylesFromArray:MC,stylesToArray:OC,toBlob:sx,toDataURL:rx,toFixed:jx,transformPath:(e,t,n)=>(n&&(t=ux(t,[1,0,0,1,-n.x,-n.y])),e.map(e=>{const n=[...e];for(let i=1;i<e.length-1;i+=2){const{x:r,y:s}=cx({x:e[i],y:e[i+1]},t);n[i]=r,n[i+1]=s}return n})),transformPoint:cx});class rk extends Bx{constructor(e){let{allowTouchScrolling:t=!1,containerClass:n=""}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),Wy(this,"upper",void 0),Wy(this,"container",void 0);const{el:i}=this.lower,r=this.createUpperCanvas();this.upper={el:r,ctx:r.getContext("2d")},this.applyCanvasStyle(i,{allowTouchScrolling:t}),this.applyCanvasStyle(r,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const s=this.createContainerElement();s.classList.add(n),i.parentNode&&i.parentNode.replaceChild(s,i),s.append(i,r),this.container=s}createUpperCanvas(){const{el:e}=this.lower,t=tx();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=nb().createElement("div");return e.setAttribute("data-fabric","wrapper"),ek(e,{position:"relative"}),Rx(e),e}applyCanvasStyle(e,t){const{styles:n,allowTouchScrolling:i}=t;ek(e,Hy(Hy({},n),{},{"touch-action":i?"manipulation":bb})),Rx(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:n,ctx:i}=this.upper;Ix(n,i,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),Fx(this.upper.el,e),Fx(this.container,e)}cleanupDOM(e){const t=this.container,{el:n}=this.lower,{el:i}=this.upper;super.cleanupDOM(e),t.removeChild(i),t.removeChild(n),t.parentNode&&t.parentNode.replaceChild(n,t)}dispose(){super.dispose(),tb().dispose(this.upper.el),delete this.upper,delete this.container}}class sk extends zx{constructor(){super(...arguments),Wy(this,"targets",[]),Wy(this,"_hoveredTargets",[]),Wy(this,"_objectsToRender",void 0),Wy(this,"_currentTransform",null),Wy(this,"_groupSelector",null),Wy(this,"contextTopDirty",!1)}static getDefaults(){return Hy(Hy({},super.getDefaults()),sk.ownDefaults)}get upperCanvasEl(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.el}get contextTop(){var e;return null===(e=this.elements.upper)||void 0===e?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new rk(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),n=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,n){const i=this.targetFindTolerance,r=this.pixelFindContext;this.clearContext(r),r.save(),r.translate(-t+i,-n+i),r.transform(...this.viewportTransform);const s=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(r),e.selectionBackgroundColor=s,r.restore();const a=Math.round(i*this.getRetinaScaling());return mC(r,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(t=>!!t&&!0===e[t]):e[t])}_shouldClearSelection(e,t){const n=this.getActiveObjects(),i=this._activeObject;return!!(!t||t&&i&&n.length>1&&-1===n.indexOf(t)&&i!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&i&&i!==t)}_shouldCenterTransform(e,t,n){if(!e)return;let i;return t===Ob||t===Mb||t===Pb||t===Ab?i=this.centeredScaling||e.centeredScaling:t===_b&&(i=this.centeredRotation||e.centeredRotation),i?!n:n}_getOriginFromCorner(e,t){const n={x:e.originX,y:e.originY};return t?(["ml","tl","bl"].includes(t)?n.x=yb:["mr","tr","br"].includes(t)&&(n.x=gb),["tl","mt","tr"].includes(t)?n.y=vb:["bl","mb","br"].includes(t)&&(n.y=mb),n):n}_setupCurrentTransform(e,t,n){var i;const r=t.group?tw(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:s="",control:a}=t.getActiveControl()||{},o=n&&a?null===(i=a.getActionHandler(e,t,a))||void 0===i?void 0:i.bind(a):pw,l=((e,t,n,i)=>{if(!t||!e)return"drag";const r=i.controls[t];return r.getActionName(n,r,i)})(n,s,e,t),c=e[this.centeredKey],d=this._shouldCenterTransform(t,l,c)?{x:pb,y:pb}:this._getOriginFromCorner(t,s),u={target:t,action:l,actionHandler:o,actionPerformed:!1,corner:s,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:r.x-t.left,offsetY:r.y-t.top,originX:d.x,originY:d.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:ax(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:c,original:Hy(Hy({},Jx(t)),{},{originX:d.x,originY:d.y})};this._currentTransform=u,this.fire("before:transform",{e:e,transform:u})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:n,deltaX:i,deltaY:r}=this._groupSelector,s=new Vb(t,n).transform(this.viewportTransform),a=new Vb(t+i,n+r).transform(this.viewportTransform),o=this.selectionLineWidth/2;let l=Math.min(s.x,a.x),c=Math.min(s.y,a.y),d=Math.max(s.x,a.x),u=Math.max(s.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(l,c,d-l,u-c)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,l+=o,c+=o,d-=o,u-=o,gC.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(l,c,d-l,u-c))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),n=this._activeObject,i=this.getActiveObjects();if(this.targets=[],n&&i.length>=1){if(n.findControl(t,Gx(e)))return n;if(i.length>1&&this.searchPossibleTargets([n],t))return n;if(n===this.searchPossibleTargets([n],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const r=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&r&&r!==n?(this.targets=i,n):r}return n}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let n=e.getCoords();const i=this.getZoom(),r=e.padding/i;if(r){const[e,t,i,s]=n,a=Math.atan2(t.y-e.y,t.x-e.x),o=Ub(a)*r,l=Gb(a)*r,c=o+l,d=o-l;n=[new Vb(e.x-d,e.y-c),new Vb(t.x+c,t.y-d),new Vb(i.x+d,i.y+c),new Vb(s.x-c,s.y+d)]}return MS.isPointInPolygon(t,n)}_checkTarget(e,t){if(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,tw(t,void 0,this.viewportTransform))){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,t.x,t.y))return!0}return!1}_searchPossibleTargets(e,t){let n=e.length;for(;n--;){const i=e[n];if(this._checkTarget(i,t)){if(Xb(i)&&i.subTargetCheck){const e=this._searchPossibleTargets(i._objects,t);e&&this.targets.push(e)}return i}}}searchPossibleTargets(e,t){const n=this._searchPossibleTargets(e,t);if(n&&Xb(n)&&n.interactive&&this.targets[0]){const e=this.targets;for(let t=e.length-1;t>0;t--){const n=e[t];if(!Xb(n)||!n.interactive)return n}return e[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.upperCanvasEl,i=n.getBoundingClientRect();let r=Ux(e),s=i.width||0,a=i.height||0;s&&a||(mb in i&&vb in i&&(a=Math.abs(i.top-i.bottom)),yb in i&&gb in i&&(s=Math.abs(i.right-i.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,t||(r=tw(r,void 0,this.viewportTransform));const o=this.getRetinaScaling();1!==o&&(r.x/=o,r.y/=o);const l=0===s||0===a?new Vb(1,1):new Vb(n.width/s,n.height/a);return r.multiply(l)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=tx(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Nx(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let n=!1,i=!1;const r=this.getActiveObjects(),s=[],a=[];e.forEach(e=>{r.includes(e)||(n=!0,e.fire("deselected",{e:t,target:e}),a.push(e))}),r.forEach(i=>{e.includes(i)||(n=!0,i.fire("selected",{e:t,target:i}),s.push(i))}),e.length>0&&r.length>0?(i=!0,n&&this.fire("selection:updated",{e:t,selected:s,deselected:a})):r.length>0?(i=!0,this.fire("selection:created",{e:t,selected:s})):e.length>0&&(i=!0,this.fire("selection:cleared",{e:t,deselected:a})),i&&(this._objectsToRender=void 0)}setActiveObject(e,t){const n=this.getActiveObjects(),i=this._setActiveObject(e,t);return this._fireSelectionEvents(n,t),i}_setActiveObject(e,t){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Nx(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const n=this._activeObject;return!!n&&!n.onDeselect({e:e,object:t})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),Nx(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),n=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e:e,deselected:[n]});const i=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),i}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,n=t.target,i={e:e,target:n,transform:t,action:t.action};n._scaling&&(n._scaling=!1),n.setCoords(),t.actionPerformed&&(this.fire("object:modified",i),n.fire(Ib,i))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Nx(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,n){const i=this._realizeGroupTransformOnObject(e),r=super._toObject(e,t,n);return e.set(i),r}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Nx(t)&&this._activeObject===t){const n=Ax(e,["angle","flipX","flipY",gb,Mb,Pb,Nb,$b,mb]);return Yx(e,t.calcOwnMatrix()),n}return{}}_setSVGObject(e,t,n){const i=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,n),t.set(i)}}Wy(sk,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class ak{constructor(e){Wy(this,"targets",[]),Wy(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:t}=e.getActiveObject()||{};t&&t.focus()},n=e.upperCanvasEl;n.addEventListener("click",t),this.__disposer=()=>n.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),Hb(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;(null===(t=this.target)||void 0===t?void 0:t.isEditing)&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const ok=["target","oldTarget","fireCanvas","e"],lk={passive:!1},ck=(e,t)=>{const n=e.getViewportPoint(t),i=e.getScenePoint(t);return{viewportPoint:n,scenePoint:i,pointer:n,absolutePointer:i}},dk=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.addEventListener(...n)},uk=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.removeEventListener(...n)},hk={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class fk extends sk{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),Wy(this,"_isClick",void 0),Wy(this,"textEditingManager",new ak(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(dk,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const n=this.upperCanvasEl,i=this._getEventPrefix();e(Lx(n),"resize",this._onResize),e(n,i+"down",this._onMouseDown),e(n,"".concat(i,"move"),this._onMouseMove,lk),e(n,"".concat(i,"out"),this._onMouseOut),e(n,"".concat(i,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"click",this._onClick),e(n,"dblclick",this._onClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,lk)}removeListeners(){this.addOrRemove(uk,"remove");const e=this._getEventPrefix(),t=Dx(this.upperCanvasEl);uk(t,"".concat(e,"up"),this._onMouseUp),uk(t,"touchend",this._onTouchEnd,lk),uk(t,"".concat(e,"move"),this._onMouseMove,lk),uk(t,"touchmove",this._onMouseMove,lk),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,n=Hy({e:e},ck(this,e));this.fire("mouse:out",Hy(Hy({},n),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",Hy({},n)),this._hoveredTargets.forEach(e=>{this.fire("mouse:out",Hy(Hy({},n),{},{target:e})),e&&e.fire("mouseout",Hy({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",Hy({e:e},ck(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const n={e:e,target:t};return this.fire("dragstart",n),t.fire("dragstart",n),void dk(this.upperCanvasEl,"drag",this._onDragProgress)}Vx(e)}_renderDragEffects(e,t,n){let i=!1;const r=this._dropTarget;r&&r!==t&&r!==n&&(r.clearContextTop(),i=!0),null==t||t.clearContextTop(),n!==t&&(null==n||n.clearContextTop());const s=this.contextTop;s.save(),s.transform(...this.viewportTransform),t&&(s.save(),t.transform(s),t.renderDragSourceEffect(e),s.restore(),i=!0),n&&(s.save(),n.transform(s),n.renderDropTargetEffect(e),s.restore(),i=!0),s.restore(),i&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==bb,n=t?this._activeObject:void 0,i={e:e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:n};uk(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",i),this._dragSource&&this._dragSource.fire("dragend",i),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e:e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:n,targets:i}=this.findDragTargets(e),r=this._dragSource,s={e:e,target:n,subTargets:i,dragSource:r,canDrop:!1,dropTarget:void 0};let a;this.fire(t,s),this._fireEnterLeaveEvents(n,s),n&&(n.canDrop(e)&&(a=n),n.fire(t,s));for(let o=0;o<i.length;o++){const n=i[o];n.canDrop(e)&&(a=n),n.fire(t,s)}this._renderDragEffects(e,r,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:n}=this.findDragTargets(e),i={e:e,target:t,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",i),this._fireEnterLeaveEvents(t,i)}_onDragLeave(e){const t={e:e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:n}=this.findDragTargets(e),i=this._basicEventHandler("drop:before",Hy({e:e,target:t,subTargets:n,dragSource:this._dragSource},ck(this,e)));i.didDrop=!1,i.dropTarget=void 0,this._basicEventHandler("drop",i),this.fire("drop:after",i)}_onContextMenu(e){const t=this.findTarget(e),n=this.targets||[],i=this._basicEventHandler("contextmenu:before",{e:e,target:t,subTargets:n});return this.stopContextMenu&&Vx(e),this._basicEventHandler("contextmenu",i),!1}_onClick(e){const t=e.detail;t>3||t<2||(this._cacheTransformEventData(e),2==t&&"dblclick"===e.type&&this._handleEvent(e,"dblclick"),3==t&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return!0===e.isPrimary||!1!==e.isPrimary&&("touchend"===e.type&&0===e.touches.length||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const n=this._activeObject;void 0===this.mainTouchId&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const i=this.upperCanvasEl,r=this._getEventPrefix(),s=Dx(i);dk(s,"touchend",this._onTouchEnd,lk),t&&dk(s,"touchmove",this._onMouseMove,lk),uk(i,"".concat(r,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();uk(t,"".concat(n,"move"),this._onMouseMove,lk);const i=Dx(t);dk(i,"".concat(n,"up"),this._onMouseUp),dk(i,"".concat(n,"move"),this._onMouseMove,lk)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),n=Dx(this.upperCanvasEl);uk(n,"touchend",this._onTouchEnd,lk),uk(n,"touchmove",this._onMouseMove,lk),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{dk(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const e=Dx(this.upperCanvasEl);uk(e,"".concat(n,"up"),this._onMouseUp),uk(e,"".concat(n,"move"),this._onMouseMove,lk),dk(t,"".concat(n,"move"),this._onMouseMove,lk)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,i=this._isClick,r=this._target,{button:s}=e;if(s)return(this.fireMiddleClick&&1===s||this.fireRightClick&&2===s)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,o,l=!1;if(n&&(this._finalizeCurrentTransform(e),l=n.actionPerformed),!i){const t=r===this._activeObject;this.handleSelection(e),l||(l=this._shouldRender(r)||!t&&r===this._activeObject)}if(r){const t=r.findControl(this.getViewportPoint(e),Gx(e)),{key:i,control:s}=t||{};if(o=i,r.selectable&&r!==this._activeObject&&"up"===r.activeOn)this.setActiveObject(r,e),l=!0;else if(s){const t=s.getMouseUpHandler(e,r,s);t&&(a=this.getScenePoint(e),t.call(s,e,n,a.x,a.y))}r.isMoving=!1}if(n&&(n.target!==r||n.corner!==o)){const t=n.target&&n.target.controls[n.corner],i=t&&t.getMouseUpHandler(e,n.target,t);a=a||this.getScenePoint(e),i&&i.call(t,e,n,a.x,a.y)}this._setCursorFromEvent(e,r),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=void 0),l?this.requestRenderAll():i||null!==(t=this._activeObject)&&void 0!==t&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:n,subTargets:i=[]}=t;this.fire(e,t),n&&n.fire(e,t);for(let r=0;r<i.length;r++)i[r]!==n&&i[r].fire(e,t);return t}_handleEvent(e,t,n){const i=this._target,r=this.targets||[],s=Hy(Hy(Hy({e:e,target:i,subTargets:r},ck(this,e)),{},{transform:this._currentTransform},"up:before"===t||"up"===t?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),"down:before"===t||"down"===t?n:{});this.fire("mouse:".concat(t),s),i&&i.fire("mouse".concat(t),s);for(let a=0;a<r.length;a++)r[a]!==i&&r[a].fire("mouse".concat(t),s)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e:e,pointer:t}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e:e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target,n=!!t&&t===this._activeObject;const{button:i}=e;if(i)return(this.fireMiddleClick&&1===i||this.fireRightClick&&2===i)&&this._handleEvent(e,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e))return;if(this._currentTransform)return;let r=this._shouldRender(t),s=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,s=!0,r=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const t=this.getScenePoint(e);this._groupSelector={x:t.x,y:t.y,deltaY:0,deltaX:0}}if(n=!!t&&t===this._activeObject,t){t.selectable&&"down"===t.activeOn&&this.setActiveObject(t,e);const i=t.findControl(this.getViewportPoint(e),Gx(e));if(t===this._activeObject&&(i||!s)){this._setupCurrentTransform(e,t,n);const r=i?i.control:void 0,s=this.getScenePoint(e),a=r&&r.getMouseDownHandler(e,t,r);a&&a.call(r,e,this._currentTransform,s.x,s.y)}}r&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:n}),r&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=tw(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const n=this.getScenePoint(e);t.deltaX=n.x-t.x,t.deltaY=n.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const t=this.findTarget(e);this._setCursorFromEvent(e,t),this._fireOverOutEvents(e,t)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,s=Math.max(i.length,r.length);this.fireSyntheticInOutEvents("mouse",{e:e,target:t,oldTarget:n,fireCanvas:!0});for(let a=0;a<s;a++)this.fireSyntheticInOutEvents("mouse",{e:e,target:r[a],oldTarget:i[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,s=Math.max(i.length,r.length);this.fireSyntheticInOutEvents("drag",Hy(Hy({},t),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<s;a++)this.fireSyntheticInOutEvents("drag",Hy(Hy({},t),{},{target:r[a],oldTarget:i[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:n,oldTarget:i,fireCanvas:r,e:s}=t,a=Uy(t,ok);const{targetIn:o,targetOut:l,canvasIn:c,canvasOut:d}=hk[e],u=i!==n;if(i&&u){const e=Hy(Hy({},a),{},{e:s,target:i,nextTarget:n},ck(this,s));r&&this.fire(d,e),i.fire(l,e)}if(n&&u){const e=Hy(Hy({},a),{},{e:s,target:n,previousTarget:i},ck(this,s));r&&this.fire(c,e),n.fire(o,e)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),n=this._currentTransform,i=n.target,r=i.group?tw(t,void 0,i.group.calcTransformMatrix()):t;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,r),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,n){const{action:i,actionHandler:r,target:s}=t,a=!!r&&r(e,t,n.x,n.y);a&&s.setCoords(),"drag"===i&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let n=t.hoverCursor||this.hoverCursor;const i=Nx(this._activeObject)?this._activeObject:null,r=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(e));if(r){const n=r.control;this.setCursor(n.cursorStyleHandler(e,n,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(e=>{n=e.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,t){const n=this._activeObject,i=Nx(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(n!==t||i)&&(i||!t.isDescendantOf(n)&&!n.isDescendantOf(t))&&!t.onSelect({e:e})&&!n.getActiveControl()){if(i){const i=n.getObjects();if(t===n){const n=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,n)||this.searchPossibleTargets(this._objects,n))||!t.selectable)return!1}t.group===n?(n.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],1===n.size()&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(t),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{n.isEditing&&n.exitEditing();const i=new(Bb.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(n,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:n,deltaX:i,deltaY:r}=this._groupSelector,s=new Vb(t,n),a=s.add(new Vb(i,r)),o=s.min(a),l=s.max(a).subtract(o),c=this.collectObjects({left:o.x,top:o.y,width:l.x,height:l.y},{includeIntersecting:!this.selectionFullyContained}),d=s.eq(a)?c[0]?[c[0]]:[]:c.length>1?c.filter(t=>!t.onSelect({e:e})).reverse():c;if(1===d.length)this.setActiveObject(d[0],e);else if(d.length>1){const t=Bb.getClass("ActiveSelection");this.setActiveObject(new t(d,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const pk={x1:0,y1:0,x2:0,y2:0},gk=Hy(Hy({},pk),{},{r1:0,r2:0}),mk=(e,t)=>isNaN(e)&&"number"==typeof t?t:e,vk=/^(\d+\.\d+)%|(\d+)%$/;function yk(e){return e&&vk.test(e)}function bk(e,t){const n="number"==typeof e?e:"string"==typeof e?parseFloat(e)/(yk(e)?100:1):NaN;return cS(0,mk(n,t),1)}const xk=/\s*;\s*/,wk=/\s*:\s*/;function Sk(e,t){let n,i;const r=e.getAttribute("style");if(r){const e=r.split(xk);""===e[e.length-1]&&e.pop();for(let t=e.length;t--;){const[r,s]=e[t].split(wk).map(e=>e.trim());"stop-color"===r?n=s:"stop-opacity"===r&&(i=s)}}const s=new ww(n||e.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:bk(e.getAttribute("offset"),0),color:s.toRgb(),opacity:mk(parseFloat(i||e.getAttribute("stop-opacity")||""),1)*s.getAlpha()*t}}function Ck(e,t){const n=[],i=e.getElementsByTagName("stop"),r=bk(t,1);for(let s=i.length;s--;)n.push(Sk(i[s],r));return n}function _k(e){return"linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?"linear":"radial"}function kk(e){return"userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage"}function Ak(e,t){return e.getAttribute(t)}function Ek(e,t){return function(e,t){let n,{width:i,height:r,gradientUnits:s}=t;return Object.keys(e).reduce((t,a)=>{const o=e[a];return"Infinity"===o?n=1:"-Infinity"===o?n=0:(n="string"==typeof o?parseFloat(o):o,"string"==typeof o&&yk(o)&&(n*=.01,"pixels"===s&&("x1"!==a&&"x2"!==a&&"r2"!==a||(n*=i),"y1"!==a&&"y2"!==a||(n*=r)))),t[a]=n,t},{})}("linear"===_k(e)?function(e){return{x1:Ak(e,"x1")||0,y1:Ak(e,"y1")||0,x2:Ak(e,"x2")||"100%",y2:Ak(e,"y2")||0}}(e):function(e){return{x1:Ak(e,"fx")||Ak(e,"cx")||"50%",y1:Ak(e,"fy")||Ak(e,"cy")||"50%",r1:0,x2:Ak(e,"cx")||"50%",y2:Ak(e,"cy")||"50%",r2:Ak(e,"r")||"50%"}}(e),Hy(Hy({},t),{},{gradientUnits:kk(e)}))}class jk{constructor(e){const{type:t="linear",gradientUnits:n="pixels",coords:i={},colorStops:r=[],offsetX:s=0,offsetY:a=0,gradientTransform:o,id:l}=e||{};Object.assign(this,{type:t,gradientUnits:n,coords:Hy(Hy({},"radial"===t?gk:pk),i),colorStops:r,offsetX:s,offsetY:a,gradientTransform:o,id:l?"".concat(l,"_").concat(ex()):ex()})}addColorStop(e){for(const t in e){const n=new ww(e[t]);this.colorStops.push({offset:parseFloat(t),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return Hy(Hy({},Ax(this,e)),{},{type:this.type,coords:Hy({},this.coords),colorStops:this.colorStops.map(e=>Hy({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[],i=this.gradientTransform?this.gradientTransform.concat():ub.concat(),r="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox",s=this.colorStops.map(e=>Hy({},e)).sort((e,t)=>e.offset-t.offset);let a=-this.offsetX,o=-this.offsetY;var l;"objectBoundingBox"===r?(a/=e.width,o/=e.height):(a+=e.width/2,o+=e.height/2),(l=e)&&"function"==typeof l._renderPathCommands&&"percentage"!==this.gradientUnits&&(a-=e.pathOffset.x,o-=e.pathOffset.y),i[4]-=a,i[5]-=o;const c=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(r,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Tx(i),'"'),""].join(" ");if("linear"===this.type){const{x1:e,y1:t,x2:i,y2:r}=this.coords;n.push("<linearGradient ",c,' x1="',e,'" y1="',t,'" x2="',i,'" y2="',r,'">\n')}else if("radial"===this.type){const{x1:e,y1:t,x2:i,y2:r,r1:a,r2:o}=this.coords,l=a>o;n.push("<radialGradient ",c,' cx="',l?e:i,'" cy="',l?t:r,'" r="',l?a:o,'" fx="',l?i:e,'" fy="',l?r:t,'">\n'),l&&(s.reverse(),s.forEach(e=>{e.offset=1-e.offset}));const d=Math.min(a,o);if(d>0){const e=d/Math.max(a,o);s.forEach(t=>{t.offset+=e*(1-t.offset)})}}return s.forEach(e=>{let{color:t,offset:i,opacity:r}=e;n.push("<stop ",'offset="',100*i+"%",'" style="stop-color:',t,void 0!==r?";stop-opacity: "+r:";",'"/>\n')}),n.push("linear"===this.type?"</linearGradient>":"</radialGradient>","\n"),n.join("")}toLive(e){const{x1:t,y1:n,x2:i,y2:r,r1:s,r2:a}=this.coords,o="linear"===this.type?e.createLinearGradient(t,n,i,r):e.createRadialGradient(t,n,s,i,r,a);return this.colorStops.forEach(e=>{let{color:t,opacity:n,offset:i}=e;o.addColorStop(i,void 0!==n?new ww(t).setAlpha(n).toRgba():t)}),o}static async fromObject(e){const{colorStops:t,gradientTransform:n}=e;return new this(Hy(Hy({},e),{},{colorStops:t?t.map(e=>Hy({},e)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,t,n){const i=kk(e),r=t._findCenterFromElement();return new this(Hy({id:e.getAttribute("id")||void 0,type:_k(e),coords:Ek(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:Ck(e,n.opacity),gradientUnits:i,gradientTransform:i_(e.getAttribute("gradientTransform")||"")},"pixels"===i?{offsetX:t.width/2-r.x,offsetY:t.height/2-r.y}:{offsetX:0,offsetY:0}))}}Wy(jk,"type","Gradient"),Bb.setClass(jk,"gradient"),Bb.setClass(jk,"linear"),Bb.setClass(jk,"radial");const Tk=["type","source","patternTransform"];class Ok{get type(){return"pattern"}set type(e){Xy("warn","Setting type has no effect",e)}constructor(e){Wy(this,"repeat","repeat"),Wy(this,"offsetX",0),Wy(this,"offsetY",0),Wy(this,"crossOrigin",""),this.id=ex(),Object.assign(this,e)}isImageSource(){return!!this.source&&"string"==typeof this.source.src}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&0!==this.source.naturalWidth&&0!==this.source.naturalHeight)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const{repeat:t,crossOrigin:n}=this;return Hy(Hy({},Ax(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:n,offsetX:jx(this.offsetX,qy.NUM_FRACTION_DIGITS),offsetY:jx(this.offsetY,qy.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:n}=e;const{source:i,repeat:r,id:s}=this,a=mk(this.offsetX/t,0),o=mk(this.offsetY/n,0),l="repeat-y"===r||"no-repeat"===r?1+Math.abs(a||0):mk(i.width/t,0),c="repeat-x"===r||"no-repeat"===r?1+Math.abs(o||0):mk(i.height/n,0);return['<pattern id="SVGID_'.concat(s,'" x="').concat(a,'" y="').concat(o,'" width="').concat(l,'" height="').concat(c,'">'),'<image x="0" y="0" width="'.concat(i.width,'" height="').concat(i.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join("\n")}static async fromObject(e,t){let{type:n,source:i,patternTransform:r}=e,s=Uy(e,Tk);const a=await Cx(i,Hy(Hy({},t),{},{crossOrigin:s.crossOrigin}));return new this(Hy(Hy({},s),{},{patternTransform:r&&r.slice(0),source:a}))}}Wy(Ok,"type","Pattern"),Bb.setClass(Ok),Bb.setClass(Ok,"pattern");class Mk{constructor(e){Wy(this,"color","rgb(0, 0, 0)"),Wy(this,"width",1),Wy(this,"shadow",null),Wy(this,"strokeLineCap","round"),Wy(this,"strokeLineJoin","round"),Wy(this,"strokeMiterLimit",10),Wy(this,"strokeDashArray",null),Wy(this,"limitedToCanvasSize",!1),this.canvas=e}_setBrushStyles(e){e.strokeStyle=this.color,e.lineWidth=this.width,e.lineCap=this.strokeLineCap,e.miterLimit=this.strokeMiterLimit,e.lineJoin=this.strokeLineJoin,e.setLineDash(this.strokeDashArray||[])}_saveAndTransform(e){const t=this.canvas.viewportTransform;e.save(),e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}needsFullRender(){return new ww(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const e=this.canvas,t=this.shadow,n=e.contextTop,i=e.getZoom()*e.getRetinaScaling();n.shadowColor=t.color,n.shadowBlur=t.blur*i,n.shadowOffsetX=t.offsetX*i,n.shadowOffsetY=t.offsetY*i}_resetShadow(){const e=this.canvas.contextTop;e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0}_isOutSideCanvas(e){return e.x<0||e.x>this.canvas.getWidth()||e.y<0||e.y>this.canvas.getHeight()}}const Pk=["path","left","top"],Nk=["d"];class $k extends gC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{path:n,left:i,top:r}=t,s=Uy(t,Pk);super(),Object.assign(this,$k.ownDefaults),this.setOptions(s),this._setPath(e||[],!0),"number"==typeof i&&this.set(gb,i),"number"==typeof r&&this.set(mb,r)}_setPath(e,t){this.path=D_(Array.isArray(e)?e:Q_(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new Vb(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const i of this.path)switch(i[0]){case"L":e.lineTo(i[1]+t,i[2]+n);break;case"M":e.moveTo(i[1]+t,i[2]+n);break;case"C":e.bezierCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n,i[5]+t,i[6]+n);break;case"Q":e.quadraticCurveTo(i[1]+t,i[2]+n,i[3]+t,i[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Hy(Hy({},super.toObject(e)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=Z_(this.path,qy.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,'" stroke-linecap="round" />\n')]}_getOffsetTransform(){const e=qy.NUM_FRACTION_DIGITS;return" translate(".concat(jx(-this.pathOffset.x,e),", ").concat(jx(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:n,pathOffset:i}=this._calcDimensions();this.set({width:t,height:n,pathOffset:i}),e&&this.setPositionByOrigin(i,pb,pb)}_calcBoundsFromPath(){const e=[];let t=0,n=0,i=0,r=0;for(const s of this.path)switch(s[0]){case"L":i=s[1],r=s[2],e.push({x:t,y:n},{x:i,y:r});break;case"M":i=s[1],r=s[2],t=i,n=r;break;case"C":e.push(...N_(i,r,s[1],s[2],s[3],s[4],s[5],s[6])),i=s[5],r=s[6];break;case"Q":e.push(...N_(i,r,s[1],s[2],s[1],s[2],s[3],s[4])),i=s[3],r=s[4];break;case"Z":i=t,r=n}return qx(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return Hy(Hy({},e),{},{pathOffset:new Vb(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,n){const i=o_(e,this.ATTRIBUTE_NAMES,n),{d:r}=i;return new this(r,Hy(Hy(Hy({},Uy(i,Nk)),t),{},{left:void 0,top:void 0}))}}Wy($k,"type","Path"),Wy($k,"cacheProperties",[...uS,"path","fillRule"]),Wy($k,"ATTRIBUTE_NAMES",[...PC,"d"]),Bb.setClass($k),Bb.setSVGClass($k);class Dk extends Mk{constructor(e){super(e),Wy(this,"decimate",.4),Wy(this,"drawStraightLine",!1),Wy(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(e,t,n){const i=t.midPointFrom(n);return e.quadraticCurveTo(t.x,t.y,i.x,i.y),i}onMouseDown(e,t){let{e:n}=t;this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],this._prepareForDrawing(e),this._addPoint(e),this._render())}onMouseMove(e,t){let{e:n}=t;if(this.canvas._isMainEvent(n)&&(this.drawStraightLine=!!this.straightLineKey&&n[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(e))&&this._addPoint(e)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const e=this._points,t=e.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=Dk.drawSegment(n,e[t-2],e[t-1]),n.stroke(),n.restore()}}onMouseUp(e){let{e:t}=e;return!this.canvas._isMainEvent(t)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(e){this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)}_addPoint(e){return!(this._points.length>1&&e.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(e),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.canvas.contextTop,t=this._points[0],n=this._points[1];if(this._saveAndTransform(e),e.beginPath(),2===this._points.length&&t.x===n.x&&t.y===n.y){const e=this.width/1e3;t.x-=e,n.x+=e}e.moveTo(t.x,t.y);for(let i=1;i<this._points.length;i++)Dk.drawSegment(e,t,n),t=this._points[i],n=this._points[i+1];e.lineTo(t.x,t.y),e.stroke(),e.restore()}convertPointsToSVGPath(e){const t=this.width/1e3;return J_(e,t)}createPath(e){const t=new $k(e,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,t.shadow=new lS(this.shadow)),t}decimatePoints(e,t){if(e.length<=2)return e;let n,i=e[0];const r=this.canvas.getZoom(),s=Math.pow(t/r,2),a=e.length-1,o=[i];for(let l=1;l<a-1;l++)n=Math.pow(i.x-e[l].x,2)+Math.pow(i.y-e[l].y,2),n>=s&&(i=e[l],o.push(i));return o.push(e[a]),o}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const e=this.convertPointsToSVGPath(this._points);if(function(e){return"M 0 0 Q 0 0 0 0 L 0 0"===Z_(e)}(e))return void this.canvas.requestRenderAll();const t=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:t}),this.canvas.add(t),this.canvas.requestRenderAll(),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}}const Lk=["left","top","radius"],Ik=["radius","startAngle","endAngle","counterClockwise"];class Fk extends gC{static getDefaults(){return Hy(Hy({},super.getDefaults()),Fk.ownDefaults)}constructor(e){super(),Object.assign(this,Fk.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),"radius"===e&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,ax(this.startAngle),ax(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(Mb)}getRadiusY(){return this.get("radius")*this.get(Pb)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Ik,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(0===e)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),'" />\n'];{const{radius:t}=this,n=ax(this.startAngle),i=ax(this.endAngle),r=Ub(n)*t,s=Gb(n)*t,a=Ub(i)*t,o=Gb(i)*t,l=e>180?1:0,c=this.counterClockwise?0:1;return['<path d="M '.concat(r," ").concat(s," A ").concat(t," ").concat(t," 0 ").concat(l," ").concat(c," ").concat(a," ").concat(o,'" '),"COMMON_PARTS"," />\n"]}}static async fromElement(e,t,n){const i=o_(e,this.ATTRIBUTE_NAMES,n),{left:r=0,top:s=0,radius:a=0}=i;return new this(Hy(Hy({},Uy(i,Lk)),{},{radius:a,left:r-a,top:s-a}))}static fromObject(e){return super._fromObject(e)}}Wy(Fk,"type","Circle"),Wy(Fk,"cacheProperties",[...uS,...Ik]),Wy(Fk,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),Wy(Fk,"ATTRIBUTE_NAMES",["cx","cy","r",...PC]),Bb.setClass(Fk),Bb.setSVGClass(Fk);const Rk=["x1","y1","x2","y2"],Bk=["x1","y1","x2","y2"],Wk=["x1","x2","y1","y2"];class zk extends gC{constructor(){let[e,t,n,i]=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,zk.ownDefaults),this.setOptions(r),this.x1=e,this.x2=n,this.y1=t,this.y2=i,this._setWidthHeight();const{left:s,top:a}=r;"number"==typeof s&&this.set(gb,s),"number"==typeof a&&this.set(mb,a)}_setWidthHeight(){const{x1:e,y1:t,x2:n,y2:i}=this;this.width=Math.abs(n-e),this.height=Math.abs(i-t);const{left:r,top:s,width:a,height:o}=qx([{x:e,y:t},{x:n,y:i}]),l=new Vb(r+a/2,s+o/2);this.setPositionByOrigin(l,pb,pb)}_set(e,t){return super._set(e,t),Wk.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var i;Ox(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=null!==(i=this.stroke)&&void 0!==i?i:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new Vb((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Hy(Hy({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return"butt"===this.strokeLineCap&&(0===this.width&&(e.y-=this.strokeWidth),0===this.height&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:n,y2:i,width:r,height:s}=this,a=e<=t?-1:1,o=n<=i?-1:1;return{x1:a*r/2,x2:a*-r/2,y1:o*s/2,y2:o*-s/2}}_toSVG(){const{x1:e,x2:t,y1:n,y2:i}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(t,'" y2="').concat(i,'" />\n')]}static async fromElement(e,t,n){const i=o_(e,this.ATTRIBUTE_NAMES,n),{x1:r=0,y1:s=0,x2:a=0,y2:o=0}=i;return new this([r,s,a,o],Uy(i,Rk))}static fromObject(e){let{x1:t,y1:n,x2:i,y2:r}=e,s=Uy(e,Bk);return this._fromObject(Hy(Hy({},s),{},{points:[t,n,i,r]}),{extraParam:"points"})}}Wy(zk,"type","Line"),Wy(zk,"cacheProperties",[...uS,...Wk]),Wy(zk,"ATTRIBUTE_NAMES",PC.concat(Wk)),Bb.setClass(zk),Bb.setSVGClass(zk);class Hk extends gC{static getDefaults(){return Hy(Hy({},super.getDefaults()),Hk.ownDefaults)}constructor(e){super(),Object.assign(this,Hk.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,n),e.lineTo(0,-n),e.lineTo(t,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}Wy(Hk,"type","Triangle"),Wy(Hk,"ownDefaults",{width:100,height:100}),Bb.setClass(Hk),Bb.setSVGClass(Hk);const Uk=["rx","ry"];class Gk extends gC{static getDefaults(){return Hy(Hy({},super.getDefaults()),Gk.ownDefaults)}constructor(e){super(),Object.assign(this,Gk.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(Mb)}getRy(){return this.get("ry")*this.get(Pb)}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject([...Uk,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,'" />\n')]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,cb,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,n){const i=o_(e,this.ATTRIBUTE_NAMES,n);return i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,new this(i)}}Wy(Gk,"type","Ellipse"),Wy(Gk,"cacheProperties",[...uS,...Uk]),Wy(Gk,"ownDefaults",{rx:0,ry:0}),Wy(Gk,"ATTRIBUTE_NAMES",[...PC,"cx","cy","rx","ry"]),Bb.setClass(Gk),Bb.setSVGClass(Gk);const Vk=["left","top"],qk={exactBoundingBox:!1};class Xk extends gC{static getDefaults(){return Hy(Hy({},super.getDefaults()),Xk.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Wy(this,"strokeDiff",void 0),Object.assign(this,Xk.ownDefaults),this.setOptions(t),this.points=e;const{left:n,top:i}=t;this.initialized=!0,this.setBoundingBox(!0),"number"==typeof n&&this.set(gb,n),"number"==typeof i&&this.set(mb,i)}isOpen(){return!0}_projectStrokeOnPoints(e){return wC(this.points,e,this.isOpen())}_calcDimensions(e){e=Hy({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(e=>e.projectedPoint):this.points;if(0===t.length)return{left:0,top:0,width:0,height:0,pathOffset:new Vb,strokeOffset:new Vb,strokeDiff:new Vb};const n=qx(t),i=wx(Hy(Hy({},e),{},{scaleX:1,scaleY:1})),r=qx(this.points.map(e=>cx(e,i,!0))),s=new Vb(this.scaleX,this.scaleY);let a=n.left+n.width/2,o=n.top+n.height/2;return this.exactBoundingBox&&(a-=o*Math.tan(ax(this.skewX)),o-=a*Math.tan(ax(this.skewY))),Hy(Hy({},n),{},{pathOffset:new Vb(a,o),strokeOffset:new Vb(r.left,r.top).subtract(new Vb(n.left,n.top)).multiply(s),strokeDiff:new Vb(n.width,n.height).subtract(new Vb(r.width,r.height)).multiply(s)})}_findCenterFromElement(){const e=qx(this.points);return new Vb(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:n,width:i,height:r,pathOffset:s,strokeOffset:a,strokeDiff:o}=this._calcDimensions();this.set({width:i,height:r,pathOffset:s,strokeOffset:a,strokeDiff:o}),e&&this.setPositionByOrigin(new Vb(t+i/2,n+r/2),pb,pb)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new Vb(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.exactBoundingBox){let s;if(Object.keys(e).some(e=>this.strokeUniform||this.constructor.layoutProperties.includes(e))){var t,n;const{width:i,height:r}=this._calcDimensions(e);s=new Vb(null!==(t=e.width)&&void 0!==t?t:i,null!==(n=e.height)&&void 0!==n?n:r)}else{var i,r;s=new Vb(null!==(i=e.width)&&void 0!==i?i:this.width,null!==(r=e.height)&&void 0!==r?r:this.height)}return s.multiply(new Vb(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const n=this.initialized&&this[e]!==t,i=super._set(e,t);return this.exactBoundingBox&&n&&((e===Mb||e===Pb)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),i}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Hy(Hy({},super.toObject(e)),{},{points:this.points.map(e=>{let{x:t,y:n}=e;return{x:t,y:n}})})}_toSVG(){const e=[],t=this.pathOffset.x,n=this.pathOffset.y,i=qy.NUM_FRACTION_DIGITS;for(let r=0,s=this.points.length;r<s;r++)e.push(jx(this.points[r].x-t,i),",",jx(this.points[r].y-n,i)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),'" />\n')]}_render(e){const t=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-i);for(let r=0;r<t;r++){const t=this.points[r];e.lineTo(t.x-n,t.y-i)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,n){return new this(function(e){if(!e)return[];const t=e.replace(/,/g," ").trim().split(/\s+/),n=[];for(let i=0;i<t.length;i+=2)n.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return n}(e.getAttribute("points")),Hy(Hy({},Uy(o_(e,this.ATTRIBUTE_NAMES,n),Vk)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}Wy(Xk,"ownDefaults",qk),Wy(Xk,"type","Polyline"),Wy(Xk,"layoutProperties",[Nb,$b,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),Wy(Xk,"cacheProperties",[...uS,"points"]),Wy(Xk,"ATTRIBUTE_NAMES",[...PC]),Bb.setClass(Xk),Bb.setSVGClass(Xk);class Yk extends Xk{isOpen(){return!1}}Wy(Yk,"ownDefaults",qk),Wy(Yk,"type","Polygon"),Bb.setClass(Yk),Bb.setSVGClass(Yk);class Kk extends gC{isEmptyStyles(e){if(!this.styles)return!0;if(void 0!==e&&!this.styles[e])return!0;const t=void 0===e?this.styles:{line:this.styles[e]};for(const n in t)for(const e in t[n])for(const i in t[n][e])return!1;return!0}styleHas(e,t){if(!this.styles)return!1;if(void 0!==t&&!this.styles[t])return!1;const n=void 0===t?this.styles:{0:this.styles[t]};for(const i in n)for(const t in n[i])if(void 0!==n[i][t][e])return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let n,i,r=0,s=!0,a=0;for(const o in t){n=0;for(const a in t[o]){const l=t[o][a]||{};r++,void 0!==l[e]?(i?l[e]!==i&&(s=!1):i=l[e],l[e]===this[e]&&delete l[e]):s=!1,0!==Object.keys(l).length?n++:delete t[o][a]}0===n&&delete t[o]}for(let o=0;o<this._textLines.length;o++)a+=this._textLines[o].length;s&&r===a&&(this[e]=i,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let n,i,r;for(i in t){for(r in n=t[i],n)delete n[r][e],0===Object.keys(n[r]).length&&delete n[r];0===Object.keys(n).length&&delete t[i]}}_extendStyles(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const r=Ex(Hy(Hy({},this._getStyleDeclaration(n,i)),t),e=>void 0!==e);this._setStyleDeclaration(n,i,r)}getSelectionStyles(e,t,n){const i=[];for(let r=e;r<(t||e);r++)i.push(this.getStyleAtPosition(r,n));return i}getStyleAtPosition(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(n,i):this._getStyleDeclaration(n,i)}setSelectionStyles(e,t,n){for(let i=t;i<(n||t);i++)this._extendStyles(i,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var n;const i=this.styles&&this.styles[e];return i&&null!==(n=i[t])&&void 0!==n?n:{}}getCompleteStyleDeclaration(e,t){return Hy(Hy({},Ax(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,n){this.styles[e][t]=n}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}Wy(Kk,"_styleProperties",Pw);const Qk=/  +/g,Jk=/"/g;function Zk(e,t,n,i,r){return"\t\t".concat(function(e,t){let{left:n,top:i,width:r,height:s}=t,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qy.NUM_FRACTION_DIGITS;const o=_w(Db,e,!1),[l,c,d,u]=[n,i,r,s].map(e=>jx(e,a));return"<rect ".concat(o,' x="').concat(l,'" y="').concat(c,'" width="').concat(d,'" height="').concat(u,'"></rect>')}(e,{left:t,top:n,width:i,height:r}),"\n")}const eA=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let tA;class nA extends Kk{static getDefaults(){return Hy(Hy({},super.getDefaults()),nA.ownDefaults)}constructor(e,t){super(),Wy(this,"__charBounds",[]),Object.assign(this,nA.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=G_(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes($w)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,n,i,r,s,a;for(let o=0,l=this._textLines.length;o<l;o++)if((this.textAlign===$w||o!==l-1&&!this.isEndOfWrapping(o))&&(i=0,r=this._textLines[o],t=this.getLineWidth(o),t<this.width&&(a=this.textLines[o].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-t)/n;for(let t=0;t<=r.length;t++)s=this.__charBounds[o][t],this._reSpaceAndTab.test(r[t])?(s.width+=e,s.kernedWidth+=e,s.left+=i,i+=e):s.left+=i}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const n=t?this._unwrappedTextLines:this._textLines;let i;for(i=0;i<n.length;i++){if(e<=n[i].length)return{lineIndex:i,charIndex:e};e-=n[i].length+this.missingNewlineOffset(i,t)}return{lineIndex:i-1,charIndex:n[i-1].length<e?n[i-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===Lb?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case pb:e.textBaseline="middle";break;case"ascender":e.textBaseline=mb;break;case"descender":e.textBaseline=vb}e.font=this._getFontDeclaration(t,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,n=this._textLines.length;t<n;t++){const n=this.getLineWidth(t);n>e&&(e=n)}return e}_renderTextLine(e,t,n,i,r,s){this._renderChars(e,t,n,i,r,s)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,n=this._getLeftOffset();let i=this._getTopOffset();for(let r=0,s=this._textLines.length;r<s;r++){const t=this.getHeightOfLine(r);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",r)){i+=t;continue}const s=this._textLines[r].length,a=this._getLineLeftOffset(r);let o,l,c=0,d=0,u=this.getValueOfPropertyAt(r,0,"textBackgroundColor");for(let h=0;h<s;h++){const s=this.__charBounds[r][h];l=this.getValueOfPropertyAt(r,h,"textBackgroundColor"),this.path?(e.save(),e.translate(s.renderLeft,s.renderTop),e.rotate(s.angle),e.fillStyle=l,l&&e.fillRect(-s.width/2,-t/this.lineHeight*(1-this._fontSizeFraction),s.width,t/this.lineHeight),e.restore()):l!==u?(o=n+a+d,"rtl"===this.direction&&(o=this.width-o-c),e.fillStyle=u,u&&e.fillRect(o,i,c,t/this.lineHeight),d=s.left,c=s.width,u=l):c+=s.kernedWidth}l&&!this.path&&(o=n+a+d,"rtl"===this.direction&&(o=this.width-o-c),e.fillStyle=l,e.fillRect(o,i,c,t/this.lineHeight)),i+=t}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,n,i){const r=sb.getFontCache(t),s=this._getFontDeclaration(t),a=n+e,o=n&&s===this._getFontDeclaration(i),l=t.fontSize/this.CACHE_FONT_SIZE;let c,d,u,h;if(n&&void 0!==r[n]&&(u=r[n]),void 0!==r[e]&&(h=c=r[e]),o&&void 0!==r[a]&&(d=r[a],h=d-u),void 0===c||void 0===u||void 0===d){const i=function(){if(!tA){const e=ix({width:0,height:0});tA=e.getContext("2d")}return tA}();this._setTextStyles(i,t,!0),void 0===c&&(h=c=i.measureText(e).width,r[e]=c),void 0===u&&o&&n&&(u=i.measureText(n).width,r[n]=u),o&&void 0===d&&(d=i.measureText(a).width,r[a]=d,h=d-u)}return{width:c*l,kernedWidth:h*l}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return 0!==this.charSpacing&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,n,i=0;const r=this.pathSide===yb,s=this.path,a=this._textLines[e],o=a.length,l=new Array(o);this.__charBounds[e]=l;for(let c=0;c<o;c++){const r=a[c];n=this._getGraphemeBox(r,e,c,t),l[c]=n,i+=n.kernedWidth,t=r}if(l[o]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},s&&s.segmentsInfo){let e=0;const t=s.segmentsInfo[s.segmentsInfo.length-1].length;switch(this.textAlign){case gb:e=r?t-i:0;break;case pb:e=(t-i)/2;break;case yb:e=r?0:t-i}e+=this.pathStartOffset*(r?-1:1);for(let i=r?o-1:0;r?i>=0:i<o;r?i--:i++)n=l[i],e>t?e%=t:e<0&&(e+=t),this._setGraphemeOnPath(e,n),e+=n.kernedWidth}return{width:i,numOfSpaces:0}}_setGraphemeOnPath(e,t){const n=e+t.kernedWidth/2,i=this.path,r=V_(i.path,n,i.segmentsInfo);t.renderLeft=r.x-i.pathOffset.x,t.renderTop=r.y-i.pathOffset.y,t.angle=r.angle+(this.pathSide===yb?Math.PI:0)}_getGraphemeBox(e,t,n,i,r){const s=this.getCompleteStyleDeclaration(t,n),a=i?this.getCompleteStyleDeclaration(t,n-1):{},o=this._measureChar(e,s,i,a);let l,c=o.kernedWidth,d=o.width;0!==this.charSpacing&&(l=this._getWidthOfCharSpacing(),d+=l,c+=l);const u={width:d,left:0,height:s.fontSize,kernedWidth:c,deltaY:s.deltaY};if(n>0&&!r){const e=this.__charBounds[t][n-1];u.left=e.left+e.width+o.kernedWidth-o.width}return u}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let n=1,i=this._textLines[e].length;n<i;n++)t=Math.max(this.getHeightOfChar(e,n),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let n=0,i=this._textLines.length;n<i;n++)e=this.getHeightOfLine(n),t+=n===i-1?e/this.lineHeight:e;return t}_getLeftOffset(){return"ltr"===this.direction?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let n=0;const i=this._getLeftOffset(),r=this._getTopOffset();for(let s=0,a=this._textLines.length;s<a;s++){const a=this.getHeightOfLine(s),o=a/this.lineHeight,l=this._getLineLeftOffset(s);this._renderTextLine(t,e,this._textLines[s],i+l,r+n+o,s),n+=a}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Db))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,n,i,r,s){const a=this.getHeightOfLine(s),o=this.textAlign.includes($w),l=this.path,c=!o&&0===this.charSpacing&&this.isEmptyStyles(s)&&!l,d="ltr"===this.direction,u="ltr"===this.direction?1:-1,h=t.direction;let f,p,g,m,v,y="",b=0;if(t.save(),h!==this.direction&&(t.canvas.setAttribute("dir",d?"ltr":"rtl"),t.direction=d?"ltr":"rtl",t.textAlign=d?gb:yb),r-=a*this._fontSizeFraction/this.lineHeight,c)return this._renderChar(e,t,s,0,n.join(""),i,r),void t.restore();for(let x=0,w=n.length-1;x<=w;x++)m=x===w||this.charSpacing||l,y+=n[x],g=this.__charBounds[s][x],0===b?(i+=u*(g.kernedWidth-g.width),b+=g.width):b+=g.kernedWidth,o&&!m&&this._reSpaceAndTab.test(n[x])&&(m=!0),m||(f=f||this.getCompleteStyleDeclaration(s,x),p=this.getCompleteStyleDeclaration(s,x+1),m=TC(f,p,!1)),m&&(l?(t.save(),t.translate(g.renderLeft,g.renderTop),t.rotate(g.angle),this._renderChar(e,t,s,x,y,-b/2,0),t.restore()):(v=i,this._renderChar(e,t,s,x,y,v,r)),y="",f=p,i+=u*b,b=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,n=this.height+this.strokeWidth,i=ix({width:t,height:n}),r=i.getContext("2d");return i.width=t,i.height=n,r.beginPath(),r.moveTo(0,0),r.lineTo(t,0),r.lineTo(t,n),r.lineTo(0,n),r.closePath(),r.translate(t/2,n/2),r.fillStyle=e.toLive(r),this._applyPatternGradientTransform(r,e),r.fill(),r.createPattern(i,"no-repeat")}handleFiller(e,t,n){let i,r;return Ox(n)?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(i=-this.width/2,r=-this.height/2,e.translate(i,r),e[t]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(e[t]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[t]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:n,strokeWidth:i}=t;return e.lineWidth=i,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,t){let{fill:n}=t;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,t,n,i,r,s,a){const o=this._getStyleDeclaration(n,i),l=this.getCompleteStyleDeclaration(n,i),c="fillText"===e&&l.fill,d="strokeText"===e&&l.stroke&&l.strokeWidth;if(d||c){if(t.save(),t.font=this._getFontDeclaration(l),o.textBackgroundColor&&this._removeShadow(t),o.deltaY&&(a+=o.deltaY),c){const e=this._setFillStyles(t,l);t.fillText(r,s-e.offsetX,a-e.offsetY)}if(d){const e=this._setStrokeStyles(t,l);t.strokeText(r,s-e.offsetX,a-e.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,n){const i=this.get2DCursorLocation(e,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:r*n.size,deltaY:s+r*n.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),n=this.width-t,i=this.textAlign,r=this.direction,s=this.isEndOfWrapping(e);let a=0;return i===$w||i===Iw&&!s||i===Lw&&!s||i===Dw&&!s?0:(i===pb&&(a=n/2),i===yb&&(a=n),i===Iw&&(a=n/2),i===Lw&&(a=n),"rtl"===r&&(i===yb||i===$w||i===Lw?a=0:i===gb||i===Dw?a=-n:i!==pb&&i!==Iw||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(void 0!==this.__lineWidths[e])return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,n){var i;return null!==(i=this._getStyleDeclaration(e,t)[n])&&void 0!==i?i:this[n]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let n=this._getTopOffset();const i=this._getLeftOffset(),r=this.path,s=this._getWidthOfCharSpacing(),a="linethrough"===t?.5:"overline"===t?1:0,o=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const c=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){n+=c;continue}const d=this._textLines[l],u=c/this.lineHeight,h=this._getLineLeftOffset(l);let f=0,p=0,g=this.getValueOfPropertyAt(l,0,t),m=this.getValueOfPropertyAt(l,0,Db),v=this.getValueOfPropertyAt(l,0,Ew),y=g,b=m,x=v;const w=n+u*(1-this._fontSizeFraction);let S=this.getHeightOfChar(l,0),C=this.getValueOfPropertyAt(l,0,"deltaY");for(let n=0,s=d.length;n<s;n++){const s=this.__charBounds[l][n];y=this.getValueOfPropertyAt(l,n,t),b=this.getValueOfPropertyAt(l,n,Db),x=this.getValueOfPropertyAt(l,n,Ew);const c=this.getHeightOfChar(l,n),d=this.getValueOfPropertyAt(l,n,"deltaY");if(r&&y&&b){const t=this.fontSize*x/1e3;e.save(),e.fillStyle=m,e.translate(s.renderLeft,s.renderTop),e.rotate(s.angle),e.fillRect(-s.kernedWidth/2,o*c+d-a*t,s.kernedWidth,t),e.restore()}else if((y!==g||b!==m||c!==S||x!==v||d!==C)&&p>0){const t=this.fontSize*v/1e3;let n=i+h+f;"rtl"===this.direction&&(n=this.width-n-p),g&&m&&v&&(e.fillStyle=m,e.fillRect(n,w+o*S+C-a*t,p,t)),f=s.left,p=s.width,g=y,v=x,m=b,S=c,C=d}else p+=s.kernedWidth}let _=i+h+f;"rtl"===this.direction&&(_=this.width-_-p),e.fillStyle=b;const k=this.fontSize*x/1e3;y&&b&&x&&e.fillRect(_,w+o*S+C-a*k,p-s,k),n+=c}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:i=this.fontSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;const s=e.includes("'")||e.includes('"')||e.includes(",")||nA.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,n,"".concat(r?this.CACHE_FONT_SIZE:i,"px"),s].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return kC(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),n=new Array(t.length),i=["\n"];let r=[];for(let s=0;s<t.length;s++)n[s]=this.graphemeSplit(t[s]),r=r.concat(n[s],i);return r.pop(),{_unwrappedLines:n,lines:t,graphemeText:r,graphemeLines:n}}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Hy(Hy({},super.toObject([...Mw,...e])),{},{styles:OC(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:n}=this.constructor;super.set(e,t);let i=!1,r=!1;if("object"==typeof e)for(const s in e)"path"===s&&this.setPathInfo(),i=i||n.includes(s),r=r||"path"===s;else i=n.includes(e),r="path"===e;return r&&this.setPathInfo(),i&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,n){const i=o_(e,nA.ATTRIBUTE_NAMES,n),r=Hy(Hy({},t),i),{textAnchor:s=gb,textDecoration:a="",dx:o=0,dy:l=0,top:c=0,left:d=0,fontSize:u=hb,strokeWidth:h=1}=r,f=Uy(r,eA),p=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),Hy({left:d+o,top:c+l,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:u},f)),g=p.getScaledHeight()/p.height,m=((p.height+p.strokeWidth)*p.lineHeight-p.height)*g,v=p.getScaledHeight()+m;let y=0;return s===pb&&(y=p.getScaledWidth()/2),s===yb&&(y=p.getScaledWidth()),p.set({left:p.left-y,top:p.top-(v-p.fontSize*(.07+p._fontSizeFraction))/p.lineHeight,strokeWidth:h}),p}static fromObject(e){return this._fromObject(Hy(Hy({},e),{},{styles:MC(e.styles||{},e.text)}),{extraParam:"text"})}}Wy(nA,"textLayoutProperties",Ow),Wy(nA,"cacheProperties",[...uS,...Mw]),Wy(nA,"ownDefaults",Nw),Wy(nA,"type","Text"),Wy(nA,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Wy(nA,"ATTRIBUTE_NAMES",PC.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),pC(nA,[class extends kw{_toSVG(){const e=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(e.textTop,e.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(e){const t=this._createBaseSVGMarkup(this._toSVG(),{reviver:e,noStyle:!0,withShadow:!0}),n=this.path;return n?t+n._createBaseSVGMarkup(n._toSVG(),{reviver:e,withShadow:!0,additionalTransform:Tx(this.calcOwnMatrix())}):t}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(e){let{textBgRects:t,textSpans:n}=e;const i=this.getSvgTextDecoration(this);return[t.join(""),'\t\t<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(Jk,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",i?'text-decoration="'.concat(i,'" '):"","rtl"===this.direction?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",n.join(""),"</text>\n"]}_getSVGTextAndBg(e,t){const n=[],i=[];let r,s=e;this.backgroundColor&&i.push(...Zk(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let a=0,o=this._textLines.length;a<o;a++)r=this._getLineLeftOffset(a),"rtl"===this.direction&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(i,a,t+r,s),this._setSVGTextLineText(n,a,t+r,s),s+=this.getHeightOfLine(a);return{textSpans:n,textBgRects:i}}_createTextCharSpan(e,t,n,i,r){const s=qy.NUM_FRACTION_DIGITS,a=this.getSvgSpanStyles(t,e!==e.trim()||!!e.match(Qk)),o=a?'style="'.concat(a,'"'):"",l=t.deltaY,c=l?' dy="'.concat(jx(l,s),'" '):"",{angle:d,renderLeft:u,renderTop:h,width:f}=r;let p="";if(void 0!==u){const e=f/2;d&&(p=' rotate="'.concat(jx(ox(d),s),'"'));const t=mx({angle:ox(d)});t[4]=u,t[5]=h;const r=new Vb(-e,0).transform(t);n=r.x,i=r.y}return'<tspan x="'.concat(jx(n,s),'" y="').concat(jx(i,s),'" ').concat(c).concat(p).concat(o,">").concat(CC(e),"</tspan>")}_setSVGTextLineText(e,t,n,i){const r=this.getHeightOfLine(t),s=this.textAlign.includes($w),a=this._textLines[t];let o,l,c,d,u,h="",f=0;i+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,g=a.length-1;p<=g;p++)u=p===g||this.charSpacing||this.path,h+=a[p],c=this.__charBounds[t][p],0===f?(n+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,s&&!u&&this._reSpaceAndTab.test(a[p])&&(u=!0),u||(o=o||this.getCompleteStyleDeclaration(t,p),l=this.getCompleteStyleDeclaration(t,p+1),u=TC(o,l,!0)),u&&(d=this._getStyleDeclaration(t,p),e.push(this._createTextCharSpan(h,d,n,i,c)),h="",o=l,"rtl"===this.direction?n-=f:n+=f,f=0)}_setSVGTextLineBg(e,t,n,i){const r=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight;let a,o=0,l=0,c=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let d=0;d<r.length;d++){const{left:r,width:u,kernedWidth:h}=this.__charBounds[t][d];a=this.getValueOfPropertyAt(t,d,"textBackgroundColor"),a!==c?(c&&e.push(...Zk(c,n+l,i,o,s)),l=r,o=u,c=a):o+=h}a&&e.push(...Zk(c,n+l,i,o,s))}_getSVGLineTopOffset(e){let t,n=0;for(t=0;t<e;t++)n+=this.getHeightOfLine(t);const i=this.getHeightOfLine(t);return{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(e){return"".concat(super.getSvgStyles(e)," text-decoration-thickness: ").concat(jx(this.textDecorationThickness*this.getObjectScaling().y/10,qy.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(e,t){const{fontFamily:n,strokeWidth:i,stroke:r,fill:s,fontSize:a,fontStyle:o,fontWeight:l,deltaY:c,textDecorationThickness:d,linethrough:u,overline:h,underline:f}=e,p=this.getSvgTextDecoration({underline:null!=f?f:this.underline,overline:null!=h?h:this.overline,linethrough:null!=u?u:this.linethrough}),g=d||this.textDecorationThickness;return[r?_w(Lb,r):"",i?"stroke-width: ".concat(i,"; "):"",n?"font-family: ".concat(n.includes("'")||n.includes('"')?n:"'".concat(n,"'"),"; "):"",a?"font-size: ".concat(a,"px; "):"",o?"font-style: ".concat(o,"; "):"",l?"font-weight: ".concat(l,"; "):"",p?"text-decoration: ".concat(p,"; text-decoration-thickness: ").concat(jx(g*this.getObjectScaling().y/10,qy.NUM_FRACTION_DIGITS),"%; "):"",s?_w(Db,s):"",c?"baseline-shift: ".concat(-c,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(e){return["overline","underline","line-through"].filter(t=>e[t.replace("-","")]).join(" ")}}]),Bb.setClass(nA),Bb.setSVGClass(nA);class iA{constructor(e){Wy(this,"target",void 0),Wy(this,"__mouseDownInPlace",!1),Wy(this,"__dragStartFired",!1),Wy(this,"__isDraggingOver",!1),Wy(this,"__dragStartSelection",void 0),Wy(this,"__dragImageDisposer",void 0),Wy(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(e=>e()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,n=t.getSelectionStartFromPointer(e);return t.isEditing&&n>=t.selectionStart&&n<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var n;let{selectionStart:i,selectionEnd:r}=t;const s=this.target,a=s.canvas,o=new Vb(s.flipX?-1:1,s.flipY?-1:1),l=s._getCursorBoundaries(i),c=new Vb(l.left+l.leftOffset,l.top+l.topOffset).multiply(o).transform(s.calcTransformMatrix()),d=a.getScenePoint(e).subtract(c),u=s.getCanvasRetinaScaling(),h=s.getBoundingRect(),f=c.subtract(new Vb(h.left,h.top)),p=a.viewportTransform,g=f.add(d).transform(p,!0),m=s.backgroundColor,v=SC(s.styles);s.backgroundColor="";const y={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};s.setSelectionStyles(y,0,i),s.setSelectionStyles(y,r,s.text.length),s.dirty=!0;const b=s.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});s.backgroundColor=m,s.styles=v,s.dirty=!0,ek(b,{position:"fixed",left:"".concat(-b.width,"px"),border:bb,width:"".concat(b.width/u,"px"),height:"".concat(b.height/u,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{b.remove()},Dx(e.target||this.target.hiddenTextarea).body.appendChild(b),null===(n=e.dataTransfer)||void 0===n||n.setDragImage(b,g.x,g.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,n=this.isActive();if(n&&e.dataTransfer){const n=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(n.selectionStart,n.selectionEnd).join(""),r=Hy({text:t.text,value:i},n);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(n.selectionStart,n.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,r)}return t.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return t<n.selectionStart||t>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const n=this.targetCanDrop(t);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,n=this.targetCanDrop(t);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:n}=e,i=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let r=null===(t=n.dataTransfer)||void 0===t?void 0:t.getData("text/plain");if(r&&!i){const t=this.target,i=t.canvas;let s=t.getSelectionStartFromPointer(n);const{styles:a}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},o=r[Math.max(0,r.length-1)],l=0;if(this.__dragStartSelection){const e=this.__dragStartSelection.selectionStart,n=this.__dragStartSelection.selectionEnd;s>e&&s<=n?s=e:s>n&&(s-=n-e),t.removeChars(e,n),delete this.__dragStartSelection}t._reNewline.test(o)&&(t._reNewline.test(t._text[s])||s===t._text.length)&&(r=r.trimEnd()),e.didDrop=!0,e.dropTarget=t,t.insertChars(r,a,s),i.setActiveObject(t),t.enterEditing(n),t.selectionStart=Math.min(s+l,t._text.length),t.selectionEnd=Math.min(t.selectionStart+r.length,t._text.length),t.hiddenTextarea.value=t.text,t._updateTextarea(),t.hiddenTextarea.focus(),t.fire(Tb,{index:s+l,action:"drop"}),i.fire("text:changed",{target:t}),i.contextTopDirty=!0,i.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const e=this.target,i=this.target.canvas,{selectionStart:r,selectionEnd:s}=this.__dragStartSelection,a=(null===(n=t.dataTransfer)||void 0===n?void 0:n.dropEffect)||bb;a===bb?(e.selectionStart=r,e.selectionEnd=s,e._updateTextarea(),e.hiddenTextarea.focus()):(e.clearContextTop(),"move"===a&&(e.removeChars(r,s),e.selectionStart=e.selectionEnd=r,e.hiddenTextarea&&(e.hiddenTextarea.value=e.text),e._updateTextarea(),e.fire(Tb,{index:r,action:"dragend"}),i.fire("text:changed",{target:e}),i.requestRenderAll()),e.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const rA=/[ \n\.,;!\?\-]/;class sA extends nA{constructor(){super(...arguments),Wy(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:n,delay:i,onComplete:r}=e;return TS({startValue:this._currentCursorOpacity,endValue:t,duration:n,delay:i,onComplete:r,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:e=>{this._currentCursorOpacity=e,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;null===(e=this._currentTickCompleteState)||void 0===e||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n--;for(;/\S/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findWordBoundaryRight(e){let t=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)t++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}findLineBoundaryLeft(e){let t=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)t++,n--;return e-t}findLineBoundaryRight(e){let t=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)t++,n++;return e+t}searchWordBoundary(e,t){const n=this._text;let i=e>0&&this._reSpace.test(n[e])&&(-1===t||!xb.test(n[e-1]))?e-1:e,r=n[i];for(;i>0&&i<n.length&&!rA.test(r);)i+=t,r=n[i];return-1===t&&rA.test(r)&&i++,i}selectWord(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const n=this.searchWordBoundary(e,-1),i=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var t;e=null!==(t=e)&&void 0!==t?t:this.selectionStart;const n=this.findLineBoundaryLeft(e),i=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e:e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Dx(t).activeElement!==t&&t.focus();const n=this.getSelectionStartFromPointer(e),i=this.selectionStart,r=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&i!==r||i!==n&&r!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===r||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,n){const i=n.slice(0,e),r=this.graphemeSplit(i).length;if(e===t)return{selectionStart:r,selectionEnd:r};const s=n.slice(e,t);return{selectionStart:r,selectionEnd:r+this.graphemeSplit(s).length}}fromGraphemeToStringSelection(e,t,n){const i=n.slice(0,e).join("").length;return e===t?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),i=n.lineIndex,r=n.charIndex,s=this.getValueOfPropertyAt(i,r,"fontSize")*this.lineHeight,a=t.leftOffset,o=this.getCanvasRetinaScaling(),l=this.canvas.upperCanvasEl,c=l.width/o,d=l.height/o,u=c-s,h=d-s,f=new Vb(t.left+a,t.top+t.topOffset+s).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new Vb(l.clientWidth/c,l.clientHeight/d));return f.x<0&&(f.x=0),f.x>u&&(f.x=u),f.y<0&&(f.y=0),f.y>h&&(f.y=h),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:"".concat(f.x,"px"),top:"".concat(f.y,"px"),fontSize:"".concat(s,"px"),charHeight:s}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Ib),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:n,charIndex:i}=this.get2DCursorLocation(e,!0),{lineIndex:r,charIndex:s}=this.get2DCursorLocation(t,!0);if(n!==r){if(this.styles[n])for(let e=i;e<this._unwrappedTextLines[n].length;e++)delete this.styles[n][e];if(this.styles[r])for(let e=s;e<this._unwrappedTextLines[r].length;e++){const t=this.styles[r][e];t&&(this.styles[n]||(this.styles[n]={}),this.styles[n][i+e-s]=t)}for(let e=n+1;e<=r;e++)delete this.styles[e];this.shiftLineStyles(r,n-r)}else if(this.styles[n]){const e=this.styles[n],t=s-i;for(let n=i;n<s;n++)delete e[n];for(const i in this.styles[n]){const n=parseInt(i,10);n>=s&&(e[n-t]=e[i],delete e[i])}}}shiftLineStyles(e,t){const n=Object.assign({},this.styles);for(const i in this.styles){const r=parseInt(i,10);r>e&&(this.styles[r+t]=n[r],n[r-t]||delete this.styles[r])}}insertNewlineStyleObject(e,t,n,i){const r={},s=this._unwrappedTextLines[e].length,a=s===t;let o=!1;n||(n=1),this.shiftLineStyles(e,n);const l=this.styles[e]?this.styles[e][0===t?t:t-1]:void 0;for(const d in this.styles[e]){const n=parseInt(d,10);n>=t&&(o=!0,r[n-t]=this.styles[e][d],a&&0===t||delete this.styles[e][d])}let c=!1;for(o&&!a&&(this.styles[e+n]=r,c=!0),(c||s>t)&&n--;n>0;)i&&i[n-1]?this.styles[e+n]={0:Hy({},i[n-1])}:l?this.styles[e+n]={0:Hy({},l)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,t,n,i){this.styles||(this.styles={});const r=this.styles[e],s=r?Hy({},r):{};n||(n=1);for(const o in s){const e=parseInt(o,10);e>=t&&(r[e+n]=s[e],s[e-n]||delete r[e])}if(this._forceClearCache=!0,i){for(;n--;)Object.keys(i[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+n]=Hy({},i[n]));return}if(!r)return;const a=r[t?t-1:1];for(;a&&n--;)this.styles[e][t+n]=Hy({},a)}insertNewStyleBlock(e,t,n){const i=this.get2DCursorLocation(t,!0),r=[0];let s,a=0;for(let o=0;o<e.length;o++)"\n"===e[o]?(a++,r[a]=0):r[a]++;for(r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),a&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],a),s=1;s<a;s++)r[s]>0?this.insertCharStyleObject(i.lineIndex+s,0,r[s],n):n&&this.styles[i.lineIndex+s]&&n[0]&&(this.styles[i.lineIndex+s][0]=n[0]),n=n&&n.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(i.lineIndex+s,0,r[s],n)}removeChars(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;i>n&&this.removeStyleFromTo(n,i);const r=this.graphemeSplit(e);this.insertNewStyleBlock(r,n,t),this._text=[...this._text.slice(0,n),...r,...this._text.slice(i)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,n){n<=e?(t===e?this._selectionDirection=gb:this._selectionDirection===yb&&(this._selectionDirection=gb,this.selectionEnd=e),this.selectionStart=n):n>e&&n<t?this._selectionDirection===yb?this.selectionEnd=n:this.selectionStart=n:(t===e?this._selectionDirection=yb:this._selectionDirection===gb&&(this._selectionDirection=yb,this.selectionStart=t),this.selectionEnd=n)}}class aA extends sA{initHiddenTextarea(){const e=this.canvas&&Dx(this.canvas.getElement())||nb(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(e=>{let[n,i]=e;return t.setAttribute(n,i)});const{top:n,left:i,fontSize:r}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(i,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(r,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(e=>{let[n,i]=e;return t.addEventListener(n,this[i].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste,{value:n,selectionStart:i,selectionEnd:r}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const s=()=>{this.updateFromTextArea(),this.fire(Tb),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(""===this.hiddenTextarea.value)return this.styles={},void s();const a=this._splitTextIntoLines(n).graphemeText,o=this._text.length,l=a.length,c=this.selectionStart,d=this.selectionEnd,u=c!==d;let h,f,p,g,m=l-o;const v=this.fromStringToGraphemeSelection(i,r,n),y=c>v.selectionStart;u?(f=this._text.slice(c,d),m+=d-c):l<o&&(f=y?this._text.slice(d+m,d):this._text.slice(c,c-m));const b=a.slice(v.selectionEnd-m,v.selectionEnd);if(f&&f.length&&(b.length&&(h=this.getSelectionStyles(c,c+1,!1),h=b.map(()=>h[0])),u?(p=c,g=d):y?(p=d-f.length,g=d):(p=d,g=d+f.length),this.removeStyleFromTo(p,g)),b.length){const{copyPasteData:e}=tb();t&&b.join("")===e.copiedText&&!qy.disableStyleCopyPaste&&(h=e.copiedTextStyle),this.insertNewStyleBlock(b,c,h)}s()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:n,selectionEnd:i}=t;this.compositionStart=n,this.compositionEnd=i,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=tb();e.copiedText=this.getSelectedText(),qy.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let n,i=this._getLineLeftOffset(e);return t>0&&(n=this.__charBounds[e][t-1],i+=n.left+n.width),i}getDownCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||e.metaKey||34===e.keyCode)return this._text.length-n;const s=i.charIndex,a=this._getWidthBeforeCursor(r,s),o=this._getIndexOnLine(r+1,a);return this._textLines[r].slice(s).length+o+1+this.missingNewlineOffset(r)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const n=this._getSelectionForOffset(e,t),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||e.metaKey||33===e.keyCode)return-n;const s=i.charIndex,a=this._getWidthBeforeCursor(r,s),o=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,s),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+o-l.length+(1-c)}_getIndexOnLine(e,t){const n=this._textLines[e];let i,r,s=this._getLineLeftOffset(e),a=0;for(let o=0,l=n.length;o<l;o++)if(i=this.__charBounds[e][o].width,s+=i,s>t){r=!0;const e=s-i,n=s,l=Math.abs(e-t);a=Math.abs(n-t)<l?o:o-1;break}return r||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const n=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===yb);if(t.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n){const e=this.text.length;this.selectionStart=cS(0,this.selectionStart,e),this.selectionEnd=cS(0,this.selectionEnd,e),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===gb?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),0!==e}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),0!==e}moveCursorLeft(e){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",e)}_move(e,t,n){let i;if(e.altKey)i=this["findWordBoundary".concat(n)](this[t]);else{if(!e.metaKey&&35!==e.keyCode&&36!==e.keyCode)return this[t]+="Left"===n?-1:1,!0;i=this["findLineBoundary".concat(n)](this[t])}return void 0!==i&&this[t]!==i&&(this[t]=i,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=gb,this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===yb&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection=gb,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const n="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===gb&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=yb,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=yb,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const oA=e=>!!e.button;class lA extends aA{constructor(){super(...arguments),Wy(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new iA(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:t,alreadySelected:n}=e;this.canvas&&this.editable&&!oA(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(e){let{e:t,transform:n}=e;const i=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const e=this.canvas._activeObject;if(e&&e!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||oA(t)||i||this.selected&&!this.getActiveControl()&&(this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),n=this.selectionStart,i=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,i,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(dx(this.calcTransformMatrix())).add(new Vb(-this._getLeftOffset(),-this._getTopOffset()));let n=0,i=0,r=0;for(let l=0;l<this._textLines.length&&n<=t.y;l++)n+=this.getHeightOfLine(l),r=l,l>0&&(i+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));let s=Math.abs(this._getLineLeftOffset(r));const a=this._textLines[r].length,o=this.__charBounds[r];for(let l=0;l<a;l++){const e=s+o[l].kernedWidth;if(t.x<=e){Math.abs(t.x-e)<=Math.abs(t.x-s)&&i++;break}s=e,i++}return Math.min(this.flipX?a-i:i,this._text.length)}}const cA="moveCursorUp",dA="moveCursorDown",uA="moveCursorLeft",hA="moveCursorRight",fA="exitEditing",pA=(e,t)=>{const n=t.getRetinaScaling();e.setTransform(n,0,0,n,0,0);const i=t.viewportTransform;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])},gA=Hy({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:fA,27:fA,33:cA,34:dA,35:hA,36:uA,37:uA,38:cA,39:hA,40:dA},keysMapRtl:{9:fA,27:fA,33:cA,34:dA,35:uA,36:hA,37:hA,38:cA,39:uA,40:dA},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class mA extends lA{static getDefaults(){return Hy(Hy({},super.getDefaults()),mA.ownDefaults)}get type(){const e=super.type;return"itext"===e?"i-text":e}constructor(e,t){super(e,Hy(Hy({},mA.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):("canvas"===e&&(this.canvas instanceof fk&&this.canvas.textEditingManager.remove(this),t instanceof fk&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart||0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,n)}setSelectionStyles(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selectionStart||0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,n)}get2DCursorLocation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=t,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),i=n.length>0;let r,s=e;if(i){r=ix(e.canvas),s=r.getContext("2d"),pA(s,this.canvas);const t=this.calcTransformMatrix();s.transform(t[0],t[1],t[2],t[3],t[4],t[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(s,t):this.renderCursor(s,t),i)for(const a of n){const t=a.clipPath,n=ix(e.canvas),i=n.getContext("2d");if(pA(i,this.canvas),!t.absolutePositioned){const e=a.calcTransformMatrix();i.transform(e[0],e[1],e[2],e[3],e[4],e[5])}t.transform(i),t.drawObject(i,!0,{}),this.drawClipPathOnCache(s,t,n)}i&&(e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let t=this;for(;t;)t.clipPath&&e.push(t),t=t.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(e,t);return{left:n,top:i,leftOffset:r.left,topOffset:r.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,n=0;const{charIndex:i,lineIndex:r}=this.get2DCursorLocation(e);for(let l=0;l<r;l++)t+=this.getHeightOfLine(l);const s=this._getLineLeftOffset(r),a=this.__charBounds[r][i];a&&(n=a.left),0!==this.charSpacing&&i===this._textLines[r].length&&(n-=this._getWidthOfCharSpacing());const o={top:t,left:s+(n>0?n:0)};return"rtl"===this.direction&&(this.textAlign===yb||this.textAlign===$w||this.textAlign===Lw?o.left*=-1:this.textAlign===gb||this.textAlign===Dw?o.left=s-(n>0?n:0):this.textAlign!==pb&&this.textAlign!==Iw||(o.left=s-(n>0?n:0))),o}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectionStart,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,s=this.getValueOfPropertyAt(i,r,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),o=this.cursorWidth/a,l=this.getValueOfPropertyAt(i,r,"deltaY"),c=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-s*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-o/2,top:c+t.top+l,width:o,height:s}}_renderCursor(e,t,n){const{color:i,opacity:r,left:s,top:a,width:o,height:l}=this.getCursorRenderingData(n,t);e.fillStyle=i,e.globalAlpha=r,e.fillRect(s,a,o,l)}renderSelection(e,t){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,n){const i=t.selectionStart,r=t.selectionEnd,s=this.textAlign.includes($w),a=this.get2DCursorLocation(i),o=this.get2DCursorLocation(r),l=a.lineIndex,c=o.lineIndex,d=a.charIndex<0?0:a.charIndex,u=o.charIndex<0?0:o.charIndex;for(let h=l;h<=c;h++){const t=this._getLineLeftOffset(h)||0;let i=this.getHeightOfLine(h),r=0,a=0,o=0;if(h===l&&(a=this.__charBounds[l][d].left),h>=l&&h<c)o=s&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===c)if(0===u)o=this.__charBounds[c][u].left;else{const e=this._getWidthOfCharSpacing();o=this.__charBounds[c][u-1].left+this.__charBounds[c][u-1].width-e}r=i,(this.lineHeight<1||h===c&&this.lineHeight>1)&&(i/=this.lineHeight);let f=n.left+t+a,p=i,g=0;const m=o-a;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",p=1,g=i):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(this.textAlign===yb||this.textAlign===$w||this.textAlign===Lw?f=this.width-f-m:this.textAlign===gb||this.textAlign===Dw?f=n.left+t-o:this.textAlign!==pb&&this.textAlign!==Iw||(f=n.left+t-o)),e.fillRect(f,n.top+n.topOffset+g,m,p),n.topOffset+=r}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Db)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}Wy(mA,"ownDefaults",gA),Wy(mA,"type","IText"),Bb.setClass(mA),Bb.setClass(mA,"i-text");class vA extends mA{static getDefaults(){return Hy(Hy({},super.getDefaults()),vA.ownDefaults)}constructor(e,t){super(e,Hy(Hy({},vA.ownDefaults),t))}static createControls(){return{controls:hC()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes($w)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,n=0,i=0;const r={};for(let s=0;s<e.graphemeLines.length;s++)"\n"===e.graphemeText[i]&&s>0?(n=0,i++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[i])&&s>0&&(n++,i++),r[s]={line:t,offset:n},i+=e.graphemeLines[s].length,n+=e.graphemeLines[s].length;return r}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const e=this._styleMap[t];e&&(t=e.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,n=0,i=e+1,r=!1;const s=this._styleMap[e],a=this._styleMap[e+1];s&&(e=s.line,n=s.offset),a&&(i=a.line,r=i===e,t=a.offset);const o=void 0===e?this.styles:{line:this.styles[e]};for(const l in o)for(const e in o[l]){const i=parseInt(e,10);if(i>=n&&(!r||i<t))for(const t in o[l][e])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,t=n.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,n){const i=this._styleMap[e];super._setStyleDeclaration(i.line,i.offset+t,n)}_deleteStyleDeclaration(e,t){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),i=[];for(let r=0;r<n.wordsData.length;r++)i.push(...this._wrapLine(r,t,n));return this.isWrapping=!1,i}getGraphemeDataForRender(e){const t=this.splitByGrapheme,n=t?"":" ";let i=0;return{wordsData:e.map((e,r)=>{let s=0;const a=t?this.graphemeSplit(e):this.wordSplit(e);return 0===a.length?[{word:[],width:0}]:a.map(e=>{const a=t?[e]:this.graphemeSplit(e),o=this._measureWord(a,r,s);return i=Math.max(o,i),s+=a.length+n.length,{word:a,width:o}})}),largestWordWidth:i}}_measureWord(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;for(let s=0,a=e.length;s<a;s++)r+=this._getGraphemeBox(e[s],t,s+i,n,!0).kernedWidth,n=e[s];return r}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,n){let{largestWordWidth:i,wordsData:r}=n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const a=this._getWidthOfCharSpacing(),o=this.splitByGrapheme,l=[],c=o?"":" ";let d=0,u=[],h=0,f=0,p=!0;t-=s;const g=Math.max(t,i,this.dynamicMinWidth),m=r[e];let v;for(h=0,v=0;v<m.length;v++){const{word:t,width:n}=m[v];h+=t.length,d+=f+n-a,d>g&&!p?(l.push(u),u=[],d=n,p=!0):d+=a,p||o||u.push(c),u=u.concat(t),f=o?0:this._measureWord([c],e,h),h++,p=!1}return v&&l.push(u),i+s>this.dynamicMinWidth&&(this.dynamicMinWidth=i-a+s),l}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),n=this._wrapText(t.lines,this.width),i=new Array(n.length);for(let r=0;r<n.length;r++)i[r]=n[r].join("");return t.lines=i,t.graphemeLines=n,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const n=parseInt(t,10);if(this._textLines[n]){const n=this._styleMap[t].line;e.set("".concat(n),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}Wy(vA,"type","Textbox"),Wy(vA,"textLayoutProperties",[...mA.textLayoutProperties,"width"]),Wy(vA,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Bb.setClass(vA);class yA extends m_{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:n}=e,{clipPath:i,group:r}=n;if(!i||!this.shouldPerformLayout(e))return;const{width:s,height:a}=qx(g_(n,i)),o=new Vb(s,a);if(i.absolutePositioned)return{center:tw(i.getRelativeCenterPoint(),void 0,r?r.calcTransformMatrix():void 0),size:o};{const r=i.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:n=new Vb,correction:i=new Vb}=this.calcBoundingBox(t,e)||{};return{center:n.add(r),correction:i.subtract(r),size:o}}return{center:n.getRelativeCenterPoint().add(r),size:o}}}}Wy(yA,"type","clip-path"),Bb.setClass(yA);class bA extends m_{getInitialSize(e,t){let{target:n}=e,{size:i}=t;return new Vb(n.width||i.x,n.height||i.y)}}Wy(bA,"type","fixed"),Bb.setClass(bA);class xA extends w_{subscribeTargets(e){const t=e.target;e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{e.layoutManager.subscribeTargets({target:e,targets:[t]})})}unsubscribeTargets(e){const t=e.target,n=t.getObjects();e.targets.reduce((e,t)=>(t.parent&&e.add(t.parent),e),new Set).forEach(e=>{!n.some(t=>t.parent===e)&&e.layoutManager.unsubscribeTargets({target:e,targets:[t]})})}}class wA extends __{static getDefaults(){return Hy(Hy({},super.getDefaults()),wA.ownDefaults)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),Object.assign(this,wA.ownDefaults),this.setOptions(t);const{left:n,top:i,layoutManager:r}=t;this.groupInit(e,{left:n,top:i,layoutManager:null!=r?r:new xA})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"selection-order"===this.multiSelectionStacking?this.add(...t):t.forEach(e=>{const t=this._objects.findIndex(t=>t.isInFrontOf(e)),n=-1===t?this.size():t;this.insertAt(n,e)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Xy("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const n=new Set;t.forEach(e=>{const{parent:t}=e;t&&n.add(t)}),e===f_?n.forEach(e=>{e._onAfterObjectsChange(h_,t)}):n.forEach(e=>{e._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const i=Hy(Hy({hasControls:!1},n),{},{forActiveSelection:!0});for(let r=0;r<this._objects.length;r++)this._objects[r]._renderControls(e,i);super._renderControls(e,t),e.restore()}}Wy(wA,"type","ActiveSelection"),Wy(wA,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Bb.setClass(wA),Bb.setClass(wA,"activeSelection");class SA{constructor(){Wy(this,"resources",{})}applyFilters(e,t,n,i,r){const s=r.getContext("2d");if(!s)return;s.drawImage(t,0,0,n,i);const a={sourceWidth:n,sourceHeight:i,imageData:s.getImageData(0,0,n,i),originalEl:t,originalImageData:s.getImageData(0,0,n,i),canvasEl:r,ctx:s,filterBackend:this};e.forEach(e=>{e.applyTo(a)});const{imageData:o}=a;return o.width===n&&o.height===i||(r.width=o.width,r.height=o.height),s.putImageData(o,0,0),a}}class CA{constructor(){let{tileSize:e=qy.textureSize}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wy(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),Wy(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const n=ix({width:e,height:t}),i=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});i&&(i.clearColor(0,0,0,0),this.canvas=n,this.gl=i)}applyFilters(e,t,n,i,r,s){const a=this.gl,o=r.getContext("2d");if(!a||!o)return;let l;s&&(l=this.getCachedTexture(s,t));const c={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,n,i,l?void 0:t),targetTexture:this.createTexture(a,n,i),originalTexture:l||this.createTexture(a,n,i,l?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},d=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,d),e.forEach(e=>{e&&e.applyTo(c)}),function(e){const t=e.targetCanvas,n=t.width,i=t.height,r=e.destinationWidth,s=e.destinationHeight;n===r&&i===s||(t.width=r,t.height=s)}(c),this.copyGLTo2D(a,c),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(c.sourceTexture),a.deleteTexture(c.targetTexture),a.deleteFramebuffer(d),o.setTransform(1,0,0,1,0,0),c}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,n,i,r){const{NEAREST:s,TEXTURE_2D:a,RGBA:o,UNSIGNED_BYTE:l,CLAMP_TO_EDGE:c,TEXTURE_MAG_FILTER:d,TEXTURE_MIN_FILTER:u,TEXTURE_WRAP_S:h,TEXTURE_WRAP_T:f}=e,p=e.createTexture();return e.bindTexture(a,p),e.texParameteri(a,d,r||s),e.texParameteri(a,u,r||s),e.texParameteri(a,h,c),e.texParameteri(a,f,c),i?e.texImage2D(a,0,o,o,l,i):e.texImage2D(a,0,o,t,n,0,o,l,null),p}getCachedTexture(e,t,n){const{textureCache:i}=this;if(i[e])return i[e];{const r=this.createTexture(this.gl,t.width,t.height,t,n);return r&&(i[e]=r),r}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const n=e.canvas,i=t.targetCanvas,r=i.getContext("2d");if(!r)return;r.translate(0,i.height),r.scale(1,-1);const s=n.height-i.height;r.drawImage(n,0,s,i.width,i.height,0,0,i.width,i.height)}copyGLTo2DPutImageData(e,t){const n=t.targetCanvas.getContext("2d"),i=t.destinationWidth,r=t.destinationHeight,s=i*r*4;if(!n)return;const a=new Uint8Array(this.imageBuffer,0,s),o=new Uint8ClampedArray(this.imageBuffer,0,s);e.readPixels(0,0,i,r,e.RGBA,e.UNSIGNED_BYTE,a);const l=new ImageData(o,i,r);n.putImageData(l,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const i=e.getParameter(n.UNMASKED_RENDERER_WEBGL),r=e.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(t.renderer=i.toLowerCase()),r&&(t.vendor=r.toLowerCase())}return this.gpuInfo=t,t}}let _A;function kA(){return!_A&&(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(_A=function(){const{WebGLProbe:e}=tb();return e.queryWebGL(tx()),qy.enableGLFiltering&&e.isSupported(qy.textureSize)?new CA({tileSize:qy.textureSize}):new SA}()),_A}const AA=["filters","resizeFilter","src","crossOrigin","type"],EA=["cropX","cropY"];class jA extends gC{static getDefaults(){return Hy(Hy({},super.getDefaults()),jA.ownDefaults)}constructor(e,t){super(),Wy(this,"_lastScaleX",1),Wy(this,"_lastScaleY",1),Wy(this,"_filterScalingX",1),Wy(this,"_filterScalingY",1),this.filters=[],Object.assign(this,jA.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(ex()),this.setElement("string"==typeof e?(this.canvas&&Dx(this.canvas.getElement())||nb()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),null===(t=e.classList)||void 0===t||t.add(jA.CSS_CANVAS),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=kA(!1);t instanceof CA&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&tb().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||0===this.strokeWidth)return;const t=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-t,-n),e.lineTo(t,-n),e.lineTo(t,n),e.lineTo(-t,n),e.lineTo(-t,-n),e.closePath()}toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=[];return this.filters.forEach(e=>{e&&t.push(e.toObject())}),Hy(Hy({},super.toObject([...EA,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,n=-this.width/2,i=-this.height/2;let r=[],s=[],a="",o="";if(!t)return[];if(this.hasCrop()){const e=ex();r.push('<clipPath id="imageCrop_'+e+'">\n','\t<rect x="'+n+'" y="'+i+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+e+')" '}if(this.imageSmoothing||(o=' image-rendering="optimizeSpeed"'),e.push("\t<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(i-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(o).concat(a,"></image>\n")),this.stroke||this.strokeDashArray){const e=this.fill;this.fill=null,s=['\t<rect x="'.concat(n,'" y="').concat(i,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),'" />\n')],this.fill=e}return r=this.paintFirst!==Db?r.concat(s,e):r.concat(e,s),r}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Cx(e,{crossOrigin:t,signal:n}).then(e=>{void 0!==t&&this.set({crossOrigin:t}),this.setElement(e)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.x,r=n.y,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||i>t&&r>t)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=r);const a=ix(s),{width:o,height:l}=s;this._element=a,this._lastScaleX=e.scaleX=i,this._lastScaleY=e.scaleY=r,kA().applyFilters([e],s,o,l,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.filters||[];if(e=e.filter(e=>e&&!e.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),0===e.length)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,n=t.naturalWidth||t.width,i=t.naturalHeight||t.height;if(this._element===this._originalElement){const e=ix({width:n,height:i});this._element=e,this._filteredEl=e}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1);kA().applyFilters(e,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const n=this._filterScalingX,i=this._filterScalingY,r=this.width,s=this.height,a=Math.max(this.cropX,0),o=Math.max(this.cropY,0),l=t.naturalWidth||t.width,c=t.naturalHeight||t.height,d=a*n,u=o*i,h=Math.min(r*n,l-d),f=Math.min(s*i,c-u),p=-r/2,g=-s/2,m=Math.min(r,l/n-a),v=Math.min(s,c/i-o);t&&e.drawImage(t,d,u,h,f,p,g,m,v)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=t||n.height}parsePreserveAspectRatioAttribute(){const e=Cw(this.preserveAspectRatio||""),t=this.width,n=this.height,i={width:t,height:n};let r,s=this._element.width,a=this._element.height,o=1,l=1,c=0,d=0,u=0,h=0;return!e||e.alignX===bb&&e.alignY===bb?(o=t/s,l=n/a):("meet"===e.meetOrSlice&&(o=l=k_(this._element,i),r=(t-s*o)/2,"Min"===e.alignX&&(c=-r),"Max"===e.alignX&&(c=r),r=(n-a*l)/2,"Min"===e.alignY&&(d=-r),"Max"===e.alignY&&(d=r)),"slice"===e.meetOrSlice&&(o=l=A_(this._element,i),r=s-t/o,"Mid"===e.alignX&&(u=r/2),"Max"===e.alignX&&(u=r),r=a-n/l,"Mid"===e.alignY&&(h=r/2),"Max"===e.alignY&&(h=r),s=t/o,a=n/l)),{width:s,height:a,scaleX:o,scaleY:l,offsetLeft:c,offsetTop:d,cropX:u,cropY:h}}static fromObject(e,t){let{filters:n,resizeFilter:i,src:r,crossOrigin:s,type:a}=e,o=Uy(e,AA);return Promise.all([Cx(r,Hy(Hy({},t),{},{crossOrigin:s})),n&&_x(n,t),i&&_x([i],t),kx(o,t)]).then(e=>{let[t,n=[],[i]=[],s={}]=e;return new this(t,Hy(Hy({},o),{},{src:r,filters:n,resizeFilter:i},s))})}static fromURL(e){let{crossOrigin:t=null,signal:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return Cx(e,{crossOrigin:t,signal:n}).then(e=>new this(e,i))}static async fromElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const i=o_(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(i["xlink:href"]||i.href,t,i).catch(e=>(Xy("log","Unable to parse Image",e),null))}}Wy(jA,"type","Image"),Wy(jA,"cacheProperties",[...uS,...EA]),Wy(jA,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),Wy(jA,"CSS_CANVAS","canvas-img"),Wy(jA,"ATTRIBUTE_NAMES",[...PC,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Bb.setClass(jA),Bb.setSVGClass(jA);Aw(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const TA=Eb,OA=e=>function(t,n,i){const{points:r,pathOffset:s}=i;return new Vb(r[e]).subtract(s).transform(ux(i.getViewportTransform(),i.calcTransformMatrix()))},MA=(e,t,n,i)=>{const{target:r,pointIndex:s}=t,a=r,o=tw(new Vb(n,i),void 0,a.calcOwnMatrix());return a.points[s]=o.add(a.pathOffset),a.setDimensions(),a.set("dirty",!0),!0},PA=(e,t)=>function(n,i,r,s){const a=i.target,o=new Vb(a.points[(e>0?e:a.points.length)-1]),l=o.subtract(a.pathOffset).transform(a.calcOwnMatrix()),c=t(n,Hy(Hy({},i),{},{pointIndex:e}),r,s),d=o.subtract(a.pathOffset).transform(a.calcOwnMatrix()).subtract(l);return a.left-=d.x,a.top-=d.y,c},NA=e=>LS(TA,PA(e,MA)),$A=(e,t,n)=>{const{path:i,pathOffset:r}=e,s=i[t];return new Vb(s[n]-r.x,s[n+1]-r.y).transform(ux(e.getViewportTransform(),e.calcTransformMatrix()))};function DA(e,t,n){const{commandIndex:i,pointIndex:r}=this;return $A(n,i,r)}function LA(e,t,n,i){const{target:r}=t,{commandIndex:s,pointIndex:a}=this,o=((e,t,n,i,r)=>{const{path:s,pathOffset:a}=e,o=s[(i>0?i:s.length)-1],l=new Vb(o[r],o[r+1]),c=l.subtract(a).transform(e.calcOwnMatrix()),d=tw(new Vb(t,n),void 0,e.calcOwnMatrix());s[i][r]=d.x+a.x,s[i][r+1]=d.y+a.y,e.setDimensions();const u=l.subtract(e.pathOffset).transform(e.calcOwnMatrix()).subtract(c);return e.left-=u.x,e.top-=u.y,e.set("dirty",!0),!0})(r,n,i,s,a);return rw(this.actionName,Hy(Hy({},uw(e,t,n,i)),{},{commandIndex:s,pointIndex:a})),o}class IA extends WS{constructor(e){super(e)}render(e,t,n,i,r){const s=Hy(Hy({},i),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(e,t,n,s,r)}}class FA extends IA{constructor(e){super(e)}render(e,t,n,i,r){const{path:s}=r,{commandIndex:a,pointIndex:o,connectToCommandIndex:l,connectToPointIndex:c}=this;e.save(),e.strokeStyle=this.controlStroke,this.connectionDashArray&&e.setLineDash(this.connectionDashArray);const[d]=s[a],u=$A(r,l,c);if("Q"===d){const i=$A(r,a,o+2);e.moveTo(i.x,i.y),e.lineTo(t,n)}else e.moveTo(t,n);e.lineTo(u.x,u.y),e.stroke(),e.restore(),super.render(e,t,n,i,r)}}const RA=(e,t,n,i,r,s)=>new(n?FA:IA)(Hy(Hy({commandIndex:e,pointIndex:t,actionName:"modifyPath",positionHandler:DA,actionHandler:LA,connectToCommandIndex:r,connectToPointIndex:s},i),n?i.controlPointStyle:i.pointStyle));Object.freeze({__proto__:null,changeWidth:FS,createObjectDefaultControls:dC,createPathControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};let i="M";return e.path.forEach((e,r)=>{const s=e[0];switch("Z"!==s&&(n["c_".concat(r,"_").concat(s)]=RA(r,e.length-2,!1,t)),s){case"C":n["c_".concat(r,"_C_CP_1")]=RA(r,1,!0,t,r-1,(e=>"C"===e?5:"Q"===e?3:1)(i)),n["c_".concat(r,"_C_CP_2")]=RA(r,3,!0,t,r,5);break;case"Q":n["c_".concat(r,"_Q_CP_1")]=RA(r,1,!0,t,r,3)}i=s}),n},createPolyActionHandler:NA,createPolyControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};for(let i=0;i<("number"==typeof e?e:e.points.length);i++)n["p".concat(i)]=new WS(Hy({actionName:TA,positionHandler:OA(i),actionHandler:NA(i)},t));return n},createPolyPositionHandler:OA,createResizeControls:uC,createTextboxDefaultControls:hC,dragHandler:pw,factoryPolyActionHandler:PA,getLocalPoint:fw,polyActionHandler:MA,renderCircleControl:RS,renderSquareControl:BS,rotationStyleHandler:zS,rotationWithSnapping:HS,scaleCursorStyleHandler:qS,scaleOrSkewActionName:aC,scaleSkewCursorStyleHandler:oC,scalingEqually:YS,scalingX:KS,scalingXOrSkewingY:lC,scalingY:QS,scalingYOrSkewingX:cC,skewCursorStyleHandler:tC,skewHandlerX:iC,skewHandlerY:rC,wrapWithFireEvent:LS,wrapWithFixedAnchor:IS});const BA=e=>void 0!==e.webgl,WA="precision highp float",zA="\n    ".concat(WA,";\n    varying vec2 vTexCoord;\n    uniform sampler2D uTexture;\n    void main() {\n      gl_FragColor = texture2D(uTexture, vTexCoord);\n    }"),HA=["type"],UA=["type"],GA=new RegExp(WA,"g");class VA{get type(){return this.constructor.type}constructor(){let e=Uy(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},HA);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return zA}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    void main() {\n      vTexCoord = aPosition;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }"}createProgram(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:i="highp"}}=tb();"highp"!==i&&(t=t.replace(GA,WA.replace("highp",i)));const r=e.createShader(e.VERTEX_SHADER),s=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!r||!s||!a)throw new Yy("Vertex, fragment shader or program creation error");if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw new Yy("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(r)));if(e.shaderSource(s,t),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS))throw new Yy("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(s)));if(e.attachShader(a,r),e.attachShader(a,s),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Yy('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const o=this.getUniformLocations(e,a)||{};return o.uStepW=e.getUniformLocation(a,"uStepW"),o.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:o}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const n=this.constructor.uniformLocations,i={};for(let r=0;r<n.length;r++)i[n[r]]=e.getUniformLocation(t,n[r]);return i}sendAttributeData(e,t,n){const i=t.aPosition,r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const n=e.destinationWidth,i=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===i||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,n,i)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){BA(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,n=this.retrieveShader(e);0===e.pass&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(n.program),this.sendAttributeData(t,n.attributeLocations,e.aPosition),t.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,n.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:n}=e,i=ix({width:t,height:n});e.helpLayer=i}}toObject(){const e=Object.keys(this.constructor.defaults||{});return Hy({type:this.type},e.reduce((e,t)=>(e[t]=this[t],e),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Uy(e,UA))}}Wy(VA,"type","BaseFilter"),Wy(VA,"uniformLocations",[]);const qA={multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",difference:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"\n    if (uColor.r < 0.5) {\n      gl_FragColor.r *= 2.0 * uColor.r;\n    } else {\n      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n    }\n    if (uColor.g < 0.5) {\n      gl_FragColor.g *= 2.0 * uColor.g;\n    } else {\n      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n    }\n    if (uColor.b < 0.5) {\n      gl_FragColor.b *= 2.0 * uColor.b;\n    } else {\n      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n    }\n    ",tint:"\n    gl_FragColor.rgb *= (1.0 - uColor.a);\n    gl_FragColor.rgb += uColor.rgb;\n    "};class XA extends VA{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec4 uColor;\n      varying vec2 vTexCoord;\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        gl_FragColor = color;\n        if (color.a > 0.0) {\n          ".concat(qA[this.mode],"\n        }\n      }\n      ")}applyTo2d(e){let{imageData:{data:t}}=e;const n=new ww(this.color).getSource(),i=this.alpha,r=n[0]*i,s=n[1]*i,a=n[2]*i,o=1-i;for(let l=0;l<t.length;l+=4){const e=t[l],n=t[l+1],i=t[l+2];let c,d,u;switch(this.mode){case"multiply":c=e*r/255,d=n*s/255,u=i*a/255;break;case"screen":c=255-(255-e)*(255-r)/255,d=255-(255-n)*(255-s)/255,u=255-(255-i)*(255-a)/255;break;case"add":c=e+r,d=n+s,u=i+a;break;case"difference":c=Math.abs(e-r),d=Math.abs(n-s),u=Math.abs(i-a);break;case"subtract":c=e-r,d=n-s,u=i-a;break;case"darken":c=Math.min(e,r),d=Math.min(n,s),u=Math.min(i,a);break;case"lighten":c=Math.max(e,r),d=Math.max(n,s),u=Math.max(i,a);break;case"overlay":c=r<128?2*e*r/255:255-2*(255-e)*(255-r)/255,d=s<128?2*n*s/255:255-2*(255-n)*(255-s)/255,u=a<128?2*i*a/255:255-2*(255-i)*(255-a)/255;break;case"exclusion":c=r+e-2*r*e/255,d=s+n-2*s*n/255,u=a+i-2*a*i/255;break;case"tint":c=r+e*o,d=s+n*o,u=a+i*o}t[l]=c,t[l+1]=d,t[l+2]=u}}sendUniformData(e,t){const n=new ww(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(t.uColor,n)}}Wy(XA,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),Wy(XA,"type","BlendColor"),Wy(XA,"uniformLocations",["uColor"]),Bb.setClass(XA);const YA={multiply:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.rgba *= color2.rgba;\n      gl_FragColor = color;\n    }\n    ",mask:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform sampler2D uImage;\n    uniform vec4 uColor;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      vec4 color2 = texture2D(uImage, vTexCoord2);\n      color.a = color2.a;\n      gl_FragColor = color;\n    }\n    "},KA=["type","image"];class QA extends VA{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return YA[this.mode]}getVertexSource(){return"\n    attribute vec2 aPosition;\n    varying vec2 vTexCoord;\n    varying vec2 vTexCoord2;\n    uniform mat3 uTransformMatrix;\n    void main() {\n      vTexCoord = aPosition;\n      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\n      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n    }\n    "}applyToWebGL(e){const t=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,n,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/n,1]}applyTo2d(e){let{imageData:{data:t,width:n,height:i},filterBackend:{resources:r}}=e;const s=this.image;r.blendImage||(r.blendImage=tx());const a=r.blendImage,o=a.getContext("2d");a.width!==n||a.height!==i?(a.width=n,a.height=i):o.clearRect(0,0,n,i),o.setTransform(s.scaleX,0,0,s.scaleY,s.left,s.top),o.drawImage(s.getElement(),0,0,n,i);const l=o.getImageData(0,0,n,i).data;for(let c=0;c<t.length;c+=4){const e=t[c],n=t[c+1],i=t[c+2],r=t[c+3],s=l[c],a=l[c+1],o=l[c+2],d=l[c+3];switch(this.mode){case"multiply":t[c]=e*s/255,t[c+1]=n*a/255,t[c+2]=i*o/255,t[c+3]=r*d/255;break;case"mask":t[c+3]=d}}}sendUniformData(e,t){const n=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,n)}toObject(){return Hy(Hy({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:n,image:i}=e,r=Uy(e,KA);return jA.fromObject(i,t).then(e=>new this(Hy(Hy({},r),{},{image:e})))}}Wy(QA,"type","BlendImage"),Wy(QA,"defaults",{mode:"multiply",alpha:1}),Wy(QA,"uniformLocations",["uTransformMatrix","uImage"]),Bb.setClass(QA);class JA extends VA{getFragmentSource(){return"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform vec2 uDelta;\n    varying vec2 vTexCoord;\n    const float nSamples = 15.0;\n    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\n    float random(vec3 scale) {\n      /* use the fragment position for a different seed per-pixel */\n      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n    }\n    void main() {\n      vec4 color = vec4(0.0);\n      float totalC = 0.0;\n      float totalA = 0.0;\n      float offset = random(v3offset);\n      for (float t = -nSamples; t <= nSamples; t++) {\n        float percent = (t + offset - 0.5) / nSamples;\n        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);\n        float weight = 1.0 - abs(percent);\n        float alpha = weight * sample.a;\n        color.rgb += sample.rgb * alpha;\n        color.a += alpha;\n        totalA += weight;\n        totalC += alpha;\n      }\n      gl_FragColor.rgb = color.rgb / totalC;\n      gl_FragColor.a = color.a / totalA;\n    }\n  "}applyTo(e){BA(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:t,width:n,height:i}}=e;this.aspectRatio=n/i,this.horizontal=!0;let r=this.getBlurValue()*n;const s=new Uint8ClampedArray(t),a=4*n;for(let o=0;o<t.length;o+=4){let e=0,n=0,i=0,l=0,c=0;const d=o-o%a,u=d+a;for(let s=-14;s<15;s++){const a=s/15,h=4*Math.floor(r*a),f=1-Math.abs(a);let p=o+h;p<d?p=d:p>u&&(p=u);const g=t[p+3]*f;e+=t[p]*g,n+=t[p+1]*g,i+=t[p+2]*g,l+=g,c+=f}s[o]=e/l,s[o+1]=n/l,s[o+2]=i/l,s[o+3]=l/c}this.horizontal=!1,r=this.getBlurValue()*i;for(let o=0;o<s.length;o+=4){let e=0,n=0,i=0,l=0,c=0;const d=o%a,u=s.length-a+d;for(let t=-14;t<15;t++){const h=t/15,f=Math.floor(r*h)*a,p=1-Math.abs(h);let g=o+f;g<d?g=d:g>u&&(g=u);const m=s[g+3]*p;e+=s[g]*m,n+=s[g+1]*m,i+=s[g+2]*m,l+=m,c+=p}t[o]=e/l,t[o+1]=n/l,t[o+2]=i/l,t[o+3]=l/c}}sendUniformData(e,t){const n=this.chooseRightDelta();e.uniform2fv(t.uDelta,n)}isNeutralState(){return 0===this.blur}getBlurValue(){let e=1;const{horizontal:t,aspectRatio:n}=this;return t?n>1&&(e=1/n):n<1&&(e=n),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}Wy(JA,"type","Blur"),Wy(JA,"defaults",{blur:0}),Wy(JA,"uniformLocations",["uDelta"]),Bb.setClass(JA);class ZA extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBrightness;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += uBrightness;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.round(255*this.brightness);for(let i=0;i<t.length;i+=4)t[i]+=n,t[i+1]+=n,t[i+2]+=n}isNeutralState(){return 0===this.brightness}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}Wy(ZA,"type","Brightness"),Wy(ZA,"defaults",{brightness:0}),Wy(ZA,"uniformLocations",["uBrightness"]),Bb.setClass(ZA);const eE={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class tE extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  varying vec2 vTexCoord;\n  uniform mat4 uColorMatrix;\n  uniform vec4 uConstants;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color *= uColorMatrix;\n    color += uConstants;\n    gl_FragColor = color;\n  }"}applyTo2d(e){const t=e.imageData.data,n=this.matrix,i=this.colorsOnly;for(let r=0;r<t.length;r+=4){const e=t[r],s=t[r+1],a=t[r+2];if(t[r]=e*n[0]+s*n[1]+a*n[2]+255*n[4],t[r+1]=e*n[5]+s*n[6]+a*n[7]+255*n[9],t[r+2]=e*n[10]+s*n[11]+a*n[12]+255*n[14],!i){const i=t[r+3];t[r]+=i*n[3],t[r+1]+=i*n[8],t[r+2]+=i*n[13],t[r+3]=e*n[15]+s*n[16]+a*n[17]+i*n[18]+255*n[19]}}}sendUniformData(e,t){const n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,i),e.uniform4fv(t.uConstants,r)}toObject(){return Hy(Hy({},super.toObject()),{},{matrix:[...this.matrix]})}}function nE(e,t){var n;const i=(Wy(n=class extends tE{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",e),Wy(n,"defaults",{colorsOnly:!1,matrix:t}),n);return Bb.setClass(i,e),i}Wy(tE,"type","ColorMatrix"),Wy(tE,"defaults",eE),Wy(tE,"uniformLocations",["uColorMatrix","uConstants"]),Bb.setClass(tE);const iE=nE("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),rE=nE("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),sE=nE("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),aE=nE("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),oE=nE("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),lE=nE("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),cE=nE("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class dE extends VA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){BA(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(e=>Bb.getClass(e.type).fromObject(e,t))).then(e=>new this({subFilters:e}))}}Wy(dE,"type","Composed"),Bb.setClass(dE);class uE extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uContrast;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\n    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\n    gl_FragColor = color;\n  }"}isNeutralState(){return 0===this.contrast}applyTo2d(e){let{imageData:{data:t}}=e;const n=Math.floor(255*this.contrast),i=259*(n+255)/(255*(259-n));for(let r=0;r<t.length;r+=4)t[r]=i*(t[r]-128)+128,t[r+1]=i*(t[r+1]-128)+128,t[r+2]=i*(t[r+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}Wy(uE,"type","Contrast"),Wy(uE,"defaults",{contrast:0}),Wy(uE,"uniformLocations",["uContrast"]),Bb.setClass(uE);const hE={Convolute_3_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_3_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[9];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 3.0; h+=1.0) {\n        for (float w = 0.0; w < 3.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_5_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_5_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[25];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 5.0; h+=1.0) {\n        for (float w = 0.0; w < 5.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_7_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_7_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[49];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 7.0; h+=1.0) {\n        for (float w = 0.0; w < 7.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    ",Convolute_9_1:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 0);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      gl_FragColor = color;\n    }\n    ",Convolute_9_0:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform float uMatrix[81];\n    uniform float uStepW;\n    uniform float uStepH;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = vec4(0, 0, 0, 1);\n      for (float h = 0.0; h < 9.0; h+=1.0) {\n        for (float w = 0.0; w < 9.0; w+=1.0) {\n          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\n          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n        }\n      }\n      float alpha = texture2D(uTexture, vTexCoord).a;\n      gl_FragColor = color;\n      gl_FragColor.a = alpha;\n    }\n    "};class fE extends VA{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return hE[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,n=t.data,i=this.matrix,r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=t.width,o=t.height,l=e.ctx.createImageData(a,o),c=l.data,d=this.opaque?1:0;let u,h,f,p,g,m,v,y,b,x,w,S,C;for(w=0;w<o;w++)for(x=0;x<a;x++){for(g=4*(w*a+x),u=0,h=0,f=0,p=0,C=0;C<r;C++)for(S=0;S<r;S++)v=w+C-s,m=x+S-s,v<0||v>=o||m<0||m>=a||(y=4*(v*a+m),b=i[C*r+S],u+=n[y]*b,h+=n[y+1]*b,f+=n[y+2]*b,d||(p+=n[y+3]*b));c[g]=u,c[g+1]=h,c[g+2]=f,c[g+3]=d?n[g+3]:p}e.imageData=l}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return Hy(Hy({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}Wy(fE,"type","Convolute"),Wy(fE,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),Wy(fE,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Bb.setClass(fE);const pE="Gamma";class gE extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform vec3 uGamma;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    vec3 correction = (1.0 / uGamma);\n    color.r = pow(color.r, correction.r);\n    color.g = pow(color.g, correction.g);\n    color.b = pow(color.b, correction.b);\n    gl_FragColor = color;\n    gl_FragColor.rgb *= color.a;\n  }\n"}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.gamma,i=1/n[0],r=1/n[1],s=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let o=0;o<256;o++)a.r[o]=255*Math.pow(o/255,i),a.g[o]=255*Math.pow(o/255,r),a.b[o]=255*Math.pow(o/255,s);for(let o=0;o<t.length;o+=4)t[o]=a.r[t[o]],t[o+1]=a.g[t[o+1]],t[o+2]=a.b[t[o+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return 1===e[0]&&1===e[1]&&1===e[2]}toObject(){return{type:pE,gamma:this.gamma.concat()}}}Wy(gE,"type",pE),Wy(gE,"defaults",{gamma:[1,1,1]}),Wy(gE,"uniformLocations",["uGamma"]),Bb.setClass(gE);const mE={average:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 color = texture2D(uTexture, vTexCoord);\n      float average = (color.r + color.b + color.g) / 3.0;\n      gl_FragColor = vec4(average, average, average, color.a);\n    }\n    ",lightness:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    ",luminosity:"\n    precision highp float;\n    uniform sampler2D uTexture;\n    uniform int uMode;\n    varying vec2 vTexCoord;\n    void main() {\n      vec4 col = texture2D(uTexture, vTexCoord);\n      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\n      gl_FragColor = vec4(average, average, average, col.a);\n    }\n    "};class vE extends VA{applyTo2d(e){let{imageData:{data:t}}=e;for(let n,i=0;i<t.length;i+=4){const e=t[i],r=t[i+1],s=t[i+2];switch(this.mode){case"average":n=(e+r+s)/3;break;case"lightness":n=(Math.min(e,r,s)+Math.max(e,r,s))/2;break;case"luminosity":n=.21*e+.72*r+.07*s}t[i+2]=t[i+1]=t[i]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return mE[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}Wy(vE,"type","Grayscale"),Wy(vE,"defaults",{mode:"average"}),Wy(vE,"uniformLocations",["uMode"]),Bb.setClass(vE);const yE=Hy(Hy({},eE),{},{rotation:0});class bE extends tE{calculateMatrix(){const e=this.rotation*Math.PI,t=Ub(e),n=Gb(e),i=1/3,r=Math.sqrt(i)*n,s=1-t;this.matrix=[t+s/3,i*s-r,i*s+r,0,0,i*s+r,t+i*s,i*s-r,0,0,i*s-r,i*s+r,t+i*s,0,0,0,0,0,1,0]}isNeutralState(){return 0===this.rotation}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}Wy(bE,"type","HueRotation"),Wy(bE,"defaults",yE),Bb.setClass(bE);class xE extends VA{applyTo2d(e){let{imageData:{data:t}}=e;for(let n=0;n<t.length;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2],this.alpha&&(t[n+3]=255-t[n+3])}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform int uInvert;\n  uniform int uAlpha;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    if (uInvert == 1) {\n      if (uAlpha == 1) {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);\n      } else {\n        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n      }\n    } else {\n      gl_FragColor = color;\n    }\n  }\n"}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}Wy(xE,"type","Invert"),Wy(xE,"defaults",{alpha:!1,invert:!0}),Wy(xE,"uniformLocations",["uInvert","uAlpha"]),Bb.setClass(xE);class wE extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uStepH;\n  uniform float uNoise;\n  uniform float uSeed;\n  varying vec2 vTexCoord;\n  float rand(vec2 co, float seed, float vScale) {\n    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n  }\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=this.noise;for(let i=0;i<t.length;i+=4){const e=(.5-Math.random())*n;t[i]+=e,t[i+1]+=e,t[i+2]+=e}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return 0===this.noise}}Wy(wE,"type","Noise"),Wy(wE,"defaults",{noise:0}),Wy(wE,"uniformLocations",["uNoise","uSeed"]),Bb.setClass(wE);class SE extends VA{applyTo2d(e){let{imageData:{data:t,width:n,height:i}}=e;for(let r=0;r<i;r+=this.blocksize)for(let e=0;e<n;e+=this.blocksize){const s=4*r*n+4*e,a=t[s],o=t[s+1],l=t[s+2],c=t[s+3];for(let d=r;d<Math.min(r+this.blocksize,i);d++)for(let i=e;i<Math.min(e+this.blocksize,n);i++){const e=4*d*n+4*i;t[e]=a,t[e+1]=o,t[e+2]=l,t[e+3]=c}}}isNeutralState(){return 1===this.blocksize}getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uBlocksize;\n  uniform float uStepW;\n  uniform float uStepH;\n  varying vec2 vTexCoord;\n  void main() {\n    float blockW = uBlocksize * uStepW;\n    float blockH = uBlocksize * uStepH;\n    int posX = int(vTexCoord.x / blockW);\n    int posY = int(vTexCoord.y / blockH);\n    float fposX = float(posX);\n    float fposY = float(posY);\n    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\n    vec4 color = texture2D(uTexture, squareCoords);\n    gl_FragColor = color;\n  }\n"}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}Wy(SE,"type","Pixelate"),Wy(SE,"defaults",{blocksize:4}),Wy(SE,"uniformLocations",["uBlocksize"]),Bb.setClass(SE);class CE extends VA{getFragmentSource(){return"\nprecision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(uTexture, vTexCoord);\n  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\n    gl_FragColor.a = 0.0;\n  }\n}\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=255*this.distance,i=new ww(this.color).getSource(),r=[i[0]-n,i[1]-n,i[2]-n],s=[i[0]+n,i[1]+n,i[2]+n];for(let a=0;a<t.length;a+=4){const e=t[a],n=t[a+1],i=t[a+2];e>r[0]&&n>r[1]&&i>r[2]&&e<s[0]&&n<s[1]&&i<s[2]&&(t[a+3]=0)}}sendUniformData(e,t){const n=new ww(this.color).getSource(),i=this.distance,r=[0+n[0]/255-i,0+n[1]/255-i,0+n[2]/255-i,1],s=[n[0]/255+i,n[1]/255+i,n[2]/255+i,1];e.uniform4fv(t.uLow,r),e.uniform4fv(t.uHigh,s)}}Wy(CE,"type","RemoveColor"),Wy(CE,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),Wy(CE,"uniformLocations",["uLow","uHigh"]),Bb.setClass(CE);class _E extends VA{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,n=this.getFilterWindow(),i=new Array(n);for(let r=1;r<=n;r++)i[r-1]=e(r*t);return i}generateShader(e){const t=new Array(e);for(let n=1;n<=e;n++)t[n-1]="".concat(n,".0 * uDelta");return"\n      precision highp float;\n      uniform sampler2D uTexture;\n      uniform vec2 uDelta;\n      varying vec2 vTexCoord;\n      uniform float uTaps[".concat(e,"];\n      void main() {\n        vec4 color = texture2D(uTexture, vTexCoord);\n        float sum = 1.0;\n        ").concat(t.map((e,t)=>"\n              color += texture2D(uTexture, vTexCoord + ".concat(e,") * uTaps[").concat(t,"] + texture2D(uTexture, vTexCoord - ").concat(e,") * uTaps[").concat(t,"];\n              sum += 2.0 * uTaps[").concat(t,"];\n            ")).join("\n"),"\n        gl_FragColor = color / sum;\n      }\n    ")}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){BA(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return 1===this.scaleX&&1===this.scaleY}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<1.1920929e-7&&t>-1.1920929e-7)return 1;const n=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(n)/n}}applyTo2d(e){const t=e.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;const r=t.width,s=t.height,a=Math.round(r*n),o=Math.round(s*i);let l;l="sliceHack"===this.resizeType?this.sliceByTwo(e,r,s,a,o):"hermite"===this.resizeType?this.hermiteFastResize(e,r,s,a,o):"bilinear"===this.resizeType?this.bilinearFiltering(e,r,s,a,o):"lanczos"===this.resizeType?this.lanczosResize(e,r,s,a,o):new ImageData(a,o),e.imageData=l}sliceByTwo(e,t,n,i,r){const s=e.imageData,a=.5;let o=!1,l=!1,c=t*a,d=n*a;const u=e.filterBackend.resources;let h=0,f=0;const p=t;let g=0;u.sliceByTwo||(u.sliceByTwo=tx());const m=u.sliceByTwo;(m.width<1.5*t||m.height<n)&&(m.width=1.5*t,m.height=n);const v=m.getContext("2d");for(v.clearRect(0,0,1.5*t,n),v.putImageData(s,0,0),i=Math.floor(i),r=Math.floor(r);!o||!l;)t=c,n=d,i<Math.floor(c*a)?c=Math.floor(c*a):(c=i,o=!0),r<Math.floor(d*a)?d=Math.floor(d*a):(d=r,l=!0),v.drawImage(m,h,f,t,n,p,g,c,d),h=p,f=g,g+=d;return v.getImageData(h,f,i,r)}lanczosResize(e,t,n,i,r){const s=e.imageData.data,a=e.ctx.createImageData(i,r),o=a.data,l=this.lanczosCreate(this.lanczosLobes),c=this.rcpScaleX,d=this.rcpScaleY,u=2/this.rcpScaleX,h=2/this.rcpScaleY,f=Math.ceil(c*this.lanczosLobes/2),p=Math.ceil(d*this.lanczosLobes/2),g={},m={x:0,y:0},v={x:0,y:0};return function e(y){let b,x,w,S,C,_,k,A,E,j,T;for(m.x=(y+.5)*c,v.x=Math.floor(m.x),b=0;b<r;b++){for(m.y=(b+.5)*d,v.y=Math.floor(m.y),C=0,_=0,k=0,A=0,E=0,x=v.x-f;x<=v.x+f;x++)if(!(x<0||x>=t)){j=Math.floor(1e3*Math.abs(x-m.x)),g[j]||(g[j]={});for(let e=v.y-p;e<=v.y+p;e++)e<0||e>=n||(T=Math.floor(1e3*Math.abs(e-m.y)),g[j][T]||(g[j][T]=l(Math.sqrt(Math.pow(j*u,2)+Math.pow(T*h,2))/1e3)),w=g[j][T],w>0&&(S=4*(e*t+x),C+=w,_+=w*s[S],k+=w*s[S+1],A+=w*s[S+2],E+=w*s[S+3]))}S=4*(b*i+y),o[S]=_/C,o[S+1]=k/C,o[S+2]=A/C,o[S+3]=E/C}return++y<i?e(y):a}(0)}bilinearFiltering(e,t,n,i,r){let s,a,o,l,c,d,u,h,f,p,g,m,v,y=0;const b=this.rcpScaleX,x=this.rcpScaleY,w=4*(t-1),S=e.imageData.data,C=e.ctx.createImageData(i,r),_=C.data;for(u=0;u<r;u++)for(h=0;h<i;h++)for(c=Math.floor(b*h),d=Math.floor(x*u),f=b*h-c,p=x*u-d,v=4*(d*t+c),g=0;g<4;g++)s=S[v+g],a=S[v+4+g],o=S[v+w+g],l=S[v+w+4+g],m=s*(1-f)*(1-p)+a*f*(1-p)+o*p*(1-f)+l*f*p,_[y++]=m;return C}hermiteFastResize(e,t,n,i,r){const s=this.rcpScaleX,a=this.rcpScaleY,o=Math.ceil(s/2),l=Math.ceil(a/2),c=e.imageData.data,d=e.ctx.createImageData(i,r),u=d.data;for(let h=0;h<r;h++)for(let e=0;e<i;e++){const n=4*(e+h*i);let r=0,d=0,f=0,p=0,g=0,m=0,v=0;const y=(h+.5)*a;for(let i=Math.floor(h*a);i<(h+1)*a;i++){const n=Math.abs(y-(i+.5))/l,a=(e+.5)*s,u=n*n;for(let l=Math.floor(e*s);l<(e+1)*s;l++){let e=Math.abs(a-(l+.5))/o;const n=Math.sqrt(u+e*e);n>1&&n<-1||(r=2*n*n*n-3*n*n+1,r>0&&(e=4*(l+i*t),v+=r*c[e+3],f+=r,c[e+3]<255&&(r=r*c[e+3]/250),p+=r*c[e],g+=r*c[e+1],m+=r*c[e+2],d+=r))}}u[n]=p/d,u[n+1]=g/d,u[n+2]=m/d,u[n+3]=v/f}return d}}Wy(_E,"type","Resize"),Wy(_E,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),Wy(_E,"uniformLocations",["uDelta","uTaps"]),Bb.setClass(_E);class kE extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uSaturation;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float rgMax = max(color.r, color.g);\n    float rgbMax = max(rgMax, color.b);\n    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\n    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\n    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.saturation;for(let i=0;i<t.length;i+=4){const e=t[i],r=t[i+1],s=t[i+2],a=Math.max(e,r,s);t[i]+=a!==e?(a-e)*n:0,t[i+1]+=a!==r?(a-r)*n:0,t[i+2]+=a!==s?(a-s)*n:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return 0===this.saturation}}Wy(kE,"type","Saturation"),Wy(kE,"defaults",{saturation:0}),Wy(kE,"uniformLocations",["uSaturation"]),Bb.setClass(kE);class AE extends VA{getFragmentSource(){return"\n  precision highp float;\n  uniform sampler2D uTexture;\n  uniform float uVibrance;\n  varying vec2 vTexCoord;\n  void main() {\n    vec4 color = texture2D(uTexture, vTexCoord);\n    float max = max(color.r, max(color.g, color.b));\n    float avg = (color.r + color.g + color.b) / 3.0;\n    float amt = (abs(max - avg) * 2.0) * uVibrance;\n    color.r += max != color.r ? (max - color.r) * amt : 0.00;\n    color.g += max != color.g ? (max - color.g) * amt : 0.00;\n    color.b += max != color.b ? (max - color.b) * amt : 0.00;\n    gl_FragColor = color;\n  }\n"}applyTo2d(e){let{imageData:{data:t}}=e;const n=-this.vibrance;for(let i=0;i<t.length;i+=4){const e=t[i],r=t[i+1],s=t[i+2],a=Math.max(e,r,s),o=(e+r+s)/3,l=2*Math.abs(a-o)/255*n;t[i]+=a!==e?(a-e)*l:0,t[i+1]+=a!==r?(a-r)*l:0,t[i+2]+=a!==s?(a-s)*l:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return 0===this.vibrance}}Wy(AE,"type","Vibrance"),Wy(AE,"defaults",{vibrance:0}),Wy(AE,"uniformLocations",["uVibrance"]),Bb.setClass(AE);Object.freeze({__proto__:null,BaseFilter:VA,BlackWhite:cE,BlendColor:XA,BlendImage:QA,Blur:JA,Brightness:ZA,Brownie:iE,ColorMatrix:tE,Composed:dE,Contrast:uE,Convolute:fE,Gamma:gE,Grayscale:vE,HueRotation:bE,Invert:xE,Kodachrome:sE,Noise:wE,Pixelate:SE,Polaroid:oE,RemoveColor:CE,Resize:_E,Saturation:kE,Sepia:lE,Technicolor:aE,Vibrance:AE,Vintage:rE});const EE="https://backend-edu-site-5cnm.vercel.app";$v.workerSrc="".concat("/EduSite","/pdf.worker.min.mjs");const jE={editorContainer:{display:"flex",flexDirection:"column",height:"100%",border:"1px solid #ccc",borderRadius:"4px",overflow:"hidden"},toolbar:{padding:"8px 12px",borderBottom:"1px solid #ddd",backgroundColor:"#f8f9fa",display:"flex",flexWrap:"wrap",alignItems:"center",gap:"10px"},toolButton:{padding:"6px 10px",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer",backgroundColor:"#fff",transition:"background-color 0.2s ease"},activeToolButton:{backgroundColor:"#007bff",color:"white",borderColor:"#007bff"},inputGroup:{display:"flex",alignItems:"center",gap:"5px"},inputField:{padding:"6px",border:"1px solid #ccc",borderRadius:"4px"},scoreInput:{width:"70px"},notesTextarea:{minWidth:"200px",flexGrow:1,resize:"vertical"},pdfDisplayArea:{flexGrow:1,overflowY:"scroll",backgroundColor:"#e9ecef",padding:"10px 0"},pageContainer:{position:"relative",margin:"20px auto",display:"flex",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},fabricCanvasOverlay:{position:"absolute",left:"50%",top:0,transform:"translateX(-50%)",zIndex:10},loadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,fontSize:"1.2em",color:"#333"}},TE=e=>{let{pdfUrl:n,submissionId:i,initialAnnotationData:r,initialScore:s,initialFeedback:a,onSaveSuccess:o,markType:l}=e;const[d,u]=(0,t.useState)(null),[h,f]=(0,t.useState)({}),[p,g]=(0,t.useState)("pen"),[m,v]=(0,t.useState)("#000000"),[y,b]=(0,t.useState)(5),x=(0,t.useRef)({}),[w,S]=(0,t.useState)(""),[C,_]=(0,t.useState)(""),[k,A]=(0,t.useState)(!1),[E,j]=(0,t.useState)({});(0,t.useEffect)(()=>{void 0!==s&&null!==s&&S(String(s))},[s]),(0,t.useEffect)(()=>{a&&_(a)},[a]);(0,t.useEffect)(()=>{if(d&&Object.keys(E).length===d){const t={};for(let e=1;e<=d;e++){const n=document.getElementById("fabric-canvas-".concat(e));if(n&&!h[e]){const{width:i,height:r}=E[e];t[e]=new fk(n,{width:i,height:r})}else h[e]&&(t[e]=h[e])}if(f(t),r)try{const e=JSON.parse(r);Object.entries(e).forEach(e=>{let[n,i]=e;const r=t[n];r&&r.loadFromJSON(i,()=>{requestAnimationFrame(()=>{r.renderAll(),r.getObjects().forEach(e=>{0!==e.opacity&&!1!==e.visible||(e.opacity=1,e.visible=!0)})})})})}catch(e){console.error("Failed to load annotation data:",e)}}},[E,d,r]);const T=(0,t.useCallback)((e,t)=>{if(!e||"string"!==typeof e||!e.startsWith("#")||7!==e.length&&4!==e.length)return"rgba(255, 255, 0, 0.3)";let n,i,r;return 4===e.length?(n=parseInt(e[1]+e[1],16),i=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16)):(n=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16)),isNaN(n)||isNaN(i)||isNaN(r)?"rgba(255, 255, 0, 0.3)":"rgba(".concat(n,", ").concat(i,", ").concat(r,", ").concat(t,")")},[]),O=(0,t.useCallback)((e,t)=>{if(t)if("textbox"===p){if(e.target&&e.target instanceof mA)return t.setActiveObject(e.target),void e.target.enterEditing();const n=t.getPointer(e.e),i=new mA("",{left:n.x,top:n.y,fontFamily:"arial",fill:m,fontSize:20});t.add(i),t.setActiveObject(i),i.enterEditing()}else"eraser"===p&&e.target&&t.remove(e.target)},[p,m]);(0,t.useEffect)(()=>{Object.values(h).forEach(e=>{e&&(e.isDrawingMode=["pen","highlighter"].includes(p),e.selection=!e.isDrawingMode,"pen"!==p&&"highlighter"!==p||(e.freeDrawingBrush=new Dk(e),e.freeDrawingBrush.width="highlighter"===p?3*parseInt(y,10):parseInt(y,10),e.freeDrawingBrush.color="highlighter"===p?T(m,.3):m),e.off("mouse:down"),["textbox","eraser"].includes(p)&&e.on("mouse:down",t=>O(t,e)))})},[p,m,y,h,O,T]);const M=e=>c(c({},jE.toolButton),p===e?jE.activeToolButton:{});return(0,_t.jsxs)("div",{style:jE.editorContainer,children:[k&&(0,_t.jsx)("div",{style:jE.loadingOverlay,children:"Saving... Please wait."}),(0,_t.jsxs)("div",{style:jE.toolbar,children:[(0,_t.jsx)("button",{style:M("pen"),onClick:()=>g("pen"),children:"Pen"}),(0,_t.jsx)("button",{style:M("highlighter"),onClick:()=>g("highlighter"),children:"Highlight"}),(0,_t.jsx)("button",{style:M("eraser"),onClick:()=>{"eraser"===p?Object.values(h).forEach(e=>{if(e instanceof fk){const t=e.getActiveObject();t&&("activeSelection"===t.type?t.forEachObject(t=>{e.remove(t)}):e.remove(t),e.discardActiveObject(),e.renderAll())}}):g("eraser")},children:"Eraser"}),(0,_t.jsx)("button",{style:M("textbox"),onClick:()=>g("textbox"),children:"Textbox"}),(0,_t.jsx)("div",{style:jE.inputGroup,children:(0,_t.jsx)("input",{type:"color",value:m,onChange:e=>v(e.target.value),style:c(c({},jE.inputField),{},{padding:"2px",height:"34px"})})}),(0,_t.jsxs)("div",{style:jE.inputGroup,children:[(0,_t.jsx)("label",{htmlFor:"brushSizeInput",children:"Size:"}),(0,_t.jsx)("input",{type:"range",id:"brushSizeInput",min:"1",max:"50",value:y,onChange:e=>b(e.target.value),style:{margin:"0 5px"}})," ",y]})]}),(0,_t.jsxs)("div",{style:c(c({},jE.toolbar),{},{borderTop:"1px solid #ddd",justifyContent:"space-between"}),children:[(0,_t.jsxs)("div",{style:jE.inputGroup,children:[(0,_t.jsx)("label",{htmlFor:"scoreInput",children:"Score:"}),(0,_t.jsx)("input",{type:"number",id:"scoreInput",value:w,required:!0,onChange:e=>S(e.target.value),style:c(c({},jE.inputField),jE.scoreInput)})]}),(0,_t.jsxs)("div",{style:c(c({},jE.inputGroup),{},{flexGrow:1,margin:"0 1rem"}),children:[(0,_t.jsx)("label",{htmlFor:"feedbackInput",children:"Feedback:"}),(0,_t.jsx)("textarea",{id:"feedbackInput",value:C,onChange:e=>_(e.target.value),placeholder:"Provide overall feedback...",style:c(c({},jE.inputField),{},{width:"100%",resize:"none"}),rows:"1"})]}),(0,_t.jsx)("button",{onClick:async()=>{if(!i)return void alert("Submission ID is missing. Cannot save.");A(!0);const e={};Object.entries(h).forEach(t=>{let[n,i]=t;i&&(e[n]=i.toJSON())});const t=JSON.stringify(e),n={submissionId:i,score:w,annotationData:t,feedback:C},r=localStorage.getItem("token")||sessionStorage.getItem("token");if(!r)return alert("Authentication token not found."),void A(!1);try{const e="".concat(EE,"exam"===l?"/exams/mark":"/assignments/mark"),t=await fetch(e,{method:"PUT",headers:{Authorization:"MonaEdu ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await t.json();if(!t.ok)throw new Error(i.message||"Server error: ".concat(t.status));if(!["Marked PDF uploaded successfully","Submission marked and replaced successfully"].includes(i.message))throw new Error(i.message||"An unexpected response was received from the server.");alert("Marks and annotations saved successfully!"),o&&o()}catch(s){console.error("Error saving annotations:",s),alert("Error: ".concat(s.message))}finally{A(!1)}},disabled:k||!d||!w,style:jE.toolButton,children:k?"Saving...":"Save Changes"})]}),(0,_t.jsx)("div",{style:jE.pdfDisplayArea,children:(0,_t.jsx)(yy,{file:n,onLoadSuccess:e=>{let{numPages:t}=e;u(t),j({}),Object.values(h).forEach(e=>{e&&"function"===typeof e.dispose&&e.dispose()}),f({}),x.current={}},onLoadError:e=>console.error("Error loading PDF:",e.message),children:Array.from(new Array(d||0),(e,t)=>(0,_t.jsxs)("div",{style:jE.pageContainer,children:[(0,_t.jsx)(Fy,{pageNumber:t+1,renderAnnotationLayer:!1,renderTextLayer:!1,onRenderSuccess:e=>{j(n=>c(c({},n),{},{[t+1]:{width:e.width,height:e.height}}))}},"page_".concat(t+1)),(0,_t.jsx)("div",{style:jE.fabricCanvasOverlay,children:E[t+1]&&(0,_t.jsx)("canvas",{id:"fabric-canvas-".concat(t+1),width:E[t+1].width,height:E[t+1].height})})]},"page_container_".concat(t+1)))})})]})},OE="https://backend-edu-site-5cnm.vercel.app",ME=()=>{var e;const{groupId:n,assignmentId:i}=pe(),[r,s]=(0,t.useState)([]),[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),[d,u]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[p,g]=(0,t.useState)("all"),[m,v]=(0,t.useState)("name"),[y,b]=(0,t.useState)("asc"),[x,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)({title:"",content:""}),[_,k]=(0,t.useState)(!1),[A,E]=(0,t.useState)(null),j=(e,t)=>{C({title:e,content:t}),w(!0)},T=()=>w(!1),O=(0,t.useCallback)(async()=>{o(!0),c(null);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(OE,"/assignments/submissions?assignmentId=").concat(i,"&groupId=").concat(n),{headers:{Authorization:"MonaEdu ".concat(e)}}),r=await t.json();if("Submission status for group fetched successfully."!==r.message)throw new Error(r.message||"Failed to fetch submissions");s(r.data),u(r.assignmentName||"")}catch(e){c(e.message)}finally{o(!1)}},[i,n]);(0,t.useEffect)(()=>{O()},[O]);const M=()=>{k(!1),E(null)};if(a)return(0,_t.jsx)("div",{className:"loading",children:"Loading submissions..."});if(l)return(0,_t.jsx)("div",{className:"error",children:l});const P=(()=>{let e=[...r];return"all"!==p&&(e=e.filter(e=>e.status===p)),e.sort((e,t)=>{if("name"===m){const n="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),i="".concat(t.firstName," ").concat(t.lastName).toLowerCase();return"asc"===y?n.localeCompare(i):i.localeCompare(n)}if("date"===m){var n,i;const r=(null===(n=e.submissionDetails)||void 0===n?void 0:n.SubmitDate)||"",s=(null===(i=t.submissionDetails)||void 0===i?void 0:i.SubmitDate)||"";return"asc"===y?r.localeCompare(s):s.localeCompare(r)}return 0}),e})(),N=(()=>{const e=r.length,t=r.filter(e=>"submitted"===e.status).length;return{total:e,submitted:t,percentage:e>0?Math.round(t/e*100):0}})();return(0,_t.jsxs)("div",{className:"assignment-submissions-page",children:[d&&(0,_t.jsx)("div",{className:"assignment-header",children:(0,_t.jsx)("h2",{children:d})}),(0,_t.jsx)("div",{className:"submissions-stats",children:(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h3",{children:"Submission Statistics"}),(0,_t.jsxs)("p",{children:[N.submitted," submitted out of ",N.total," total students"]}),(0,_t.jsxs)("p",{className:"percentage",children:[N.percentage,"% submission rate"]})]})}),(0,_t.jsxs)("div",{className:"filters-section",children:[(0,_t.jsxs)("div",{className:"filter-group",children:[(0,_t.jsx)("label",{children:"Status:"}),(0,_t.jsxs)("select",{value:p,onChange:e=>g(e.target.value),children:[(0,_t.jsx)("option",{value:"all",children:"All"}),(0,_t.jsx)("option",{value:"submitted",children:"Submitted"}),(0,_t.jsx)("option",{value:"not submitted",children:"Not Submitted"}),(0,_t.jsx)("option",{value:"marked",children:"Marked"})]})]}),(0,_t.jsxs)("div",{className:"filter-group",children:[(0,_t.jsx)("label",{children:"Sort by:"}),(0,_t.jsxs)("select",{value:m,onChange:e=>v(e.target.value),children:[(0,_t.jsx)("option",{value:"name",children:"Name"}),(0,_t.jsx)("option",{value:"date",children:"Submission Date"})]}),(0,_t.jsx)("button",{className:"sort-order-btn",onClick:()=>b("asc"===y?"desc":"asc"),children:"asc"===y?"\u2191":"\u2193"})]})]}),(0,_t.jsx)("div",{className:"submissions-table-container",children:(0,_t.jsxs)("table",{className:"submissions-table",children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Student Name"}),(0,_t.jsx)("th",{children:"Status"}),(0,_t.jsx)("th",{children:"Submission Date"}),(0,_t.jsx)("th",{children:"Student Notes"}),(0,_t.jsx)("th",{children:"Feedback"}),(0,_t.jsx)("th",{children:"Grade"}),(0,_t.jsx)("th",{children:"Actions"})]})}),(0,_t.jsx)("tbody",{children:P.map(e=>{var t,s,a,o;return(0,_t.jsxs)("tr",{children:[(0,_t.jsxs)("td",{children:[e.firstName," ",e.lastName]}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"status-badge ".concat("marked"===e.status?"marked":"submitted"===e.status?"submitted":"not-submitted"),children:e.status})}),(0,_t.jsx)("td",{children:null!==(t=e.submissionDetails)&&void 0!==t&&t.SubmitDate?new Date(e.submissionDetails.SubmitDate).toLocaleDateString():"-"}),(0,_t.jsx)("td",{children:null!==(s=e.submissionDetails)&&void 0!==s&&s.notes?(0,_t.jsx)("button",{className:"view-notes-btn",onClick:()=>j("Student Notes",e.submissionDetails.notes),children:"View"}):"-"}),(0,_t.jsx)("td",{children:null!==(a=e.submissionDetails)&&void 0!==a&&a.teacherFeedback?(0,_t.jsx)("button",{className:"view-notes-btn",onClick:()=>j("Teacher Feedback",e.submissionDetails.teacherFeedback),children:"View"}):"-"}),(0,_t.jsx)("td",{children:(null===(o=e.submissionDetails)||void 0===o?void 0:o.score)||"-"}),(0,_t.jsx)("td",{children:(0,_t.jsx)("div",{className:"action-buttons",children:(0,_t.jsx)("button",{className:"mark-btn",onClick:()=>(async e=>{try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),s=await fetch("".concat(OE,"/assignments/submissions?assignmentId=").concat(i,"&groupId=").concat(n,"&studentId=").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}}),a=await s.json();if("Submissions fetched successfully."===a.message&&a.data.length>0){const e=a.data[0];e.path?(f(r.notes),E(e),k(!0)):alert("No PDF file found for this submission.")}else alert("No submission found for this student.")}catch(l){console.error("Error in handleOpenMarkEditor: ",l),alert("Error fetching submission. Please try again.")}})(e._id),disabled:"not submitted"===e.status,children:"Mark / View"})})})]},e._id)})})]})}),(0,_t.jsxs)(Ut(),{isOpen:x,onRequestClose:T,contentLabel:"Submission Details",className:"notes-modal",overlayClassName:"notes-modal-overlay",children:[(0,_t.jsxs)("div",{className:"notes-modal-header",children:[(0,_t.jsx)("h3",{children:S.title}),(0,_t.jsx)("button",{className:"close-modal-btn",onClick:T,children:"\xd7"})]}),(0,_t.jsx)("div",{className:"notes-modal-body",children:(0,_t.jsx)("p",{children:S.content})})]}),A&&(0,_t.jsxs)(Ut(),{isOpen:_,onRequestClose:M,contentLabel:"Mark Submission PDF",className:"pdf-editor-modal",overlayClassName:"pdf-editor-modal-overlay",children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsxs)("h2",{children:["Marking: ",A.studentId.firstName," ",A.studentId.lastName,"'s Submission"]}),(0,_t.jsx)("button",{onClick:M,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsx)("div",{className:"modal-body",children:(0,_t.jsx)(TE,{pdfUrl:A.path,submissionId:A._id,initialAnnotationData:A.annotationData,initialScore:null===(e=A.submissionDetails)||void 0===e?void 0:e.score,onSaveSuccess:()=>{M(),O()},markType:"assignment"})})]})]})},PE="https://backend-edu-site-5cnm.vercel.app",NE=()=>{const{groupId:e,examId:n}=pe(),[i,r]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)("all"),[u,h]=(0,t.useState)("name"),[f,p]=(0,t.useState)("asc"),[g,m]=(0,t.useState)(!1),[v,y]=(0,t.useState)({title:"",content:""}),[b,x]=(0,t.useState)(!1),[w,S]=(0,t.useState)(null),C=(e,t)=>{y({title:e,content:t}),m(!0)},_=()=>m(!1),k=(0,t.useCallback)(async()=>{a(!0),l(null);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(PE,"/exams/student/submissions?groupId=").concat(e,"&examId=").concat(n),{headers:{Authorization:"MonaEdu ".concat(t)}}),s=await i.json();if("Student submission statuses fetched successfully"!==s.message)throw new Error(s.message||"Failed to fetch submissions");r(s.students)}catch(t){l(t.message),console.log(t)}finally{a(!1)}},[n,e]);(0,t.useEffect)(()=>{k()},[k]);const A=()=>{x(!1),S(null)};if(s)return(0,_t.jsx)("div",{className:"loading",children:"Loading submissions..."});if(o)return(0,_t.jsx)("div",{className:"error",children:o});const E=(()=>{let e=[...i];return"all"!==c&&(e=e.filter(e=>e.status===c)),e.sort((e,t)=>{if("name"===u){const n="".concat(e.firstName," ").concat(e.lastName).toLowerCase(),i="".concat(t.firstName," ").concat(t.lastName).toLowerCase();return"asc"===f?n.localeCompare(i):i.localeCompare(n)}if("date"===u){const n=e.submittedAt||"",i=t.submittedAt||"";return"asc"===f?n.localeCompare(i):i.localeCompare(n)}return 0}),e})(),j=(()=>{const e=i.length,t=i.filter(e=>"submitted"===e.status).length;return{total:e,submitted:t,percentage:e>0?Math.round(t/e*100):0}})();return(0,_t.jsxs)("div",{className:"assignment-submissions-page",children:[(0,_t.jsx)("div",{className:"submissions-stats",children:(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("h3",{children:"Submission Statistics"}),(0,_t.jsxs)("p",{children:[j.submitted," submitted out of ",j.total," total students"]}),(0,_t.jsxs)("p",{className:"percentage",children:[j.percentage,"% submission rate"]})]})}),(0,_t.jsxs)("div",{className:"filters-section",children:[(0,_t.jsxs)("div",{className:"filter-group",children:[(0,_t.jsx)("label",{children:"Status:"}),(0,_t.jsxs)("select",{value:c,onChange:e=>d(e.target.value),children:[(0,_t.jsx)("option",{value:"all",children:"All"}),(0,_t.jsx)("option",{value:"submitted",children:"Submitted"}),(0,_t.jsx)("option",{value:"not submitted",children:"Not Submitted"})]})]}),(0,_t.jsxs)("div",{className:"filter-group",children:[(0,_t.jsx)("label",{children:"Sort by:"}),(0,_t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),children:[(0,_t.jsx)("option",{value:"name",children:"Name"}),(0,_t.jsx)("option",{value:"date",children:"Submission Date"})]}),(0,_t.jsx)("button",{className:"sort-order-btn",onClick:()=>p("asc"===f?"desc":"asc"),children:"asc"===f?"\u2191":"\u2193"})]})]}),(0,_t.jsx)("div",{className:"submissions-table-container",children:(0,_t.jsxs)("table",{className:"submissions-table",children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:"Student Name"}),(0,_t.jsx)("th",{children:"Status"}),(0,_t.jsx)("th",{children:"Submission Date"}),(0,_t.jsx)("th",{children:"Student Notes"}),(0,_t.jsx)("th",{children:"Feedback"}),(0,_t.jsx)("th",{children:"Grade"}),(0,_t.jsx)("th",{children:"Actions"})]})}),(0,_t.jsx)("tbody",{children:E.map(t=>(0,_t.jsxs)("tr",{children:[(0,_t.jsxs)("td",{children:[t.firstName," ",t.lastName]}),(0,_t.jsx)("td",{children:(0,_t.jsx)("span",{className:"status-badge ".concat("submitted"===t.status?"submitted":"not-submitted"),children:t.status})}),(0,_t.jsx)("td",{children:t.submittedAt?new Date(t.submittedAt).toLocaleDateString():"-"}),(0,_t.jsx)("td",{children:t.notes?(0,_t.jsx)("button",{className:"view-notes-btn",onClick:()=>C("Student Notes",t.notes),children:"View"}):"-"}),(0,_t.jsx)("td",{children:t.teacherFeedback?(0,_t.jsx)("button",{className:"view-notes-btn",onClick:()=>C("Teacher Feedback",t.teacherFeedback),children:"View"}):"-"}),(0,_t.jsx)("td",{children:t.score||"-"}),(0,_t.jsx)("td",{children:(0,_t.jsx)("div",{className:"action-buttons",children:(0,_t.jsx)("button",{className:"mark-btn",onClick:()=>(async t=>{try{const i=localStorage.getItem("token")||sessionStorage.getItem("token"),r=await fetch("".concat(PE,"/exams/submissions?examId=").concat(n,"&studentId=").concat(t,"&groupId=").concat(e),{headers:{authorization:"MonaEdu ".concat(i)}}),s=await r.json();if("Submissions fetched successfully."===s.message&&s.data.length>0){const e=s.data[0];e.submissions[0].filePath?(S(e),x(!0)):alert("No PDF file found for this submission.")}else alert("No submission found for this student.")}catch(o){console.error("Error in handleOpenMarkEditor: ",o),alert("Error fetching submission. Please try again.")}})(t._id),disabled:"submitted"!==t.status,children:"Mark / View"})})})]},t._id))})]})}),(0,_t.jsxs)(Ut(),{isOpen:g,onRequestClose:_,contentLabel:"Submission Details",className:"notes-modal",overlayClassName:"notes-modal-overlay",children:[(0,_t.jsxs)("div",{className:"notes-modal-header",children:[(0,_t.jsx)("h3",{children:v.title}),(0,_t.jsx)("button",{className:"close-modal-btn",onClick:_,children:"\xd7"})]}),(0,_t.jsx)("div",{className:"notes-modal-body",children:(0,_t.jsx)("p",{children:v.content})})]}),w&&(0,_t.jsxs)(Ut(),{isOpen:b,onRequestClose:A,contentLabel:"Mark Exam Submission PDF",className:"pdf-editor-modal",overlayClassName:"pdf-editor-modal-overlay",children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsxs)("h2",{children:["Marking: ",w.firstName," ",w.lastName,"'s Submission"]}),(0,_t.jsx)("button",{onClick:A,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsx)("div",{className:"modal-body",children:(0,_t.jsx)(TE,{pdfUrl:w.submissions[0].filePath,submissionId:w.submissions[0]._id,initialAnnotationData:w.submissions[0].annotationData,initialScore:w.submissions[0].score,onSaveSuccess:()=>{A(),k()},markType:"exam"})})]})]})},$E=(0,t.createContext)(),DE=()=>{const e=(0,t.useContext)($E);if(!e)throw new Error("useConfirmation must be used within ConfirmationProvider");return e},LE=e=>{let{isOpen:t,title:n,message:i,onConfirm:r,onCancel:s,confirmText:a,cancelText:o,type:l}=e;if(!t)return null;const c=()=>{switch(l){case"danger":return"modal-danger";case"warning":return"modal-warning";case"success":return"modal-success";case"error":return"modal-error";default:return"modal-default"}};return(0,_t.jsx)("div",{className:"modal-overlay",onClick:s,children:(0,_t.jsx)("div",{className:"modal-container ".concat(c()),onClick:e=>e.stopPropagation(),children:(0,_t.jsxs)("div",{className:"modal-content",children:[(0,_t.jsx)("div",{className:"modal-icon ".concat(c()),children:(0,_t.jsx)("span",{children:(()=>{switch(l){case"danger":case"warning":return"\u26a0\ufe0f";case"success":return"\u2713";case"error":return"\u2715";default:return"?"}})()})}),(0,_t.jsx)("h3",{className:"modal-title",children:n}),(0,_t.jsx)("p",{className:"modal-message",children:i}),(0,_t.jsxs)("div",{className:"modal-buttons",children:[o&&(0,_t.jsx)("button",{className:"modal-btn modal-btn-cancel",onClick:s,children:o}),(0,_t.jsx)("button",{className:"modal-btn modal-btn-confirm ".concat(c()),onClick:r,children:a})]})]})})})},IE=e=>{let{children:n}=e;const[i,r]=(0,t.useState)({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"default",onConfirm:()=>{},onCancel:()=>{}});return(0,_t.jsxs)($E.Provider,{value:{showConfirmation:e=>{let{title:t="Confirm Action",message:n="Are you sure?",confirmText:i="Confirm",cancelText:s="Cancel",type:a="default",onConfirm:o=()=>{},onCancel:l=()=>{}}=e;return new Promise(e=>{r({isOpen:!0,title:t,message:n,confirmText:i,cancelText:s,type:a,onConfirm:()=>{r(e=>c(c({},e),{},{isOpen:!1})),o(),e(!0)},onCancel:()=>{r(e=>c(c({},e),{},{isOpen:!1})),l(),e(!1)}})})},showError:e=>{let{title:t="Error",message:n="Something went wrong",confirmText:i="OK",onConfirm:s=()=>{}}=e;return new Promise(e=>{r({isOpen:!0,title:t,message:n,confirmText:i,cancelText:null,type:"error",onConfirm:()=>{r(e=>c(c({},e),{},{isOpen:!1})),s(),e(!0)},onCancel:()=>{}})})},showSuccess:e=>{let{title:t="Success",message:n="Operation completed successfully",confirmText:i="OK",onConfirm:s=()=>{}}=e;return new Promise(e=>{r({isOpen:!0,title:t,message:n,confirmText:i,cancelText:null,type:"success",onConfirm:()=>{r(e=>c(c({},e),{},{isOpen:!1})),s(),e(!0)},onCancel:()=>{}})})},hideConfirmation:()=>{r(e=>c(c({},e),{},{isOpen:!1}))}},children:[n,(0,_t.jsx)(LE,c({},i))]})},FE="https://backend-edu-site-5cnm.vercel.app",RE=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),{showConfirmation:o}=DE(),{showError:l}=DE(),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)({name:"",email:"",password:""}),[p,g]=(0,t.useState)(""),[m,v]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),[x,w]=(0,t.useState)({}),[S,C]=(0,t.useState)([]),[_,k]=(0,t.useState)("assignments"),A=(0,t.useCallback)(async()=>{r(!0);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(FE,"/assistant/all"),{headers:{Authorization:"MonaEdu ".concat(e)}}),i=await t.json();if("Assistants fetched successfully."!==i.message)throw new Error(i.message||"Failed to fetch assistants");n(i.data||[])}catch(e){a(e.message)}finally{r(!1)}},[]);(0,t.useEffect)(()=>{A()},[A]);const E=()=>{u(!1),f({name:"",email:"",password:""}),g("")},j=()=>{v(!1),b(null),w({}),k(null),g("")};return i?(0,_t.jsx)("div",{className:"loading",children:"Loading Assistants..."}):s?(0,_t.jsx)("div",{className:"error",children:s}):(0,_t.jsxs)("div",{className:"assistants-page",children:[(0,_t.jsxs)("div",{className:"assistants-header",children:[(0,_t.jsx)("h2",{children:"Manage Assistants"}),(0,_t.jsx)("button",{className:"add-assistant-btn",onClick:()=>u(!0),children:"+ Add New Assistant"})]}),(0,_t.jsx)("div",{className:"assistants-grid",children:e.map(e=>(0,_t.jsxs)("div",{className:"assistant-card",children:[(0,_t.jsxs)("div",{className:"assistant-info",children:[(0,_t.jsx)("h3",{className:"assistant-name",children:e.name}),(0,_t.jsx)("p",{className:"assistant-email",children:e.email})]}),(0,_t.jsxs)("div",{className:"assistant-actions",children:[(0,_t.jsx)("button",{className:"edit-permissions-btn",onClick:()=>(async e=>{k("groups"),b(e);const t={},n=e.permissions||{};for(const r in n)Array.isArray(n[r])&&(t[r]=new Set(n[r].map(e=>e.groupId)));w(t);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(FE,"/group/all"),{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();if("Done"!==n.Message)throw new Error("Failed to fetch groups list.");C(n.groups||[])}catch(i){a(i.message)}v(!0)})(e),children:"Permissions"}),(0,_t.jsx)("button",{className:"delete-assistant-btn",onClick:()=>(async e=>{if(await o({title:"Delete Assistant",message:"This will permanently remove the Assistant from the system.",confirmText:"Delete",cancelText:"Cancel",type:"danger"}))try{const t=localStorage.getItem("token")||sessionStorage.getItem("token");if(!(await fetch("".concat(FE,"/assistant/").concat(e),{method:"DELETE",headers:{Authorization:"MonaEdu ".concat(t)}})).ok)throw new Error("Failed to delete assistant");A()}catch(t){console.log(t),await l({title:"Error deleting assistant",message:t.message||"An error occured while deleting this assistant",confirmText:"Cancel"})}})(e._id),children:"Delete"})]})]},e._id))}),(0,_t.jsxs)(Ut(),{isOpen:d,onRequestClose:E,className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Create New Assistant"}),(0,_t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g("Creating...");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(FE,"/assistant/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(h)}),n=await t.json();if(!t.ok)throw new Error(n.message);g("Assistant created successfully!"),A(),setTimeout(E,1500)}catch(t){g("Error: ".concat(t.message))}},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Name:"}),(0,_t.jsx)("input",{type:"text",value:h.name,onChange:e=>f(c(c({},h),{},{name:e.target.value})),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Email:"}),(0,_t.jsx)("input",{type:"email",value:h.email,onChange:e=>f(c(c({},h),{},{email:e.target.value})),required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Password:"}),(0,_t.jsx)("input",{type:"password",value:h.password,onChange:e=>f(c(c({},h),{},{password:e.target.value})),required:!0})]}),p&&(0,_t.jsx)("p",{children:p}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:E,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",disabled:"Creating..."===p,children:"Create"})]})]})]}),y&&(0,_t.jsxs)(Ut(),{isOpen:m,onRequestClose:j,className:"permissions-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("div",{className:"permissions-modal-header",children:(0,_t.jsxs)("h2",{children:["Permissions for ",y.name]})}),(0,_t.jsxs)("div",{className:"permissions-modal-body",children:[(0,_t.jsx)("div",{className:"permission-tabs",children:["assignments","exams","materials","sessions","groups"].map(e=>(0,_t.jsx)("div",{className:"permission-tab ".concat(_===e?"active":""),onClick:()=>k(e),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),_&&(0,_t.jsxs)("div",{className:"permission-filters",children:[(0,_t.jsx)("h5",{children:"Grant Access to Groups:"}),(0,_t.jsx)("div",{className:"groups-checkbox-list",children:S.map(e=>{var t;return(0,_t.jsxs)("label",{className:"group-check-row",children:[(0,_t.jsx)("input",{type:"checkbox",checked:null===(t=x[_])||void 0===t?void 0:t.has(e._id),onChange:()=>{return t=e._id,n=_,void w(e=>{const i=new Set(e[n]||[]);return i.has(t)?i.delete(t):i.add(t),c(c({},e),{},{[n]:i})});var t,n}}),e.groupname]},e._id)})})]})]}),(0,_t.jsxs)("div",{className:"permissions-modal-footer",children:[p&&(0,_t.jsx)("p",{children:p}),(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:j,children:"Cancel"}),(0,_t.jsx)("button",{type:"button",className:"save-btn",onClick:async()=>{g("Saving...");try{const e={permissions:{}};for(const r in x)e.permissions[r]=Array.from(x[r]);const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(FE,"/assistant/").concat(y._id,"/permissions"),{method:"PUT",headers:{Authorization:"MonaEdu ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)}),i=await n.json();if(!n.ok)throw new Error(i.message||"Failed to update permissions.");g("Permissions updated successfully!"),A(),setTimeout(j,1e3)}catch(e){g("Error: ".concat(e.message))}},disabled:"Saving..."===p,children:"Save Changes"})]})]})]})},BE="https://backend-edu-site-5cnm.vercel.app",WE=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)({currentPage:1,totalPages:1,totalCourses:0,limit:4}),[s,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(new Set),[f,p]=(0,t.useState)(1),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),b=(0,t.useMemo)(()=>{const e=new Set(s.map(e=>e.courseName));return Array.from(e)},[s]),x=(0,t.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;l(!0),d(null);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),i=new URL("".concat(BE,"/courses/all"));i.searchParams.append("page",e);const s=await fetch(i.toString(),{headers:{Authorization:"MonaEdu ".concat(t)}}),o=await s.json();if(!s.ok)throw new Error(o.message||"Failed to fetch requests");a(o.data.courses||[]),n(o.data.courses||[]),r(o.data.pagination||{currentPage:1,totalPages:1,totalCourses:0})}catch(t){d(t.message)}finally{l(!1)}},[]);(0,t.useEffect)(()=>{x(f)},[f,x]),(0,t.useEffect)(()=>{let e=[...s];g&&(e=e.filter(e=>e.name.toLowerCase().includes(g.toLowerCase()))),v&&(e=e.filter(e=>e.courseName===v)),n(e)},[g,v,s]);return(0,_t.jsxs)("div",{className:"course-requests-page",children:[(0,_t.jsxs)("div",{className:"requests-header",children:[(0,_t.jsx)("h2",{children:"Manage Course Requests"}),(0,_t.jsxs)("div",{className:"stat-card",children:[(0,_t.jsx)("div",{className:"count",children:i.totalCourses||0}),(0,_t.jsx)("div",{className:"label",children:"Total Pending Requests"})]})]}),(0,_t.jsxs)("div",{className:"requests-toolbar",children:[(0,_t.jsxs)("div",{className:"filter-controls",children:[(0,_t.jsx)("input",{type:"text",placeholder:"Search student ...",value:g,onChange:e=>m(e.target.value)}),(0,_t.jsxs)("select",{value:v,onChange:e=>y(e.target.value),children:[(0,_t.jsx)("option",{value:"",children:"Filter by Course"}),b.map(e=>(0,_t.jsx)("option",{value:e,children:e},e))]})]}),(0,_t.jsx)("div",{className:"action-controls",children:(0,_t.jsxs)("button",{className:"delete-selected-btn",disabled:0===u.size,onClick:async()=>{const t=Array.from(u);if(0!==t.length&&window.confirm("Are you sure you want to delete ".concat(t.length," request(s)?")))try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i={requests:t},r=await fetch("".concat(BE,"/courses/"),{method:"DELETE",headers:{Authorization:"MonaEdu ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(i)}),s=await r.json();if(!r.ok)throw new Error(s.message||"Failed to delete requests");alert("Successfully deleted requests."),h(new Set),e.length===t.length&&f>1?p(f-1):x(f,g,v)}catch(n){alert("Error: ".concat(n.message))}},children:["Delete Selected (",u.size,")"]})})]}),(0,_t.jsx)("div",{className:"requests-table-container",children:(0,_t.jsxs)("table",{className:"requests-table",children:[(0,_t.jsx)("thead",{children:(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("th",{children:(0,_t.jsxs)("label",{className:"table-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",onChange:t=>{t.target.checked?h(new Set(e.map(e=>e._id))):h(new Set)},ref:t=>{t&&(t.checked=e.length>0&&u.size===e.length,t.indeterminate=u.size>0&&u.size<e.length)}}),(0,_t.jsx)("span",{className:"custom-checkbox"})]})}),(0,_t.jsx)("th",{children:"Student Name"}),(0,_t.jsx)("th",{children:"Email"}),(0,_t.jsx)("th",{children:"Phone"}),(0,_t.jsx)("th",{children:"Grade"}),(0,_t.jsx)("th",{children:"Course Name"}),(0,_t.jsx)("th",{children:"Date"})]})}),(0,_t.jsx)("tbody",{children:o?(0,_t.jsx)("tr",{children:(0,_t.jsx)("td",{colSpan:"7",style:{textAlign:"center"},children:"Loading..."})}):c?(0,_t.jsx)("tr",{children:(0,_t.jsx)("td",{colSpan:"7",style:{textAlign:"center",color:"red"},children:c})}):e.length>0?e.map(e=>(0,_t.jsxs)("tr",{children:[(0,_t.jsx)("td",{children:(0,_t.jsxs)("label",{className:"table-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:u.has(e._id),onChange:()=>(e=>{const t=new Set(u);t.has(e)?t.delete(e):t.add(e),h(t)})(e._id)}),(0,_t.jsx)("span",{className:"custom-checkbox"})]})}),(0,_t.jsx)("td",{children:e.name}),(0,_t.jsx)("td",{children:e.email}),(0,_t.jsx)("td",{children:e.phone}),(0,_t.jsx)("td",{children:e.grade}),(0,_t.jsx)("td",{children:e.courseName}),(0,_t.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()})]},e._id)):(0,_t.jsx)("tr",{children:(0,_t.jsx)("td",{colSpan:"7",style:{textAlign:"center"},children:"No requests found."})})})]})}),(0,_t.jsxs)("div",{className:"pagination-controls",children:[(0,_t.jsx)("button",{onClick:()=>p(1),disabled:1===i.currentPage,children:"<<"}),(0,_t.jsx)("button",{onClick:()=>p(e=>e-1),disabled:1===i.currentPage,children:"<"}),(0,_t.jsxs)("span",{children:["Page ",i.currentPage," of ",i.totalPages||1]}),(0,_t.jsx)("button",{onClick:()=>p(e=>e+1),disabled:i.currentPage===i.totalPages,children:">"}),(0,_t.jsx)("button",{onClick:()=>p(i.totalPages),disabled:i.currentPage===i.totalPages,children:">>"})]})]})};const zE=n.p+"static/media/arrow-trend-up.2252e65e78f450f6c709423e6d69f485.svg";const HE=n.p+"static/media/box.567e89f082681304bbf3b9bbade10187.svg";const UE=n.p+"static/media/menu-dots-vertical.93e971576e4a68e1238531af901b309b.svg",GE="https://backend-edu-site-5cnm.vercel.app",VE=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),{showConfirmation:o}=DE(),{showError:l}=DE(),{user:d}=jt(),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(null),[v,y]=(0,t.useState)(null),[b,x]=(0,t.useState)(!1),[w,S]=(0,t.useState)({name:""}),[C,_]=(0,t.useState)(""),k=(0,t.useCallback)(async()=>{r(!0);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(GE,"/group/all"),{headers:{Authorization:"MonaEdu ".concat(e)}}),i=await t.json();if("Done"!==i.Message)throw new Error(i.Message||"Failed to fetch courses");n(i.groups||[])}catch(e){a(e.message)}finally{r(!1)}},[]);(0,t.useEffect)(()=>{k()},[k]);const A=()=>{p(!1),m(null),y(null)},E=()=>{x(!1),S({name:""}),_("")},j=async e=>{if(await o({title:"Archive Course",message:"This Course will be Archived.",confirmText:"Archive",cancelText:"Cancel",type:"warning"}))try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(GE,"/group/archive"),{method:"PATCH",headers:{Authorization:"MonaEdu ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({_id:e._id,archivedOrRestore:!0})});if(!n.ok){const e=await n.json().catch(()=>null);throw new Error((null===e||void 0===e?void 0:e.Message)||"Failed to archive course.")}k()}catch(t){console.log(t),await l({title:"Error archiving group",message:t.message||"An error occured while archiving the group",confirmText:"Cancel"})}};return i?(0,_t.jsx)("div",{children:"Loading courses..."}):s?(0,_t.jsx)("div",{className:"error",children:s}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"courses-dashboard",children:[(0,_t.jsxs)("div",{className:"dashboard-header",children:[(0,_t.jsx)("h1",{children:"Courses"}),"main_teacher"===(null===d||void 0===d?void 0:d.role)&&(0,_t.jsx)("div",{className:"header-actions",children:(0,_t.jsx)("button",{className:"action-button",onClick:()=>x(!0),children:"+ Create Course"})})]}),(0,_t.jsx)("div",{className:"courses-grid",children:e.map(e=>{var t;const n=(()=>{const e=[{primary:"#1976d2",secondary:"#1565c0"},{primary:"#388e3c",secondary:"#2e7d32"},{primary:"#f57c00",secondary:"#ef6c00"},{primary:"#7b1fa2",secondary:"#6a1b9a"},{primary:"#c2185b",secondary:"#ad1457"},{primary:"#00796b",secondary:"#00695c"},{primary:"#5d4037",secondary:"#4e342e"},{primary:"#455a64",secondary:"#37474f"}];return e[Math.floor(Math.random()*e.length)]})();return(0,_t.jsxs)("div",{className:"course-card",style:{"--card-header-bg":n.primary,"--card-header-secondary":n.secondary,"--card-header-pattern":"linear-gradient(135deg, ".concat(n.primary," 0%, ").concat(n.secondary," 100%)")},children:[(0,_t.jsx)("div",{className:"card-header",children:(0,_t.jsx)(gt,{to:"/dashboard/courses/".concat(e._id),children:(0,_t.jsx)("h3",{children:e.groupname})})}),(0,_t.jsx)("div",{className:"card-body",children:(0,_t.jsxs)("p",{children:[(null===(t=e.enrolledStudents)||void 0===t?void 0:t.length)||0," students"]})}),(0,_t.jsxs)("div",{className:"card-footer",children:[(0,_t.jsx)("button",{className:"card-footer-btn",onClick:()=>(e=>alert("Opening gradebook for ".concat(e.groupname)))(e),children:(0,_t.jsx)("img",{src:zE,width:"20",height:"20",alt:"Courses"})}),"main_teacher"===(null===d||void 0===d?void 0:d.role)&&(0,_t.jsx)("button",{className:"card-footer-btn",onClick:()=>j(e),children:(0,_t.jsx)("img",{src:HE,width:"20",height:"20",alt:"Archive"})}),"main_teacher"===(null===d||void 0===d?void 0:d.role)&&(0,_t.jsxs)("div",{className:"card-menu-container",children:[(0,_t.jsx)("button",{className:"card-footer-btn",title:"More options",onClick:t=>{t.stopPropagation(),h(u===e._id?null:e._id)},children:(0,_t.jsx)("img",{src:UE,width:"20",height:"20",alt:"settings"})}),u===e._id&&(0,_t.jsx)("div",{className:"card-menu-dropdown",children:(0,_t.jsx)("button",{onClick:()=>(async e=>{const t=localStorage.getItem("token")||sessionStorage.getItem("token");if(await o({title:"Delete Course",message:"This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",type:"danger"}))try{if(!(await fetch("".concat(GE,"/group/deletegroup"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"MonaEdu ".concat(t)},body:JSON.stringify({groupid:e})})).ok)throw new Error("Failed to delete group");await k()}catch(n){console.log(n),await l({title:"Error deleting group",message:n.message||"An error occured while deleting the group",confirmText:"Try Again"})}})(e._id),className:"delete",children:"Delete"})})]})]})]},e._id)})})]}),(0,_t.jsxs)(Ut(),{isOpen:b,onRequestClose:E,contentLabel:"Create New Course",className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Create Course"}),(0,_t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),_("Creating...");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(GE,"/group/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({groupname:w.name})}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to create course");_("Course created successfully!"),k(),setTimeout(E,1500)}catch(t){_("Error: ".concat(t.message))}},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Course Name (required)"}),(0,_t.jsx)("input",{type:"text",value:w.name,onChange:e=>S(c(c({},w),{},{name:e.target.value})),required:!0})]}),C&&(0,_t.jsx)("p",{className:"submit-status",children:C}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:E,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",disabled:"Creating..."===C,children:"Creating..."===C?"Creating...":"Create"})]})]})]}),(0,_t.jsxs)(Ut(),{isOpen:f,onRequestClose:A,contentLabel:"Confirm Action",className:"confirmation-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h3",{children:"Are you sure?"}),(0,_t.jsx)("p",{children:"archive"===v&&'Archiving this course will remove it from the main dashboard. You can restore it later from the "Archived Courses" page.'}),(0,_t.jsxs)("div",{className:"confirmation-actions",children:[(0,_t.jsx)("button",{className:"cancel-btn-confirm",onClick:A,children:"Cancel"}),(0,_t.jsx)("button",{className:"confirm-btn-archive",onClick:()=>{"archive"===v&&j(g),A()},children:"Yes, Archive"})]})]})]})},qE="https://backend-edu-site-5cnm.vercel.app",XE=()=>{const{courseId:e}=pe(),[n,i]=(0,t.useState)(null),[r,s]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null),{showError:l}=DE(),[c,d]=(0,t.useState)("Copy Code"),u=(0,t.useCallback)(async()=>{s(!0);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(qE,"/group/invite/link?groupid=").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}});if(404===n.status)return void i(null);if(!n.ok)throw new Error("Failed to fetch invite link.");const r=await n.json();r.inviteLink&&i((e=>{try{const t=e.split("/");return t[t.length-1]}catch(t){return null}})(r.inviteLink))}catch(t){o(t.message)}finally{s(!1)}},[e]);(0,t.useEffect)(()=>{u()},[u]);const h=async()=>{try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(qE,"/group/invite/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({groupid:e})}),i=await n.json();if(!n.ok)throw new Error(i.message||"Failed to generate link.");u()}catch(t){await l({title:"Error generating link",message:t.message||"An error occured while generating link",confirmText:"Cancel"})}};return(0,_t.jsx)("div",{className:"stream-page",children:(0,_t.jsxs)("div",{className:"course-code-panel",children:[(0,_t.jsxs)("div",{className:"course-code-header",children:[(0,_t.jsx)("h3",{children:"Course Code"}),r?null:n?(0,_t.jsxs)("div",{children:[(0,_t.jsx)("button",{className:"copy-link-btn",onClick:()=>{const e="".concat(n);navigator.clipboard.writeText(e).then(()=>{d("Copied!"),setTimeout(()=>{d("Copy Code")},3e3)}).catch(()=>alert("Failed to copy code."))},children:c}),(0,_t.jsx)("button",{className:"regenerate-link-btn",onClick:h,children:"Regenerate Link"})]}):(0,_t.jsx)("button",{className:"generate-link-btn",onClick:h,children:"Generate Invite Link"})]}),r?(0,_t.jsx)("p",{children:"Loading invite code..."}):n?(0,_t.jsx)("div",{className:"course-code-display",children:n}):(0,_t.jsx)("p",{children:"No active invite link. Generate one to invite students."})]})})};const YE=n.p+"static/media/trash.a49ffacf895ae26473869d4c637d5cb1.svg";Ut().setAppElement("#root");const KE="https://backend-edu-site-5cnm.vercel.app";function QE(e){let{isOpen:n,onClose:i,courseId:r,onSuccess:s}=e;const[a,o]=(0,t.useState)({name:"",file:null,answerFile:null,startDate:"",endDate:""}),[l,d]=(0,t.useState)(""),[u,h]=(0,t.useState)([]),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),{showError:b}=DE(),{showSuccess:x}=DE();(0,t.useEffect)(()=>{n&&r&&w()},[n,r]);const w=async()=>{p(!0);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(KE,"/sections?groupIds=").concat(r),{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();"Sections fetched successfully"===n.message?h(n.data||[]):h([])}catch(e){console.error("Error fetching topics:",e),h([])}finally{p(!1)}},S=e=>{const{name:t,value:n,files:i}=e.target;o(e=>c(c({},e),{},{[t]:i?i[0]:n}))},C=()=>{o({name:"",file:null,answerFile:null,startDate:"",endDate:""}),d(""),m(""),y(""),i()};return(0,_t.jsxs)(Ut(),{isOpen:n,onRequestClose:C,className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Create Assignment"}),(0,_t.jsx)("button",{onClick:C,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.name&&a.file&&a.startDate&&a.endDate&&l){m("Creating assignment..."),y("");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),n=new FormData;n.append("name",a.name),n.append("file",a.file),a.answerFile&&n.append("answerFile",a.answerFile),n.append("startDate",a.startDate),n.append("endDate",a.endDate),n.append("groupIds",r);const i=await fetch("".concat(KE,"/assignments/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e)},body:n}),o=await i.json();if(i.ok||(console.log(o),C(),m(""),await b({title:"Error",message:o.message||"Failed to create assignment",confirmText:"Cancel"})),"Assignment created successfully"!==o.message)throw await b({title:"Error",message:"Unexpected response format",confirmText:"Cancel"}),new Error("Unexpected response format");try{let t=null;if(o.assignment&&o.assignment._id)t=o.assignment._id;else if(o._id)t=o._id;else{if(!o.id)throw console.warn("Could not find assignment ID in response for linking"),new Error("Assignment ID not found in response");t=o.id}(await fetch("".concat(KE,"/sections/").concat(l,"/update-links"),{method:"PUT",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({itemsToAdd:[{type:"assignment",id:t}],itemsToRemove:[]})})).ok&&(m(""),s(),C(),await x({title:"Success",message:"Assignment created and linked to topic successfully!",confirmText:"Great!"}))}catch(t){console.warn("Error linking assignment to topic: ",t),m(""),C(),await b({title:"Error",message:"Error linking assignment to topic: ".concat(t),confirmText:"Cancel"})}}catch(n){m(""),C(),await b({title:"Error",message:"Error occured while creating assignment!",confirmText:"Cancel"})}}else y("Please fill in all required fields and select a topic")},className:"modal-form",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Assignment Name *"}),(0,_t.jsx)("input",{type:"text",name:"name",value:a.name,onChange:S,placeholder:"Enter assignment name",required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Assignment File (PDF) *"}),(0,_t.jsx)("input",{type:"file",name:"file",accept:".pdf",onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Answer File (PDF) - Optional"}),(0,_t.jsx)("input",{type:"file",name:"answerFile",accept:".pdf",onChange:S})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Start Date & Time *"}),(0,_t.jsx)("input",{type:"datetime-local",name:"startDate",value:a.startDate,onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"End Date & Time *"}),(0,_t.jsx)("input",{type:"datetime-local",name:"endDate",value:a.endDate,onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Select Topic *"}),(0,_t.jsxs)("select",{value:l,onChange:e=>d(e.target.value),required:!0,disabled:f,children:[(0,_t.jsx)("option",{value:"",children:f?"Loading topics...":"Choose a topic"}),u.map(e=>(0,_t.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),v&&(0,_t.jsx)("div",{className:"error-message",children:v}),g&&(0,_t.jsx)("div",{className:"submit-status",children:g}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:C,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",className:"submit-btn",disabled:g&&""!==g,children:g&&""!==g?g:"Create Assignment"})]})]})]})}function JE(e){let{isOpen:n,onClose:i,courseId:r,onSuccess:s}=e;const[a,o]=(0,t.useState)({name:"",file:null,startDate:"",endDate:""}),[l,d]=(0,t.useState)(""),[u,h]=(0,t.useState)([]),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),{showError:b}=DE(),{showSuccess:x}=DE();(0,t.useEffect)(()=>{n&&r&&w()},[n,r]);const w=async()=>{p(!0);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(KE,"/sections?groupIds=").concat(r),{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();"Sections fetched successfully"===n.message?h(n.data||[]):h([])}catch(e){console.error("Error fetching topics:",e),h([])}finally{p(!1)}},S=e=>{const{name:t,value:n,files:i}=e.target;o(e=>c(c({},e),{},{[t]:i?i[0]:n}))},C=()=>{o({name:"",file:null,startDate:"",endDate:""}),d(""),m(""),y(""),i()};return(0,_t.jsxs)(Ut(),{isOpen:n,onRequestClose:C,className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Create Exam"}),(0,_t.jsx)("button",{onClick:C,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.name&&a.file&&a.startDate&&a.endDate&&l){m("Creating exam..."),y("");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),n=new FormData;n.append("Name",a.name),n.append("file",a.file),n.append("startdate",a.startDate),n.append("enddate",a.endDate),n.append("groupIds",r),n.append("allowSubmissionsAfterDueDate",!1);const i=await fetch("".concat(KE,"/exams/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e)},body:n}),o=await i.json();if(i.ok||(console.log(o),C(),m(""),await b({title:"Error",message:o.message||"Failed to create exam",confirmText:"Cancel"})),"Exam created successfully"!==o.message)throw await b({title:"Error",message:"Unexpected response format",confirmText:"Cancel"}),new Error("Unexpected response format");try{let t=null;if(o.exam&&o.exam._id)t=o.exam._id;else if(o._id)t=o._id;else{if(!o.id)throw console.warn("Could not find exam ID in response for linking"),new Error("Exam ID not found in response");t=o.id}(await fetch("".concat(KE,"/sections/").concat(l,"/update-links"),{method:"PUT",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({itemsToAdd:[{type:"exam",id:t}],itemsToRemove:[]})})).ok&&(m(""),s(),C(),await x({title:"Success",message:"Exam created and linked to topic successfully!",confirmText:"Great!"}))}catch(t){console.warn("Error linking exam to topic:",t),m(""),C(),await b({title:"Error",message:"Error linking exam to topic: ".concat(t),confirmText:"Cancel"})}}catch(n){m(""),C(),await b({title:"Error",message:"Error occured while creating exam!",confirmText:"Cancel"})}}else y("Please fill in all required fields and select a topic")},className:"modal-form",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Exam Name *"}),(0,_t.jsx)("input",{type:"text",name:"name",value:a.name,onChange:S,placeholder:"Enter exam name",required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Exam File (PDF) *"}),(0,_t.jsx)("input",{type:"file",name:"file",accept:".pdf",onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Start Date & Time *"}),(0,_t.jsx)("input",{type:"datetime-local",name:"startDate",value:a.startDate,onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"End Date & Time *"}),(0,_t.jsx)("input",{type:"datetime-local",name:"endDate",value:a.endDate,onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Select Topic *"}),(0,_t.jsxs)("select",{value:l,onChange:e=>d(e.target.value),required:!0,disabled:f,children:[(0,_t.jsx)("option",{value:"",children:f?"Loading topics...":"Choose a topic"}),u.map(e=>(0,_t.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),v&&(0,_t.jsx)("div",{className:"error-message",children:v}),g&&(0,_t.jsx)("div",{className:"submit-status",children:g}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:C,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",className:"submit-btn",disabled:g&&""!==g,children:g&&""!==g?g:"Create Exam"})]})]})]})}function ZE(e){let{isOpen:n,onClose:i,courseId:r,onSuccess:s}=e;const[a,o]=(0,t.useState)({name:"",description:"",files:null,links:[""],publishDate:""}),[l,d]=(0,t.useState)(""),[u,h]=(0,t.useState)([]),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),{showError:b}=DE(),{showSuccess:x}=DE();(0,t.useEffect)(()=>{n&&r&&w()},[n,r]);const w=async()=>{p(!0);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(KE,"/sections?groupIds=").concat(r),{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();"Sections fetched successfully"===n.message?h(n.data||[]):h([])}catch(e){console.error("Error fetching topics:",e),h([])}finally{p(!1)}},S=e=>{const{name:t,value:n,files:i}=e.target;o(e=>c(c({},e),{},{[t]:i||n}))},C=()=>{o({name:"",description:"",files:null,links:[""],publishDate:""}),d(""),m(""),y(""),i()};return(0,_t.jsxs)(Ut(),{isOpen:n,onRequestClose:C,className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsxs)("div",{className:"modal-header",children:[(0,_t.jsx)("h2",{children:"Create Material"}),(0,_t.jsx)("button",{onClick:C,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.name&&a.description&&a.publishDate&&l){m("Creating material..."),y("");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token");let n=[];if(a.files&&a.files.length>0){m("Uploading ".concat(a.files.length," file(s)..."));const t=Array.from(a.files).map(async t=>{const n=await fetch("".concat(KE,"/material/generate-upload-url"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({fileName:t.name,fileType:t.type,materialName:t.name})});if(!n.ok)throw new Error("Could not get upload URL for ".concat(t.name,"."));const{uploadUrl:i,s3Key:r}=await n.json();if(200!==(await fetch(i,{method:"PUT",headers:{"Content-Type":t.type},body:t})).status)throw new Error("Failed to upload ".concat(t.name,"."));return{key:r,path:new URL(i).origin+new URL(i).pathname,originalName:t.name,fileType:t.type}});n=await Promise.all(t)}m("Finalizing material...");const i={name:a.name,description:a.description,groupIds:[r],linksArray:a.links.filter(e=>""!==e.trim()),files:n,publishDate:a.publishDate},o=await fetch("".concat(KE,"/material/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(i)}),c=await o.json();o.ok||(console.log(c),C(),m(""),await b({title:"Error",message:c.message||"Failed to create material",confirmText:"Cancel"}));try{let t=null;if(c.material&&c.material._id)t=c.material._id;else if(c._id)t=c._id;else{if(!c.id)throw console.warn("Could not find material ID in response for linking"),new Error("Material ID not found in response");t=c.id}(await fetch("".concat(KE,"/sections/").concat(l,"/update-links"),{method:"PUT",headers:{Authorization:"MonaEdu ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({itemsToAdd:[{type:"material",id:t}],itemsToRemove:[]})})).ok&&(m(""),s(),C(),await x({title:"Success",message:"Material created and linked to topic successfully!",confirmText:"Great!"}))}catch(t){console.warn("Error linking material to topic:",t),m(""),C(),await b({title:"Error",message:"Error linking Material to topic: ".concat(t),confirmText:"Cancel"})}}catch(n){m(""),C(),await b({title:"Error",message:"Error occured while creating material!",confirmText:"Cancel"})}}else y("Please fill in all required fields and select a topic")},className:"modal-form",children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Material Name *"}),(0,_t.jsx)("input",{type:"text",name:"name",value:a.name,onChange:S,placeholder:"Enter material name",required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Description *"}),(0,_t.jsx)("textarea",{name:"description",value:a.description,onChange:S,placeholder:"Enter material description",required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Publish Date & Time *"}),(0,_t.jsx)("input",{type:"datetime-local",name:"publishDate",value:a.publishDate,onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Select Topic *"}),(0,_t.jsxs)("select",{value:l,onChange:e=>d(e.target.value),required:!0,disabled:f,children:[(0,_t.jsx)("option",{value:"",children:f?"Loading topics...":"Choose a topic"}),u.map(e=>(0,_t.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Material Files *"}),(0,_t.jsx)("input",{type:"file",name:"files",multiple:!0,onChange:S,required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"YouTube Links (Optional)"}),a.links.map((e,t)=>(0,_t.jsxs)("div",{className:"link-input-group",children:[(0,_t.jsx)("input",{type:"url",placeholder:"https://example.com/...",value:e,onChange:e=>((e,t)=>{const n=[...a.links];n[e]=t.target.value,o(e=>c(c({},e),{},{links:n}))})(t,e)}),a.links.length>1&&(0,_t.jsx)("button",{type:"button",className:"remove-link-btn",onClick:()=>(e=>o(t=>c(c({},t),{},{links:t.links.filter((t,n)=>n!==e)})))(t),children:"\xd7"})]},t)),(0,_t.jsx)("button",{type:"button",className:"add-link-btn",onClick:()=>o(e=>c(c({},e),{},{links:[...e.links,""]})),children:"+ Add another link"})]}),v&&(0,_t.jsx)("div",{className:"error-message",children:v}),g&&(0,_t.jsx)("div",{className:"submit-status",children:g}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:C,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",className:"submit-btn",disabled:g&&""!==g,children:g&&""!==g?g:"Create Material"})]})]})]})}const ej="https://backend-edu-site-5cnm.vercel.app",tj=()=>(0,_t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_t.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,_t.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),nj=()=>{const{courseId:e}=pe(),n=fe(),[i,r]=(0,t.useState)(!1),s=(0,t.useRef)(null),[a,o]=(0,t.useState)(""),[l,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(1),[f,p]=(0,t.useState)(1),[g,m]=(0,t.useState)(0),[v,y]=(0,t.useState)(!0),[b,x]=(0,t.useState)(!0),[w,S]=(0,t.useState)(!1),[C,_]=(0,t.useState)(null),[k,A]=(0,t.useState)(null),[E,j]=(0,t.useState)({}),[T,O]=(0,t.useState)(!1),[M,P]=(0,t.useState)(!1),[N,$]=(0,t.useState)({name:"",description:""}),[D,L]=(0,t.useState)(""),[I,F]=(0,t.useState)(!1),[R,B]=(0,t.useState)(!1),[W,z]=(0,t.useState)(!1);(0,t.useEffect)(()=>{const e=e=>{s.current&&!s.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const H=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){n?S(!0):(x(!0),_(null));try{const a=localStorage.getItem("token")||sessionStorage.getItem("token"),o=await fetch("".concat(ej,"/sections?groupIds=").concat(e,"&page=").concat(t,"&size=").concat(5),{headers:{Authorization:"MonaEdu ".concat(a)}});if(!o.ok){let e="Failed to fetch topics (status ".concat(o.status,")");try{const t=await o.json();t&&t.message&&(e=t.message)}catch(zy){}throw new Error(e)}const l=await o.json();if("Sections fetched successfully"!==l.message)throw new Error(l.message||"Could not parse topics.");{var i,r,s;const e=l.data||[],a=null!==(i=l.total)&&void 0!==i?i:0,o=null!==(r=l.totalPages)&&void 0!==r?r:1,c=null!==(s=l.currentPage)&&void 0!==s?s:t;d(n?t=>[...t,...e]:e),h(c),p(o),m(a),y(c<o)}}catch(a){_(a.message),n||d([])}finally{x(!1),S(!1)}}},U=(0,t.useCallback)(()=>{w||!v||u>=f||H(u+1,!0)},[w,v,u,f]);(0,t.useEffect)(()=>{d([]),h(1),p(1),m(0),y(!0),A(null),j({}),H(1,!1)},[e]);const G=()=>{P(!1)},V=()=>{H(1,!1)},q=e=>{switch(e){case"assignment":return(0,_t.jsx)("img",{src:Nt,width:"20",height:"20",alt:"Assignment"});case"exam":return(0,_t.jsx)("img",{src:Pt,width:"20",height:"20",alt:"Exam"});case"material":return(0,_t.jsx)("img",{src:$t,width:"20",height:"20",alt:"Material"});default:return(0,_t.jsx)("img",{src:It,width:"20",height:"20",alt:"Topic"})}},X=l.filter(e=>e.name.toLowerCase().includes(a.toLowerCase()));return(0,_t.jsxs)("div",{className:"classwork-page",children:[(0,_t.jsxs)("div",{className:"classwork-header",ref:s,children:[(0,_t.jsxs)("button",{className:"create-btn",onClick:()=>r(!i),children:[(0,_t.jsx)(tj,{})," Create"]}),i&&(0,_t.jsxs)("div",{className:"create-dropdown",children:[(0,_t.jsxs)("button",{onClick:()=>{r(!1),F(!0)},children:[(0,_t.jsx)("img",{src:Nt,width:"20",height:"20",alt:"Assignment"})," Assignment"]}),(0,_t.jsxs)("button",{onClick:()=>{r(!1),B(!0)},children:[(0,_t.jsx)("img",{src:Pt,width:"20",height:"20",alt:"Exam"})," Exam"]}),(0,_t.jsxs)("button",{onClick:()=>{r(!1),z(!0)},children:[(0,_t.jsx)("img",{src:$t,width:"20",height:"20",alt:"Material"})," Material"]}),(0,_t.jsx)("hr",{style:{margin:"0.5rem 0",borderTop:"1px solid #eee",borderBottom:"none"}}),(0,_t.jsxs)("button",{onClick:()=>{r(!1),$({name:"",description:""}),L(""),P(!0)},children:[(0,_t.jsx)("img",{src:It,width:"20",height:"20",alt:"Topic"})," Topic"]})]})]}),(0,_t.jsx)("div",{className:"search-bar-container",children:(0,_t.jsx)("input",{type:"text",className:"classwork-search-input",placeholder:"Search for a topic...",value:a,onChange:e=>o(e.target.value)})}),(0,_t.jsxs)("div",{className:"classwork-content",children:[b?(0,_t.jsx)("p",{children:"Loading topics..."}):C?(0,_t.jsx)("div",{className:"error",children:C}):l.length>0?X.map(t=>(0,_t.jsxs)("div",{className:"topic-card",children:[(0,_t.jsxs)("div",{className:"topic-header",onClick:()=>(async e=>{if(k===e)return A(null),void j(t=>c(c({},t),{},{[e]:[]}));A(e),O(!0),_(null);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(ej,"/sections/").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok)throw new Error("Failed to load topic content.");const i=await n.json();if("Section content fetched successfully."!==i.message)throw new Error(i.message||"Could not parse topic content.");j(t=>c(c({},t),{},{[e]:i.data.content||[]}))}catch(t){_(t.message)}finally{O(!1)}})(t._id),children:[(0,_t.jsxs)("div",{className:"topic-title",children:[(0,_t.jsx)("h2",{children:t.name}),t.description&&(0,_t.jsx)("p",{className:"topic-description",children:t.description})]}),(0,_t.jsx)("button",{className:"delete-btn1",onClick:e=>{e.stopPropagation(),(async t=>{if(window.confirm("Are you sure you want to delete this session?"))try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(ej,"/sections/").concat(t),{method:"DELETE",headers:{Authorization:"MonaEdu ".concat(n)}});if(!i.ok){let t="Failed to delete (status ".concat(i.status,")");try{const e=await i.json();e&&e.message&&(t=e.message)}catch(e){}throw new Error(t)}d(e=>e.filter(e=>e._id!==t)),m(e=>Math.max(0,e-1)),k===t&&A(null),j(e=>{const n=c({},e);return delete n[t],n})}catch(n){console.error("Error deleting session:",n),alert("An error occurred while deleting the session.")}})(t._id)},title:"Delete topic",children:(0,_t.jsx)("img",{src:YE,width:"20",height:"20",alt:"Delete"})})]}),(0,_t.jsxs)("div",{className:"topic-content ".concat(k===t._id?"expanded":""),children:[T&&k===t._id&&(0,_t.jsx)("p",{className:"loading-placeholder",children:"Loading content..."}),E[t._id]&&E[t._id].map(t=>(0,_t.jsxs)("div",{className:"classwork-item",children:[(0,_t.jsxs)("div",{className:"classwork-item-info ".concat("assignment"===t.type||"exam"===t.type?"clickable":""),onClick:()=>{var i,r;"assignment"===t.type?(r=t.id,n("/dashboard/assignments/".concat(e,"/assignment/").concat(r))):"exam"===t.type&&(i=t.id,n("/dashboard/exams/".concat(e,"/exam/").concat(i)))},children:[(0,_t.jsx)("div",{className:"classwork-item-icon type-".concat(t.type),children:q(t.type)}),(0,_t.jsx)("span",{className:"classwork-item-name",children:t.name||t.Name}),("assignment"===t.type||"exam"===t.type)&&(0,_t.jsx)("span",{className:"clickable-indicator",children:"\u2192"})]}),(0,_t.jsx)("div",{className:"classwork-item-actions",children:(0,_t.jsx)("div",{className:"dropdown",children:(0,_t.jsx)("button",{className:"card-menu-btn",children:"\u22ee"})})})]},t._id))]})]},t._id)):(0,_t.jsx)("p",{children:"No topics have been created for this course yet."}),!b&&l.length>0&&(0,_t.jsx)("div",{className:"load-more-container",children:v?(0,_t.jsx)("button",{className:"load-more-btn",onClick:U,disabled:w,children:w?"Loading...":"Load more"}):(0,_t.jsx)("p",{className:"no-more-topics",children:"No more topics."})})]}),(0,_t.jsxs)(Ut(),{isOpen:M,onRequestClose:G,contentLabel:"Create New Topic",className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Create Topic"}),(0,_t.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),N.name){L("Creating topic...");try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n={name:N.name,description:N.description,groupIds:[e]},i=await fetch("".concat(ej,"/sections/create"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(n)}),r=await i.json();if(!i.ok)throw new Error(r.message||"Failed to create topic");if("Section container created successfully."!==r.message)throw new Error("Unexpected response from server");{L("Topic created successfully!");const e=r.data;d(t=>[e,...t]),m(e=>e+1),setTimeout(G,1e3)}}catch(n){L("Error: ".concat(n.message))}}else L("Topic name is required.")},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Topic Name"}),(0,_t.jsx)("input",{type:"text",value:N.name,onChange:e=>$(c(c({},N),{},{name:e.target.value})),placeholder:"e.g., Unit 1: Algebra",required:!0})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Description (Optional)"}),(0,_t.jsx)("textarea",{value:N.description,onChange:e=>$(c(c({},N),{},{description:e.target.value})),placeholder:"Add a brief description for this topic"})]}),D&&(0,_t.jsx)("p",{className:"submit-status",children:D}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:G,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",disabled:D.includes("Creating..."),children:D.includes("Creating...")?"Creating...":"Create"})]})]})]}),(0,_t.jsx)(QE,{isOpen:I,onClose:()=>F(!1),courseId:e,onSuccess:V}),(0,_t.jsx)(JE,{isOpen:R,onClose:()=>B(!1),courseId:e,onSuccess:V}),(0,_t.jsx)(ZE,{isOpen:W,onClose:()=>z(!1),courseId:e,onSuccess:V})]})},ij="https://backend-edu-site-5cnm.vercel.app",rj=()=>(0,_t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,_t.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,_t.jsx)("circle",{cx:"8.5",cy:"7",r:"4"}),(0,_t.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),(0,_t.jsx)("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),sj=()=>{const{courseId:e}=pe(),[n,i]=(0,t.useState)([]),[r,s]=(0,t.useState)([]),[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),{showError:d}=DE(),{showConfirmation:u}=DE(),{showSuccess:h}=DE(),[f,p]=(0,t.useState)(new Set),[g,m]=(0,t.useState)(!1),[v,y]=(0,t.useState)(new Set),[b,x]=(0,t.useState)(!1),w=(0,t.useCallback)(async()=>{o(!0);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(ij,"/group/id?_id=").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}}),r=await n.json();if("Done"!==r.Message)throw new Error(r.Message||"Failed to fetch enrolled students.");i(r.group.enrolledStudents||[])}catch(t){c(t.message)}finally{o(!1)}},[e]);(0,t.useEffect)(()=>{w()},[w]);const S=()=>{m(!1),y(new Set)};return a?(0,_t.jsx)("div",{children:"Loading students..."}):l?(0,_t.jsx)("div",{className:"error",children:l}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"people-page",children:(0,_t.jsxs)("section",{className:"students-section",children:[(0,_t.jsxs)("div",{className:"people-section-header",children:[(0,_t.jsx)("h2",{children:"Students"}),(0,_t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,_t.jsxs)("span",{children:[n.length," students"]}),(0,_t.jsx)("button",{className:"invite-btn",title:"Invite students",onClick:async()=>{try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(ij,"/student/unassigned"),{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();"No Student Attached to it"===n.Message?s([]):"Unassigned students fetched successfully"===n.Message&&s(n.students||[]),m(!0)}catch(e){await d({title:"Error fetching unassigned students",message:"Error: ".concat(e.message)||0,confirmText:"Cancel"})}},children:(0,_t.jsx)(rj,{})})]})]}),(0,_t.jsxs)("div",{className:"action-bar",children:[(0,_t.jsxs)("label",{className:"table-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?p(new Set(n.map(e=>e._id))):p(new Set)},ref:e=>{e&&(e.checked=n.length>0&&f.size===n.length,e.indeterminate=f.size>0&&f.size<n.length)}}),(0,_t.jsx)("span",{className:"custom-checkbox"})]}),f.size>0&&(0,_t.jsxs)("div",{className:"actions-dropdown",children:[(0,_t.jsxs)("button",{className:"actions-dropdown-button",onClick:()=>x(!b),children:["Actions ",(0,_t.jsx)("span",{children:"\u25bc"})]}),b&&(0,_t.jsx)("div",{className:"actions-dropdown-menu",children:(0,_t.jsx)("button",{onClick:()=>{(async()=>{const t=Array.from(f);if(0===t.length)return;if(await u({title:"Delete Students",message:"Are you sure you want to delete these students?",confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(ij,"/group/removestudent"),{method:"DELETE",headers:{Authorization:"MonaEdu ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({groupid:e,studentid:t})});if(!i.ok){const e=await i.json().catch(()=>null);throw new Error((null===e||void 0===e?void 0:e.Message)||"Failed to remove students.")}await h({title:"Success",message:"Successfully removed ".concat(t.length," student(s)."),confirmText:"Great!"}),p(new Set),w()}catch(n){await d({title:"Error deleteing students",message:"Error: ".concat(n.message)||0,confirmText:"Cancel"})}})(),x(!1)},children:"Remove"})})]})]}),(0,_t.jsx)("ul",{className:"student-list",children:n.map(t=>(0,_t.jsxs)("li",{className:"student-list-item",children:[(0,_t.jsxs)("label",{className:"table-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:f.has(t._id),onChange:()=>(e=>{const t=new Set(f);t.has(e)?t.delete(e):t.add(e),p(t)})(t._id)}),(0,_t.jsx)("span",{className:"custom-checkbox centered"})]}),(0,_t.jsx)("div",{className:"student-avatar",children:t.firstName.charAt(0)}),(0,_t.jsxs)("span",{className:"student-name",children:[t.firstName," ",t.lastName]}),(0,_t.jsx)("button",{className:"card-menu-btn",onClick:()=>(async(t,n)=>{if(await u({title:"Delete Student",message:"Are you sure you want to delete this student?",confirmText:"Delete",cancelText:"Cancel",type:"warning"}))try{const i=localStorage.getItem("token")||sessionStorage.getItem("token"),r=await fetch("".concat(ij,"/group/removestudent"),{method:"DELETE",headers:{Authorization:"MonaEdu ".concat(i),"Content-Type":"application/json"},body:JSON.stringify({groupid:e,studentid:[t]})});if(!r.ok){const e=await r.json().catch(()=>null);throw new Error((null===e||void 0===e?void 0:e.Message)||"Failed to remove student.")}await h({title:"Success",message:"Successfully removed ".concat(n,"."),confirmText:"Great!"}),w()}catch(i){await d({title:"Error deleting student",message:"Error: ".concat(i.message)||0,confirmText:"Cancel"})}})(t._id,"".concat(t.firstName," ").concat(t.lastName)),children:(0,_t.jsx)("img",{src:YE,width:"20",length:"20",alt:"remove"})})]},t._id))})]})}),(0,_t.jsxs)(Ut(),{isOpen:g,onRequestClose:S,className:"form-modal invite-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Invite Students"}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Select students to invite:"}),(0,_t.jsx)("ul",{className:"student-list",children:r.map(e=>(0,_t.jsxs)("li",{className:"student-list-item",children:[(0,_t.jsxs)("label",{className:"table-checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:v.has(e._id),onChange:()=>{const t=new Set(v);t.has(e._id)?t.delete(e._id):t.add(e._id),y(t)}}),(0,_t.jsx)("span",{className:"custom-checkbox"})]}),(0,_t.jsxs)("span",{className:"student-name left",children:[e.firstName," ",e.lastName," (",e.email,")"]})]},e._id))})]}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:S,children:"Cancel"}),(0,_t.jsx)("button",{type:"button",className:"save-btn",onClick:async()=>{const t=Array.from(v);if(0!==t.length)try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(ij,"/group/addstudent"),{method:"PUT",headers:{Authorization:"MonaEdu ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({groupid:e,studentIds:[t]})});i.ok?(S(),await h({title:"Success",message:"Successfully added ".concat(t.length," student(s)."),confirmText:"Great!"}),w()):(S(),await d({title:"Error adding student(s)",message:"Error: ".concat(i.message)||0,confirmText:"Cancel"}))}catch(n){await d({title:"Error adding student(s)",message:"Error: ".concat(n.message)||0,confirmText:"Cancel"})}},children:"Add"})]})]})]})},aj=()=>{const{courseId:e}=pe(),[n,i]=(0,t.useState)(null),[r,s]=(0,t.useState)(!0),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)("classwork");return(0,t.useEffect)(()=>{(async()=>{s(!0);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/group/id?_id=").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok)throw new Error("Failed to fetch course details.");const r=await n.json();if("Done"!==r.Message)throw new Error(r.Message||"Could not find course.");i(r.group)}catch(t){o(t.message)}finally{s(!1)}})()},[e]),r?(0,_t.jsx)("div",{children:"Loading Course..."}):a?(0,_t.jsx)("div",{className:"error",children:a}):n?(0,_t.jsxs)("div",{className:"course-page-container",children:[(0,_t.jsxs)("nav",{className:"course-navigation",children:[(0,_t.jsx)("button",{className:"nav-tab-btn ".concat("stream"===l?"active":""),onClick:()=>c("stream"),children:"Stream"}),(0,_t.jsx)("button",{className:"nav-tab-btn ".concat("classwork"===l?"active":""),onClick:()=>c("classwork"),children:"Classwork"}),(0,_t.jsx)("button",{className:"nav-tab-btn ".concat("people"===l?"active":""),onClick:()=>c("people"),children:"People"})]}),(0,_t.jsxs)("div",{className:"course-content",children:["stream"===l&&(0,_t.jsx)(XE,{}),"classwork"===l&&(0,_t.jsx)(nj,{}),"people"===l&&(0,_t.jsx)(sj,{})]})]}):(0,_t.jsx)("div",{children:"Course not found."})};const oj=n.p+"static/media/time-past.2d1c5c87a83f7827b0d03cfa4c577223.svg",lj="https://backend-edu-site-5cnm.vercel.app",cj=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),{showError:o}=DE(),{user:l}=jt(),[c,d]=(0,t.useState)(null),[u,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(null),[g,m]=(0,t.useState)(null),v=(0,t.useCallback)(async()=>{r(!0);try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(lj,"/group/all?isArchived=true"),{headers:{Authorization:"MonaEdu ".concat(e)}}),i=await t.json();if("Done"!==i.Message)throw new Error(i.Message||"Failed to fetch courses");n(i.groups||[])}catch(e){a(e.message)}finally{r(!1)}},[]);(0,t.useEffect)(()=>{v()},[v]);const y=()=>{h(!1),p(null),m(null)},b=async e=>{try{const t=localStorage.getItem("token")||sessionStorage.getItem("token");await fetch("".concat(lj,"/group/archive"),{method:"PATCH",headers:{Authorization:"MonaEdu ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({_id:e._id,archivedOrRestore:!1})}),v()}catch(t){alert("Error: ".concat(t.message))}};return i?(0,_t.jsx)("div",{children:"Loading courses..."}):s?(0,_t.jsx)("div",{className:"error",children:s}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"courses-dashboard",children:[(0,_t.jsx)("div",{className:"dashboard-header",children:(0,_t.jsx)("h1",{children:"Archived Courses"})}),(0,_t.jsx)("div",{className:"courses-grid",children:e.map(e=>(0,_t.jsxs)("div",{className:"course-card",children:[(0,_t.jsx)("div",{className:"card-header",children:(0,_t.jsx)(gt,{to:"/dashboard/courses/".concat(e._id),children:(0,_t.jsx)("h3",{children:e.groupname})})}),(0,_t.jsx)("div",{className:"card-body"}),(0,_t.jsxs)("div",{className:"card-footer",children:[(0,_t.jsx)("button",{className:"card-footer-btn",onClick:()=>(e=>alert("Opening gradebook for ".concat(e.groupname)))(e),children:(0,_t.jsx)("img",{src:zE,width:"20",length:"20",alt:"Courses"})}),"main_teacher"===(null===l||void 0===l?void 0:l.role)&&(0,_t.jsx)("button",{className:"card-footer-btn",onClick:()=>((e,t)=>{p(e),m(t),h(!0)})(e,"archive"),children:(0,_t.jsx)("img",{src:oj,width:"20",length:"20",alt:"Archive"})}),"main_teacher"===(null===l||void 0===l?void 0:l.role)&&(0,_t.jsxs)("div",{className:"card-menu-container",children:[(0,_t.jsx)("button",{className:"card-footer-btn",title:"More options",onClick:t=>{t.stopPropagation(),d(c===e._id?null:e._id)},children:(0,_t.jsx)("img",{src:UE,width:"20",length:"20",alt:"settings"})}),c===e._id&&(0,_t.jsx)("div",{className:"card-menu-dropdown",children:(0,_t.jsx)("button",{onClick:()=>(async e=>{const t=localStorage.getItem("token")||sessionStorage.getItem("token");if(window.confirm("Delete this group?"))try{if(!(await fetch("".concat(lj,"/group/deletegroup"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"MonaEdu ".concat(t)},body:JSON.stringify({groupid:e})})).ok)throw new Error("Failed to delete group");await v()}catch(n){console.log(n),await o({title:"Error deleting group",message:n.message||"An error occured while deleting the group",confirmText:"Try Again"})}})(e._id),className:"delete",children:"Delete"})})]})]})]},e._id))})]}),(0,_t.jsxs)(Ut(),{isOpen:u,onRequestClose:y,contentLabel:"Confirm Action",className:"confirmation-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h3",{children:"Are you sure?"}),(0,_t.jsx)("p",{children:"archive"===g&&"This course will be restored upon confirmation."}),(0,_t.jsxs)("div",{className:"confirmation-actions",children:[(0,_t.jsx)("button",{className:"cancel-btn-confirm",onClick:y,children:"Cancel"}),(0,_t.jsx)("button",{className:"confirm-btn-restore",onClick:()=>{"archive"===g&&b(f),y()},children:"Yes, Restore"})]})]})]})};const dj=n.p+"static/media/exit.41054bc0be8be3fac50eea65711c25aa.svg",uj=()=>{const{user:e}=jt(),[n,i]=(0,t.useState)(!1),[r,s]=(0,t.useState)(""),[a,o]=(0,t.useState)(""),{showSuccess:l}=DE(),{showError:c}=DE(),d=null===e||void 0===e?void 0:e.groupId,u=()=>{i(!1),s(""),o("")};return(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"courses-dashboard",children:[(0,_t.jsxs)("div",{className:"dashboard-header",children:[(0,_t.jsx)("h1",{children:"My Courses"}),(0,_t.jsx)("div",{className:"header-actions",children:(0,_t.jsx)("button",{className:"action-button",onClick:()=>{s(""),o(""),i(!0)},children:"+ Join Course"})})]}),(0,_t.jsx)("div",{className:"courses-grid",children:d?(0,_t.jsxs)("div",{className:"course-card",children:[(0,_t.jsx)("div",{className:"card-header",children:(0,_t.jsx)(gt,{to:"/student/courses/".concat(d._id),children:(0,_t.jsx)("h3",{children:d.groupname})})}),(0,_t.jsx)("div",{className:"card-body"}),(0,_t.jsx)("div",{className:"card-footer",children:(0,_t.jsx)("button",{className:"card-footer-btn",children:(0,_t.jsx)("img",{src:dj,width:"20",length:"20",alt:"Archive"})})})]},d._id):(0,_t.jsx)("p",{children:"You are not currently enrolled in any course. Join a course to get started!"})})]}),(0,_t.jsxs)(Ut(),{isOpen:n,onRequestClose:u,contentLabel:"Join a Course",className:"form-modal",overlayClassName:"form-modal-overlay",children:[(0,_t.jsx)("h2",{children:"Join Course"}),(0,_t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o("Joining...");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/group/join/").concat(r),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();if(!t.ok)throw u(),await c({title:"Error joining group",message:n.message||"An error occured",confirmText:"Cancel"}),new Error(n.message||"Failed to join course.");u(),await l({title:"Success",message:'Successfully joined "'.concat(n.group.name,'"!'),confirmText:"Great!"})}catch(t){o("Error: ".concat(t.message))}},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Class Code"}),(0,_t.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",margin:"0 0 1rem 0"},children:"Enter the code provided by your teacher."}),(0,_t.jsx)("input",{type:"text",placeholder:"Enter code",value:r,onChange:e=>s(e.target.value),required:!0})]}),a&&(0,_t.jsx)("p",{className:"submit-status",children:a}),(0,_t.jsxs)("div",{className:"form-actions",children:[(0,_t.jsx)("button",{type:"button",className:"cancel-btn",onClick:u,children:"Cancel"}),(0,_t.jsx)("button",{type:"submit",disabled:"Joining..."===a,children:"Joining..."===a?"Joining...":"Join"})]})]})]})]})},hj=()=>{const{inviteCode:e}=pe(),n=fe(),[i,r]=(0,t.useState)("Joining course...");return(0,t.useEffect)(()=>{(async()=>{if(e)try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/group/join/").concat(e),{method:"POST",headers:{Authorization:"MonaEdu ".concat(t)}}),s=await i.json();if(!i.ok)throw new Error(s.message||"Failed to join the course.");r('Successfully joined "'.concat(s.group.name,'"! Redirecting...')),setTimeout(()=>n("/student/courses",{replace:!0}),2e3)}catch(t){r("Error: ".concat(t.message))}else r("Invalid invite link.")})()},[e,n]),(0,_t.jsx)("div",{style:{padding:"5rem 2rem",textAlign:"center"},children:(0,_t.jsx)("h2",{children:i})})},fj="https://backend-edu-site-5cnm.vercel.app",pj=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[d,u]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[p,g]=(0,t.useState)(null),[m,v]=(0,t.useState)(""),[y,b]=(0,t.useState)({});(0,t.useEffect)(()=>{w()},[]);const x=e=>{if(!e)return!1;const t=new Date(e);return new Date>t},w=async()=>{try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(fj,"/assignments/all"),{headers:{Authorization:"MonaEdu ".concat(e)}}),i=await t.json();"Assignments fetched successfully"===i.message?n(i.assignments):l("Failed to fetch assignments")}catch(e){l("Error loading assignments")}finally{r(!1)}},S=e=>{if(!e)return"No date set";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"})}catch(o){return"Invalid Date"}};return i?(0,_t.jsx)("div",{className:"loading",children:"Loading assignments..."}):o?(0,_t.jsx)("div",{className:"error",children:o}):(0,_t.jsxs)("div",{className:"exams-page",children:[(0,_t.jsxs)("div",{className:"assignments-left",children:[(0,_t.jsx)("h2",{children:"Available Assigments"}),0===e.length?(0,_t.jsx)("div",{className:"no-exams",children:"No Assigments yet"}):(0,_t.jsx)("div",{className:"student-exams-list",children:e.map(e=>(0,_t.jsxs)("div",{className:"student-exam-card",children:[(0,_t.jsx)("h3",{children:e.name}),(0,_t.jsxs)("div",{className:"student-exam-dates",children:[(0,_t.jsxs)("p",{children:["Start: ",S(e.startDate)]}),(0,_t.jsxs)("p",{children:["End: ",S(e.endDate)]})]}),(0,_t.jsxs)("div",{className:"exam-actions",children:[x(e.endDate)&&(0,_t.jsx)("button",{className:"action-btn view-answer-btn",onClick:()=>(async e=>{const t="".concat(e,"-answer");b(e=>c(c({},e),{},{[t]:!0}));try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(fj,"/assignments/download-answer?assignmentId=").concat(e),{method:"GET",headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to download answer key.")}const i=await n.blob(),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="answer-key-".concat(e,".pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(o){console.error("Error downloading answer key:",o),alert(o.message)}finally{b(e=>c(c({},e),{},{[t]:!1}))}})(e._id),disabled:y["".concat(e._id,"-answer")],children:y["".concat(e._id,"-answer")]?(0,_t.jsx)("div",{className:"loading-spinner-small"}):"View Answers"}),(0,_t.jsx)("button",{className:"download-btn",onClick:()=>(async e=>{b(t=>c(c({},t),{},{[e]:!0}));try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(fj,"/assignments/download?assignmentId=").concat(e),{method:"GET",headers:{Authorization:"MonaEdu ".concat(n)}});if(!i.ok){try{const e=await i.json();if(e&&e.message&&e.message.includes("This Assignment is not available at this time"))return void window.alert("This assignment is out of range");e&&e.message?l(e.message):l("Failed to download assignment")}catch(t){l("Failed to download assignment")}throw new Error("Failed to download assignment")}const r=i.headers.get("content-type");if(r&&r.includes("application/json")){const e=await i.json();if(e&&e.message&&e.message.includes("This Assignment is not available at this time"))return void window.alert("This Assignment is not available at this time");if(e&&e.message)return void l(e.message)}const s=await i.blob(),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download="assignment-".concat(e,".pdf"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(o){console.error("Error downloading assignment:",o),alert(o.message)}finally{b(t=>c(c({},t),{},{[e]:!1}))}})(e._id),disabled:y[e._id],children:y[e._id]?(0,_t.jsx)("div",{className:"loading-spinner-small"}):"Download"})]})]},e._id))})]}),(0,_t.jsxs)("div",{className:"assignments-right",children:[(0,_t.jsx)("h2",{children:"Submit Assignment"}),o&&(0,_t.jsx)("div",{className:"error",children:o}),m&&(0,_t.jsx)("div",{className:"submit-status",children:m}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d&&p){a(!0),v("");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=new FormData;t.append("assignmentId",d),t.append("notes",h||""),t.append("file",p);const n=await fetch("".concat(fj,"/assignments/submit"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e)},body:t}),i=await n.json();"Cannot submit because the deadline has passed."===i.message?(alert("Submission deadline has passed!"),u(""),f(""),g(null)):"Assignment submitted successfully"===i.message||"Assignment submitted successfully."===i.message?(v("Assignment submitted successfully"),u(""),f(""),g(null)):"The submission window for your group is closed."===i.message?alert("This assignment is not available yet!"):(l(i.message||"Failed to submit Assignment"),v(""))}catch(t){console.error("Error submitting assignment:",t),l(t.message||"Error submitting assignment"),v("")}finally{a(!1)}}else v("Please select an assignment and upload a file")},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Select Assignment:"}),(0,_t.jsxs)("select",{value:d,onChange:e=>u(e.target.value),required:!0,disabled:s,children:[(0,_t.jsx)("option",{value:"",children:"Select an assignment"}),e.map(e=>(0,_t.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Notes:"}),(0,_t.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),placeholder:"Add any notes here...",disabled:s})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Upload Solution (PDF):"}),(0,_t.jsx)("input",{type:"file",accept:".pdf",onChange:e=>g(e.target.files[0]),required:!0,disabled:s})]}),(0,_t.jsx)("button",{type:"submit",className:"submit-btn ".concat(s?"loading":""),disabled:s,children:s?(0,_t.jsx)(_t.Fragment,{children:"Uploading..."}):"Submit Assignment"})]})]})]})},gj="https://backend-edu-site-5cnm.vercel.app",mj=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(""),[u,h]=(0,t.useState)(""),[f,p]=(0,t.useState)(null),[g,m]=(0,t.useState)("");(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(gj,"/exams"),{headers:{Authorization:"MonaEdu ".concat(e)}}),i=await t.json();"Exams fetched successfully"===i.message?n(i.data):l("Failed to fetch exams")}catch(e){l("Error loading exams")}finally{r(!1)}},y=e=>{if(!e)return"No date set";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"UTC"})}catch(o){return"Invalid Date"}};return i?(0,_t.jsx)("div",{className:"loading",children:"Loading exams..."}):o?(0,_t.jsx)("div",{className:"error",children:o}):(0,_t.jsxs)("div",{className:"exams-page",children:[(0,_t.jsxs)("div",{className:"exams-left",children:[(0,_t.jsx)("h2",{children:"Available Exams"}),0===e.length?(0,_t.jsx)("div",{className:"no-exams",children:"No Exams yet"}):(0,_t.jsx)("div",{className:"student-exams-list",children:e.map(e=>(0,_t.jsxs)("div",{className:"student-exam-card",children:[(0,_t.jsx)("h3",{children:e.Name}),(0,_t.jsxs)("div",{className:"student-exam-dates",children:[(0,_t.jsxs)("p",{children:["Start: ",y(e.startdate)]}),(0,_t.jsxs)("p",{children:["End: ",y(e.enddate)]})]}),(0,_t.jsx)("div",{className:"exam-actions",children:(0,_t.jsx)("button",{className:"download-btn",onClick:()=>(async e=>{try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(gj,"/exams/download?examId=").concat(e),{method:"GET",headers:{authorization:"MonaEdu ".concat(n)}});if(!i.ok){try{const e=await i.json();e&&e.message?l(e.message):l("Failed to download exam")}catch(t){l("Failed to download exam")}throw new Error("Failed to download exam")}const r=i.headers.get("content-type");if(r&&r.includes("application/json")){const e=await i.json();if(e&&e.message&&e.message.includes("This exam is not available at this time"))return void window.alert("This Exam is not available at this time");if(e&&e.message)return void l(e.message)}const s=await i.blob(),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download="exam-".concat(e,".pdf"),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(o){console.error("Error downloading exam:",o),l("Failed to download exam")}})(e._id),children:"Download"})})]},e._id))})]}),(0,_t.jsxs)("div",{className:"exams-right",children:[(0,_t.jsx)("h2",{children:"Submit Exam"}),g&&(0,_t.jsx)("div",{className:"submit-status",children:g}),(0,_t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c&&f){a(!0),m("");try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=new FormData;t.append("examId",c),t.append("notes",u),t.append("file",f);const n=await fetch("".concat(gj,"/exams/submit"),{method:"POST",headers:{Authorization:"MonaEdu ".concat(e)},body:t}),i=await n.json();"Cannot submit because the submission deadline has passed."===i.message?(alert("Submission deadline has passed!"),d(""),h(""),p(null)):"Exam submitted successfully."===i.message?(m("Exam submitted successfully"),d(""),h(""),p(null)):"Exam submission window is closed."===i.message?alert("This exam is not available yet!"):l("Failed to submit exam")}catch(t){console.error("Error submitting exam:",t),m("Error submitting exam")}finally{a(!1)}}else m("Please select an exam and upload a file")},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Select Exam:"}),(0,_t.jsxs)("select",{value:c,onChange:e=>d(e.target.value),required:!0,disabled:s,children:[(0,_t.jsx)("option",{value:"",children:"Select an exam"}),e.map(e=>(0,_t.jsx)("option",{value:e._id,children:e.Name},e._id))]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Notes:"}),(0,_t.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),placeholder:"Add any notes here...",disabled:s})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Upload Solution (PDF):"}),(0,_t.jsx)("input",{type:"file",accept:".pdf",onChange:e=>p(e.target.files[0]),required:!0,disabled:s})]}),(0,_t.jsx)("button",{type:"submit",className:"submit-btn ".concat(s?"loading":""),disabled:s,children:s?(0,_t.jsx)(_t.Fragment,{children:"Uploading..."}):"Submit Exam"})]})]})]})},vj="https://backend-edu-site-5cnm.vercel.app";Ut().setAppElement("#root");const yj=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)("info");(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{r(!0),a(null);const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(vj,"/material"),{headers:{Authorization:"MonaEdu ".concat(e)}}),i=await t.json();"Materials retrieved successfully"===i.message?n(i.materials):(a(i.message||"Failed to fetch materials"),n([]))}catch(e){a("Error loading materials. Please try again."),n([])}finally{r(!1)}},y=()=>{l(!1),p(""),h(null)};return i?(0,_t.jsx)("div",{className:"loading",children:"Loading materials..."}):s?(0,_t.jsx)("div",{className:"error",children:s}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsx)("div",{className:"exams-page",children:(0,_t.jsxs)("div",{className:"exams-list",children:[(0,_t.jsx)("h2",{children:"Available Materials"}),s&&e.length>0&&(0,_t.jsx)("div",{className:"error-inline",children:s}),0!==e.length||i?(0,_t.jsxs)("div",{className:"material-grid",children:[" ",e.map(e=>(0,_t.jsxs)("div",{className:"student-exam-card",children:[(0,_t.jsx)("h3",{children:e.name}),(0,_t.jsx)("div",{className:"exam-dates",children:(0,_t.jsx)("p",{children:e.description})}),(0,_t.jsx)("button",{className:"download-btn",onClick:()=>(async e=>{l(!0),d(!0),m("info");try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(vj,"/material/").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok)throw new Error("Failed to fetch material details");const i=await n.json();h(i),i.files&&Array.isArray(i.files)&&i.files.length>0?p(i.files[0].url):p("")}catch(s){alert("An error occurred: "+s.message),l(!1)}finally{d(!1)}})(e._id,e.name),children:"Open Material"})]},e._id))]}):(0,_t.jsx)("div",{className:"no-exams",children:s||"No Materials yet"})]})}),(0,_t.jsx)(Ut(),{isOpen:o,onRequestClose:y,contentLabel:"View Material",className:"material-modal",overlayClassName:"material-modal-overlay",children:c?(0,_t.jsx)("div",{className:"loading",children:"Loading..."}):u&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"material-modal-header",children:[(0,_t.jsx)("h2",{children:u.name}),(0,_t.jsx)("button",{onClick:y,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsxs)("div",{className:"material-modal-body ".concat("pdf"===g?"view-pdf":""),children:[(0,_t.jsxs)("div",{className:"content-sidebar",children:[(0,_t.jsx)("p",{className:"material-description",children:u.description}),(0,_t.jsxs)("div",{className:"resource-section",children:[(0,_t.jsx)("h3",{children:"Files"}),u.files&&u.files.length>0?(0,_t.jsx)("ul",{className:"resource-list",children:u.files.map((e,t)=>(0,_t.jsx)("li",{className:"resource-item",children:(0,_t.jsx)("button",{className:f===e.url?"active":"",onClick:()=>p(e.url),children:e.originalName||"File ".concat(t+1)})},t))}):(0,_t.jsx)("p",{className:"no-resources-message",children:"No files provided."})]}),(0,_t.jsxs)("div",{className:"resource-section",children:[(0,_t.jsx)("h3",{children:"Links"}),u.Links&&u.Links.length>0?(0,_t.jsx)("ul",{className:"resource-list",children:u.Links.map((e,t)=>(0,_t.jsx)("li",{className:"resource-item link-item",children:(0,_t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t))}):(0,_t.jsx)("p",{className:"no-resources-message",children:"No links provided."})]})]}),(0,_t.jsx)("div",{className:"pdf-viewer-main",children:f?(0,_t.jsx)(By,{pdfUrl:f}):(0,_t.jsx)("div",{className:"loading",children:"No PDF to display."})})]}),(0,_t.jsxs)("div",{className:"mobile-view-switcher",children:[(0,_t.jsx)("button",{className:"info"===g?"active":"",onClick:()=>m("info"),children:"Info"}),(0,_t.jsx)("button",{className:"pdf"===g?"active":"",onClick:()=>m("pdf"),children:"PDF Viewer"})]})]})})]})};$v.workerSrc="".concat("/EduSite","/pdf.worker.min.mjs");const bj={viewerContainer:{height:"100%",width:"100%",overflowY:"auto",backgroundColor:"#e9ecef"},pageContainer:{position:"relative",margin:"20px auto",display:"flex",justifyContent:"center",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},fabricCanvasOverlay:{position:"absolute",left:"50%",top:0,transform:"translateX(-50%)",zIndex:10},loading:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",fontSize:"1.5rem",color:"#555"}},xj=e=>{let{pdfUrl:n,annotationData:i}=e;const[r,s]=(0,t.useState)(null),[a,o]=(0,t.useState)({}),[l,d]=(0,t.useState)({}),u=(0,t.useRef)({}),[h,f]=(0,t.useState)(null),p=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=()=>{p.current&&f(p.current.clientWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);return(0,t.useEffect)(()=>{if(!r)return;if(Object.keys(a).length!==r)return;const e={};for(let t=1;t<=r;t++){const n=document.getElementById("viewer-fabric-canvas-".concat(t));if(n&&!l[t]){const{width:i,height:r}=a[t];e[t]=new fk(n,{width:i,height:r})}else l[t]&&(e[t]=l[t])}Object.keys(e).length&&d(e)},[r,a]),(0,t.useEffect)(()=>{if(!i)return;if(!r)return;if(Object.keys(l).length!==r)return;let e=null;try{e=JSON.parse(i)}catch(zy){return void console.error("Invalid annotationData JSON:",zy)}const t=Object.entries(e).map(async e=>{let[t,n]=e;const i=l[t];if(i)try{await i.loadFromJSON(n),requestAnimationFrame(()=>{i.getObjects().forEach(e=>{e.opacity=1,e.visible=!0,e.set({selectable:!1,evented:!1,hasControls:!1,lockMovementX:!0,lockMovementY:!0,hoverCursor:"default"})}),i.renderAll()})}catch(r){console.error("Failed to load annotations for page ".concat(t,":"),r)}});Promise.all(t).catch(e=>console.error("Annotation load error:",e))},[i,r,l]),n?(0,_t.jsx)("div",{style:bj.viewerContainer,ref:p,children:(0,_t.jsx)(yy,{file:n,onLoadSuccess:e=>{let{numPages:t}=e;s(t),o({}),Object.values(l).forEach(e=>{e&&"function"===typeof e.dispose&&e.dispose()}),d({}),u.current={}},onLoadError:console.error,children:Array.from(new Array(r||0),(e,t)=>(0,_t.jsxs)("div",{style:bj.pageContainer,children:[(0,_t.jsx)(Fy,{pageNumber:t+1,renderAnnotationLayer:!1,renderTextLayer:!1,onRenderSuccess:e=>{o(n=>c(c({},n),{},{[t+1]:{width:e.width,height:e.height}}))}},"page_".concat(t+1)),(0,_t.jsx)("div",{style:bj.fabricCanvasOverlay,children:a[t+1]&&(0,_t.jsx)("canvas",{id:"viewer-fabric-canvas-".concat(t+1),width:a[t+1].width,height:a[t+1].height})})]},"page_container_".concat(t+1)))})}):(0,_t.jsx)("div",{style:bj.loading,children:"Loading PDF..."})},wj="https://backend-edu-site-5cnm.vercel.app",Sj=()=>{var e,n,i;const[r,s]=(0,t.useState)(null),[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(""),[d,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(null),p=async()=>{try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch("".concat(wj,"/student/profile"),{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();"Profile information fetched successfully."===n.message?s(n.data):c("Failed to fetch user data")}catch(e){c("Error loading user data")}finally{o(!1)}};(0,t.useEffect)(()=>{p()},[]);const g=async(e,t,n)=>{if(window.confirm("Are you sure you want to delete this submission".concat(n?" for ".concat(n):"","?")))try{const n=localStorage.getItem("token")||sessionStorage.getItem("token"),i=await fetch("".concat(wj,"/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"MonaEdu ".concat(n)},body:JSON.stringify({submissionId:e})}),r=await i.json();"Submission deleted successfully."===r.message?(p(),alert("Submission deleted successfully")):(console.error("Failed to delete submission:",r.message),alert("Failed to delete submission"))}catch(l){console.error("Error deleting submission:",l),alert("Error deleting submission")}},m=async(e,t)=>{if(void 0===e.score||null===e.score){const n="exam"===t?e.filePath:e.path;return void(n?window.open(n,"_blank"):alert("No submission file found."))}const n=e.studentId._id||e.studentId,i=e.groupId;let r="";if("exam"===t){const t=e.examId._id||e.examId;r="".concat(wj,"/exams/submissions?examId=").concat(t,"&studentId=").concat(n,"&groupId=").concat(i)}else{const t=e.assignmentId._id||e.assignmentId;r="".concat(wj,"/assignments/submissions?assignmentId=").concat(t,"&studentId=").concat(n,"&groupId=").concat(i)}try{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=await fetch(r,{headers:{Authorization:"MonaEdu ".concat(e)}}),n=await t.json();if(!(n.data&&n.data.length>0))throw new Error(n.message||"Could not find submission details.");{const e=n.data[0];f({pdfUrl:e.filePath||e.path,annotationData:e.annotationData}),u(!0)}}catch(s){alert("Error: ".concat(s.message))}},v=()=>{u(!1),f(null)};return a?(0,_t.jsx)("div",{children:"Loading..."}):r?(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"profile-container",children:[(0,_t.jsx)("h2",{children:"Profile"}),l&&(0,_t.jsx)("div",{className:"error-message",children:l}),(0,_t.jsxs)("div",{className:"profile-info",children:[(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"First Name:"}),(0,_t.jsx)("span",{children:r.firstName})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Last Name:"}),(0,_t.jsx)("span",{children:r.lastName})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Username:"}),(0,_t.jsx)("span",{children:r.userName})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Email:"}),(0,_t.jsx)("span",{children:r.email})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Parent Email:"}),(0,_t.jsx)("span",{children:r.parentemail})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Phone:"}),(0,_t.jsx)("span",{children:r.phone})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Parent Phone:"}),(0,_t.jsx)("span",{children:r.parentPhone})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Group:"}),(0,_t.jsx)("span",{children:null===(e=r.groupId)||void 0===e?void 0:e.groupname})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Email Confirmed:"}),(0,_t.jsx)("span",{children:r.confirmEmail?"Yes":"No"})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Submitted Assignments:"}),(0,_t.jsx)("span",{children:(null===(n=r.assignmentSubmissions)||void 0===n?void 0:n.length)||0})]}),(0,_t.jsxs)("div",{className:"info-group",children:[(0,_t.jsx)("label",{children:"Submitted Exams:"}),(0,_t.jsx)("span",{children:(null===(i=r.examSubmissions)||void 0===i?void 0:i.length)||0})]})]}),r.assignmentSubmissions&&r.assignmentSubmissions.length>0&&(0,_t.jsxs)("div",{className:"submissions-section",children:[(0,_t.jsx)("h3",{children:"Assignment Submissions"}),(0,_t.jsx)("div",{className:"submissions-list",children:r.assignmentSubmissions.map((e,t)=>(0,_t.jsxs)("div",{className:"submission-item",children:[(0,_t.jsxs)("div",{className:"submission-header",children:[(0,_t.jsxs)("h4",{children:["Assignment: ",e.assignmentname||"Submission #".concat(t+1)]}),(0,_t.jsx)("span",{className:"status ".concat(void 0!==e.score?"marked":"pending"),children:void 0!==e.score?"Score: ".concat(e.score):"Pending"})]}),(0,_t.jsxs)("div",{className:"submission-details",children:[(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Submitted:"})," ",new Date(e.SubmitDate).toLocaleDateString()]}),e.notes&&(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Notes:"})," ",e.notes]}),e.teacherFeedback&&(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Feedback:"})," ",e.teacherFeedback]})]}),(0,_t.jsxs)("div",{className:"submission-actions",children:[(0,_t.jsx)("button",{className:"action-btn view",onClick:()=>m(e,"assignment"),children:"View"}),(0,_t.jsx)("button",{className:"action-btn delete",onClick:()=>g(e._id,"assignments/submission/delete",e.assignmentname),disabled:void 0!==e.score,children:"Delete"})]})]},e._id))})]}),r.examSubmissions&&r.examSubmissions.length>0&&(0,_t.jsxs)("div",{className:"submissions-section",children:[(0,_t.jsx)("h3",{children:"Exam Submissions"}),(0,_t.jsx)("div",{className:"submissions-list",children:r.examSubmissions.map((e,t)=>(0,_t.jsxs)("div",{className:"submission-item",children:[(0,_t.jsxs)("div",{className:"submission-header",children:[(0,_t.jsxs)("h4",{children:["Exam: ",e.examname||"Submission #".concat(t+1)]}),(0,_t.jsx)("span",{className:"status ".concat(null!==e.score?"scored":"pending"),children:null!==e.score?"Score: ".concat(e.score):"Pending"})]}),(0,_t.jsxs)("div",{className:"submission-details",children:[(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Submitted:"})," ",new Date(e.createdAt).toLocaleDateString()]}),e.notes&&(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Notes:"})," ",e.notes]}),e.teacherFeedback&&(0,_t.jsxs)("p",{children:[(0,_t.jsx)("strong",{children:"Feedback:"})," ",e.teacherFeedback]})]}),(0,_t.jsxs)("div",{className:"submission-actions",children:[(0,_t.jsx)("button",{className:"action-btn view",onClick:()=>m(e,"exam"),children:"View"}),(0,_t.jsx)("button",{className:"action-btn delete",onClick:()=>g(e._id,"exams/deleteSub",e.examname),disabled:null!==e.score,children:"Delete"})]})]},e._id))})]})]}),(0,_t.jsxs)(Ut(),{isOpen:d,onRequestClose:v,contentLabel:"View Marked Submission",className:"pdf-viewer-modal",overlayClassName:"pdf-viewer-modal-overlay",children:[h&&(0,_t.jsx)(xj,{pdfUrl:h.pdfUrl,annotationData:h.annotationData}),(0,_t.jsx)("button",{onClick:v,style:{position:"fixed",top:"20px",right:"20px",zIndex:2001,padding:"10px 20px",cursor:"pointer"},children:"Close"})]})]}):(0,_t.jsx)("div",{children:"Error loading profile"})},Cj="https://backend-edu-site-5cnm.vercel.app";Ut().setAppElement("#root");const _j=()=>{const[e,n]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),[o,l]=(0,t.useState)(null),[c,d]=(0,t.useState)([]),[u,h]=(0,t.useState)(!1),[f,p]=(0,t.useState)(!1),[g,m]=(0,t.useState)(null),[v,y]=(0,t.useState)(""),[b,x]=(0,t.useState)(!1),[w,S]=(0,t.useState)("info");(0,t.useEffect)(()=>{(async()=>{try{var e,t;const i=localStorage.getItem("token")||sessionStorage.getItem("token"),r=await fetch("".concat(Cj,"/student/profile"),{headers:{Authorization:"MonaEdu ".concat(i)}});if(!r.ok)throw new Error("Could not fetch student profile.");const s=null===(e=(await r.json()).data)||void 0===e||null===(t=e.groupId)||void 0===t?void 0:t._id;if(!s)throw new Error("Student is not assigned to a group.");const a=await fetch("".concat(Cj,"/sections?groupIds=").concat(s),{headers:{Authorization:"MonaEdu ".concat(i)}});if(!a.ok)throw new Error("Could not fetch sessions for your group.");const o=await a.json();n(o.data||[])}catch(i){a(i.message)}finally{r(!1)}})()},[]);const C=()=>{p(!1),m(null),y("")},_=e=>{switch(e.type){case"material":(async e=>{p(!0),x(!0),a(null),S("info");try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(Cj,"/material/").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok)throw new Error("Failed to fetch material details.");const i=await n.json();m(i),i.files&&i.files.length>0?y(i.files[0].url):y("")}catch(t){a(t.message)}finally{x(!1)}})(e.id);break;case"assignment":(async e=>{try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(Cj,"/assignments/download?assignmentId=").concat(e),{method:"GET",headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok){const e=await n.json().catch(()=>({}));return void(e.message&&e.message.includes("This Assignment is not available at this time")?window.alert("This assignment is currently outside of its scheduled time."):window.alert(e.message||"Failed to download assignment."))}const i=await n.blob(),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="assignment-".concat(e,".pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(s){console.error("Error downloading assignment:",s),a("Failed to download assignment")}})(e.id);break;case"exam":(async e=>{try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(Cj,"/exams/download?examId=").concat(e),{method:"GET",headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok){const e=await n.json().catch(()=>({}));return void(e.message&&e.message.includes("This exam is not available at this time")?window.alert("This exam is currently outside of its scheduled time."):window.alert(e.message||"Failed to download exam."))}const i=await n.blob(),r=window.URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="exam-".concat(e,".pdf"),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(s){console.error("Error downloading exam:",s),a("Failed to download exam")}})(e.id);break;default:alert("Unknown item type.")}},k=e=>{switch(e){case"exam":return Pt;case"assignment":return Nt;default:return $t}};return i?(0,_t.jsx)("div",{className:"loading",children:"Loading your sessions..."}):s?(0,_t.jsx)("div",{className:"error",children:s}):(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"sessions-student-page",children:[(0,_t.jsx)("h1",{children:"My Sessions"}),e.length>0?e.map(e=>(0,_t.jsxs)("div",{className:"session-accordion",children:[(0,_t.jsxs)("div",{className:"session-header ".concat(o===e._id?"expanded":""),onClick:()=>(async e=>{if(o===e)return l(null),void d([]);l(e),h(!0),a(null);try{const t=localStorage.getItem("token")||sessionStorage.getItem("token"),n=await fetch("".concat(Cj,"/sections/").concat(e),{headers:{Authorization:"MonaEdu ".concat(t)}});if(!n.ok)throw new Error("Failed to load session content.");const i=await n.json();d(i.data.content||[])}catch(t){a(t.message)}finally{h(!1)}})(e._id),children:[(0,_t.jsxs)("div",{className:"session-header-title",children:[(0,_t.jsx)("h2",{children:e.name}),(0,_t.jsx)("p",{children:e.description})]}),(0,_t.jsx)("span",{className:"session-toggle-icon",children:"\u25bc"})]}),o===e._id&&(0,_t.jsx)("div",{className:"session-content",children:u?(0,_t.jsx)("div",{className:"loading",children:"Loading content..."}):(0,_t.jsx)("ul",{className:"session-content-list",children:c.length>0?c.map(e=>(0,_t.jsxs)("li",{className:"session-content-item",children:[(0,_t.jsxs)("div",{className:"item-details",children:[(0,_t.jsx)("img",{src:k(e.type),alt:"".concat(e.type," icon"),className:"item-icon"}),(0,_t.jsx)("span",{className:"item-name",children:e.name})]}),(0,_t.jsx)("button",{className:"view-item-btn",onClick:()=>_(e),children:"material"===e.type?"View":"Download"})]},e.id)):(0,_t.jsx)("p",{children:"No items linked to this session yet."})})})]},e._id)):(0,_t.jsx)("p",{children:"No sessions have been assigned to your group yet."})]}),(0,_t.jsx)(Ut(),{isOpen:f,onRequestClose:C,contentLabel:"View Material",className:"material-modal",overlayClassName:"material-modal-overlay",children:b?(0,_t.jsx)("div",{className:"loading",children:"Loading..."}):g&&(0,_t.jsxs)(_t.Fragment,{children:[(0,_t.jsxs)("div",{className:"material-modal-header",children:[(0,_t.jsx)("h2",{children:g.name}),(0,_t.jsx)("button",{onClick:C,className:"close-modal-btn",children:"\xd7"})]}),(0,_t.jsxs)("div",{className:"material-modal-body ".concat("pdf"===w?"view-pdf":""),children:[(0,_t.jsxs)("div",{className:"content-sidebar",children:[(0,_t.jsx)("p",{className:"material-description",children:g.description}),(0,_t.jsxs)("div",{className:"resource-section",children:[(0,_t.jsx)("h3",{children:"Files"}),g.files&&g.files.length>0?(0,_t.jsx)("ul",{className:"resource-list",children:g.files.map((e,t)=>(0,_t.jsx)("li",{className:"resource-item",children:(0,_t.jsx)("button",{className:v===e.url?"active":"",onClick:()=>y(e.url),children:e.originalName||"File ".concat(t+1)})},t))}):(0,_t.jsx)("p",{className:"no-resources-message",children:"No files provided."})]}),(0,_t.jsxs)("div",{className:"resource-section",children:[(0,_t.jsx)("h3",{children:"Links"}),g.Links&&g.Links.length>0?(0,_t.jsx)("ul",{className:"resource-list",children:g.Links.map((e,t)=>(0,_t.jsx)("li",{className:"resource-item link-item",children:(0,_t.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t))}):(0,_t.jsx)("p",{className:"no-resources-message",children:"No links provided."})]})]}),(0,_t.jsx)("div",{className:"pdf-viewer-main",children:v?(0,_t.jsx)(By,{pdfUrl:v}):(0,_t.jsx)("div",{className:"loading",children:"No PDF to display."})})]}),(0,_t.jsxs)("div",{className:"mobile-view-switcher",children:[(0,_t.jsx)("button",{className:"info"===w?"active":"",onClick:()=>S("info"),children:"Info"}),(0,_t.jsx)("button",{className:"pdf"===w?"active":"",onClick:()=>S("pdf"),children:"PDF Viewer"})]})]})})]})},kj=()=>(0,_t.jsxs)("div",{className:"loading-overlay",children:[(0,_t.jsx)("div",{className:"loading-spinner"}),(0,_t.jsx)("p",{children:"You're already logged in. Redirecting..."})]});var Aj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ej=t.createContext&&t.createContext(Aj),jj=["attr","size","title"];function Tj(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oj(){return Oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Oj.apply(this,arguments)}function Mj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Pj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mj(Object(n),!0).forEach(function(t){Nj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Nj(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $j(e){return e&&e.map((e,n)=>t.createElement(e.tag,Pj({key:n},e.attr),$j(e.child)))}function Dj(e){return n=>t.createElement(Lj,Oj({attr:Pj({},e.attr)},n),$j(e.child))}function Lj(e){var n=n=>{var i,{attr:r,size:s,title:a}=e,o=Tj(e,jj),l=s||n.size||"1em";return n.className&&(i=n.className),e.className&&(i=(i?i+" ":"")+e.className),t.createElement("svg",Oj({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:i,style:Pj(Pj({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&t.createElement("title",null,a),e.children)};return void 0!==Ej?t.createElement(Ej.Consumer,null,e=>n(e)):n(Aj)}function Ij(e){return Dj({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"},child:[]}]})(e)}function Fj(e){return Dj({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}const Rj=()=>{const[e,n]=(0,t.useState)(""),[i,r]=(0,t.useState)(""),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),{login:f}=jt();return(0,_t.jsx)("div",{className:"auth-container",children:(0,_t.jsxs)("div",{className:"auth-box",children:[(0,_t.jsx)("h2",{children:"Welcome Back"}),o&&(0,_t.jsx)("div",{className:"error-message",children:o}),(0,_t.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),l(""),h(!0);try{const t=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/student/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:i})}),n=await t.json();n.token?await f(n.token,s):(l(n.Message||"Login failed"),h(!1))}catch(n){l("An error occurred during login. Please check your connection."),console.error("Login error:",n),h(!1)}},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Email:"}),(0,_t.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Password:"}),(0,_t.jsxs)("div",{className:"password-input-container",children:[(0,_t.jsx)("input",{type:c?"text":"password",value:i,onChange:e=>r(e.target.value),required:!0,className:"form-input"}),(0,_t.jsx)("span",{className:"password-toggle-icon",onClick:()=>d(!c),children:c?(0,_t.jsx)(Ij,{}):(0,_t.jsx)(Fj,{})})]})]}),(0,_t.jsx)("div",{className:"form-group remember-me",children:(0,_t.jsxs)("label",{className:"checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:s,onChange:e=>a(e.target.checked)}),(0,_t.jsx)("span",{children:"Remember Me"})]})}),(0,_t.jsx)("button",{type:"submit",className:"auth-button",disabled:u,children:u?(0,_t.jsx)("div",{className:"loading-spinner-small"}):"Login"})]}),(0,_t.jsxs)("div",{className:"auth-footer",children:[(0,_t.jsxs)("div",{className:"signup-link",children:["Don't have an account? ",(0,_t.jsx)(gt,{to:"/signup",children:"Sign Up"})]}),(0,_t.jsx)("div",{className:"teacher-login",children:(0,_t.jsx)(gt,{to:"/admin/login",className:"teacher-login-link",children:"Login as Teacher"})})]})]})})},Bj={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:2(?:(?:[0-26-9]\\d|3[0-8]|5[0135-9])\\d|4(?:[02-9]\\d|10))|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90))|7(?:[013-57-9]\\d|2[0-8])\\d)\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|[34]\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","(?:[025-7]\\d|44)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[024-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:01\\d|[24-689])\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","[1-467]\\d{9,10}|55[0-46-9]\\d{8}|[34]\\d{7}|55\\d{7,8}|(?:5[0-46-9]|[89]\\d)\\d{7,9}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[178]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-6]|7[246]|8[2-4]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|[78]"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["60|809"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9(?:10|[2-9])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-8]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-478])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|3[13])"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,"0|180020",0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-35])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0|180020","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","[2-69]\\d{8}|80\\d{5,7}|[1-79]\\d{7}|6\\d{6}",[7,8,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-589]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0|180020","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}",[6,7,8,9,10,11]],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0|180020","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[25-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"]],"0",0,"(000[2569]\\d{4,6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33622|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-6]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[2457]\\d|33|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-5]|8[0-7]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:20|9\\d)\\d{8}|[78]\\d{9,13}",[10,11,12,13,14],[["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:222|444|(?:55|8\\d)\\d|666|777|999)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[24-9]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[136]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[0-3]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,0,[["336(?:[013-9]\\d|2[013-9])\\d{5}|(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15-7]|6[0-35-79]|7[1-37-9]))\\d{7}",[10]],["9\\d{9}",[10]],["8(?:0[04]|108\\d{3})\\d{7}"],["80[39]\\d{7}",[10]],["808\\d{7}",[10]]],"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","(?:[15]\\d|800|92)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|[6-8]\\d|90)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-9]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-359]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|30|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[236-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:3052(?:0[0-8]|[1-9]\\d)|5056(?:[0-35-9]\\d|4[0-68]))\\d{4}|(?:2742|305[3-9]|(?:472|983)[2-47-9]|505[2-57-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[0135-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|2\\d{3,4}|(?:[49]\\d|80)\\d{5}",[4,5,6,7,8,9,10,11,12,13],[["(\\d{4,5})","$1",["21"]],["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|[579]\\d|63)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};var Wj={}.constructor;function zj(e){return void 0!==e&&null!==e&&e.constructor===Wj}function Hj(e){return Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hj(e)}function Uj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function Gj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Hj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Hj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hj(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return qj(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qj(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Xj(e){var t,n,i,r=Vj(Array.prototype.slice.call(e),4),s=r[0],a=r[1],o=r[2],l=r[3];if("string"!==typeof s)throw new TypeError("A text for parsing must be a string.");if(t=s,a&&"string"!==typeof a){if(!zj(a))throw new Error("Invalid second argument: ".concat(a));o?(n=a,i=o):i=a}else l?(n=o,i=l):(n=void 0,i=o),a&&(n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uj(Object(n),!0).forEach(function(t){Gj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({defaultCountry:a},n));return{text:t,options:n,metadata:i}}var Yj="0-9\uff10-\uff19\u0660-\u0669\u06f0-\u06f9",Kj="".concat("-\u2010-\u2015\u2212\u30fc\uff0d").concat("\uff0f/").concat("\uff0e.").concat(" \xa0\xad\u200b\u2060\u3000").concat("()\uff08\uff09\uff3b\uff3d\\[\\]").concat("~\u2053\u223c\uff5e");function Qj(e){return Qj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qj(e)}function Jj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Zj(i.key),i)}}function Zj(e){var t=function(e,t){if("object"!=Qj(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Qj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qj(t)?t:t+""}function eT(e,t,n){return t=rT(t),function(e,t){if(t&&("object"==Qj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,nT()?Reflect.construct(t,n||[],rT(e).constructor):t.apply(e,n))}function tT(e){var t="function"==typeof Map?new Map:void 0;return tT=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(Vy){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(nT())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,t);var r=new(e.bind.apply(e,i));return n&&iT(r,n.prototype),r}(e,arguments,rT(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),iT(n,e)},tT(e)}function nT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nT=function(){return!!e})()}function iT(e,t){return iT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},iT(e,t)}function rT(e){return rT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},rT(e)}var sT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=eT(this,t,[e]),Object.setPrototypeOf(n,t.prototype),n.name=n.constructor.name,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iT(e,t)}(t,e),function(e,t,n){return t&&Jj(e.prototype,t),n&&Jj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(tT(Error));function aT(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),i=t[0].split("."),r=0;r<3;r++){var s=Number(n[r]),a=Number(i[r]);if(s>a)return 1;if(a>s)return-1;if(!isNaN(s)&&isNaN(a))return 1;if(isNaN(s)&&!isNaN(a))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}function oT(e){return oT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oT(e)}function lT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,uT(i.key),i)}}function dT(e,t,n){return t&&cT(e.prototype,t),n&&cT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function uT(e){var t=function(e,t){if("object"!=oT(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=oT(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oT(t)?t:t+""}var hT=" ext. ",fT=/^\d+$/,pT=function(){return dT(function e(t){lT(this,e),xT(t),this.metadata=t,_T.call(this,t)},[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(e){return"001"!==e})}},{key:"getCountryMetadata",value:function(e){return this.metadata.countries[e]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(e){return void 0!==this.getCountryMetadata(e)}},{key:"hasCallingCode",value:function(e){if(this.getCountryCodesForCallingCode(e))return!0;if(this.nonGeographic()){if(this.nonGeographic()[e])return!0}else{var t=this.countryCallingCodes()[e];if(t&&1===t.length&&"001"===t[0])return!0}}},{key:"isNonGeographicCallingCode",value:function(e){return this.nonGeographic()?!!this.nonGeographic()[e]:!this.getCountryCodesForCallingCode(e)}},{key:"country",value:function(e){return this.selectNumberingPlan(e)}},{key:"selectNumberingPlan",value:function(e,t){if(e&&fT.test(e)&&(t=e,e=null),e&&"001"!==e){if(!this.hasCountry(e))throw new Error("Unknown country: ".concat(e));this.numberingPlan=new gT(this.getCountryMetadata(e),this)}else if(t){if(!this.hasCallingCode(t))throw new Error("Unknown calling code: ".concat(t));this.numberingPlan=new gT(this.getNumberingPlanMetadata(t),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(e){var t=this.countryCallingCodes()[e];if(t){if(1===t.length&&3===t[0].length)return;return t}}},{key:"getCountryCodeForCallingCode",value:function(e){var t=this.getCountryCodesForCallingCode(e);if(t)return t[0]}},{key:"getNumberingPlanMetadata",value:function(e){var t=this.getCountryCodeForCallingCode(e);if(t)return this.getCountryMetadata(t);if(this.nonGeographic()){var n=this.nonGeographic()[e];if(n)return n}else{var i=this.countryCallingCodes()[e];if(i&&1===i.length&&"001"===i[0])return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(e){return this.numberingPlan.type(e)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(e){return this.selectNumberingPlan(e)}},{key:"hasSelectedNumberingPlan",value:function(){return void 0!==this.numberingPlan}}])}(),gT=function(){return dT(function e(t,n){lT(this,e),this.globalMetadataObject=n,this.metadata=t,_T.call(this,n.metadata)},[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!this.v1&&!this.v2)return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(e){return e[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var e=this,t=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return t.map(function(t){return new mT(t,e)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(e){return e[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return(!this.types()||0!==this.types().length)&&!!this.types()}},{key:"type",value:function(e){if(this.hasTypes()&&bT(this.types(),e))return new yT(bT(this.types(),e),this)}},{key:"ext",value:function(){return this.v1||this.v2?hT:this.metadata[13]||hT}}])}(),mT=function(){return dT(function e(t,n){lT(this,e),this._format=t,this.metadata=n},[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!(!this.nationalPrefixFormattingRule()||vT.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}])}(),vT=/^\(?\$1\)?$/,yT=function(){return dT(function e(t,n){lT(this,e),this.type=t,this.metadata=n},[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}])}();function bT(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function xT(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!zj(e)||!zj(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(zj(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+wT(e)+": "+e,"."))}var wT=function(e){return oT(e)};function ST(e,t){if((t=new pT(t)).hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function CT(e,t){return t.countries.hasOwnProperty(e)}function _T(e){var t=e.version;"number"===typeof t?(this.v1=1===t,this.v2=2===t,this.v3=3===t,this.v4=4===t):t?-1===aT(t,"1.2.0")?this.v2=!0:-1===aT(t,"1.7.35")?this.v3=!0:this.v4=!0:this.v1=!0}var kT=function(e){return"([".concat(Yj,"]{1,").concat(e,"})")};function AT(e){var t="[ \xa0\\t,]*",n="[:\\.\uff0e]?[ \xa0\\t,-]*",i="#?",r="[ \xa0\\t]*";return";ext="+kT("20")+"|"+(t+"(?:e?xt(?:ensi(?:o\u0301?|\xf3))?n?|\uff45?\uff58\uff54\uff4e?|\u0434\u043e\u0431|anexo)"+n+kT("20")+i)+"|"+(t+"(?:[x\uff58#\uff03~\uff5e]|int|\uff49\uff4e\uff54)"+n+kT("9")+i)+"|"+("[- ]+"+kT("6")+"#")+"|"+(r+"(?:,{2}|;)"+n+kT("15")+i)+"|"+(r+"(?:,)+"+n+kT("9")+i)}var ET="["+Yj+"]{2}",jT="[+\uff0b]{0,1}(?:["+Kj+"]*["+Yj+"]){3,}["+Kj+Yj+"]*",TT=new RegExp("^[+\uff0b]{0,1}(?:["+Kj+"]*["+Yj+"]){1,2}$","i"),OT=jT+"(?:"+AT()+")?",MT=new RegExp("^"+ET+"$|^"+OT+"$","i");var PT=new RegExp("(?:"+AT()+")$","i");function NT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var DT={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","\uff10":"0","\uff11":"1","\uff12":"2","\uff13":"3","\uff14":"4","\uff15":"5","\uff16":"6","\uff17":"7","\uff18":"8","\uff19":"9","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u06f0":"0","\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9"};function LT(e){return DT[e]}function IT(e){for(var t,n="",i=NT(e.split(""));!(t=i()).done;){var r=LT(t.value);r&&(n+=r)}return n}function FT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return RT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RT(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function RT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function BT(e){for(var t,n="",i=FT(e.split(""));!(t=i()).done;){n+=WT(t.value,n)||""}return n}function WT(e,t,n){return"+"===e?t?void("function"===typeof n&&n("end")):"+":LT(e)}function zT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return HT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HT(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function HT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function UT(e,t){return GT(e,void 0,t)}function GT(e,t,n){var i=n.type(t),r=i&&i.possibleLengths()||n.possibleLengths();if(!r)return"IS_POSSIBLE";if("FIXED_LINE_OR_MOBILE"===t){if(!n.type("FIXED_LINE"))return GT(e,"MOBILE",n);var s=n.type("MOBILE");s&&(r=function(e,t){for(var n,i=e.slice(),r=zT(t);!(n=r()).done;){var s=n.value;e.indexOf(s)<0&&i.push(s)}return i.sort(function(e,t){return e-t})}(r,s.possibleLengths()))}else if(t&&!i)return"INVALID_LENGTH";var a=e.length,o=r[0];return o===a?"IS_POSSIBLE":o>a?"TOO_SHORT":r[r.length-1]<a?"TOO_LONG":r.indexOf(a,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function VT(e,t){return"IS_POSSIBLE"===UT(e,t)}function qT(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function XT(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return YT(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?YT(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function YT(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var KT=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function QT(e,t,n){if(t=t||{},e.country||e.countryCallingCode){(n=new pT(n)).selectNumberingPlan(e.country,e.countryCallingCode);var i=t.v2?e.nationalNumber:e.phone;if(qT(i,n.nationalNumberPattern())){if(JT(i,"FIXED_LINE",n))return n.type("MOBILE")&&""===n.type("MOBILE").pattern()?"FIXED_LINE_OR_MOBILE":n.type("MOBILE")?JT(i,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE":"FIXED_LINE_OR_MOBILE";for(var r,s=XT(KT);!(r=s()).done;){var a=r.value;if(JT(i,a,n))return a}}}}function JT(e,t,n){return!(!(t=n.type(t))||!t.pattern())&&(!(t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0)&&qT(e,t.pattern()))}function ZT(e,t,n){var i=new pT(n).getCountryCodesForCallingCode(e);return i?i.filter(function(e){return function(e,t,n){var i=new pT(n);if(i.selectNumberingPlan(t),i.numberingPlan.possibleLengths().indexOf(e.length)>=0)return!0;return!1}(t,e,n)}):[]}var eO=new RegExp("(["+Yj+"])");function tO(e,t,n,i){if(t){var r=new pT(i);r.selectNumberingPlan(t,n);var s=new RegExp(r.IDDPrefix());if(0===e.search(s)){var a=(e=e.slice(e.match(s)[0].length)).match(eO);if(!(a&&null!=a[1]&&a[1].length>0&&"0"===a[1]))return e}}}function nO(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),i=n.exec(e);if(i){var r,s,a,o=i.length-1,l=o>0&&i[o];if(t.nationalPrefixTransformRule()&&l)r=e.replace(n,t.nationalPrefixTransformRule()),o>1&&(s=i[1]);else{var c=i[0];r=e.slice(c.length),l&&(s=i[1])}if(l){var d=e.indexOf(i[1]);e.slice(0,d)===t.numberingPlan.nationalPrefix()&&(a=t.numberingPlan.nationalPrefix())}else a=i[0];return{nationalNumber:r,nationalPrefix:a,carrierCode:s}}}return{nationalNumber:e}}function iO(e,t){var n=nO(e,t),i=n.carrierCode,r=n.nationalNumber;if(r!==e){if(!function(e,t,n){if(qT(e,n.nationalNumberPattern())&&!qT(t,n.nationalNumberPattern()))return!1;return!0}(e,r,t))return{nationalNumber:e};if(t.possibleLengths()&&!function(e,t){switch(UT(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}(r,t))return{nationalNumber:e}}return{nationalNumber:r,carrierCode:i}}function rO(e,t,n,i){var r=t?ST(t,i):n;if(0===e.indexOf(r)){(i=new pT(i)).selectNumberingPlan(t,n);var s=e.slice(r.length),a=iO(s,i).nationalNumber,o=iO(e,i).nationalNumber;if(!qT(o,i.nationalNumberPattern())&&qT(a,i.nationalNumberPattern())||"TOO_LONG"===UT(o,i))return{countryCallingCode:r,number:s}}return{number:e}}function sO(e,t,n,i){if(!e)return{};var r;if("+"!==e[0]){var s=tO(e,t,n,i);if(!s||s===e){if(t||n){var a=rO(e,t,n,i),o=a.countryCallingCode,l=a.number;if(o)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:o,number:l}}return{number:e}}r=!0,e="+"+s}if("0"===e[1])return{};i=new pT(i);for(var c=2;c-1<=3&&c<=e.length;){var d=e.slice(1,c);if(i.hasCallingCode(d))return i.selectNumberingPlan(d),{countryCallingCodeSource:r?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:d,number:e.slice(c)};c++}return{}}function aO(e){return e.replace(new RegExp("[".concat(Kj,"]+"),"g")," ").trim()}var oO=/(\$\d)/;function lO(e,t,n){var i=n.useInternationalFormat,r=n.withNationalPrefix,s=(n.carrierCode,n.metadata,e.replace(new RegExp(t.pattern()),i?t.internationalFormat():r&&t.nationalPrefixFormattingRule()?t.format().replace(oO,t.nationalPrefixFormattingRule()):t.format()));return i?aO(s):s}var cO=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function dO(e){return dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dO(e)}function uO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return hO(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function fO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function pO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fO(Object(n),!0).forEach(function(t){gO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=dO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=dO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mO={formatExtension:function(e,t,n){return"".concat(e).concat(n.ext()).concat(t)}};function vO(e,t,n,i){if(n=n?pO(pO({},mO),n):mO,i=new pT(i),e.country&&"001"!==e.country){if(!i.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));i.country(e.country)}else{if(!e.countryCallingCode)return e.phone||"";i.selectNumberingPlan(e.countryCallingCode)}var r,s=i.countryCallingCode(),a=n.v2?e.nationalNumber:e.phone;switch(t){case"NATIONAL":return a?bO(r=yO(a,e.carrierCode,"NATIONAL",i,n),e.ext,i,n.formatExtension):"";case"INTERNATIONAL":return a?(r=yO(a,null,"INTERNATIONAL",i,n),bO(r="+".concat(s," ").concat(r),e.ext,i,n.formatExtension)):"+".concat(s);case"E.164":return"+".concat(s).concat(a);case"RFC3966":return function(e){var t=e.number,n=e.ext;if(!t)return"";if("+"!==t[0])throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}({number:"+".concat(s).concat(a),ext:e.ext});case"IDD":if(!n.fromCountry)return;var o=function(e,t,n,i,r){var s=ST(i,r.metadata);if(s===n){var a=yO(e,t,"NATIONAL",r);return"1"===n?n+" "+a:a}var o=function(e,t,n){var i=new pT(n);return i.selectNumberingPlan(e,t),i.defaultIDDPrefix()?i.defaultIDDPrefix():cO.test(i.IDDPrefix())?i.IDDPrefix():void 0}(i,void 0,r.metadata);if(o)return"".concat(o," ").concat(n," ").concat(yO(e,null,"INTERNATIONAL",r))}(a,e.carrierCode,s,n.fromCountry,i);return bO(o,e.ext,i,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function yO(e,t,n,i,r){var s=function(e,t){for(var n,i=uO(e);!(n=i()).done;){var r=n.value;if(r.leadingDigitsPatterns().length>0){var s=r.leadingDigitsPatterns()[r.leadingDigitsPatterns().length-1];if(0!==t.search(s))continue}if(qT(t,r.pattern()))return r}}(i.formats(),e);return s?lO(e,s,{useInternationalFormat:"INTERNATIONAL"===n,withNationalPrefix:!s.nationalPrefixIsOptionalWhenFormattingInNationalFormat()||!r||!1!==r.nationalPrefix,carrierCode:t,metadata:i}):e}function bO(e,t,n,i){return t?i(e,t,n):e}function xO(e){return xO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xO(e)}function wO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function SO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wO(Object(n),!0).forEach(function(t){CO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CO(e,t,n){return(t=kO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,kO(i.key),i)}}function kO(e){var t=function(e,t){if("object"!=xO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=xO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xO(t)?t:t+""}var AO=function(){return function(e,t,n){return t&&_O(e.prototype,t),n&&_O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new TypeError("First argument is required");if("string"!==typeof t)throw new TypeError("First argument must be a string");if("+"===t[0]&&!n)throw new TypeError("`metadata` argument not passed");if(zj(n)&&zj(n.countries)){i=n;var r=t;if(!jO.test(r))throw new Error('Invalid `number` argument passed: must consist of a "+" followed by digits');var s=sO(r,void 0,void 0,i);if(t=s.countryCallingCode,!(n=s.number))throw new Error("Invalid `number` argument passed: too short")}if(!n)throw new TypeError("`nationalNumber` argument is required");if("string"!==typeof n)throw new TypeError("`nationalNumber` argument must be a string");xT(i);var a=function(e,t){var n,i,r=new pT(t);EO(e)?(n=e,r.selectNumberingPlan(n),i=r.countryCallingCode()):i=e;return{country:n,countryCallingCode:i}}(t,i),o=a.country,l=a.countryCallingCode;this.country=o,this.countryCallingCode=l,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return i}},[{key:"setExt",value:function(e){this.ext=e}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:ZT(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return function(e,t,n){if(void 0===t&&(t={}),n=new pT(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return VT(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return function(e,t,n){return t=t||{},(n=new pT(n)).selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes()?void 0!==QT(e,t,n.metadata):qT(t.v2?e.nationalNumber:e.phone,n.nationalNumberPattern())}(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){return new pT(this.getMetadata()).isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(e){return this.number===e.number&&this.ext===e.ext}},{key:"getType",value:function(){return QT(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(e,t){return vO(this,e,t?SO(SO({},t),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(e){return this.format("NATIONAL",e)}},{key:"formatInternational",value:function(e){return this.format("INTERNATIONAL",e)}},{key:"getURI",value:function(e){return this.format("RFC3966",e)}}])}(),EO=function(e){return/^[A-Z]{2}$/.test(e)};var jO=/^\+\d+$/;function TO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return OO(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function OO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function MO(e,t){var n=t.countries,i=(t.defaultCountry,t.metadata);i=new pT(i);for(var r,s=TO(n);!(r=s()).done;){var a=r.value;if(i.country(a),i.leadingDigits()){if(e&&0===e.search(i.leadingDigits()))return a}else if(QT({phone:e,country:a},void 0,i.metadata))return a}}function PO(e,t){var n=t.nationalNumber,i=t.defaultCountry,r=t.metadata;var s=r.getCountryCodesForCallingCode(e);if(s)return 1===s.length?s[0]:MO(n,{countries:s,defaultCountry:i,metadata:r.metadata})}var NO="(["+Yj+"]|[\\-\\.\\(\\)]?)",$O=new RegExp("^\\+"+NO+"*["+Yj+"]"+NO+"*$","g"),DO=new RegExp("^("+("["+Yj+"]+((\\-)*["+Yj+"])*")+"\\.)*"+("[a-zA-Z]+((\\-)*["+Yj+"])*")+"\\.?$","g"),LO="tel:",IO=";phone-context=";function FO(e,t){var n,i=t.extractFormattedPhoneNumber,r=function(e){var t=e.indexOf(IO);if(t<0)return null;var n=t+15;if(n>=e.length)return"";var i=e.indexOf(";",n);return i>=0?e.substring(n,i):e.substring(n)}(e);if(!function(e){return null===e||0!==e.length&&($O.test(e)||DO.test(e))}(r))throw new sT("NOT_A_NUMBER");if(null===r)n=i(e)||"";else{n="","+"===r.charAt(0)&&(n+=r);var s,a=e.indexOf(LO);s=a>=0?a+4:0;var o=e.indexOf(IO);n+=e.substring(s,o)}var l=n.indexOf(";isub=");if(l>0&&(n=n.substring(0,l)),""!==n)return n}var RO=new RegExp("[+\uff0b"+Yj+"]"),BO=new RegExp("[^"+Yj+"#]+$");function WO(e,t,n){if(t=t||{},n=new pT(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry)){if(t.v2)throw new sT("INVALID_COUNTRY");throw new Error("Unknown country: ".concat(t.defaultCountry))}var i=function(e,t,n){var i=FO(e,{extractFormattedPhoneNumber:function(e){return function(e,t,n){if(!e)return;if(e.length>250){if(n)throw new sT("TOO_LONG");return}if(!1===t)return e;var i=e.search(RO);if(i<0)return;return e.slice(i).replace(BO,"")}(e,n,t)}});if(!i)return{};if(!function(e){return e.length>=2&&MT.test(e)}(i))return function(e){return TT.test(e)}(i)?{error:"TOO_SHORT"}:{};var r=function(e){var t=e.search(PT);if(t<0)return{};for(var n=e.slice(0,t),i=e.match(PT),r=1;r<i.length;){if(i[r])return{number:n,ext:i[r]};r++}}(i);if(r.ext)return r;return{number:i}}(e,t.v2,t.extract),r=i.number,s=i.ext,a=i.error;if(!r){if(t.v2){if("TOO_SHORT"===a)throw new sT("TOO_SHORT");throw new sT("NOT_A_NUMBER")}return{}}var o=function(e,t,n,i){var r,s=sO(BT(e),t,n,i.metadata),a=s.countryCallingCodeSource,o=s.countryCallingCode,l=s.number;if(o)i.selectNumberingPlan(o);else{if(!l||!t&&!n)return{};i.selectNumberingPlan(t,n),t&&(r=t),o=n||ST(t,i.metadata)}if(!l)return{countryCallingCodeSource:a,countryCallingCode:o};var c=iO(BT(l),i),d=c.nationalNumber,u=c.carrierCode,h=PO(o,{nationalNumber:d,defaultCountry:t,metadata:i});h&&(r=h,"001"===h||i.country(r));return{country:r,countryCallingCode:o,countryCallingCodeSource:a,nationalNumber:d,carrierCode:u}}(r,t.defaultCountry,t.defaultCallingCode,n),l=o.country,c=o.nationalNumber,d=o.countryCallingCode,u=o.countryCallingCodeSource,h=o.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new sT("INVALID_COUNTRY");return{}}if(!c||c.length<2){if(t.v2)throw new sT("TOO_SHORT");return{}}if(c.length>17){if(t.v2)throw new sT("TOO_LONG");return{}}if(t.v2){var f=new AO(d,c,n.metadata);return l&&(f.country=l),h&&(f.carrierCode=h),s&&(f.ext=s),f.__countryCallingCodeSource=u,f}var p=!!(t.extended?n.hasSelectedNumberingPlan():l)&&qT(c,n.nationalNumberPattern());return t.extended?{country:l,countryCallingCode:d,carrierCode:h,valid:p,possible:!!p||!(!0!==t.extended||!n.possibleLengths()||!VT(c,n)),phone:c,ext:s}:p?function(e,t,n){var i={country:e,phone:t};n&&(i.ext=n);return i}(l,c,s):{}}function zO(e){return zO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zO(e)}function HO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function UO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HO(Object(n),!0).forEach(function(t){GO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function GO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=zO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=zO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VO(e){return VO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},VO(e)}function qO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function XO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qO(Object(n),!0).forEach(function(t){YO(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function YO(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=VO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=VO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==VO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KO(e,t,n){t&&t.defaultCountry&&!CT(t.defaultCountry,n)&&(t=XO(XO({},t),{},{defaultCountry:void 0}));try{return function(e,t,n){return WO(e,UO(UO({},t),{},{v2:!0}),n)}(e,t,n)}catch(i){if(!(i instanceof sT))throw i}}function QO(e){return QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QO(e)}function JO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function ZO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?JO(Object(n),!0).forEach(function(t){eM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eM(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=QO(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=QO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==QO(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tM(){var e=Xj(arguments),t=e.text,n=e.options,i=e.metadata,r=KO(t,n=ZO(ZO({},n),{},{extract:!1}),i);return r&&r.isValid()||!1}const nM={ext:"ext.",country:"Phone number country",phone:"Phone",AB:"Abkhazia",AC:"Ascension Island",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\xc5land Islands",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barth\xe9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (Keeling) Islands",CD:"Congo, Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"Cote d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xe7ao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Federated States of Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"Saint Martin (French Part)",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",OS:"South Ossetia",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestine",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Serbia",RU:"Russia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Swaziland",TA:"Tristan da Cunha",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe",ZZ:"International"};var iM=n(173),rM=iM.shape({country_calling_codes:iM.object.isRequired,countries:iM.object.isRequired}),sM=iM.objectOf(iM.string),aM=n(139);function oM(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return lM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lM(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function cM(e,t){for(var n,i=0,r=oM(t.split(""));!(n=r()).done;){n.value===e&&i++}return i}function dM(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return uM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uM(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function uM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function hM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=arguments.length>2?arguments[2]:void 0;if(!e)return function(e){return{text:e}};var i=cM(t,e);return function(r){if(!r)return{text:"",template:e};for(var s,a=0,o="",l=dM(e.split(""));!(s=l()).done;){var c=s.value;if(c===t){if(o+=r[a],++a===r.length&&r.length<i)break}else o+=c}return n&&(o=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",r=e.length,s=cM("(",e)-cM(")",e);s>0&&r<t.length;)e+=t[r].replace(n,i),")"===t[r]&&s--,r++;return e}(o,e)),{text:o,template:e}}}var fM=8,pM=46;function gM(e,t){void 0!==t&&(!function(){if("undefined"!==typeof navigator)return mM.test(navigator.userAgent)}()?e.setSelectionRange(t,t):setTimeout(function(){return e.setSelectionRange(t,t)},0))}var mM=/Android/i;function vM(e,t,n,i,r){if(!t.hasAttribute("readonly")){var s=function(e){switch(e.keyCode){case fM:return"Backspace";case pM:return"Delete"}}(e);switch(s){case"Delete":case"Backspace":e.preventDefault();var a=function(e){if(e.selectionStart!==e.selectionEnd)return{start:e.selectionStart,end:e.selectionEnd}}(t);return a?(yM(t,a),bM(t,n,i,void 0,r)):bM(t,n,i,s,r)}}}function yM(e,t){var n=e.value;n=n.slice(0,t.start)+n.slice(t.end),e.value=n,gM(e,t.start)}function bM(e,t,n,i,r){var s=function(e,t,n){for(var i={},r="",s=0,a=0;a<e.length;){var o=n(e[a],r,i);void 0!==o&&(r+=o,void 0!==t&&(t===a?s=r.length-1:t>a&&(s=r.length))),a++}return void 0===t&&(s=r.length),{value:r,caret:s}}(e.value,e.selectionStart,t),a=s.value,o=s.caret;if(i){var l=function(e,t,n){switch(n){case"Backspace":t>0&&(e=e.slice(0,t-1)+e.slice(t),t--);break;case"Delete":e=e.slice(0,t)+e.slice(t+1)}return{value:e,caret:t}}(a,o,i);a=l.value,o=l.caret}var c=function(e,t,n){"string"===typeof n&&(n=hM(n));var i=n(e)||{},r=i.text,s=i.template;if(void 0===r&&(r=e),s)if(void 0===t)t=r.length;else{for(var a=0,o=!1,l=-1;a<r.length&&a<s.length;){if(r[a]!==s[a]){if(0===t){o=!0,t=a;break}l=a,t--}a++}o||(t=l+1)}return{text:r,caret:t}}(a,o,n),d=c.text;o=c.caret,e.value=d,gM(e,o),r&&r(a)}var xM=["ref","parse","format","value","defaultValue","controlled","onChange","onKeyDown"];function wM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function SM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wM(Object(n),!0).forEach(function(t){CM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _M(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kM(e){var n=e.ref,i=e.parse,r=e.format,s=e.value,a=e.defaultValue,o=e.controlled,l=void 0===o||o,c=e.onChange,d=e.onKeyDown,u=_M(e,xM),h=(0,t.useRef)(),f=(0,t.useCallback)(function(e){h.current=e,n&&("function"===typeof n?n(e):n.current=e)},[n]),p=(0,t.useCallback)(function(e){bM(h.current,i,r,void 0,c)},[h,i,r,c]),g=(0,t.useCallback)(function(e){if(d&&d(e),!e.defaultPrevented)return vM(e,h.current,i,r,c)},[h,i,r,c,d]),m=SM(SM({},u),{},{ref:f,onChange:p,onKeyDown:g});return SM(SM({},m),{},l?{value:r(AM(s)?"":s).text}:{defaultValue:r(AM(a)?"":a).text})}function AM(e){return void 0===e||null===e}var EM=["inputComponent","parse","format","value","defaultValue","onChange","controlled","onKeyDown","type"];function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function TM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OM(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MM(e,n){var i=e.inputComponent,r=void 0===i?"input":i,s=e.parse,a=e.format,o=e.value,l=e.defaultValue,c=e.onChange,d=e.controlled,u=e.onKeyDown,h=e.type,f=kM(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(n),!0).forEach(function(t){TM(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ref:n,parse:s,format:a,value:o,defaultValue:l,onChange:c,controlled:d,onKeyDown:u,type:void 0===h?"text":h},OM(e,EM)));return t.createElement(r,f)}(MM=t.forwardRef(MM)).propTypes={parse:iM.func.isRequired,format:iM.func.isRequired,inputComponent:iM.elementType,type:iM.string,value:iM.string,defaultValue:iM.string,onChange:iM.func,controlled:iM.bool,onKeyDown:iM.func,onCut:iM.func,onPaste:iM.func};const PM=MM;function NM(e){return NM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NM(e)}function $M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,DM(i.key),i)}}function DM(e){var t=function(e,t){if("object"!=NM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=NM(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==NM(t)?t:t+""}var LM=function(){return function(e,t,n){return t&&$M(e.prototype,t),n&&$M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=t.onCountryChange,i=t.onCallingCodeChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onCountryChange=n,this.onCallingCodeChange=i},[{key:"reset",value:function(e){var t=e.country,n=e.callingCode;this.international=!1,this.missingPlus=!1,this.IDDPrefix=void 0,this.callingCode=void 0,this.digits="",this.resetNationalSignificantNumber(),this.initCountryAndCallingCode(t,n)}},{key:"resetNationalSignificantNumber",value:function(){this.nationalSignificantNumber=this.getNationalDigits(),this.nationalSignificantNumberMatchesInput=!0,this.nationalPrefix=void 0,this.carrierCode=void 0,this.complexPrefixBeforeNationalSignificantNumber=void 0}},{key:"update",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];this[i]=e[i]}}},{key:"initCountryAndCallingCode",value:function(e,t){this.setCountry(e),this.setCallingCode(t)}},{key:"setCountry",value:function(e){this.country=e,this.onCountryChange(e)}},{key:"setCallingCode",value:function(e){this.callingCode=e,this.onCallingCodeChange(e,this.country)}},{key:"startInternationalNumber",value:function(e,t){this.international=!0,this.initCountryAndCallingCode(e,t)}},{key:"appendDigits",value:function(e){this.digits+=e}},{key:"appendNationalSignificantNumberDigits",value:function(e){this.nationalSignificantNumber+=e}},{key:"getNationalDigits",value:function(){return this.international?this.digits.slice((this.IDDPrefix?this.IDDPrefix.length:0)+(this.callingCode?this.callingCode.length:0)):this.digits}},{key:"getDigitsWithoutInternationalPrefix",value:function(){return this.international&&this.IDDPrefix?this.digits.slice(this.IDDPrefix.length):this.digits}}])}();function IM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return FM(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?FM(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function FM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var RM="x",BM=new RegExp(RM);function WM(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function zM(e,t){return")"===e[t]&&t++,function(e){var t=[],n=0;for(;n<e.length;)"("===e[n]?t.push(n):")"===e[n]&&t.pop(),n++;var i=0,r="";t.push(e.length);for(var s=0,a=t;s<a.length;s++){var o=a[s];r+=e.slice(i,o),i=o+1}return r}(e.slice(0,t))}function HM(e,t,n){var i=n.metadata,r=n.shouldTryNationalPrefixFormattingRule,s=n.getSeparatorAfterNationalPrefix;if(new RegExp("^(?:".concat(t.pattern(),")$")).test(e.nationalSignificantNumber))return function(e,t,n){var i=n.metadata,r=n.shouldTryNationalPrefixFormattingRule,s=n.getSeparatorAfterNationalPrefix;e.nationalSignificantNumber,e.international,e.nationalPrefix,e.carrierCode;if(r(t)){var a=UM(e,t,{useNationalPrefixFormattingRule:!0,getSeparatorAfterNationalPrefix:s,metadata:i});if(a)return a}return UM(e,t,{useNationalPrefixFormattingRule:!1,getSeparatorAfterNationalPrefix:s,metadata:i})}(e,t,{metadata:i,shouldTryNationalPrefixFormattingRule:r,getSeparatorAfterNationalPrefix:s})}function UM(e,t,n){var i=n.metadata,r=n.useNationalPrefixFormattingRule,s=n.getSeparatorAfterNationalPrefix,a=lO(e.nationalSignificantNumber,t,{carrierCode:e.carrierCode,useInternationalFormat:e.international,withNationalPrefix:r,metadata:i});if(r||(e.nationalPrefix?a=e.nationalPrefix+s(t)+a:e.complexPrefixBeforeNationalSignificantNumber&&(a=e.complexPrefixBeforeNationalSignificantNumber+" "+a)),function(e,t){return IT(e)===t.getNationalDigits()}(a,e))return a}function GM(e){return GM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GM(e)}function VM(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,qM(i.key),i)}}function qM(e){var t=function(e,t){if("object"!=GM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=GM(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==GM(t)?t:t+""}var XM=function(){return function(e,t,n){return t&&VM(e.prototype,t),n&&VM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},[{key:"parse",value:function(e){if(this.context=[{or:!0,instructions:[]}],this.parsePattern(e),1!==this.context.length)throw new Error("Non-finalized contexts left when pattern parse ended");var t=this.context[0],n=t.branches,i=t.instructions;if(n)return{op:"|",args:n.concat([JM(i)])};if(0===i.length)throw new Error("Pattern is required");return 1===i.length?i[0]:i}},{key:"startContext",value:function(e){this.context.push(e)}},{key:"endContext",value:function(){this.context.pop()}},{key:"getContext",value:function(){return this.context[this.context.length-1]}},{key:"parsePattern",value:function(e){if(!e)throw new Error("Pattern is required");var t=e.match(QM);if(t){var n=t[1],i=e.slice(0,t.index),r=e.slice(t.index+n.length);switch(n){case"(?:":i&&this.parsePattern(i),this.startContext({or:!0,instructions:[],branches:[]});break;case")":if(!this.getContext().or)throw new Error('")" operator must be preceded by "(?:" operator');if(i&&this.parsePattern(i),0===this.getContext().instructions.length)throw new Error('No instructions found after "|" operator in an "or" group');var s=this.getContext().branches;s.push(JM(this.getContext().instructions)),this.endContext(),this.getContext().instructions.push({op:"|",args:s});break;case"|":if(!this.getContext().or)throw new Error('"|" operator can only be used inside "or" groups');if(i&&this.parsePattern(i),!this.getContext().branches){if(1!==this.context.length)throw new Error('"branches" not found in an "or" group context');this.getContext().branches=[]}this.getContext().branches.push(JM(this.getContext().instructions)),this.getContext().instructions=[];break;case"[":i&&this.parsePattern(i),this.startContext({oneOfSet:!0});break;case"]":if(!this.getContext().oneOfSet)throw new Error('"]" operator must be preceded by "[" operator');this.endContext(),this.getContext().instructions.push({op:"[]",args:YM(i)});break;default:throw new Error("Unknown operator: ".concat(n))}r&&this.parsePattern(r)}else{if(KM.test(e))throw new Error("Illegal characters found in a pattern: ".concat(e));this.getContext().instructions=this.getContext().instructions.concat(e.split(""))}}}])}();function YM(e){for(var t=[],n=0;n<e.length;){if("-"===e[n]){if(0===n||n===e.length-1)throw new Error("Couldn't parse a one-of set pattern: ".concat(e));for(var i=e[n-1].charCodeAt(0)+1,r=e[n+1].charCodeAt(0)-1,s=i;s<=r;)t.push(String.fromCharCode(s)),s++}else t.push(e[n]);n++}return t}var KM=/[\(\)\[\]\?\:\|]/,QM=new RegExp("(\\||\\(\\?\\:|\\)|\\[|\\])");function JM(e){return 1===e.length?e[0]:e}function ZM(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return eP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eP(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function tP(e){return tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tP(e)}function nP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,iP(i.key),i)}}function iP(e){var t=function(e,t){if("object"!=tP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=tP(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tP(t)?t:t+""}var rP=function(){return function(e,t,n){return t&&nP(e.prototype,t),n&&nP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matchTree=(new XM).parse(t)},[{key:"match",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).allowOverflow;if(!e)throw new Error("String is required");var n=sP(e.split(""),this.matchTree,!0);if(n&&n.match&&delete n.matchedChars,!n||!n.overflow||t)return n}}])}();function sP(e,t,n){if("string"===typeof t){var i=e.join("");return 0===t.indexOf(i)?e.length===t.length?{match:!0,matchedChars:e}:{partialMatch:!0}:0===i.indexOf(t)?n&&e.length>t.length?{overflow:!0}:{match:!0,matchedChars:e.slice(0,t.length)}:void 0}if(Array.isArray(t)){for(var r=e.slice(),s=0;s<t.length;){var a=sP(r,t[s],n&&s===t.length-1);if(!a)return;if(a.overflow)return a;if(!a.match){if(a.partialMatch)return{partialMatch:!0};throw new Error("Unsupported match result:\n".concat(JSON.stringify(a,null,2)))}if(0===(r=r.slice(a.matchedChars.length)).length)return s===t.length-1?{match:!0,matchedChars:e}:{partialMatch:!0};s++}return n?{overflow:!0}:{match:!0,matchedChars:e.slice(0,e.length-r.length)}}switch(t.op){case"|":for(var o,l,c=ZM(t.args);!(l=c()).done;){var d=sP(e,l.value,n);if(d){if(d.overflow)return d;if(d.match)return{match:!0,matchedChars:d.matchedChars};if(!d.partialMatch)throw new Error("Unsupported match result:\n".concat(JSON.stringify(d,null,2)));o=!0}}return o?{partialMatch:!0}:void 0;case"[]":for(var u,h=ZM(t.args);!(u=h()).done;){var f=u.value;if(e[0]===f)return 1===e.length?{match:!0,matchedChars:e}:n?{overflow:!0}:{match:!0,matchedChars:[f]}}return;default:throw new Error("Unsupported instruction tree: ".concat(t))}}function aP(e){return aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aP(e)}function oP(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return lP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lP(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function cP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,dP(i.key),i)}}function dP(e){var t=function(e,t){if("object"!=aP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=aP(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==aP(t)?t:t+""}var uP=WM("9",15),hP=/[- ]/,fP=function(){return/\[([^\[\]])*\]/g},pP=function(){return/\d(?=[^,}][^,}])/g},gP=new RegExp("["+Kj+"]*\\$1["+Kj+"]*(\\$\\d["+Kj+"]*)*$"),mP=function(){return function(e,t,n){return t&&cP(e.prototype,t),n&&cP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){t.state;var n=t.metadata;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=n,this.resetFormat()},[{key:"resetFormat",value:function(){this.chosenFormat=void 0,this.template=void 0,this.nationalNumberTemplate=void 0,this.populatedNationalNumberTemplate=void 0,this.populatedNationalNumberTemplatePosition=-1}},{key:"reset",value:function(e,t){this.resetFormat(),e?(this.isNANP="1"===e.callingCode(),this.matchingFormats=e.formats(),t.nationalSignificantNumber&&this.narrowDownMatchingFormats(t)):(this.isNANP=void 0,this.matchingFormats=[])}},{key:"format",value:function(e,t){var n=this;if(function(e,t){return"IS_POSSIBLE"===UT(e,t)}(t.nationalSignificantNumber,this.metadata))for(var i,r=oP(this.matchingFormats);!(i=r()).done;){var s=i.value,a=HM(t,s,{metadata:this.metadata,shouldTryNationalPrefixFormattingRule:function(e){return n.shouldTryNationalPrefixFormattingRule(e,{international:t.international,nationalPrefix:t.nationalPrefix})},getSeparatorAfterNationalPrefix:function(e){return n.getSeparatorAfterNationalPrefix(e)}});if(a)return this.resetFormat(),this.chosenFormat=s,this.setNationalNumberTemplate(a.replace(/\d/g,RM),t),this.populatedNationalNumberTemplate=a,this.populatedNationalNumberTemplatePosition=this.template.lastIndexOf(RM),a}return this.formatNationalNumberWithNextDigits(e,t)}},{key:"formatNationalNumberWithNextDigits",value:function(e,t){var n=this.chosenFormat,i=this.chooseFormat(t);if(i)return i===n?this.formatNextNationalNumberDigits(e):this.formatNextNationalNumberDigits(t.getNationalDigits())}},{key:"narrowDownMatchingFormats",value:function(e){var t=this,n=e.nationalSignificantNumber,i=e.nationalPrefix,r=e.international,s=n,a=s.length-3;a<0&&(a=0),this.matchingFormats=this.matchingFormats.filter(function(e){return t.formatSuits(e,r,i)&&t.formatMatches(e,s,a)}),this.chosenFormat&&-1===this.matchingFormats.indexOf(this.chosenFormat)&&this.resetFormat()}},{key:"formatSuits",value:function(e,t,n){return!(n&&!e.usesNationalPrefix()&&!e.nationalPrefixIsOptionalWhenFormattingInNationalFormat())&&!(!t&&!n&&e.nationalPrefixIsMandatoryWhenFormattingInNationalFormat())}},{key:"formatMatches",value:function(e,t,n){var i=e.leadingDigitsPatterns().length;if(0===i)return!0;n=Math.min(n,i-1);var r=e.leadingDigitsPatterns()[n];if(t.length<3)try{return void 0!==new rP(r).match(t,{allowOverflow:!0})}catch(s){return console.error(s),!0}return new RegExp("^(".concat(r,")")).test(t)}},{key:"getFormatFormat",value:function(e,t){return t?e.internationalFormat():e.format()}},{key:"chooseFormat",value:function(e){for(var t,n=this,i=function(){var i=t.value;return n.chosenFormat===i?0:gP.test(n.getFormatFormat(i,e.international))?n.createTemplateForFormat(i,e)?(n.chosenFormat=i,0):(n.matchingFormats=n.matchingFormats.filter(function(e){return e!==i}),1):1},r=oP(this.matchingFormats.slice());!(t=r()).done&&0!==i(););return this.chosenFormat||this.resetFormat(),this.chosenFormat}},{key:"createTemplateForFormat",value:function(e,t){if(!(e.pattern().indexOf("|")>=0)){var n=this.getTemplateForFormat(e,t);return n?(this.setNationalNumberTemplate(n,t),!0):void 0}}},{key:"getSeparatorAfterNationalPrefix",value:function(e){return this.isNANP||e&&e.nationalPrefixFormattingRule()&&hP.test(e.nationalPrefixFormattingRule())?" ":""}},{key:"getInternationalPrefixBeforeCountryCallingCode",value:function(e,t){var n=e.IDDPrefix,i=e.missingPlus;return n?t&&!1===t.spacing?n:n+" ":i?"":"+"}},{key:"getTemplate",value:function(e){if(this.template){for(var t=-1,n=0,i=e.international?this.getInternationalPrefixBeforeCountryCallingCode(e,{spacing:!1}):"";n<i.length+e.getDigitsWithoutInternationalPrefix().length;)t=this.template.indexOf(RM,t+1),n++;return zM(this.template,t+1)}}},{key:"setNationalNumberTemplate",value:function(e,t){this.nationalNumberTemplate=e,this.populatedNationalNumberTemplate=e,this.populatedNationalNumberTemplatePosition=-1,t.international?this.template=this.getInternationalPrefixBeforeCountryCallingCode(t).replace(/[\d\+]/g,RM)+WM(RM,t.callingCode.length)+" "+e:this.template=e}},{key:"getTemplateForFormat",value:function(e,t){var n=t.nationalSignificantNumber,i=t.international,r=t.nationalPrefix,s=t.complexPrefixBeforeNationalSignificantNumber,a=e.pattern();a=a.replace(fP(),"\\d").replace(pP(),"\\d");var o=uP.match(a)[0];if(!(n.length>o.length)){var l=new RegExp("^"+a+"$"),c=n.replace(/\d/g,"9");l.test(c)&&(o=c);var d,u=this.getFormatFormat(e,i);if(this.shouldTryNationalPrefixFormattingRule(e,{international:i,nationalPrefix:r})){var h=u.replace(oO,e.nationalPrefixFormattingRule());if(IT(e.nationalPrefixFormattingRule())===(r||"")+IT("$1")&&(u=h,d=!0,r))for(var f=r.length;f>0;)u=u.replace(/\d/,RM),f--}var p=o.replace(new RegExp(a),u).replace(new RegExp("9","g"),RM);return d||(s?p=WM(RM,s.length)+" "+p:r&&(p=WM(RM,r.length)+this.getSeparatorAfterNationalPrefix(e)+p)),i&&(p=aO(p)),p}}},{key:"formatNextNationalNumberDigits",value:function(e){var t=function(e,t,n){for(var i,r=IM(n.split(""));!(i=r()).done;){var s=i.value;if(e.slice(t+1).search(BM)<0)return;t=e.search(BM),e=e.replace(BM,s)}return[e,t]}(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition,e);if(t)return this.populatedNationalNumberTemplate=t[0],this.populatedNationalNumberTemplatePosition=t[1],zM(this.populatedNationalNumberTemplate,this.populatedNationalNumberTemplatePosition+1);this.resetFormat()}},{key:"shouldTryNationalPrefixFormattingRule",value:function(e,t){var n=t.international,i=t.nationalPrefix;if(e.nationalPrefixFormattingRule()){var r=e.usesNationalPrefix();if(r&&i||!r&&!n)return!0}}}])}();function vP(e){return vP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vP(e)}function yP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bP(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function xP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,wP(i.key),i)}}function wP(e){var t=function(e,t){if("object"!=vP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=vP(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vP(t)?t:t+""}var SP=new RegExp("^"+("["+Kj+Yj+"]+")+"$","i"),CP="(?:[+\uff0b]["+Kj+Yj+"]*|["+Kj+Yj+"]+)",_P=new RegExp("[^"+Kj+Yj+"]+.*$"),kP=/[^\d\[\]]/,AP=function(){return function(e,t,n){return t&&xP(e.prototype,t),n&&xP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=t.defaultCountry,i=t.defaultCallingCode,r=t.metadata,s=t.onNationalSignificantNumberChange;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultCountry=n,this.defaultCallingCode=i,this.metadata=r,this.onNationalSignificantNumberChange=s},[{key:"input",value:function(e,t){var n,i=function(e){var t=function(e){var t=function(e){var t,n=e.search(CP);if(n<0)return;e=e.slice(n),"+"===e[0]&&(t=!0,e=e.slice(1));e=e.replace(_P,""),t&&(e="+"+e);return e}(e)||"";if("+"===t[0])return[t.slice(1),!0];return[t]}(e),n=yP(t,2),i=n[0],r=n[1];SP.test(i)||(i="");return[i,r]}(e),r=yP(i,2),s=r[0],a=r[1],o=IT(s);return a&&(t.digits||(t.startInternationalNumber(),o||(n=!0))),o&&this.inputDigits(o,t),{digits:o,justLeadingPlus:n}}},{key:"inputDigits",value:function(e,t){var n=t.digits,i=n.length<3&&n.length+e.length>=3;if(t.appendDigits(e),i&&this.extractIddPrefix(t),this.isWaitingForCountryCallingCode(t)){if(!this.extractCountryCallingCode(t))return}else t.appendNationalSignificantNumberDigits(e);t.international||this.hasExtractedNationalSignificantNumber||this.extractNationalSignificantNumber(t.getNationalDigits(),function(e){return t.update(e)})}},{key:"isWaitingForCountryCallingCode",value:function(e){var t=e.international,n=e.callingCode;return t&&!n}},{key:"extractCountryCallingCode",value:function(e){var t=sO("+"+e.getDigitsWithoutInternationalPrefix(),this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=t.countryCallingCode,i=t.number;if(n)return e.setCallingCode(n),e.update({nationalSignificantNumber:i}),!0}},{key:"reset",value:function(e){if(e){this.hasSelectedNumberingPlan=!0;var t=e._nationalPrefixForParsing();this.couldPossiblyExtractAnotherNationalSignificantNumber=t&&kP.test(t)}else this.hasSelectedNumberingPlan=void 0,this.couldPossiblyExtractAnotherNationalSignificantNumber=void 0}},{key:"extractNationalSignificantNumber",value:function(e,t){if(this.hasSelectedNumberingPlan){var n=nO(e,this.metadata),i=n.nationalPrefix,r=n.nationalNumber,s=n.carrierCode;if(r!==e)return this.onExtractedNationalNumber(i,s,r,e,t),!0}}},{key:"extractAnotherNationalSignificantNumber",value:function(e,t,n){if(!this.hasExtractedNationalSignificantNumber)return this.extractNationalSignificantNumber(e,n);if(this.couldPossiblyExtractAnotherNationalSignificantNumber){var i=nO(e,this.metadata),r=i.nationalPrefix,s=i.nationalNumber,a=i.carrierCode;if(s!==t)return this.onExtractedNationalNumber(r,a,s,e,n),!0}}},{key:"onExtractedNationalNumber",value:function(e,t,n,i,r){var s,a,o=i.lastIndexOf(n);if(o>=0&&o===i.length-n.length){a=!0;var l=i.slice(0,o);l!==e&&(s=l)}r({nationalPrefix:e,carrierCode:t,nationalSignificantNumber:n,nationalSignificantNumberMatchesInput:a,complexPrefixBeforeNationalSignificantNumber:s}),this.hasExtractedNationalSignificantNumber=!0,this.onNationalSignificantNumberChange()}},{key:"reExtractNationalSignificantNumber",value:function(e){return!!this.extractAnotherNationalSignificantNumber(e.getNationalDigits(),e.nationalSignificantNumber,function(t){return e.update(t)})||(this.extractIddPrefix(e)||this.fixMissingPlus(e)?(this.extractCallingCodeAndNationalSignificantNumber(e),!0):void 0)}},{key:"extractIddPrefix",value:function(e){var t=e.international,n=e.IDDPrefix,i=e.digits;e.nationalSignificantNumber;if(!t&&!n){var r=tO(i,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata);return void 0!==r&&r!==i?(e.update({IDDPrefix:i.slice(0,i.length-r.length)}),this.startInternationalNumber(e,{country:void 0,callingCode:void 0}),!0):void 0}}},{key:"fixMissingPlus",value:function(e){if(!e.international){var t=rO(e.digits,this.defaultCountry,this.defaultCallingCode,this.metadata.metadata),n=t.countryCallingCode;t.number;if(n)return e.update({missingPlus:!0}),this.startInternationalNumber(e,{country:e.country,callingCode:n}),!0}}},{key:"startInternationalNumber",value:function(e,t){var n=t.country,i=t.callingCode;e.startInternationalNumber(n,i),e.nationalSignificantNumber&&(e.resetNationalSignificantNumber(),this.onNationalSignificantNumberChange(),this.hasExtractedNationalSignificantNumber=void 0)}},{key:"extractCallingCodeAndNationalSignificantNumber",value:function(e){this.extractCountryCallingCode(e)&&this.extractNationalSignificantNumber(e.getNationalDigits(),function(t){return e.update(t)})}}])}();function EP(e){return EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(e)}function jP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return TP(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TP(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function OP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,MP(i.key),i)}}function MP(e){var t=function(e,t){if("object"!=EP(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=EP(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==EP(t)?t:t+""}var PP=function(){return function(e,t,n){return t&&OP(e.prototype,t),n&&OP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metadata=new pT(n);var i=jP(this.getCountryAndCallingCode(t),2),r=i[0],s=i[1];this.defaultCountry=r,this.defaultCallingCode=s,this.reset()},[{key:"getCountryAndCallingCode",value:function(e){var t,n;return e&&(zj(e)?(t=e.defaultCountry,n=e.defaultCallingCode):t=e),t&&!this.metadata.hasCountry(t)&&(t=void 0),[t,n]}},{key:"input",value:function(e){var t=this.parser.input(e,this.state),n=t.digits;if(t.justLeadingPlus)this.formattedOutput="+";else if(n){var i;if(this.determineTheCountryIfNeeded(),this.state.nationalSignificantNumber&&this.formatter.narrowDownMatchingFormats(this.state),this.metadata.hasSelectedNumberingPlan()&&(i=this.formatter.format(n,this.state)),void 0===i&&this.parser.reExtractNationalSignificantNumber(this.state)){this.determineTheCountryIfNeeded();var r=this.state.getNationalDigits();r&&(i=this.formatter.format(r,this.state))}this.formattedOutput=i?this.getFullNumber(i):this.getNonFormattedNumber()}return this.formattedOutput}},{key:"reset",value:function(){var e=this;return this.state=new LM({onCountryChange:function(t){e.country=t},onCallingCodeChange:function(t,n){e.metadata.selectNumberingPlan(n,t),e.formatter.reset(e.metadata.numberingPlan,e.state),e.parser.reset(e.metadata.numberingPlan)}}),this.formatter=new mP({state:this.state,metadata:this.metadata}),this.parser=new AP({defaultCountry:this.defaultCountry,defaultCallingCode:this.defaultCallingCode,metadata:this.metadata,state:this.state,onNationalSignificantNumberChange:function(){e.determineTheCountryIfNeeded(),e.formatter.reset(e.metadata.numberingPlan,e.state)}}),this.state.reset({country:this.defaultCountry,callingCode:this.defaultCallingCode}),this.formattedOutput="",this}},{key:"isInternational",value:function(){return this.state.international}},{key:"getCallingCode",value:function(){if(this.isInternational())return this.state.callingCode}},{key:"getCountryCallingCode",value:function(){return this.getCallingCode()}},{key:"getCountry",value:function(){if(this.state.digits)return this._getCountry()}},{key:"_getCountry",value:function(){var e=this.state.country;return e}},{key:"determineTheCountryIfNeeded",value:function(){this.state.country&&!this.isCountryCallingCodeAmbiguous()||this.determineTheCountry()}},{key:"getFullNumber",value:function(e){var t=this;if(this.isInternational()){var n=function(e){return t.formatter.getInternationalPrefixBeforeCountryCallingCode(t.state,{spacing:!!e})+e},i=this.state.callingCode;return n(i?e?"".concat(i," ").concat(e):i:"".concat(this.state.getDigitsWithoutInternationalPrefix()))}return e}},{key:"getNonFormattedNationalNumberWithPrefix",value:function(){var e=this.state,t=e.nationalSignificantNumber,n=e.complexPrefixBeforeNationalSignificantNumber,i=e.nationalPrefix,r=t,s=n||i;return s&&(r=s+r),r}},{key:"getNonFormattedNumber",value:function(){var e=this.state.nationalSignificantNumberMatchesInput;return this.getFullNumber(e?this.getNonFormattedNationalNumberWithPrefix():this.state.getNationalDigits())}},{key:"getNonFormattedTemplate",value:function(){var e=this.getNonFormattedNumber();if(e)return e.replace(/[\+\d]/g,RM)}},{key:"isCountryCallingCodeAmbiguous",value:function(){var e=this.state.callingCode,t=this.metadata.getCountryCodesForCallingCode(e);return t&&t.length>1}},{key:"determineTheCountry",value:function(){this.state.setCountry(PO(this.isInternational()?this.state.callingCode:this.defaultCallingCode,{nationalNumber:this.state.nationalSignificantNumber,defaultCountry:this.defaultCountry,metadata:this.metadata}))}},{key:"getNumberValue",value:function(){var e=this.state,t=e.digits,n=e.callingCode,i=e.country,r=e.nationalSignificantNumber;if(t)return this.isInternational()?n?"+"+n+r:"+"+t:i||n?"+"+(i?this.metadata.countryCallingCode():n)+r:void 0}},{key:"getNumber",value:function(){var e=this.state,t=e.nationalSignificantNumber,n=e.carrierCode,i=e.callingCode,r=this._getCountry();if(t&&(r||i)){if(r&&r===this.defaultCountry){var s=new pT(this.metadata.metadata);s.selectNumberingPlan(r);var a=s.numberingPlan.callingCode(),o=this.metadata.getCountryCodesForCallingCode(a);if(o.length>1){var l=MO(t,{countries:o,defaultCountry:this.defaultCountry,metadata:this.metadata.metadata});l&&(r=l)}}var c=new AO(r||i,t,this.metadata.metadata);return n&&(c.carrierCode=n),c}}},{key:"isPossible",value:function(){var e=this.getNumber();return!!e&&e.isPossible()}},{key:"isValid",value:function(){var e=this.getNumber();return!!e&&e.isValid()}},{key:"getNationalNumber",value:function(){return this.state.nationalSignificantNumber}},{key:"getChars",value:function(){return(this.state.international?"+":"")+this.state.digits}},{key:"getTemplate",value:function(){return this.formatter.getTemplate(this.state)||this.getNonFormattedTemplate()||""}}])}();function NP(e){var t=e.inputFormat,n=e.country,i=e.metadata;return"NATIONAL_PART_OF_INTERNATIONAL"===t?"+".concat(ST(n,i)):""}function $P(e,t){return t&&" "===(e=e.slice(t.length))[0]&&(e=e.slice(1)),e}function DP(e,t,n){if(!n||!n.ignoreRest){return WT(e,t,function(e){if(n&&"end"===e)n.ignoreRest=!0})}}function LP(e){var n=e.onKeyDown,i=e.inputFormat;return(0,t.useCallback)(function(e){e.keyCode===IP&&"INTERNATIONAL"===i&&e.target instanceof HTMLInputElement&&e.target.selectionStart===FP.length?e.preventDefault():n&&n(e)},[n,i])}var IP=8,FP="+",RP=["onKeyDown","country","inputFormat","metadata","international","withCountryCallingCode"];function BP(){return BP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},BP.apply(this,arguments)}function WP(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const zP=function(e){function n(n,i){var r=n.onKeyDown,s=n.country,a=n.inputFormat,o=n.metadata,l=void 0===o?e:o,c=(n.international,n.withCountryCallingCode,WP(n,RP)),d=(0,t.useCallback)(function(e){var t=new PP(s,l),n=NP({inputFormat:a,country:s,metadata:l}),i=t.input(n+e),r=t.getTemplate();return n&&(i=$P(i,n),r&&(r=$P(r,n))),{text:i,template:r}},[s,l]),u=LP({onKeyDown:r,inputFormat:a});return t.createElement(PM,BP({},c,{ref:i,parse:DP,format:d,onKeyDown:u}))}return(n=t.forwardRef(n)).propTypes={value:iM.string.isRequired,onChange:iM.func.isRequired,onKeyDown:iM.func,country:iM.string,inputFormat:iM.oneOf(["INTERNATIONAL","NATIONAL_PART_OF_INTERNATIONAL","NATIONAL","INTERNATIONAL_OR_NATIONAL"]).isRequired,metadata:iM.object},n}();var HP=["value","onChange","onKeyDown","country","inputFormat","metadata","inputComponent","international","withCountryCallingCode"];function UP(){return UP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},UP.apply(this,arguments)}function GP(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const VP=function(e){function n(n,i){var r=n.value,s=n.onChange,a=n.onKeyDown,o=n.country,l=n.inputFormat,c=n.metadata,d=void 0===c?e:c,u=n.inputComponent,h=void 0===u?"input":u,f=(n.international,n.withCountryCallingCode,GP(n,HP)),p=NP({inputFormat:l,country:o,metadata:d}),g=(0,t.useCallback)(function(e){var t=BT(e.target.value);t===r&&(0===qP(p,t,o,d).indexOf(e.target.value)&&(t=t.slice(0,-1)));s(t)},[p,r,s,o,d]),m=LP({onKeyDown:a,inputFormat:l});return t.createElement(h,UP({},f,{ref:i,value:qP(p,r,o,d),onChange:g,onKeyDown:m}))}return(n=t.forwardRef(n)).propTypes={value:iM.string.isRequired,onChange:iM.func.isRequired,onKeyDown:iM.func,country:iM.string,inputFormat:iM.oneOf(["INTERNATIONAL","NATIONAL_PART_OF_INTERNATIONAL","NATIONAL","INTERNATIONAL_OR_NATIONAL"]).isRequired,metadata:iM.object,inputComponent:iM.elementType},n}();function qP(e,t,n,i){return $P(function(e,t,n){return n||(n=t,t=void 0),new PP(t,n).input(e)}(e+t,n,i),e)}function XP(e){return String.fromCodePoint(127397+e.toUpperCase().charCodeAt(0))}var YP=["value","onChange","options","disabled","readOnly"],KP=["value","options","className","iconComponent","getIconAspectRatio","arrowComponent","unicodeFlags"];function QP(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return JP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JP(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function JP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ZP(){return ZP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ZP.apply(this,arguments)}function eN(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tN(e){var n=e.value,i=e.onChange,r=e.options,s=e.disabled,a=e.readOnly,o=eN(e,YP),l=(0,t.useCallback)(function(e){var t=e.target.value;i("ZZ"===t?void 0:t)},[i]);(0,t.useMemo)(function(){return sN(r,n)},[r,n]);return t.createElement("select",ZP({},o,{disabled:s||a,readOnly:a,value:n||"ZZ",onChange:l}),r.map(function(e){var n=e.value,i=e.label,r=e.divider;return t.createElement("option",{key:r?"|":n||"ZZ",value:r?"|":n||"ZZ",disabled:!!r,style:r?nN:void 0},i)}))}tN.propTypes={value:iM.string,onChange:iM.func.isRequired,options:iM.arrayOf(iM.shape({value:iM.string,label:iM.string,divider:iM.bool})).isRequired,disabled:iM.bool,readOnly:iM.bool};var nN={fontSize:"1px",backgroundColor:"currentColor",color:"inherit"};function iN(e){var n,i=e.value,r=e.options,s=e.className,a=e.iconComponent,o=(e.getIconAspectRatio,e.arrowComponent),l=void 0===o?rN:o,c=e.unicodeFlags,d=eN(e,KP),u=(0,t.useMemo)(function(){return sN(r,i)},[r,i]);return t.createElement("div",{className:"PhoneInputCountry"},t.createElement(tN,ZP({},d,{value:i,options:r,className:aM("PhoneInputCountrySelect",s)})),u&&(c&&i?t.createElement("div",{className:"PhoneInputCountryIconUnicode"},XP((n=i)[0])+XP(n[1])):t.createElement(a,{"aria-hidden":!0,country:i,label:u.label,aspectRatio:c?1:void 0})),t.createElement(l,null))}function rN(){return t.createElement("div",{className:"PhoneInputCountrySelectArrow"})}function sN(e,t){for(var n,i=QP(e);!(n=i()).done;){var r=n.value;if(!r.divider&&aN(r.value,t))return r}}function aN(e,t){return void 0===e||null===e?void 0===t||null===t:e===t}iN.propTypes={iconComponent:iM.elementType,arrowComponent:iM.elementType,unicodeFlags:iM.bool};var oN=["country","countryName","flags","flagUrl"];function lN(){return lN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lN.apply(this,arguments)}function cN(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dN(e){var n=e.country,i=e.countryName,r=e.flags,s=e.flagUrl,a=cN(e,oN);return r&&r[n]?r[n]({title:i}):t.createElement("img",lN({},a,{alt:i,role:i?void 0:"presentation",src:s.replace("{XX}",n).replace("{xx}",n.toLowerCase())}))}dN.propTypes={country:iM.string.isRequired,countryName:iM.string.isRequired,flags:iM.objectOf(iM.elementType),flagUrl:iM.string.isRequired};var uN=["aspectRatio"],hN=["title"],fN=["title"];function pN(){return pN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pN.apply(this,arguments)}function gN(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mN(e){var n=e.aspectRatio,i=gN(e,uN);return 1===n?t.createElement(yN,i):t.createElement(vN,i)}function vN(e){var n=e.title,i=gN(e,hN);return t.createElement("svg",pN({},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 75 50"}),t.createElement("title",null,n),t.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeMiterlimit:"10"},t.createElement("path",{strokeLinecap:"round",d:"M47.2,36.1C48.1,36,49,36,50,36c7.4,0,14,1.7,18.5,4.3"}),t.createElement("path",{d:"M68.6,9.6C64.2,12.3,57.5,14,50,14c-7.4,0-14-1.7-18.5-4.3"}),t.createElement("line",{x1:"26",y1:"25",x2:"74",y2:"25"}),t.createElement("line",{x1:"50",y1:"1",x2:"50",y2:"49"}),t.createElement("path",{strokeLinecap:"round",d:"M46.3,48.7c1.2,0.2,2.5,0.3,3.7,0.3c13.3,0,24-10.7,24-24S63.3,1,50,1S26,11.7,26,25c0,2,0.3,3.9,0.7,5.8"}),t.createElement("path",{strokeLinecap:"round",d:"M46.8,48.2c1,0.6,2.1,0.8,3.2,0.8c6.6,0,12-10.7,12-24S56.6,1,50,1S38,11.7,38,25c0,1.4,0.1,2.7,0.2,4c0,0.1,0,0.2,0,0.2"})),t.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"none",fill:"currentColor",d:"M12.4,17.9c2.9-2.9,5.4-4.8,0.3-11.2S4.1,5.2,1.3,8.1C-2,11.4,1.1,23.5,13.1,35.6s24.3,15.2,27.5,11.9c2.8-2.8,7.8-6.3,1.4-11.5s-8.3-2.6-11.2,0.3c-2,2-7.2-2.2-11.7-6.7S10.4,19.9,12.4,17.9z"}))}function yN(e){var n=e.title,i=gN(e,fN);return t.createElement("svg",pN({},i,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"}),t.createElement("title",null,n),t.createElement("g",{className:"PhoneInputInternationalIconGlobe",stroke:"currentColor",fill:"none",strokeWidth:"2",strokeLinecap:"round"},t.createElement("path",{d:"M8.45,13A21.44,21.44,0,1,1,37.08,41.56"}),t.createElement("path",{d:"M19.36,35.47a36.9,36.9,0,0,1-2.28-13.24C17.08,10.39,21.88.85,27.8.85s10.72,9.54,10.72,21.38c0,6.48-1.44,12.28-3.71,16.21"}),t.createElement("path",{d:"M17.41,33.4A39,39,0,0,1,27.8,32.06c6.62,0,12.55,1.5,16.48,3.86"}),t.createElement("path",{d:"M44.29,8.53c-3.93,2.37-9.86,3.88-16.49,3.88S15.25,10.9,11.31,8.54"}),t.createElement("line",{x1:"27.8",y1:"0.85",x2:"27.8",y2:"34.61"}),t.createElement("line",{x1:"15.2",y1:"22.23",x2:"49.15",y2:"22.23"})),t.createElement("path",{className:"PhoneInputInternationalIconPhone",stroke:"transparent",fill:"currentColor",d:"M9.42,26.64c2.22-2.22,4.15-3.59.22-8.49S3.08,17,.93,19.17c-2.49,2.48-.13,11.74,9,20.89s18.41,11.5,20.89,9c2.15-2.15,5.91-4.77,1-8.71s-6.27-2-8.49.22c-1.55,1.55-5.48-1.69-8.86-5.08S7.87,28.19,9.42,26.64Z"}))}function bN(e){(function(e){if(e.length<2)return!1;if("+"!==e[0])return!1;for(var t=1;t<e.length;){var n=e.charCodeAt(t);if(!(n>=48&&n<=57))return!1;t++}return!0})(e)||console.error("[react-phone-number-input] Expected the initial `value` to be a E.164 phone number. Got",e)}function xN(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return wN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wN(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function wN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function SN(e,t){return!!CT(e,t)||(console.error("Country not found: ".concat(e)),!1)}function CN(e,t){return e&&0===(e=e.filter(function(e){return SN(e,t)})).length&&(e=void 0),e}function _N(e){return new pT(e).getCountries()}mN.propTypes={title:iM.string.isRequired,aspectRatio:iM.number},vN.propTypes={title:iM.string.isRequired},yN.propTypes={title:iM.string.isRequired};var kN=["country","label","aspectRatio"];function AN(){return AN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},AN.apply(this,arguments)}function EN(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jN(e){var n=e.flags,i=e.flagUrl,r=e.flagComponent,s=e.internationalIcon;function a(e){var a=e.country,o=e.label,l=e.aspectRatio,c=EN(e,kN),d=s===mN?l:void 0;return t.createElement("div",AN({},c,{className:aM("PhoneInputCountryIcon",{"PhoneInputCountryIcon--square":1===d,"PhoneInputCountryIcon--border":a})}),a?t.createElement(r,{country:a,countryName:o,flags:n,flagUrl:i,className:"PhoneInputCountryIconImg"}):t.createElement(s,{title:o,aspectRatio:d,className:"PhoneInputCountryIconImg"}))}return a.propTypes={country:iM.string,label:iM.string.isRequired,aspectRatio:iM.number},a}jN({flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",flagComponent:dN,internationalIcon:mN});function TN(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ON(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ON(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ON(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function MN(e,t){for(var n,i=TN(e);!(n=i()).done;){var r=n.value;r&&PN(r,t)}}function PN(e,t){"function"===typeof e?e(t):e.current=t}function NN(e,t){return"+"+ST(e,t)}function $N(e,t){return function(){var e=Xj(arguments);return KO(e.text,e.options,e.metadata)}(e||"",t)}function DN(e,t){var n=t.prevCountry,i=t.newCountry,r=t.metadata,s=t.useNationalFormat;if(n===i)return e;if(!e)return s?"":i?NN(i,r):"";if(i){if("+"===e[0]){if(s)return 0===e.indexOf("+"+ST(i,r))?function(e,t,n){if(t){var i="+"+ST(t,n);if(e.length<i.length){if(0===i.indexOf(e))return""}else if(0===e.indexOf(i))return e.slice(i.length)}for(var r=0,s=Object.keys(n.country_calling_codes);r<s.length;r++){var a=s[r];if(1===e.indexOf(a))return e.slice(1+a.length)}return""}(e,i,r):"";if(n){var a=NN(i,r);return 0===e.indexOf(a)?e:a}var o=NN(i,r);return 0===e.indexOf(o)?e:o}}else if("+"!==e[0])return LN(e,n,r)||"";return e}function LN(e,t,n){if(e){if("+"===e[0]){if("+"===e)return;var i=new PP(t,n);return i.input(e),i.getNumberValue()}if(t){var r=WN(e,t,n);return"+".concat(ST(t,n)).concat(r||"")}}}function IN(e,t,n){var i=WN(e,t,n);if(i){var r=i.length-function(e,t){return t=new pT(t),t.selectNumberingPlan(e),t.numberingPlan.possibleLengths()[t.numberingPlan.possibleLengths().length-1]}(t,n);if(r>0)return e.slice(0,e.length-r)}return e}function FN(e,t){var n=t.country,i=t.countries,r=t.defaultCountry,s=t.latestCountrySelectedByUser,a=t.required,o=t.metadata;if("+"===e)return n;var l=function(e,t){var n=new PP(null,t);return n.input(e),n.getCountry()}(e,o);if(l)return!i||i.indexOf(l)>=0?l:void 0;if(n)if(zN(e,n,o)){if(s&&zN(e,s,o))return s;if(r&&zN(e,r,o))return r;if(!a)return}else if(!a)return;return n}function RN(e,t,n){if(0===e.indexOf(NN(t,n))){var i=new PP(t,n);i.input(e);var r=i.getNumber();return r?r.formatNational().replace(/\D/g,""):""}return e.replace(/\D/g,"")}function BN(e,t,n){return String.prototype.localeCompare?e.localeCompare(t,n):e<t?-1:e>t?1:0}function WN(e,t,n){var i=new PP(t,n);i.input(e);var r=i.getNumber();return r&&r.nationalNumber}function zN(e,t,n){for(var i=NN(t,n),r=0;r<e.length&&r<i.length;){if(e[r]!==i[r])return!1;r++}return!0}function HN(e){var t=e.value,n=e.phoneNumber,i=e.defaultCountry,r=e.international,s=e.useNationalFormat,a=e.metadata;return(!1===r||s)&&n&&n.country?function(e){return e.formatNational().replace(/\D/g,"")}(n):!t&&r&&i?NN(i,a):t}function UN(e){return UN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UN(e)}function GN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function VN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GN(Object(n),!0).forEach(function(t){qN(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qN(e,t,n){return t=function(e){var t=function(e,t){if("object"!=UN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=UN(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==UN(t)?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XN(e,t){return null===e&&(e=void 0),null===t&&(t=void 0),e===t}var YN=["name","disabled","readOnly","autoComplete","style","className","inputRef","inputComponent","numberInputProps","smartCaret","countrySelectComponent","countrySelectProps","containerComponent","containerComponentProps","defaultCountry","countries","countryOptionsOrder","labels","flags","flagComponent","flagUrl","addInternationalOption","internationalIcon","displayInitialValueAsLocalNumber","initialValueFormat","onCountryChange","limitMaxLength","countryCallingCodeEditable","focusInputOnCountrySelection","reset","metadata","international","locales"];function KN(e){return KN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KN(e)}function QN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function JN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QN(Object(n),!0).forEach(function(t){a$(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ZN(){return ZN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ZN.apply(this,arguments)}function e$(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function t$(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o$(i.key),i)}}function n$(e,t,n){return t=r$(t),function(e,t){if(t&&("object"===KN(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,i$()?Reflect.construct(t,n||[],r$(e).constructor):t.apply(e,n))}function i$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(i$=function(){return!!e})()}function r$(e){return r$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r$(e)}function s$(e,t){return s$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s$(e,t)}function a$(e,t,n){return(t=o$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o$(e){var t=function(e,t){if("object"!=KN(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=KN(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KN(t)?t:t+""}var l$=function(e){function n(e){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),a$(i=n$(this,n,[e]),"setInputRef",function(e){MN([i.props.inputRef,i.inputRef],e)}),a$(i,"isCountrySupportedWithError",function(e){return SN(e,i.props.metadata)}),a$(i,"onCountryChange",function(e){var t=i.props,n=t.international,r=t.metadata,s=t.onChange,a=t.focusInputOnCountrySelection,o=i.state,l=DN(o.phoneDigits,{prevCountry:o.country,newCountry:e,metadata:r,useNationalFormat:!n}),c=LN(l,e,r);a&&i.inputRef.current.focus(),i.setState({country:e,latestCountrySelectedByUser:e,hasUserSelectedACountry:!0,phoneDigits:l,value:c},function(){s(c)})}),a$(i,"onChange",function(e){var t=i.props,n=t.defaultCountry,r=t.onChange,s=t.addInternationalOption,a=t.international,o=t.limitMaxLength,l=t.countryCallingCodeEditable,c=t.metadata,d=i.state,u=d.countries,h=d.phoneDigits,f=d.country,p=d.latestCountrySelectedByUser,g=function(e,t){var n,i=t.prevPhoneDigits,r=t.country,s=t.defaultCountry,a=t.latestCountrySelectedByUser,o=t.countryRequired,l=t.getAnyCountry,c=t.countries,d=t.international,u=t.limitMaxLength,h=t.countryCallingCodeEditable,f=t.metadata;if(d&&!1===h&&r){var p,g=NN(r,f);if(0!==e.indexOf(g))return e&&"+"!==e[0]?p=LN(e=g+e,r,f):e=g,{phoneDigits:e,value:p,country:r}}return!1===d&&r&&e&&"+"===e[0]&&(e=RN(e,r,f)),e&&r&&u&&(e=IN(e,r,f)),!e||"+"===e[0]||r&&!d||(e="+"+e),!e&&i&&"+"===i[0]&&(r=d?void 0:s),"+"===e&&i&&"+"===i[0]&&i.length>1&&(r=void 0),e&&(n="+"===e[0]&&("+"===e||r&&0===NN(r,f).indexOf(e))?void 0:LN(e,r,f)),n&&(r=FN(n,{country:r,countries:c,defaultCountry:s,latestCountrySelectedByUser:a,required:!1,metadata:f}),!1===d&&r&&e&&"+"===e[0]&&(n=LN(e=RN(e,r,f),r,f))),!r&&o&&(r=s||l()),{phoneDigits:e,country:r,value:n}}(e,{prevPhoneDigits:h,country:f,countryRequired:!s,defaultCountry:n,latestCountrySelectedByUser:p,getAnyCountry:function(){return i.getFirstSupportedCountry({countries:u})},countries:u,international:a,limitMaxLength:o,countryCallingCodeEditable:l,metadata:c}),m=g.phoneDigits,v=g.country,y=g.value,b={phoneDigits:m,value:y,country:v};p&&y&&!zN(y,p,c)&&(b.latestCountrySelectedByUser=void 0),!1===l&&(y||m!==i.state.phoneDigits||(b.forceRerender={})),i.setState(b,function(){return r(y)})}),a$(i,"_onFocus",function(){return i.setState({isFocused:!0})}),a$(i,"_onBlur",function(){return i.setState({isFocused:!1})}),a$(i,"onFocus",function(e){i._onFocus();var t=i.props.onFocus;t&&t(e)}),a$(i,"onBlur",function(e){var t=i.props.onBlur;i._onBlur(),t&&t(e)}),a$(i,"onCountryFocus",function(e){i._onFocus();var t=i.props.countrySelectProps;if(t){var n=t.onFocus;n&&n(e)}}),a$(i,"onCountryBlur",function(e){i._onBlur();var t=i.props.countrySelectProps;if(t){var n=t.onBlur;n&&n(e)}}),i.inputRef=t.createRef();var r=i.props,s=r.value,a=(r.labels,r.international),o=r.addInternationalOption,l=r.displayInitialValueAsLocalNumber,c=r.initialValueFormat,d=r.metadata,u=i.props,h=u.defaultCountry,f=u.countries;h&&(i.isCountrySupportedWithError(h)||(h=void 0)),s&&bN(s),f=CN(f,d);var p=$N(s,d);i.CountryIcon=jN(i.props);var g=function(e){var t,n=e.value,i=e.phoneNumber,r=e.defaultCountry,s=e.getAnyCountry,a=e.countries,o=e.required,l=e.metadata;return i&&i.country?t=i.country:r&&(n&&!zN(n,r,l)||(t=r)),a&&a.indexOf(t)<0&&(t=void 0),!t&&o&&a&&a.length>0&&(t=s()),t}({value:s,phoneNumber:p,defaultCountry:h,required:!o,countries:f||_N(d),getAnyCountry:function(){return i.getFirstSupportedCountry({countries:f})},metadata:d});return i.state={props:i.props,country:g,countries:f,phoneDigits:HN({value:s,phoneNumber:p,defaultCountry:h,international:a,useNationalFormat:l||"national"===c,metadata:d}),value:s},i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s$(e,t)}(n,e),i=n,r=[{key:"componentDidMount",value:function(){var e=this.props.onCountryChange,t=this.props.defaultCountry,n=this.state.country;e&&(t&&(this.isCountrySupportedWithError(t)||(t=void 0)),n!==t&&e(n))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.onCountryChange,i=this.state.country;n&&i!==t.country&&n(i)}},{key:"getCountrySelectOptions",value:function(e){var t=e.countries,n=this.props,i=n.international,r=n.countryCallingCodeEditable,s=n.countryOptionsOrder,a=n.addInternationalOption,o=n.labels,l=n.locales,c=n.metadata;return this.useMemoCountrySelectOptions(function(){return function(e,t){if(!t)return e;for(var n,i=[],r=[],s=i,a=function(){var t=n.value;if("|"===t)s.push({divider:!0});else if("..."===t||"\u2026"===t)s=r;else{var i;i="\ud83c\udf10"===t?void 0:t;var a=e.indexOf(e.filter(function(e){return e.value===i})[0]),o=e[a];e.splice(a,1),s.push(o)}},o=xN(t);!(n=o()).done;)a();return i.concat(e).concat(r)}(function(e){var t=e.countries,n=e.countryNames,i=e.addInternationalOption,r=e.compareStringsLocales,s=e.compareStrings;s||(s=BN);var a=t.map(function(e){return{value:e,label:n[e]||e}});return a.sort(function(e,t){return s(e.label,t.label,r)}),i&&a.unshift({label:n.ZZ}),a}({countries:t||_N(c),countryNames:o,addInternationalOption:(!i||!1!==r)&&a,compareStringsLocales:l}),function(e,t){if(e&&(e=e.filter(function(e){switch(e){case"\ud83c\udf10":case"|":case"...":case"\u2026":return!0;default:return SN(e,t)}})).length>0)return e}(s,c))},[t,s,a,o,c])}},{key:"useMemoCountrySelectOptions",value:function(e,t){return this.countrySelectOptionsMemoDependencies&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;){if(e[n]!==t[n])return!1;n++}return!0}(t,this.countrySelectOptionsMemoDependencies)||(this.countrySelectOptionsMemo=e(),this.countrySelectOptionsMemoDependencies=t),this.countrySelectOptionsMemo}},{key:"getFirstSupportedCountry",value:function(e){var t=e.countries;return this.getCountrySelectOptions({countries:t})[0].value}},{key:"render",value:function(){var e=this.props,n=e.name,i=e.disabled,r=e.readOnly,s=e.autoComplete,a=e.style,o=e.className,l=(e.inputRef,e.inputComponent),c=e.numberInputProps,d=e.smartCaret,u=e.countrySelectComponent,h=e.countrySelectProps,f=e.containerComponent,p=e.containerComponentProps,g=(e.defaultCountry,e.countries,e.countryOptionsOrder,e.labels),m=(e.flags,e.flagComponent,e.flagUrl,e.addInternationalOption,e.internationalIcon,e.displayInitialValueAsLocalNumber,e.initialValueFormat,e.onCountryChange,e.limitMaxLength,e.countryCallingCodeEditable,e.focusInputOnCountrySelection,e.reset,e.metadata),v=e.international,y=(e.locales,e$(e,YN)),b=this.state,x=b.country,w=b.countries,S=b.phoneDigits,C=b.isFocused,_=d?zP:VP,k=this.getCountrySelectOptions({countries:w});return t.createElement(f,ZN({style:a,className:aM(o,"PhoneInput",{"PhoneInput--focus":C,"PhoneInput--disabled":i,"PhoneInput--readOnly":r})},p),t.createElement(u,ZN({name:n?"".concat(n,"Country"):void 0,"aria-label":g.country},h,{value:x,options:k,onChange:this.onCountryChange,onFocus:this.onCountryFocus,onBlur:this.onCountryBlur,disabled:i||h&&h.disabled,readOnly:r||h&&h.readOnly,iconComponent:this.CountryIcon})),t.createElement(_,ZN({ref:this.setInputRef,type:"tel",autoComplete:s},c,y,{inputFormat:!0===v?"INTERNATIONAL":!1===v?"NATIONAL":"INTERNATIONAL_OR_NATIONAL",international:!!v||void 0,withCountryCallingCode:!!v||void 0,name:n,metadata:m,country:x,value:S||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,disabled:i,readOnly:r,inputComponent:l,className:aM("PhoneInputInput",c&&c.className,y.className)})))}}],s=[{key:"getDerivedStateFromProps",value:function(e,t){return JN({props:e},function(e,t,n){var i=e.metadata,r=e.countries,s=e.defaultCountry,a=e.value,o=e.reset,l=e.international,c=e.displayInitialValueAsLocalNumber,d=e.initialValueFormat,u=t.defaultCountry,h=t.value,f=t.reset,p=(n.country,n.value),g=n.hasUserSelectedACountry,m=n.latestCountrySelectedByUser,v=function(e){return HN(VN(VN({},e),{},{international:l,useNationalFormat:c||"national"===d,metadata:i}))};if(o!==f)return{phoneDigits:v({value:void 0,defaultCountry:s}),value:void 0,country:s,latestCountrySelectedByUser:void 0,hasUserSelectedACountry:void 0};if(s!==u){var y=!s||SN(s,i),b=!p||l&&p===v({value:void 0,defaultCountry:u});if(!g&&y&&!a&&b)return{country:s,phoneDigits:v({value:void 0,defaultCountry:s}),value:void 0}}if(!XN(a,h)&&!XN(a,p)){var x,w,S;if(a){a&&bN(a),x=$N(a,i);var C=CN(r,i);x&&x.country?(!C||C.indexOf(x.country)>=0)&&(w=x.country):(w=FN(a,{country:void 0,countries:C,metadata:i}))||s&&0===a.indexOf(NN(s,i))&&(w=s)}return a?m&&((w?m===w:zN(a,m,i))?w||(w=m):S={latestCountrySelectedByUser:void 0}):S={latestCountrySelectedByUser:void 0,hasUserSelectedACountry:void 0},VN(VN({},S),{},{phoneDigits:v({phoneNumber:x,value:a,defaultCountry:s}),value:a,country:a?w:s})}}(e,t.props,t))}}],r&&t$(i.prototype,r),s&&t$(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,s}(t.PureComponent),c$=t.forwardRef(function(e,n){return t.createElement(l$,ZN({},function(e){for(var t in e=JN({},e),d$)void 0===e[t]&&(e[t]=d$[t]);return e}(e),{inputRef:n}))});c$.propTypes={value:iM.string,onChange:iM.func.isRequired,onFocus:iM.func,onBlur:iM.func,disabled:iM.bool,readOnly:iM.bool,autoComplete:iM.string,initialValueFormat:iM.oneOf(["national"]),displayInitialValueAsLocalNumber:iM.bool,defaultCountry:iM.string,countries:iM.arrayOf(iM.string),labels:sM,locales:iM.oneOfType([iM.string,iM.arrayOf(iM.string)]),flagUrl:iM.string,flags:iM.objectOf(iM.elementType),flagComponent:iM.elementType,addInternationalOption:iM.bool,internationalIcon:iM.elementType,countryOptionsOrder:iM.arrayOf(iM.string),style:iM.object,className:iM.string,countrySelectComponent:iM.elementType,countrySelectProps:iM.object,inputComponent:iM.elementType,numberInputProps:iM.object,containerComponent:iM.elementType,containerComponentProps:iM.object,smartCaret:iM.bool,international:iM.bool,limitMaxLength:iM.bool,countryCallingCodeEditable:iM.bool,metadata:rM,onCountryChange:iM.func,focusInputOnCountrySelection:iM.bool};var d$={autoComplete:"tel",countrySelectComponent:iN,flagComponent:dN,flagUrl:"https://purecatamphetamine.github.io/country-flag-icons/3x2/{XX}.svg",internationalIcon:mN,inputComponent:"input",containerComponent:"div",reset:iM.any,smartCaret:!0,addInternationalOption:!0,countryCallingCodeEditable:!0,focusInputOnCountrySelection:!0};const u$=c$;var h$=["metadata","labels"];function f$(){return f$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f$.apply(this,arguments)}function p$(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g$(e){var n=t.forwardRef(function(n,i){var r=n.metadata,s=void 0===r?e:r,a=n.labels,o=void 0===a?nM:a,l=p$(n,h$);return t.createElement(u$,f$({},l,{ref:i,metadata:s,labels:o}))});return n.propTypes={metadata:rM,labels:sM},n}g$();function m$(e,t){var n=Array.prototype.slice.call(t);return n.push(Bj),e.apply(this,n)}const v$=g$(Bj);function y$(){return m$(tM,arguments)}const b$=()=>{const e=fe(),[n,i]=(0,t.useState)({username:"",firstName:"",lastName:"",email:"",parentEmail:"",password:"",confirmPassword:"",phoneNumber:"",parentPhoneNumber:"",grade:9}),[r,s]=(0,t.useState)(""),{showError:a}=DE(),{showSuccess:o}=DE(),[l,d]=(0,t.useState)(!1),[u,h]=(0,t.useState)({phone:"",parentPhone:""}),[f,p]=(0,t.useState)({password:!1,confirmPassword:!1}),g=e=>{const t="grade"===e.target.name?parseInt(e.target.value,10):e.target.value;i(c(c({},n),{},{[e.target.name]:t}))},m=e=>{p(t=>c(c({},t),{},{[e]:!t[e]}))};return(0,_t.jsx)("div",{className:"auth-container",children:(0,_t.jsxs)("div",{className:"auth-box",children:[(0,_t.jsx)("h2",{children:"Create Account"}),r&&(0,_t.jsx)("div",{className:"error-message",children:r}),(0,_t.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),s(""),n.password!==n.confirmPassword)return void s("Passwords do not match");if(u.phone)return void s("Please enter a valid student phone number");if(u.parentPhone)return void s("Please enter a valid parent phone number");const i=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(i.test(n.email)&&i.test(n.parentEmail)){d(!0);try{const t={userName:n.username,firstName:n.firstName,lastName:n.lastName,email:n.email,parentemail:n.parentEmail,password:n.password,cPassword:n.confirmPassword,phone:n.phone?n.phone.replace(/\D/g,""):"",parentPhone:n.parentPhone?n.parentPhone.replace(/\D/g,""):""},i=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/student/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await i.json();"Done "===r.Message||"Done"===r.Message?(alert("Registration successful! Please check your email and proceed to login."),e("/login")):"User with this email, username, or phone already exists."===r.message?s("Email, username, or phone number is already registered"):s(r.Message||"An unknown error occurred.")}catch(r){s(r.message||"An error occurred during registration."),console.error("Registration error:",r)}finally{d(!1)}}else s("Please enter valid email addresses")},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"username",children:"Username:"}),(0,_t.jsx)("input",{type:"text",id:"username",name:"username",value:n.username,onChange:g,required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"firstName",children:"First Name:"}),(0,_t.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:n.firstName,onChange:g,required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"lastName",children:"Last Name:"}),(0,_t.jsx)("input",{type:"text",id:"lastName",name:"lastName",value:n.lastName,onChange:g,required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"email",children:"Student Email:"}),(0,_t.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:g,required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"parentEmail",children:"Parent Email:"}),(0,_t.jsx)("input",{type:"email",id:"parentEmail",name:"parentEmail",value:n.parentEmail,onChange:g,required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"phoneNumber",children:"Student Phone *"}),(0,_t.jsx)(v$,{id:"phoneNumber",international:!0,defaultCountry:"AE",placeholder:"Enter phone number",value:n.phoneNumber,onChange:e=>{i(t=>c(c({},t),{},{phone:e})),e&&!y$(e)?h(e=>c(c({},e),{},{phone:"Please enter a valid phone number."})):h(e=>c(c({},e),{},{phone:""}))},required:!0}),u.phone&&(0,_t.jsx)("span",{className:"validation-error",children:u.phone})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"phoneNumber",children:"Parent Phone *"}),(0,_t.jsx)(v$,{id:"phoneNumber",international:!0,defaultCountry:"AE",placeholder:"Enter phone number",value:n.parentPhoneNumber,onChange:e=>{i(t=>c(c({},t),{},{parentPhone:e})),e&&!y$(e)?h(e=>c(c({},e),{},{parentPhone:"Please enter a valid parent phone number."})):h(e=>c(c({},e),{},{parentPhone:""}))},required:!0}),u.parentPhone&&(0,_t.jsx)("span",{className:"validation-error",children:u.parentPhone})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"grade",children:"Grade:"}),(0,_t.jsxs)("select",{id:"grade",name:"grade",value:n.grade,onChange:g,required:!0,className:"form-input",children:[(0,_t.jsx)("option",{value:9,children:"Grade 6"}),(0,_t.jsx)("option",{value:9,children:"Grade 7"}),(0,_t.jsx)("option",{value:9,children:"Grade 8"}),(0,_t.jsx)("option",{value:9,children:"Grade 9"}),(0,_t.jsx)("option",{value:10,children:"Grade 10"}),(0,_t.jsx)("option",{value:11,children:"Grade 11"}),(0,_t.jsx)("option",{value:12,children:"Grade 12"})]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"password",children:"Password:"}),(0,_t.jsxs)("div",{className:"password-input-container",children:[(0,_t.jsx)("input",{type:f.password?"text":"password",id:"password",name:"password",value:n.password,onChange:g,required:!0,className:"form-input"}),(0,_t.jsx)("span",{className:"password-toggle-icon",onClick:()=>m("password"),children:f.password?(0,_t.jsx)(Ij,{}):(0,_t.jsx)(Fj,{})})]})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password:"}),(0,_t.jsxs)("div",{className:"password-input-container",children:[(0,_t.jsx)("input",{type:f.confirmPassword?"text":"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:g,required:!0,className:"form-input"}),(0,_t.jsx)("span",{className:"password-toggle-icon",onClick:()=>m("confirmPassword"),children:f.confirmPassword?(0,_t.jsx)(Ij,{}):(0,_t.jsx)(Fj,{})})]})]}),(0,_t.jsx)("button",{type:"submit",className:"auth-button",disabled:l,children:l?(0,_t.jsx)("div",{className:"loading-spinner-small"}):"Sign Up"})]}),(0,_t.jsxs)("div",{className:"auth-footer",children:["Already have an account? ",(0,_t.jsx)(gt,{to:"/login",children:"Login"})]})]})})},x$=()=>{const[e,n]=(0,t.useState)(""),[i,r]=(0,t.useState)(""),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(!1),{login:u}=jt(),[h,f]=(0,t.useState)("");fe();return(0,_t.jsx)("div",{className:"auth-container",children:(0,_t.jsxs)("div",{className:"auth-box",children:[(0,_t.jsx)("h2",{children:"Welcome Back"}),h&&(0,_t.jsx)("div",{className:"error-message",children:h}),(0,_t.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),f(""),d(!0);try{const t=await fetch("".concat("https://backend-edu-site-5cnm.vercel.app","/student/teacher/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:i})}),n=await t.json();n.token?await u(n.token,s):(f(n.Message||"Login failed"),d(!1))}catch(n){f("An error occurred during login"),console.error("Login error:",n),d(!1)}},children:[(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Email:"}),(0,_t.jsx)("input",{type:"email",value:e,onChange:e=>n(e.target.value),required:!0,className:"form-input"})]}),(0,_t.jsxs)("div",{className:"form-group",children:[(0,_t.jsx)("label",{children:"Password:"}),(0,_t.jsxs)("div",{className:"password-input-container",children:[(0,_t.jsx)("input",{type:o?"text":"password",value:i,onChange:e=>r(e.target.value),required:!0,className:"form-input"}),(0,_t.jsx)("span",{className:"password-toggle-icon",onClick:()=>l(!o),children:o?(0,_t.jsx)(Ij,{}):(0,_t.jsx)(Fj,{})})]})]}),(0,_t.jsx)("div",{className:"form-group remember-me",children:(0,_t.jsxs)("label",{className:"checkbox-label",children:[(0,_t.jsx)("input",{type:"checkbox",checked:s,onChange:e=>a(e.target.checked)}),(0,_t.jsx)("span",{children:"Remember Me"})]})}),(0,_t.jsx)("button",{type:"submit",className:"auth-button",disabled:c,children:c?(0,_t.jsx)("div",{className:"loading-spinner-small"}):"Login"})]}),(0,_t.jsxs)("div",{className:"auth-footer",children:[(0,_t.jsxs)("div",{className:"signup-link",children:["Don't have an account? ",(0,_t.jsx)(gt,{to:"/signup",children:"Sign Up"})]}),(0,_t.jsx)("div",{className:"teacher-login",children:(0,_t.jsx)(gt,{to:"/login",className:"teacher-login-link",children:"Login as Student"})})]})]})})};Ut().setAppElement("#root");const w$=()=>(0,_t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"24px",color:"#333"},children:"Loading, please wait..."}),S$=()=>{const{user:e,isLoading:n}=jt(),i=fe(),r=de();return(0,t.useEffect)(()=>{if(n)return;e&&["/login","/admin/login","/redirecting"].includes(r.pathname)&&("main_teacher"===e.role||"assistant"===e.role?i("/dashboard/courses",{replace:!0}):e.userName&&i("/student/sessions",{replace:!0}))},[e,n,r.pathname,i]),n?(0,_t.jsx)(w$,{}):(0,_t.jsxs)(Pe,{children:[(0,_t.jsx)(Oe,{path:"/",element:(0,_t.jsx)(Zt,{})}),(0,_t.jsx)(Oe,{path:"/courses",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(rn,{})})}),(0,_t.jsx)(Oe,{path:"/testimonials",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(ln,{})})}),(0,_t.jsx)(Oe,{path:"/about",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(cn,{})})}),(0,_t.jsx)(Oe,{path:"/faqs",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(Xt,{})})}),(0,_t.jsx)(Oe,{path:"/contact",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(fn,{})})}),(0,_t.jsx)(Oe,{path:"/courses/:courseName",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(on,{})})}),(0,_t.jsx)(Oe,{path:"/demo",element:(0,_t.jsx)(pn,{})}),(0,_t.jsx)(Oe,{path:"/redirecting",element:(0,_t.jsx)(kj,{})}),(0,_t.jsx)(Oe,{path:"/admin/login",element:e?(0,_t.jsx)(kj,{}):(0,_t.jsx)(x$,{})}),(0,_t.jsx)(Oe,{path:"/login",element:e?(0,_t.jsx)(kj,{}):(0,_t.jsx)(Rj,{})}),(0,_t.jsx)(Oe,{path:"/signup",element:(0,_t.jsx)(b$,{})}),(0,_t.jsx)(Oe,{path:"/join/:inviteCode",element:(0,_t.jsx)(gn,{children:(0,_t.jsx)(hj,{})})}),(0,_t.jsx)(Oe,{path:"/dashboard/*",element:!e||"main_teacher"!==e.role&&"assistant"!==e.role?(0,_t.jsx)(Te,{to:"/admin/login",state:{from:r},replace:!0}):(0,_t.jsx)(zt,{children:(0,_t.jsx)(C$,{})})}),(0,_t.jsx)(Oe,{path:"/student/*",element:e&&e.userName?(0,_t.jsx)(Mt,{SidebarComponent:yn,children:(0,_t.jsx)(_$,{})}):(0,_t.jsx)(Te,{to:"/login",state:{from:r},replace:!0})}),(0,_t.jsx)(Oe,{path:"*",element:(0,_t.jsx)(Te,{to:"/",replace:!0})})]})},C$=()=>(0,_t.jsxs)(Pe,{children:[(0,_t.jsx)(Oe,{index:!0,element:(0,_t.jsx)(Te,{to:"courses",replace:!0})}),(0,_t.jsx)(Oe,{path:"courses",element:(0,_t.jsx)(VE,{})}),(0,_t.jsx)(Oe,{path:"courses/:courseId/*",element:(0,_t.jsx)(aj,{})}),(0,_t.jsx)(Oe,{path:"exams/:groupId/exam/:examId",element:(0,_t.jsx)(NE,{})}),(0,_t.jsx)(Oe,{path:"assignments/:groupId/assignment/:assignmentId",element:(0,_t.jsx)(ME,{})}),(0,_t.jsx)(Oe,{path:"assistants",element:(0,_t.jsx)(RE,{})}),(0,_t.jsx)(Oe,{path:"courses-requests-managment",element:(0,_t.jsx)(WE,{})}),(0,_t.jsx)(Oe,{path:"archived-courses",element:(0,_t.jsx)(cj,{})})]}),_$=()=>(0,_t.jsxs)(Pe,{children:[(0,_t.jsx)(Oe,{index:!0,element:(0,_t.jsx)(uj,{})}),(0,_t.jsx)(Oe,{path:"dashboard",element:(0,_t.jsx)(uj,{})}),(0,_t.jsx)(Oe,{path:"sessions",element:(0,_t.jsx)(_j,{})}),(0,_t.jsx)(Oe,{path:"assignments",element:(0,_t.jsx)(pj,{})}),(0,_t.jsx)(Oe,{path:"exams",element:(0,_t.jsx)(mj,{})}),(0,_t.jsx)(Oe,{path:"materials",element:(0,_t.jsx)(yj,{})}),(0,_t.jsx)(Oe,{path:"profile",element:(0,_t.jsx)(Sj,{})})]}),k$=()=>(0,_t.jsx)(IE,{children:(0,_t.jsx)(ft,{children:(0,_t.jsxs)(Et,{children:[(0,_t.jsx)(Ct,{}),(0,_t.jsx)(S$,{})]})})}),A$=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:a}=t;n(e),i(e),r(e),s(e),a(e)})};i.createRoot(document.getElementById("root")).render((0,_t.jsx)(t.StrictMode,{children:(0,_t.jsx)(k$,{})})),A$()})()})();
//# sourceMappingURL=main.d639a1aa.js.map